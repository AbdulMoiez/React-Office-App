{"version":3,"file":"static/js/241.1fadc1c1.chunk.js","mappings":"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","sources":["../node_modules/@fortawesome/react-fontawesome/index.es.js","../node_modules/lottie-react/compiled/hooks/useLottie.js","../node_modules/lottie-react/compiled/hooks/useLottieInteractivity.js","../node_modules/lottie-react/compiled/components/Lottie.js","../node_modules/lottie-web/build/player/esm/lottie.min.js","../node_modules/react-bootstrap/esm/CardImg.js","../node_modules/react-bootstrap/esm/CardHeaderContext.js","../node_modules/react-bootstrap/esm/CardHeader.js","../node_modules/react-bootstrap/esm/Card.js","../node_modules/react-bootstrap/esm/createChainedFunction.js","../node_modules/react-bootstrap/esm/Collapse.js","../node_modules/react-bootstrap/esm/Container.js","../node_modules/react-bootstrap/esm/InputGroupContext.js","../node_modules/react-bootstrap/esm/InputGroup.js","../node_modules/react-bootstrap/esm/Row.js"],"sourcesContent":["import { parse, icon } from '@fortawesome/fontawesome-svg-core';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\n// Get CSS class list from a props object\nfunction classList(props) {\n  var _classes;\n\n  var beat = props.beat,\n      fade = props.fade,\n      beatFade = props.beatFade,\n      bounce = props.bounce,\n      shake = props.shake,\n      flash = props.flash,\n      spin = props.spin,\n      spinPulse = props.spinPulse,\n      spinReverse = props.spinReverse,\n      pulse = props.pulse,\n      fixedWidth = props.fixedWidth,\n      inverse = props.inverse,\n      border = props.border,\n      listItem = props.listItem,\n      flip = props.flip,\n      size = props.size,\n      rotation = props.rotation,\n      pull = props.pull; // map of CSS class names to properties\n\n  var classes = (_classes = {\n    'fa-beat': beat,\n    'fa-fade': fade,\n    'fa-beat-fade': beatFade,\n    'fa-bounce': bounce,\n    'fa-shake': shake,\n    'fa-flash': flash,\n    'fa-spin': spin,\n    'fa-spin-reverse': spinReverse,\n    'fa-spin-pulse': spinPulse,\n    'fa-pulse': pulse,\n    'fa-fw': fixedWidth,\n    'fa-inverse': inverse,\n    'fa-border': border,\n    'fa-li': listItem,\n    'fa-flip': flip === true,\n    'fa-flip-horizontal': flip === 'horizontal' || flip === 'both',\n    'fa-flip-vertical': flip === 'vertical' || flip === 'both'\n  }, _defineProperty(_classes, \"fa-\".concat(size), typeof size !== 'undefined' && size !== null), _defineProperty(_classes, \"fa-rotate-\".concat(rotation), typeof rotation !== 'undefined' && rotation !== null && rotation !== 0), _defineProperty(_classes, \"fa-pull-\".concat(pull), typeof pull !== 'undefined' && pull !== null), _defineProperty(_classes, 'fa-swap-opacity', props.swapOpacity), _classes); // map over all the keys in the classes object\n  // return an array of the keys where the value for the key is not null\n\n  return Object.keys(classes).map(function (key) {\n    return classes[key] ? key : null;\n  }).filter(function (key) {\n    return key;\n  });\n}\n\n// Camelize taken from humps\n// humps is copyright © 2012+ Dom Christie\n// Released under the MIT license.\n// Performant way to determine if object coerces to a number\nfunction _isNumerical(obj) {\n  obj = obj - 0; // eslint-disable-next-line no-self-compare\n\n  return obj === obj;\n}\n\nfunction camelize(string) {\n  if (_isNumerical(string)) {\n    return string;\n  } // eslint-disable-next-line no-useless-escape\n\n\n  string = string.replace(/[\\-_\\s]+(.)?/g, function (match, chr) {\n    return chr ? chr.toUpperCase() : '';\n  }); // Ensure 1st char is always lowercase\n\n  return string.substr(0, 1).toLowerCase() + string.substr(1);\n}\n\nvar _excluded = [\"style\"];\n\nfunction capitalize(val) {\n  return val.charAt(0).toUpperCase() + val.slice(1);\n}\n\nfunction styleToObject(style) {\n  return style.split(';').map(function (s) {\n    return s.trim();\n  }).filter(function (s) {\n    return s;\n  }).reduce(function (acc, pair) {\n    var i = pair.indexOf(':');\n    var prop = camelize(pair.slice(0, i));\n    var value = pair.slice(i + 1).trim();\n    prop.startsWith('webkit') ? acc[capitalize(prop)] = value : acc[prop] = value;\n    return acc;\n  }, {});\n}\n\nfunction convert(createElement, element) {\n  var extraProps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  if (typeof element === 'string') {\n    return element;\n  }\n\n  var children = (element.children || []).map(function (child) {\n    return convert(createElement, child);\n  });\n  /* eslint-disable dot-notation */\n\n  var mixins = Object.keys(element.attributes || {}).reduce(function (acc, key) {\n    var val = element.attributes[key];\n\n    switch (key) {\n      case 'class':\n        acc.attrs['className'] = val;\n        delete element.attributes['class'];\n        break;\n\n      case 'style':\n        acc.attrs['style'] = styleToObject(val);\n        break;\n\n      default:\n        if (key.indexOf('aria-') === 0 || key.indexOf('data-') === 0) {\n          acc.attrs[key.toLowerCase()] = val;\n        } else {\n          acc.attrs[camelize(key)] = val;\n        }\n\n    }\n\n    return acc;\n  }, {\n    attrs: {}\n  });\n\n  var _extraProps$style = extraProps.style,\n      existingStyle = _extraProps$style === void 0 ? {} : _extraProps$style,\n      remaining = _objectWithoutProperties(extraProps, _excluded);\n\n  mixins.attrs['style'] = _objectSpread2(_objectSpread2({}, mixins.attrs['style']), existingStyle);\n  /* eslint-enable */\n\n  return createElement.apply(void 0, [element.tag, _objectSpread2(_objectSpread2({}, mixins.attrs), remaining)].concat(_toConsumableArray(children)));\n}\n\nvar PRODUCTION = false;\n\ntry {\n  PRODUCTION = process.env.NODE_ENV === 'production';\n} catch (e) {}\n\nfunction log () {\n  if (!PRODUCTION && console && typeof console.error === 'function') {\n    var _console;\n\n    (_console = console).error.apply(_console, arguments);\n  }\n}\n\nfunction normalizeIconArgs(icon) {\n  // this has everything that it needs to be rendered which means it was probably imported\n  // directly from an icon svg package\n  if (icon && _typeof(icon) === 'object' && icon.prefix && icon.iconName && icon.icon) {\n    return icon;\n  }\n\n  if (parse.icon) {\n    return parse.icon(icon);\n  } // if the icon is null, there's nothing to do\n\n\n  if (icon === null) {\n    return null;\n  } // if the icon is an object and has a prefix and an icon name, return it\n\n\n  if (icon && _typeof(icon) === 'object' && icon.prefix && icon.iconName) {\n    return icon;\n  } // if it's an array with length of two\n\n\n  if (Array.isArray(icon) && icon.length === 2) {\n    // use the first item as prefix, second as icon name\n    return {\n      prefix: icon[0],\n      iconName: icon[1]\n    };\n  } // if it's a string, use it as the icon name\n\n\n  if (typeof icon === 'string') {\n    return {\n      prefix: 'fas',\n      iconName: icon\n    };\n  }\n}\n\n// creates an object with a key of key\n// and a value of value\n// if certain conditions are met\nfunction objectWithKey(key, value) {\n  // if the value is a non-empty array\n  // or it's not an array but it is truthy\n  // then create the object with the key and the value\n  // if not, return an empty array\n  return Array.isArray(value) && value.length > 0 || !Array.isArray(value) && value ? _defineProperty({}, key, value) : {};\n}\n\nvar FontAwesomeIcon = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var iconArgs = props.icon,\n      maskArgs = props.mask,\n      symbol = props.symbol,\n      className = props.className,\n      title = props.title,\n      titleId = props.titleId,\n      maskId = props.maskId;\n  var iconLookup = normalizeIconArgs(iconArgs);\n  var classes = objectWithKey('classes', [].concat(_toConsumableArray(classList(props)), _toConsumableArray(className.split(' '))));\n  var transform = objectWithKey('transform', typeof props.transform === 'string' ? parse.transform(props.transform) : props.transform);\n  var mask = objectWithKey('mask', normalizeIconArgs(maskArgs));\n  var renderedIcon = icon(iconLookup, _objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2({}, classes), transform), mask), {}, {\n    symbol: symbol,\n    title: title,\n    titleId: titleId,\n    maskId: maskId\n  }));\n\n  if (!renderedIcon) {\n    log('Could not find icon', iconLookup);\n    return null;\n  }\n\n  var abstract = renderedIcon.abstract;\n  var extraProps = {\n    ref: ref\n  };\n  Object.keys(props).forEach(function (key) {\n    // eslint-disable-next-line no-prototype-builtins\n    if (!FontAwesomeIcon.defaultProps.hasOwnProperty(key)) {\n      extraProps[key] = props[key];\n    }\n  });\n  return convertCurry(abstract[0], extraProps);\n});\nFontAwesomeIcon.displayName = 'FontAwesomeIcon';\nFontAwesomeIcon.propTypes = {\n  beat: PropTypes.bool,\n  border: PropTypes.bool,\n  beatFade: PropTypes.bool,\n  bounce: PropTypes.bool,\n  className: PropTypes.string,\n  fade: PropTypes.bool,\n  flash: PropTypes.bool,\n  mask: PropTypes.oneOfType([PropTypes.object, PropTypes.array, PropTypes.string]),\n  maskId: PropTypes.string,\n  fixedWidth: PropTypes.bool,\n  inverse: PropTypes.bool,\n  flip: PropTypes.oneOf([true, false, 'horizontal', 'vertical', 'both']),\n  icon: PropTypes.oneOfType([PropTypes.object, PropTypes.array, PropTypes.string]),\n  listItem: PropTypes.bool,\n  pull: PropTypes.oneOf(['right', 'left']),\n  pulse: PropTypes.bool,\n  rotation: PropTypes.oneOf([0, 90, 180, 270]),\n  shake: PropTypes.bool,\n  size: PropTypes.oneOf(['2xs', 'xs', 'sm', 'lg', 'xl', '2xl', '1x', '2x', '3x', '4x', '5x', '6x', '7x', '8x', '9x', '10x']),\n  spin: PropTypes.bool,\n  spinPulse: PropTypes.bool,\n  spinReverse: PropTypes.bool,\n  symbol: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  title: PropTypes.string,\n  titleId: PropTypes.string,\n  transform: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  swapOpacity: PropTypes.bool\n};\nFontAwesomeIcon.defaultProps = {\n  border: false,\n  className: '',\n  mask: null,\n  maskId: null,\n  fixedWidth: false,\n  inverse: false,\n  flip: false,\n  icon: null,\n  listItem: false,\n  pull: null,\n  pulse: false,\n  rotation: null,\n  size: null,\n  spin: false,\n  spinPulse: false,\n  spinReverse: false,\n  beat: false,\n  fade: false,\n  beatFade: false,\n  bounce: false,\n  shake: false,\n  symbol: false,\n  title: '',\n  titleId: null,\n  transform: null,\n  swapOpacity: false\n};\nvar convertCurry = convert.bind(null, React.createElement);\n\nexport { FontAwesomeIcon };\n","import lottie from \"lottie-web\";\nimport React, { useEffect, useRef, useState, } from \"react\";\nconst useLottie = (props, style) => {\n    const { animationData, loop, autoplay, initialSegment, onComplete, onLoopComplete, onEnterFrame, onSegmentStart, onConfigReady, onDataReady, onDataFailed, onLoadedImages, onDOMLoaded, onDestroy, \n    // Specified here to take them out from the 'rest'\n    lottieRef, renderer, name, assetsPath, rendererSettings, \n    // TODO: find a better way to extract the html props to avoid specifying\n    //  all the props that we want to exclude (as you can see above)\n    ...rest } = props;\n    const [animationLoaded, setAnimationLoaded] = useState(false);\n    const animationInstanceRef = useRef();\n    const animationContainer = useRef(null);\n    /*\n          ======================================\n              INTERACTION METHODS\n          ======================================\n       */\n    /**\n     * Play\n     */\n    const play = () => {\n        var _a;\n        (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.play();\n    };\n    /**\n     * Stop\n     */\n    const stop = () => {\n        var _a;\n        (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.stop();\n    };\n    /**\n     * Pause\n     */\n    const pause = () => {\n        var _a;\n        (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.pause();\n    };\n    /**\n     * Set animation speed\n     * @param speed\n     */\n    const setSpeed = (speed) => {\n        var _a;\n        (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.setSpeed(speed);\n    };\n    /**\n     * Got to frame and play\n     * @param value\n     * @param isFrame\n     */\n    const goToAndPlay = (value, isFrame) => {\n        var _a;\n        (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.goToAndPlay(value, isFrame);\n    };\n    /**\n     * Got to frame and stop\n     * @param value\n     * @param isFrame\n     */\n    const goToAndStop = (value, isFrame) => {\n        var _a;\n        (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.goToAndStop(value, isFrame);\n    };\n    /**\n     * Set animation direction\n     * @param direction\n     */\n    const setDirection = (direction) => {\n        var _a;\n        (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.setDirection(direction);\n    };\n    /**\n     * Play animation segments\n     * @param segments\n     * @param forceFlag\n     */\n    const playSegments = (segments, forceFlag) => {\n        var _a;\n        (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.playSegments(segments, forceFlag);\n    };\n    /**\n     * Set sub frames\n     * @param useSubFrames\n     */\n    const setSubframe = (useSubFrames) => {\n        var _a;\n        (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.setSubframe(useSubFrames);\n    };\n    /**\n     * Get animation duration\n     * @param inFrames\n     */\n    const getDuration = (inFrames) => { var _a; return (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.getDuration(inFrames); };\n    /**\n     * Destroy animation\n     */\n    const destroy = () => {\n        var _a;\n        (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.destroy();\n        // Removing the reference to the animation so separate cleanups are skipped.\n        // Without it the internal `lottie-react` instance throws exceptions as it already cleared itself on destroy.\n        animationInstanceRef.current = undefined;\n    };\n    /*\n          ======================================\n              LOTTIE\n          ======================================\n       */\n    /**\n     * Load a new animation, and if it's the case, destroy the previous one\n     * @param {Object} forcedConfigs\n     */\n    const loadAnimation = (forcedConfigs = {}) => {\n        var _a;\n        // Return if the container ref is null\n        if (!animationContainer.current) {\n            return;\n        }\n        // Destroy any previous instance\n        (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.destroy();\n        // Build the animation configuration\n        const config = {\n            ...props,\n            ...forcedConfigs,\n            container: animationContainer.current,\n        };\n        // Save the animation instance\n        animationInstanceRef.current = lottie.loadAnimation(config);\n        setAnimationLoaded(!!animationInstanceRef.current);\n        // Return a function that will clean up\n        return () => {\n            var _a;\n            (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.destroy();\n            animationInstanceRef.current = undefined;\n        };\n    };\n    /**\n     * (Re)Initialize when animation data changed\n     */\n    useEffect(() => {\n        const onUnmount = loadAnimation();\n        // Clean up on unmount\n        return () => onUnmount === null || onUnmount === void 0 ? void 0 : onUnmount();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [animationData, loop]);\n    // Update the autoplay state\n    useEffect(() => {\n        if (!animationInstanceRef.current) {\n            return;\n        }\n        animationInstanceRef.current.autoplay = !!autoplay;\n    }, [autoplay]);\n    // Update the initial segment state\n    useEffect(() => {\n        if (!animationInstanceRef.current) {\n            return;\n        }\n        // When null should reset to default animation length\n        if (!initialSegment) {\n            animationInstanceRef.current.resetSegments(true);\n            return;\n        }\n        // If it's not a valid segment, do nothing\n        if (!Array.isArray(initialSegment) || !initialSegment.length) {\n            return;\n        }\n        // If the current position it's not in the new segment\n        // set the current position to start\n        if (animationInstanceRef.current.currentRawFrame < initialSegment[0] ||\n            animationInstanceRef.current.currentRawFrame > initialSegment[1]) {\n            animationInstanceRef.current.currentRawFrame = initialSegment[0];\n        }\n        // Update the segment\n        animationInstanceRef.current.setSegment(initialSegment[0], initialSegment[1]);\n    }, [initialSegment]);\n    /*\n          ======================================\n              EVENTS\n          ======================================\n       */\n    /**\n     * Reinitialize listener on change\n     */\n    useEffect(() => {\n        const partialListeners = [\n            { name: \"complete\", handler: onComplete },\n            { name: \"loopComplete\", handler: onLoopComplete },\n            { name: \"enterFrame\", handler: onEnterFrame },\n            { name: \"segmentStart\", handler: onSegmentStart },\n            { name: \"config_ready\", handler: onConfigReady },\n            { name: \"data_ready\", handler: onDataReady },\n            { name: \"data_failed\", handler: onDataFailed },\n            { name: \"loaded_images\", handler: onLoadedImages },\n            { name: \"DOMLoaded\", handler: onDOMLoaded },\n            { name: \"destroy\", handler: onDestroy },\n        ];\n        const listeners = partialListeners.filter((listener) => listener.handler != null);\n        if (!listeners.length) {\n            return;\n        }\n        const deregisterList = listeners.map(\n        /**\n         * Handle the process of adding an event listener\n         * @param {Listener} listener\n         * @return {Function} Function that deregister the listener\n         */\n        (listener) => {\n            var _a;\n            (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.addEventListener(listener.name, listener.handler);\n            // Return a function to deregister this listener\n            return () => {\n                var _a;\n                (_a = animationInstanceRef.current) === null || _a === void 0 ? void 0 : _a.removeEventListener(listener.name, listener.handler);\n            };\n        });\n        // Deregister listeners on unmount\n        return () => {\n            deregisterList.forEach((deregister) => deregister());\n        };\n    }, [\n        onComplete,\n        onLoopComplete,\n        onEnterFrame,\n        onSegmentStart,\n        onConfigReady,\n        onDataReady,\n        onDataFailed,\n        onLoadedImages,\n        onDOMLoaded,\n        onDestroy,\n    ]);\n    /**\n     * Build the animation view\n     */\n    const View = React.createElement(\"div\", { style: style, ref: animationContainer, ...rest });\n    return {\n        View,\n        play,\n        stop,\n        pause,\n        setSpeed,\n        goToAndStop,\n        goToAndPlay,\n        setDirection,\n        playSegments,\n        setSubframe,\n        getDuration,\n        destroy,\n        animationContainerRef: animationContainer,\n        animationLoaded,\n        animationItem: animationInstanceRef.current,\n    };\n};\nexport default useLottie;\n","import { useEffect } from \"react\";\n// helpers\nexport function getContainerVisibility(container) {\n    const { top, height } = container.getBoundingClientRect();\n    const current = window.innerHeight - top;\n    const max = window.innerHeight + height;\n    return current / max;\n}\nexport function getContainerCursorPosition(container, cursorX, cursorY) {\n    const { top, left, width, height } = container.getBoundingClientRect();\n    const x = (cursorX - left) / width;\n    const y = (cursorY - top) / height;\n    return { x, y };\n}\nexport const useInitInteractivity = ({ wrapperRef, animationItem, mode, actions, }) => {\n    useEffect(() => {\n        const wrapper = wrapperRef.current;\n        if (!wrapper || !animationItem || !actions.length) {\n            return;\n        }\n        animationItem.stop();\n        const scrollModeHandler = () => {\n            let assignedSegment = null;\n            const scrollHandler = () => {\n                const currentPercent = getContainerVisibility(wrapper);\n                // Find the first action that satisfies the current position conditions\n                const action = actions.find(({ visibility }) => visibility &&\n                    currentPercent >= visibility[0] &&\n                    currentPercent <= visibility[1]);\n                // Skip if no matching action was found!\n                if (!action) {\n                    return;\n                }\n                if (action.type === \"seek\" &&\n                    action.visibility &&\n                    action.frames.length === 2) {\n                    // Seek: Go to a frame based on player scroll position action\n                    const frameToGo = action.frames[0] +\n                        Math.ceil(((currentPercent - action.visibility[0]) /\n                            (action.visibility[1] - action.visibility[0])) *\n                            action.frames[1]);\n                    //! goToAndStop must be relative to the start of the current segment\n                    animationItem.goToAndStop(frameToGo - animationItem.firstFrame - 1, true);\n                }\n                if (action.type === \"loop\") {\n                    // Loop: Loop a given frames\n                    if (assignedSegment === null) {\n                        // if not playing any segments currently. play those segments and save to state\n                        animationItem.playSegments(action.frames, true);\n                        assignedSegment = action.frames;\n                    }\n                    else {\n                        // if playing any segments currently.\n                        //check if segments in state are equal to the frames selected by action\n                        if (assignedSegment !== action.frames) {\n                            // if they are not equal. new segments are to be loaded\n                            animationItem.playSegments(action.frames, true);\n                            assignedSegment = action.frames;\n                        }\n                        else if (animationItem.isPaused) {\n                            // if they are equal the play method must be called only if lottie is paused\n                            animationItem.playSegments(action.frames, true);\n                            assignedSegment = action.frames;\n                        }\n                    }\n                }\n                if (action.type === \"play\" && animationItem.isPaused) {\n                    // Play: Reset segments and continue playing full animation from current position\n                    animationItem.resetSegments(true);\n                    animationItem.play();\n                }\n                if (action.type === \"stop\") {\n                    // Stop: Stop playback\n                    animationItem.goToAndStop(action.frames[0] - animationItem.firstFrame - 1, true);\n                }\n            };\n            document.addEventListener(\"scroll\", scrollHandler);\n            return () => {\n                document.removeEventListener(\"scroll\", scrollHandler);\n            };\n        };\n        const cursorModeHandler = () => {\n            const handleCursor = (_x, _y) => {\n                let x = _x;\n                let y = _y;\n                // Resolve cursor position if cursor is inside container\n                if (x !== -1 && y !== -1) {\n                    // Get container cursor position\n                    const pos = getContainerCursorPosition(wrapper, x, y);\n                    // Use the resolved position\n                    x = pos.x;\n                    y = pos.y;\n                }\n                // Find the first action that satisfies the current position conditions\n                const action = actions.find(({ position }) => {\n                    if (position &&\n                        Array.isArray(position.x) &&\n                        Array.isArray(position.y)) {\n                        return (x >= position.x[0] &&\n                            x <= position.x[1] &&\n                            y >= position.y[0] &&\n                            y <= position.y[1]);\n                    }\n                    if (position &&\n                        !Number.isNaN(position.x) &&\n                        !Number.isNaN(position.y)) {\n                        return x === position.x && y === position.y;\n                    }\n                    return false;\n                });\n                // Skip if no matching action was found!\n                if (!action) {\n                    return;\n                }\n                // Process action types:\n                if (action.type === \"seek\" &&\n                    action.position &&\n                    Array.isArray(action.position.x) &&\n                    Array.isArray(action.position.y) &&\n                    action.frames.length === 2) {\n                    // Seek: Go to a frame based on player scroll position action\n                    const xPercent = (x - action.position.x[0]) /\n                        (action.position.x[1] - action.position.x[0]);\n                    const yPercent = (y - action.position.y[0]) /\n                        (action.position.y[1] - action.position.y[0]);\n                    animationItem.playSegments(action.frames, true);\n                    animationItem.goToAndStop(Math.ceil(((xPercent + yPercent) / 2) *\n                        (action.frames[1] - action.frames[0])), true);\n                }\n                if (action.type === \"loop\") {\n                    animationItem.playSegments(action.frames, true);\n                }\n                if (action.type === \"play\") {\n                    // Play: Reset segments and continue playing full animation from current position\n                    if (animationItem.isPaused) {\n                        animationItem.resetSegments(false);\n                    }\n                    animationItem.playSegments(action.frames);\n                }\n                if (action.type === \"stop\") {\n                    animationItem.goToAndStop(action.frames[0], true);\n                }\n            };\n            const mouseMoveHandler = (ev) => {\n                handleCursor(ev.clientX, ev.clientY);\n            };\n            const mouseOutHandler = () => {\n                handleCursor(-1, -1);\n            };\n            wrapper.addEventListener(\"mousemove\", mouseMoveHandler);\n            wrapper.addEventListener(\"mouseout\", mouseOutHandler);\n            return () => {\n                wrapper.removeEventListener(\"mousemove\", mouseMoveHandler);\n                wrapper.removeEventListener(\"mouseout\", mouseOutHandler);\n            };\n        };\n        switch (mode) {\n            case \"scroll\":\n                return scrollModeHandler();\n            case \"cursor\":\n                return cursorModeHandler();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [mode, animationItem]);\n};\nconst useLottieInteractivity = ({ actions, mode, lottieObj, }) => {\n    const { animationItem, View, animationContainerRef } = lottieObj;\n    useInitInteractivity({\n        actions,\n        animationItem,\n        mode,\n        wrapperRef: animationContainerRef,\n    });\n    return View;\n};\nexport default useLottieInteractivity;\n","import { useEffect } from \"react\";\nimport useLottie from \"../hooks/useLottie\";\nimport useLottieInteractivity from \"../hooks/useLottieInteractivity\";\nconst Lottie = (props) => {\n    var _a, _b, _c;\n    const { style, interactivity, ...lottieProps } = props;\n    /**\n     * Initialize the 'useLottie' hook\n     */\n    const { View, play, stop, pause, setSpeed, goToAndStop, goToAndPlay, setDirection, playSegments, setSubframe, getDuration, destroy, animationContainerRef, animationLoaded, animationItem, } = useLottie(lottieProps, style);\n    /**\n     * Make the hook variables/methods available through the provided 'lottieRef'\n     */\n    useEffect(() => {\n        if (props.lottieRef) {\n            props.lottieRef.current = {\n                play,\n                stop,\n                pause,\n                setSpeed,\n                goToAndPlay,\n                goToAndStop,\n                setDirection,\n                playSegments,\n                setSubframe,\n                getDuration,\n                destroy,\n                animationContainerRef,\n                animationLoaded,\n                animationItem,\n            };\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [(_a = props.lottieRef) === null || _a === void 0 ? void 0 : _a.current]);\n    return useLottieInteractivity({\n        lottieObj: {\n            View,\n            play,\n            stop,\n            pause,\n            setSpeed,\n            goToAndStop,\n            goToAndPlay,\n            setDirection,\n            playSegments,\n            setSubframe,\n            getDuration,\n            destroy,\n            animationContainerRef,\n            animationLoaded,\n            animationItem,\n        },\n        actions: (_b = interactivity === null || interactivity === void 0 ? void 0 : interactivity.actions) !== null && _b !== void 0 ? _b : [],\n        mode: (_c = interactivity === null || interactivity === void 0 ? void 0 : interactivity.mode) !== null && _c !== void 0 ? _c : \"scroll\",\n    });\n};\nexport default Lottie;\n","const svgNS = 'http://www.w3.org/2000/svg';\r\n\r\nlet locationHref = '';\r\nlet _useWebWorker = false;\r\n\r\nconst initialDefaultFrame = -999999;\r\n\r\nconst setWebWorker = (flag) => { _useWebWorker = !!flag; };\r\nconst getWebWorker = () => _useWebWorker;\r\n\r\nconst setLocationHref = (value) => { locationHref = value; };\r\nconst getLocationHref = () => locationHref;\n\nfunction createTag(type) {\r\n  // return {appendChild:function(){},setAttribute:function(){},style:{}}\r\n  return document.createElement(type);\r\n}\n\nfunction extendPrototype(sources, destination) {\r\n  var i;\r\n  var len = sources.length;\r\n  var sourcePrototype;\r\n  for (i = 0; i < len; i += 1) {\r\n    sourcePrototype = sources[i].prototype;\r\n    for (var attr in sourcePrototype) {\r\n      if (Object.prototype.hasOwnProperty.call(sourcePrototype, attr)) destination.prototype[attr] = sourcePrototype[attr];\r\n    }\r\n  }\r\n}\r\n\r\nfunction getDescriptor(object, prop) {\r\n  return Object.getOwnPropertyDescriptor(object, prop);\r\n}\r\n\r\nfunction createProxyFunction(prototype) {\r\n  function ProxyFunction() {}\r\n  ProxyFunction.prototype = prototype;\r\n  return ProxyFunction;\r\n}\n\n// import Howl from '../../3rd_party/howler';\r\n\r\nconst audioControllerFactory = (function () {\r\n  function AudioController(audioFactory) {\r\n    this.audios = [];\r\n    this.audioFactory = audioFactory;\r\n    this._volume = 1;\r\n    this._isMuted = false;\r\n  }\r\n\r\n  AudioController.prototype = {\r\n    addAudio: function (audio) {\r\n      this.audios.push(audio);\r\n    },\r\n    pause: function () {\r\n      var i;\r\n      var len = this.audios.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        this.audios[i].pause();\r\n      }\r\n    },\r\n    resume: function () {\r\n      var i;\r\n      var len = this.audios.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        this.audios[i].resume();\r\n      }\r\n    },\r\n    setRate: function (rateValue) {\r\n      var i;\r\n      var len = this.audios.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        this.audios[i].setRate(rateValue);\r\n      }\r\n    },\r\n    createAudio: function (assetPath) {\r\n      if (this.audioFactory) {\r\n        return this.audioFactory(assetPath);\r\n      } if (window.Howl) {\r\n        return new window.Howl({\r\n          src: [assetPath],\r\n        });\r\n      }\r\n      return {\r\n        isPlaying: false,\r\n        play: function () { this.isPlaying = true; },\r\n        seek: function () { this.isPlaying = false; },\r\n        playing: function () {},\r\n        rate: function () {},\r\n        setVolume: function () {},\r\n      };\r\n    },\r\n    setAudioFactory: function (audioFactory) {\r\n      this.audioFactory = audioFactory;\r\n    },\r\n    setVolume: function (value) {\r\n      this._volume = value;\r\n      this._updateVolume();\r\n    },\r\n    mute: function () {\r\n      this._isMuted = true;\r\n      this._updateVolume();\r\n    },\r\n    unmute: function () {\r\n      this._isMuted = false;\r\n      this._updateVolume();\r\n    },\r\n    getVolume: function () {\r\n      return this._volume;\r\n    },\r\n    _updateVolume: function () {\r\n      var i;\r\n      var len = this.audios.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        this.audios[i].volume(this._volume * (this._isMuted ? 0 : 1));\r\n      }\r\n    },\r\n  };\r\n\r\n  return function () {\r\n    return new AudioController();\r\n  };\r\n}());\n\nconst createTypedArray = (function () {\r\n  function createRegularArray(type, len) {\r\n    var i = 0;\r\n    var arr = [];\r\n    var value;\r\n    switch (type) {\r\n      case 'int16':\r\n      case 'uint8c':\r\n        value = 1;\r\n        break;\r\n      default:\r\n        value = 1.1;\r\n        break;\r\n    }\r\n    for (i = 0; i < len; i += 1) {\r\n      arr.push(value);\r\n    }\r\n    return arr;\r\n  }\r\n  function createTypedArrayFactory(type, len) {\r\n    if (type === 'float32') {\r\n      return new Float32Array(len);\r\n    } if (type === 'int16') {\r\n      return new Int16Array(len);\r\n    } if (type === 'uint8c') {\r\n      return new Uint8ClampedArray(len);\r\n    }\r\n    return createRegularArray(type, len);\r\n  }\r\n  if (typeof Uint8ClampedArray === 'function' && typeof Float32Array === 'function') {\r\n    return createTypedArrayFactory;\r\n  }\r\n  return createRegularArray;\r\n}());\r\n\r\nfunction createSizedArray(len) {\r\n  return Array.apply(null, { length: len });\r\n}\n\nlet subframeEnabled = true;\r\nlet expressionsPlugin = null;\r\nlet expressionsInterfaces = null;\r\nlet idPrefix$1 = '';\r\nconst isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\nlet _shouldRoundValues = false;\r\nconst bmPow = Math.pow;\r\nconst bmSqrt = Math.sqrt;\r\nconst bmFloor = Math.floor;\r\nconst bmMax = Math.max;\r\nconst bmMin = Math.min;\r\n\r\nconst BMMath = {};\r\n(function () {\r\n  var propertyNames = ['abs', 'acos', 'acosh', 'asin', 'asinh', 'atan', 'atanh', 'atan2', 'ceil', 'cbrt', 'expm1', 'clz32', 'cos', 'cosh', 'exp', 'floor', 'fround', 'hypot', 'imul', 'log', 'log1p', 'log2', 'log10', 'max', 'min', 'pow', 'random', 'round', 'sign', 'sin', 'sinh', 'sqrt', 'tan', 'tanh', 'trunc', 'E', 'LN10', 'LN2', 'LOG10E', 'LOG2E', 'PI', 'SQRT1_2', 'SQRT2'];\r\n  var i;\r\n  var len = propertyNames.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    BMMath[propertyNames[i]] = Math[propertyNames[i]];\r\n  }\r\n}());\r\n\r\nfunction ProjectInterface$1() { return {}; }\r\nBMMath.random = Math.random;\r\nBMMath.abs = function (val) {\r\n  var tOfVal = typeof val;\r\n  if (tOfVal === 'object' && val.length) {\r\n    var absArr = createSizedArray(val.length);\r\n    var i;\r\n    var len = val.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      absArr[i] = Math.abs(val[i]);\r\n    }\r\n    return absArr;\r\n  }\r\n  return Math.abs(val);\r\n};\r\nlet defaultCurveSegments = 150;\r\nconst degToRads = Math.PI / 180;\r\nconst roundCorner = 0.5519;\r\n\r\nfunction roundValues(flag) {\r\n  _shouldRoundValues = !!flag;\r\n}\r\n\r\nfunction bmRnd(value) {\r\n  if (_shouldRoundValues) {\r\n    return Math.round(value);\r\n  }\r\n  return value;\r\n}\r\n\r\nfunction styleDiv(element) {\r\n  element.style.position = 'absolute';\r\n  element.style.top = 0;\r\n  element.style.left = 0;\r\n  element.style.display = 'block';\r\n  element.style.transformOrigin = '0 0';\r\n  element.style.webkitTransformOrigin = '0 0';\r\n  element.style.backfaceVisibility = 'visible';\r\n  element.style.webkitBackfaceVisibility = 'visible';\r\n  element.style.transformStyle = 'preserve-3d';\r\n  element.style.webkitTransformStyle = 'preserve-3d';\r\n  element.style.mozTransformStyle = 'preserve-3d';\r\n}\r\n\r\nfunction BMEnterFrameEvent(type, currentTime, totalTime, frameMultiplier) {\r\n  this.type = type;\r\n  this.currentTime = currentTime;\r\n  this.totalTime = totalTime;\r\n  this.direction = frameMultiplier < 0 ? -1 : 1;\r\n}\r\n\r\nfunction BMCompleteEvent(type, frameMultiplier) {\r\n  this.type = type;\r\n  this.direction = frameMultiplier < 0 ? -1 : 1;\r\n}\r\n\r\nfunction BMCompleteLoopEvent(type, totalLoops, currentLoop, frameMultiplier) {\r\n  this.type = type;\r\n  this.currentLoop = currentLoop;\r\n  this.totalLoops = totalLoops;\r\n  this.direction = frameMultiplier < 0 ? -1 : 1;\r\n}\r\n\r\nfunction BMSegmentStartEvent(type, firstFrame, totalFrames) {\r\n  this.type = type;\r\n  this.firstFrame = firstFrame;\r\n  this.totalFrames = totalFrames;\r\n}\r\n\r\nfunction BMDestroyEvent(type, target) {\r\n  this.type = type;\r\n  this.target = target;\r\n}\r\n\r\nfunction BMRenderFrameErrorEvent(nativeError, currentTime) {\r\n  this.type = 'renderFrameError';\r\n  this.nativeError = nativeError;\r\n  this.currentTime = currentTime;\r\n}\r\n\r\nfunction BMConfigErrorEvent(nativeError) {\r\n  this.type = 'configError';\r\n  this.nativeError = nativeError;\r\n}\r\n\r\nfunction BMAnimationConfigErrorEvent(type, nativeError) {\r\n  this.type = type;\r\n  this.nativeError = nativeError;\r\n}\r\n\r\nconst createElementID = (function () {\r\n  var _count = 0;\r\n  return function createID() {\r\n    _count += 1;\r\n    return idPrefix$1 + '__lottie_element_' + _count;\r\n  };\r\n}());\r\n\r\nfunction HSVtoRGB(h, s, v) {\r\n  var r;\r\n  var g;\r\n  var b;\r\n  var i;\r\n  var f;\r\n  var p;\r\n  var q;\r\n  var t;\r\n  i = Math.floor(h * 6);\r\n  f = h * 6 - i;\r\n  p = v * (1 - s);\r\n  q = v * (1 - f * s);\r\n  t = v * (1 - (1 - f) * s);\r\n  switch (i % 6) {\r\n    case 0: r = v; g = t; b = p; break;\r\n    case 1: r = q; g = v; b = p; break;\r\n    case 2: r = p; g = v; b = t; break;\r\n    case 3: r = p; g = q; b = v; break;\r\n    case 4: r = t; g = p; b = v; break;\r\n    case 5: r = v; g = p; b = q; break;\r\n    default: break;\r\n  }\r\n  return [r,\r\n    g,\r\n    b];\r\n}\r\n\r\nfunction RGBtoHSV(r, g, b) {\r\n  var max = Math.max(r, g, b);\r\n  var min = Math.min(r, g, b);\r\n  var d = max - min;\r\n  var h;\r\n  var s = (max === 0 ? 0 : d / max);\r\n  var v = max / 255;\r\n\r\n  switch (max) {\r\n    case min: h = 0; break;\r\n    case r: h = (g - b) + d * (g < b ? 6 : 0); h /= 6 * d; break;\r\n    case g: h = (b - r) + d * 2; h /= 6 * d; break;\r\n    case b: h = (r - g) + d * 4; h /= 6 * d; break;\r\n    default: break;\r\n  }\r\n\r\n  return [\r\n    h,\r\n    s,\r\n    v,\r\n  ];\r\n}\r\n\r\nfunction addSaturationToRGB(color, offset) {\r\n  var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\r\n  hsv[1] += offset;\r\n  if (hsv[1] > 1) {\r\n    hsv[1] = 1;\r\n  } else if (hsv[1] <= 0) {\r\n    hsv[1] = 0;\r\n  }\r\n  return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\r\n}\r\n\r\nfunction addBrightnessToRGB(color, offset) {\r\n  var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\r\n  hsv[2] += offset;\r\n  if (hsv[2] > 1) {\r\n    hsv[2] = 1;\r\n  } else if (hsv[2] < 0) {\r\n    hsv[2] = 0;\r\n  }\r\n  return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\r\n}\r\n\r\nfunction addHueToRGB(color, offset) {\r\n  var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\r\n  hsv[0] += offset / 360;\r\n  if (hsv[0] > 1) {\r\n    hsv[0] -= 1;\r\n  } else if (hsv[0] < 0) {\r\n    hsv[0] += 1;\r\n  }\r\n  return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\r\n}\r\n\r\nconst rgbToHex = (function () {\r\n  var colorMap = [];\r\n  var i;\r\n  var hex;\r\n  for (i = 0; i < 256; i += 1) {\r\n    hex = i.toString(16);\r\n    colorMap[i] = hex.length === 1 ? '0' + hex : hex;\r\n  }\r\n\r\n  return function (r, g, b) {\r\n    if (r < 0) {\r\n      r = 0;\r\n    }\r\n    if (g < 0) {\r\n      g = 0;\r\n    }\r\n    if (b < 0) {\r\n      b = 0;\r\n    }\r\n    return '#' + colorMap[r] + colorMap[g] + colorMap[b];\r\n  };\r\n}());\r\n\r\nconst setSubframeEnabled = (flag) => { subframeEnabled = !!flag; };\r\nconst getSubframeEnabled = () => subframeEnabled;\r\nconst setExpressionsPlugin = (value) => { expressionsPlugin = value; };\r\nconst getExpressionsPlugin = () => expressionsPlugin;\r\nconst setExpressionInterfaces = (value) => { expressionsInterfaces = value; };\r\nconst getExpressionInterfaces = () => expressionsInterfaces;\r\nconst setDefaultCurveSegments = (value) => { defaultCurveSegments = value; };\r\nconst getDefaultCurveSegments = () => defaultCurveSegments;\r\nconst setIdPrefix = (value) => { idPrefix$1 = value; };\r\nconst getIdPrefix = () => idPrefix$1;\n\nfunction createNS(type) {\r\n  // return {appendChild:function(){},setAttribute:function(){},style:{}}\r\n  return document.createElementNS(svgNS, type);\r\n}\n\nconst dataManager = (function () {\r\n  var _counterId = 1;\r\n  var processes = [];\r\n  var workerFn;\r\n  var workerInstance;\r\n  var workerProxy = {\r\n    onmessage: function () {\r\n\r\n    },\r\n    postMessage: function (path) {\r\n      workerFn({\r\n        data: path,\r\n      });\r\n    },\r\n  };\r\n  var _workerSelf = {\r\n    postMessage: function (data) {\r\n      workerProxy.onmessage({\r\n        data: data,\r\n      });\r\n    },\r\n  };\r\n  function createWorker(fn) {\r\n    if (window.Worker && window.Blob && getWebWorker()) {\r\n      var blob = new Blob(['var _workerSelf = self; self.onmessage = ', fn.toString()], { type: 'text/javascript' });\r\n      // var blob = new Blob(['self.onmessage = ', fn.toString()], { type: 'text/javascript' });\r\n      var url = URL.createObjectURL(blob);\r\n      return new Worker(url);\r\n    }\r\n    workerFn = fn;\r\n    return workerProxy;\r\n  }\r\n\r\n  function setupWorker() {\r\n    if (!workerInstance) {\r\n      workerInstance = createWorker(function workerStart(e) {\r\n        function dataFunctionManager() {\r\n          function completeLayers(layers, comps) {\r\n            var layerData;\r\n            var i;\r\n            var len = layers.length;\r\n            var j;\r\n            var jLen;\r\n            var k;\r\n            var kLen;\r\n            for (i = 0; i < len; i += 1) {\r\n              layerData = layers[i];\r\n              if (('ks' in layerData) && !layerData.completed) {\r\n                layerData.completed = true;\r\n                if (layerData.hasMask) {\r\n                  var maskProps = layerData.masksProperties;\r\n                  jLen = maskProps.length;\r\n                  for (j = 0; j < jLen; j += 1) {\r\n                    if (maskProps[j].pt.k.i) {\r\n                      convertPathsToAbsoluteValues(maskProps[j].pt.k);\r\n                    } else {\r\n                      kLen = maskProps[j].pt.k.length;\r\n                      for (k = 0; k < kLen; k += 1) {\r\n                        if (maskProps[j].pt.k[k].s) {\r\n                          convertPathsToAbsoluteValues(maskProps[j].pt.k[k].s[0]);\r\n                        }\r\n                        if (maskProps[j].pt.k[k].e) {\r\n                          convertPathsToAbsoluteValues(maskProps[j].pt.k[k].e[0]);\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n                if (layerData.ty === 0) {\r\n                  layerData.layers = findCompLayers(layerData.refId, comps);\r\n                  completeLayers(layerData.layers, comps);\r\n                } else if (layerData.ty === 4) {\r\n                  completeShapes(layerData.shapes);\r\n                } else if (layerData.ty === 5) {\r\n                  completeText(layerData);\r\n                }\r\n              }\r\n            }\r\n          }\r\n\r\n          function completeChars(chars, assets) {\r\n            if (chars) {\r\n              var i = 0;\r\n              var len = chars.length;\r\n              for (i = 0; i < len; i += 1) {\r\n                if (chars[i].t === 1) {\r\n                  // var compData = findComp(chars[i].data.refId, assets);\r\n                  chars[i].data.layers = findCompLayers(chars[i].data.refId, assets);\r\n                  // chars[i].data.ip = 0;\r\n                  // chars[i].data.op = 99999;\r\n                  // chars[i].data.st = 0;\r\n                  // chars[i].data.sr = 1;\r\n                  // chars[i].w = compData.w;\r\n                  // chars[i].data.ks = {\r\n                  //   a: { k: [0, 0, 0], a: 0 },\r\n                  //   p: { k: [0, -compData.h, 0], a: 0 },\r\n                  //   r: { k: 0, a: 0 },\r\n                  //   s: { k: [100, 100], a: 0 },\r\n                  //   o: { k: 100, a: 0 },\r\n                  // };\r\n                  completeLayers(chars[i].data.layers, assets);\r\n                }\r\n              }\r\n            }\r\n          }\r\n\r\n          function findComp(id, comps) {\r\n            var i = 0;\r\n            var len = comps.length;\r\n            while (i < len) {\r\n              if (comps[i].id === id) {\r\n                return comps[i];\r\n              }\r\n              i += 1;\r\n            }\r\n            return null;\r\n          }\r\n\r\n          function findCompLayers(id, comps) {\r\n            var comp = findComp(id, comps);\r\n            if (comp) {\r\n              if (!comp.layers.__used) {\r\n                comp.layers.__used = true;\r\n                return comp.layers;\r\n              }\r\n              return JSON.parse(JSON.stringify(comp.layers));\r\n            }\r\n            return null;\r\n          }\r\n\r\n          function completeShapes(arr) {\r\n            var i;\r\n            var len = arr.length;\r\n            var j;\r\n            var jLen;\r\n            for (i = len - 1; i >= 0; i -= 1) {\r\n              if (arr[i].ty === 'sh') {\r\n                if (arr[i].ks.k.i) {\r\n                  convertPathsToAbsoluteValues(arr[i].ks.k);\r\n                } else {\r\n                  jLen = arr[i].ks.k.length;\r\n                  for (j = 0; j < jLen; j += 1) {\r\n                    if (arr[i].ks.k[j].s) {\r\n                      convertPathsToAbsoluteValues(arr[i].ks.k[j].s[0]);\r\n                    }\r\n                    if (arr[i].ks.k[j].e) {\r\n                      convertPathsToAbsoluteValues(arr[i].ks.k[j].e[0]);\r\n                    }\r\n                  }\r\n                }\r\n              } else if (arr[i].ty === 'gr') {\r\n                completeShapes(arr[i].it);\r\n              }\r\n            }\r\n          }\r\n\r\n          function convertPathsToAbsoluteValues(path) {\r\n            var i;\r\n            var len = path.i.length;\r\n            for (i = 0; i < len; i += 1) {\r\n              path.i[i][0] += path.v[i][0];\r\n              path.i[i][1] += path.v[i][1];\r\n              path.o[i][0] += path.v[i][0];\r\n              path.o[i][1] += path.v[i][1];\r\n            }\r\n          }\r\n\r\n          function checkVersion(minimum, animVersionString) {\r\n            var animVersion = animVersionString ? animVersionString.split('.') : [100, 100, 100];\r\n            if (minimum[0] > animVersion[0]) {\r\n              return true;\r\n            } if (animVersion[0] > minimum[0]) {\r\n              return false;\r\n            }\r\n            if (minimum[1] > animVersion[1]) {\r\n              return true;\r\n            } if (animVersion[1] > minimum[1]) {\r\n              return false;\r\n            }\r\n            if (minimum[2] > animVersion[2]) {\r\n              return true;\r\n            } if (animVersion[2] > minimum[2]) {\r\n              return false;\r\n            }\r\n            return null;\r\n          }\r\n\r\n          var checkText = (function () {\r\n            var minimumVersion = [4, 4, 14];\r\n\r\n            function updateTextLayer(textLayer) {\r\n              var documentData = textLayer.t.d;\r\n              textLayer.t.d = {\r\n                k: [\r\n                  {\r\n                    s: documentData,\r\n                    t: 0,\r\n                  },\r\n                ],\r\n              };\r\n            }\r\n\r\n            function iterateLayers(layers) {\r\n              var i;\r\n              var len = layers.length;\r\n              for (i = 0; i < len; i += 1) {\r\n                if (layers[i].ty === 5) {\r\n                  updateTextLayer(layers[i]);\r\n                }\r\n              }\r\n            }\r\n\r\n            return function (animationData) {\r\n              if (checkVersion(minimumVersion, animationData.v)) {\r\n                iterateLayers(animationData.layers);\r\n                if (animationData.assets) {\r\n                  var i;\r\n                  var len = animationData.assets.length;\r\n                  for (i = 0; i < len; i += 1) {\r\n                    if (animationData.assets[i].layers) {\r\n                      iterateLayers(animationData.assets[i].layers);\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            };\r\n          }());\r\n\r\n          var checkChars = (function () {\r\n            var minimumVersion = [4, 7, 99];\r\n            return function (animationData) {\r\n              if (animationData.chars && !checkVersion(minimumVersion, animationData.v)) {\r\n                var i;\r\n                var len = animationData.chars.length;\r\n                for (i = 0; i < len; i += 1) {\r\n                  var charData = animationData.chars[i];\r\n                  if (charData.data && charData.data.shapes) {\r\n                    completeShapes(charData.data.shapes);\r\n                    charData.data.ip = 0;\r\n                    charData.data.op = 99999;\r\n                    charData.data.st = 0;\r\n                    charData.data.sr = 1;\r\n                    charData.data.ks = {\r\n                      p: { k: [0, 0], a: 0 },\r\n                      s: { k: [100, 100], a: 0 },\r\n                      a: { k: [0, 0], a: 0 },\r\n                      r: { k: 0, a: 0 },\r\n                      o: { k: 100, a: 0 },\r\n                    };\r\n                    if (!animationData.chars[i].t) {\r\n                      charData.data.shapes.push(\r\n                        {\r\n                          ty: 'no',\r\n                        }\r\n                      );\r\n                      charData.data.shapes[0].it.push(\r\n                        {\r\n                          p: { k: [0, 0], a: 0 },\r\n                          s: { k: [100, 100], a: 0 },\r\n                          a: { k: [0, 0], a: 0 },\r\n                          r: { k: 0, a: 0 },\r\n                          o: { k: 100, a: 0 },\r\n                          sk: { k: 0, a: 0 },\r\n                          sa: { k: 0, a: 0 },\r\n                          ty: 'tr',\r\n                        }\r\n                      );\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            };\r\n          }());\r\n\r\n          var checkPathProperties = (function () {\r\n            var minimumVersion = [5, 7, 15];\r\n\r\n            function updateTextLayer(textLayer) {\r\n              var pathData = textLayer.t.p;\r\n              if (typeof pathData.a === 'number') {\r\n                pathData.a = {\r\n                  a: 0,\r\n                  k: pathData.a,\r\n                };\r\n              }\r\n              if (typeof pathData.p === 'number') {\r\n                pathData.p = {\r\n                  a: 0,\r\n                  k: pathData.p,\r\n                };\r\n              }\r\n              if (typeof pathData.r === 'number') {\r\n                pathData.r = {\r\n                  a: 0,\r\n                  k: pathData.r,\r\n                };\r\n              }\r\n            }\r\n\r\n            function iterateLayers(layers) {\r\n              var i;\r\n              var len = layers.length;\r\n              for (i = 0; i < len; i += 1) {\r\n                if (layers[i].ty === 5) {\r\n                  updateTextLayer(layers[i]);\r\n                }\r\n              }\r\n            }\r\n\r\n            return function (animationData) {\r\n              if (checkVersion(minimumVersion, animationData.v)) {\r\n                iterateLayers(animationData.layers);\r\n                if (animationData.assets) {\r\n                  var i;\r\n                  var len = animationData.assets.length;\r\n                  for (i = 0; i < len; i += 1) {\r\n                    if (animationData.assets[i].layers) {\r\n                      iterateLayers(animationData.assets[i].layers);\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            };\r\n          }());\r\n\r\n          var checkColors = (function () {\r\n            var minimumVersion = [4, 1, 9];\r\n\r\n            function iterateShapes(shapes) {\r\n              var i;\r\n              var len = shapes.length;\r\n              var j;\r\n              var jLen;\r\n              for (i = 0; i < len; i += 1) {\r\n                if (shapes[i].ty === 'gr') {\r\n                  iterateShapes(shapes[i].it);\r\n                } else if (shapes[i].ty === 'fl' || shapes[i].ty === 'st') {\r\n                  if (shapes[i].c.k && shapes[i].c.k[0].i) {\r\n                    jLen = shapes[i].c.k.length;\r\n                    for (j = 0; j < jLen; j += 1) {\r\n                      if (shapes[i].c.k[j].s) {\r\n                        shapes[i].c.k[j].s[0] /= 255;\r\n                        shapes[i].c.k[j].s[1] /= 255;\r\n                        shapes[i].c.k[j].s[2] /= 255;\r\n                        shapes[i].c.k[j].s[3] /= 255;\r\n                      }\r\n                      if (shapes[i].c.k[j].e) {\r\n                        shapes[i].c.k[j].e[0] /= 255;\r\n                        shapes[i].c.k[j].e[1] /= 255;\r\n                        shapes[i].c.k[j].e[2] /= 255;\r\n                        shapes[i].c.k[j].e[3] /= 255;\r\n                      }\r\n                    }\r\n                  } else {\r\n                    shapes[i].c.k[0] /= 255;\r\n                    shapes[i].c.k[1] /= 255;\r\n                    shapes[i].c.k[2] /= 255;\r\n                    shapes[i].c.k[3] /= 255;\r\n                  }\r\n                }\r\n              }\r\n            }\r\n\r\n            function iterateLayers(layers) {\r\n              var i;\r\n              var len = layers.length;\r\n              for (i = 0; i < len; i += 1) {\r\n                if (layers[i].ty === 4) {\r\n                  iterateShapes(layers[i].shapes);\r\n                }\r\n              }\r\n            }\r\n\r\n            return function (animationData) {\r\n              if (checkVersion(minimumVersion, animationData.v)) {\r\n                iterateLayers(animationData.layers);\r\n                if (animationData.assets) {\r\n                  var i;\r\n                  var len = animationData.assets.length;\r\n                  for (i = 0; i < len; i += 1) {\r\n                    if (animationData.assets[i].layers) {\r\n                      iterateLayers(animationData.assets[i].layers);\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            };\r\n          }());\r\n\r\n          var checkShapes = (function () {\r\n            var minimumVersion = [4, 4, 18];\r\n\r\n            function completeClosingShapes(arr) {\r\n              var i;\r\n              var len = arr.length;\r\n              var j;\r\n              var jLen;\r\n              for (i = len - 1; i >= 0; i -= 1) {\r\n                if (arr[i].ty === 'sh') {\r\n                  if (arr[i].ks.k.i) {\r\n                    arr[i].ks.k.c = arr[i].closed;\r\n                  } else {\r\n                    jLen = arr[i].ks.k.length;\r\n                    for (j = 0; j < jLen; j += 1) {\r\n                      if (arr[i].ks.k[j].s) {\r\n                        arr[i].ks.k[j].s[0].c = arr[i].closed;\r\n                      }\r\n                      if (arr[i].ks.k[j].e) {\r\n                        arr[i].ks.k[j].e[0].c = arr[i].closed;\r\n                      }\r\n                    }\r\n                  }\r\n                } else if (arr[i].ty === 'gr') {\r\n                  completeClosingShapes(arr[i].it);\r\n                }\r\n              }\r\n            }\r\n\r\n            function iterateLayers(layers) {\r\n              var layerData;\r\n              var i;\r\n              var len = layers.length;\r\n              var j;\r\n              var jLen;\r\n              var k;\r\n              var kLen;\r\n              for (i = 0; i < len; i += 1) {\r\n                layerData = layers[i];\r\n                if (layerData.hasMask) {\r\n                  var maskProps = layerData.masksProperties;\r\n                  jLen = maskProps.length;\r\n                  for (j = 0; j < jLen; j += 1) {\r\n                    if (maskProps[j].pt.k.i) {\r\n                      maskProps[j].pt.k.c = maskProps[j].cl;\r\n                    } else {\r\n                      kLen = maskProps[j].pt.k.length;\r\n                      for (k = 0; k < kLen; k += 1) {\r\n                        if (maskProps[j].pt.k[k].s) {\r\n                          maskProps[j].pt.k[k].s[0].c = maskProps[j].cl;\r\n                        }\r\n                        if (maskProps[j].pt.k[k].e) {\r\n                          maskProps[j].pt.k[k].e[0].c = maskProps[j].cl;\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n                if (layerData.ty === 4) {\r\n                  completeClosingShapes(layerData.shapes);\r\n                }\r\n              }\r\n            }\r\n\r\n            return function (animationData) {\r\n              if (checkVersion(minimumVersion, animationData.v)) {\r\n                iterateLayers(animationData.layers);\r\n                if (animationData.assets) {\r\n                  var i;\r\n                  var len = animationData.assets.length;\r\n                  for (i = 0; i < len; i += 1) {\r\n                    if (animationData.assets[i].layers) {\r\n                      iterateLayers(animationData.assets[i].layers);\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            };\r\n          }());\r\n\r\n          function completeData(animationData) {\r\n            if (animationData.__complete) {\r\n              return;\r\n            }\r\n            checkColors(animationData);\r\n            checkText(animationData);\r\n            checkChars(animationData);\r\n            checkPathProperties(animationData);\r\n            checkShapes(animationData);\r\n            completeLayers(animationData.layers, animationData.assets);\r\n            completeChars(animationData.chars, animationData.assets);\r\n            animationData.__complete = true;\r\n          }\r\n\r\n          function completeText(data) {\r\n            if (data.t.a.length === 0 && !('m' in data.t.p)) {\r\n              // data.singleShape = true;\r\n            }\r\n          }\r\n\r\n          var moduleOb = {};\r\n          moduleOb.completeData = completeData;\r\n          moduleOb.checkColors = checkColors;\r\n          moduleOb.checkChars = checkChars;\r\n          moduleOb.checkPathProperties = checkPathProperties;\r\n          moduleOb.checkShapes = checkShapes;\r\n          moduleOb.completeLayers = completeLayers;\r\n\r\n          return moduleOb;\r\n        }\r\n        if (!_workerSelf.dataManager) {\r\n          _workerSelf.dataManager = dataFunctionManager();\r\n        }\r\n\r\n        if (!_workerSelf.assetLoader) {\r\n          _workerSelf.assetLoader = (function () {\r\n            function formatResponse(xhr) {\r\n              // using typeof doubles the time of execution of this method,\r\n              // so if available, it's better to use the header to validate the type\r\n              var contentTypeHeader = xhr.getResponseHeader('content-type');\r\n              if (contentTypeHeader && xhr.responseType === 'json' && contentTypeHeader.indexOf('json') !== -1) {\r\n                return xhr.response;\r\n              }\r\n              if (xhr.response && typeof xhr.response === 'object') {\r\n                return xhr.response;\r\n              } if (xhr.response && typeof xhr.response === 'string') {\r\n                return JSON.parse(xhr.response);\r\n              } if (xhr.responseText) {\r\n                return JSON.parse(xhr.responseText);\r\n              }\r\n              return null;\r\n            }\r\n\r\n            function loadAsset(path, fullPath, callback, errorCallback) {\r\n              var response;\r\n              var xhr = new XMLHttpRequest();\r\n              // set responseType after calling open or IE will break.\r\n              try {\r\n                // This crashes on Android WebView prior to KitKat\r\n                xhr.responseType = 'json';\r\n              } catch (err) {} // eslint-disable-line no-empty\r\n              xhr.onreadystatechange = function () {\r\n                if (xhr.readyState === 4) {\r\n                  if (xhr.status === 200) {\r\n                    response = formatResponse(xhr);\r\n                    callback(response);\r\n                  } else {\r\n                    try {\r\n                      response = formatResponse(xhr);\r\n                      callback(response);\r\n                    } catch (err) {\r\n                      if (errorCallback) {\r\n                        errorCallback(err);\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              };\r\n              try {\r\n                // Hack to workaround banner validation\r\n                xhr.open(['G', 'E', 'T'].join(''), path, true);\r\n              } catch (error) {\r\n                // Hack to workaround banner validation\r\n                xhr.open(['G', 'E', 'T'].join(''), fullPath + '/' + path, true);\r\n              }\r\n              xhr.send();\r\n            }\r\n            return {\r\n              load: loadAsset,\r\n            };\r\n          }());\r\n        }\r\n\r\n        if (e.data.type === 'loadAnimation') {\r\n          _workerSelf.assetLoader.load(\r\n            e.data.path,\r\n            e.data.fullPath,\r\n            function (data) {\r\n              _workerSelf.dataManager.completeData(data);\r\n              _workerSelf.postMessage({\r\n                id: e.data.id,\r\n                payload: data,\r\n                status: 'success',\r\n              });\r\n            },\r\n            function () {\r\n              _workerSelf.postMessage({\r\n                id: e.data.id,\r\n                status: 'error',\r\n              });\r\n            }\r\n          );\r\n        } else if (e.data.type === 'complete') {\r\n          var animation = e.data.animation;\r\n          _workerSelf.dataManager.completeData(animation);\r\n          _workerSelf.postMessage({\r\n            id: e.data.id,\r\n            payload: animation,\r\n            status: 'success',\r\n          });\r\n        } else if (e.data.type === 'loadData') {\r\n          _workerSelf.assetLoader.load(\r\n            e.data.path,\r\n            e.data.fullPath,\r\n            function (data) {\r\n              _workerSelf.postMessage({\r\n                id: e.data.id,\r\n                payload: data,\r\n                status: 'success',\r\n              });\r\n            },\r\n            function () {\r\n              _workerSelf.postMessage({\r\n                id: e.data.id,\r\n                status: 'error',\r\n              });\r\n            }\r\n          );\r\n        }\r\n      });\r\n\r\n      workerInstance.onmessage = function (event) {\r\n        var data = event.data;\r\n        var id = data.id;\r\n        var process = processes[id];\r\n        processes[id] = null;\r\n        if (data.status === 'success') {\r\n          process.onComplete(data.payload);\r\n        } else if (process.onError) {\r\n          process.onError();\r\n        }\r\n      };\r\n    }\r\n  }\r\n\r\n  function createProcess(onComplete, onError) {\r\n    _counterId += 1;\r\n    var id = 'processId_' + _counterId;\r\n    processes[id] = {\r\n      onComplete: onComplete,\r\n      onError: onError,\r\n    };\r\n    return id;\r\n  }\r\n\r\n  function loadAnimation(path, onComplete, onError) {\r\n    setupWorker();\r\n    var processId = createProcess(onComplete, onError);\r\n    workerInstance.postMessage({\r\n      type: 'loadAnimation',\r\n      path: path,\r\n      fullPath: window.location.origin + window.location.pathname,\r\n      id: processId,\r\n    });\r\n  }\r\n\r\n  function loadData(path, onComplete, onError) {\r\n    setupWorker();\r\n    var processId = createProcess(onComplete, onError);\r\n    workerInstance.postMessage({\r\n      type: 'loadData',\r\n      path: path,\r\n      fullPath: window.location.origin + window.location.pathname,\r\n      id: processId,\r\n    });\r\n  }\r\n\r\n  function completeAnimation(anim, onComplete, onError) {\r\n    setupWorker();\r\n    var processId = createProcess(onComplete, onError);\r\n    workerInstance.postMessage({\r\n      type: 'complete',\r\n      animation: anim,\r\n      id: processId,\r\n    });\r\n  }\r\n\r\n  return {\r\n    loadAnimation: loadAnimation,\r\n    loadData: loadData,\r\n    completeAnimation: completeAnimation,\r\n  };\r\n}());\n\nconst ImagePreloader = (function () {\r\n  var proxyImage = (function () {\r\n    var canvas = createTag('canvas');\r\n    canvas.width = 1;\r\n    canvas.height = 1;\r\n    var ctx = canvas.getContext('2d');\r\n    ctx.fillStyle = 'rgba(0,0,0,0)';\r\n    ctx.fillRect(0, 0, 1, 1);\r\n    return canvas;\r\n  }());\r\n\r\n  function imageLoaded() {\r\n    this.loadedAssets += 1;\r\n    if (this.loadedAssets === this.totalImages && this.loadedFootagesCount === this.totalFootages) {\r\n      if (this.imagesLoadedCb) {\r\n        this.imagesLoadedCb(null);\r\n      }\r\n    }\r\n  }\r\n  function footageLoaded() {\r\n    this.loadedFootagesCount += 1;\r\n    if (this.loadedAssets === this.totalImages && this.loadedFootagesCount === this.totalFootages) {\r\n      if (this.imagesLoadedCb) {\r\n        this.imagesLoadedCb(null);\r\n      }\r\n    }\r\n  }\r\n\r\n  function getAssetsPath(assetData, assetsPath, originalPath) {\r\n    var path = '';\r\n    if (assetData.e) {\r\n      path = assetData.p;\r\n    } else if (assetsPath) {\r\n      var imagePath = assetData.p;\r\n      if (imagePath.indexOf('images/') !== -1) {\r\n        imagePath = imagePath.split('/')[1];\r\n      }\r\n      path = assetsPath + imagePath;\r\n    } else {\r\n      path = originalPath;\r\n      path += assetData.u ? assetData.u : '';\r\n      path += assetData.p;\r\n    }\r\n    return path;\r\n  }\r\n\r\n  function testImageLoaded(img) {\r\n    var _count = 0;\r\n    var intervalId = setInterval(function () {\r\n      var box = img.getBBox();\r\n      if (box.width || _count > 500) {\r\n        this._imageLoaded();\r\n        clearInterval(intervalId);\r\n      }\r\n      _count += 1;\r\n    }.bind(this), 50);\r\n  }\r\n\r\n  function createImageData(assetData) {\r\n    var path = getAssetsPath(assetData, this.assetsPath, this.path);\r\n    var img = createNS('image');\r\n    if (isSafari) {\r\n      this.testImageLoaded(img);\r\n    } else {\r\n      img.addEventListener('load', this._imageLoaded, false);\r\n    }\r\n    img.addEventListener('error', function () {\r\n      ob.img = proxyImage;\r\n      this._imageLoaded();\r\n    }.bind(this), false);\r\n    img.setAttributeNS('http://www.w3.org/1999/xlink', 'href', path);\r\n    if (this._elementHelper.append) {\r\n      this._elementHelper.append(img);\r\n    } else {\r\n      this._elementHelper.appendChild(img);\r\n    }\r\n    var ob = {\r\n      img: img,\r\n      assetData: assetData,\r\n    };\r\n    return ob;\r\n  }\r\n\r\n  function createImgData(assetData) {\r\n    var path = getAssetsPath(assetData, this.assetsPath, this.path);\r\n    var img = createTag('img');\r\n    img.crossOrigin = 'anonymous';\r\n    img.addEventListener('load', this._imageLoaded, false);\r\n    img.addEventListener('error', function () {\r\n      ob.img = proxyImage;\r\n      this._imageLoaded();\r\n    }.bind(this), false);\r\n    img.src = path;\r\n    var ob = {\r\n      img: img,\r\n      assetData: assetData,\r\n    };\r\n    return ob;\r\n  }\r\n\r\n  function createFootageData(data) {\r\n    var ob = {\r\n      assetData: data,\r\n    };\r\n    var path = getAssetsPath(data, this.assetsPath, this.path);\r\n    dataManager.loadData(path, function (footageData) {\r\n      ob.img = footageData;\r\n      this._footageLoaded();\r\n    }.bind(this), function () {\r\n      ob.img = {};\r\n      this._footageLoaded();\r\n    }.bind(this));\r\n    return ob;\r\n  }\r\n\r\n  function loadAssets(assets, cb) {\r\n    this.imagesLoadedCb = cb;\r\n    var i;\r\n    var len = assets.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      if (!assets[i].layers) {\r\n        if (!assets[i].t || assets[i].t === 'seq') {\r\n          this.totalImages += 1;\r\n          this.images.push(this._createImageData(assets[i]));\r\n        } else if (assets[i].t === 3) {\r\n          this.totalFootages += 1;\r\n          this.images.push(this.createFootageData(assets[i]));\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function setPath(path) {\r\n    this.path = path || '';\r\n  }\r\n\r\n  function setAssetsPath(path) {\r\n    this.assetsPath = path || '';\r\n  }\r\n\r\n  function getAsset(assetData) {\r\n    var i = 0;\r\n    var len = this.images.length;\r\n    while (i < len) {\r\n      if (this.images[i].assetData === assetData) {\r\n        return this.images[i].img;\r\n      }\r\n      i += 1;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  function destroy() {\r\n    this.imagesLoadedCb = null;\r\n    this.images.length = 0;\r\n  }\r\n\r\n  function loadedImages() {\r\n    return this.totalImages === this.loadedAssets;\r\n  }\r\n\r\n  function loadedFootages() {\r\n    return this.totalFootages === this.loadedFootagesCount;\r\n  }\r\n\r\n  function setCacheType(type, elementHelper) {\r\n    if (type === 'svg') {\r\n      this._elementHelper = elementHelper;\r\n      this._createImageData = this.createImageData.bind(this);\r\n    } else {\r\n      this._createImageData = this.createImgData.bind(this);\r\n    }\r\n  }\r\n\r\n  function ImagePreloaderFactory() {\r\n    this._imageLoaded = imageLoaded.bind(this);\r\n    this._footageLoaded = footageLoaded.bind(this);\r\n    this.testImageLoaded = testImageLoaded.bind(this);\r\n    this.createFootageData = createFootageData.bind(this);\r\n    this.assetsPath = '';\r\n    this.path = '';\r\n    this.totalImages = 0;\r\n    this.totalFootages = 0;\r\n    this.loadedAssets = 0;\r\n    this.loadedFootagesCount = 0;\r\n    this.imagesLoadedCb = null;\r\n    this.images = [];\r\n  }\r\n\r\n  ImagePreloaderFactory.prototype = {\r\n    loadAssets: loadAssets,\r\n    setAssetsPath: setAssetsPath,\r\n    setPath: setPath,\r\n    loadedImages: loadedImages,\r\n    loadedFootages: loadedFootages,\r\n    destroy: destroy,\r\n    getAsset: getAsset,\r\n    createImgData: createImgData,\r\n    createImageData: createImageData,\r\n    imageLoaded: imageLoaded,\r\n    footageLoaded: footageLoaded,\r\n    setCacheType: setCacheType,\r\n  };\r\n\r\n  return ImagePreloaderFactory;\r\n}());\n\nfunction BaseEvent() {}\r\nBaseEvent.prototype = {\r\n  triggerEvent: function (eventName, args) {\r\n    if (this._cbs[eventName]) {\r\n      var callbacks = this._cbs[eventName];\r\n      for (var i = 0; i < callbacks.length; i += 1) {\r\n        callbacks[i](args);\r\n      }\r\n    }\r\n  },\r\n  addEventListener: function (eventName, callback) {\r\n    if (!this._cbs[eventName]) {\r\n      this._cbs[eventName] = [];\r\n    }\r\n    this._cbs[eventName].push(callback);\r\n\r\n    return function () {\r\n      this.removeEventListener(eventName, callback);\r\n    }.bind(this);\r\n  },\r\n  removeEventListener: function (eventName, callback) {\r\n    if (!callback) {\r\n      this._cbs[eventName] = null;\r\n    } else if (this._cbs[eventName]) {\r\n      var i = 0;\r\n      var len = this._cbs[eventName].length;\r\n      while (i < len) {\r\n        if (this._cbs[eventName][i] === callback) {\r\n          this._cbs[eventName].splice(i, 1);\r\n          i -= 1;\r\n          len -= 1;\r\n        }\r\n        i += 1;\r\n      }\r\n      if (!this._cbs[eventName].length) {\r\n        this._cbs[eventName] = null;\r\n      }\r\n    }\r\n  },\r\n};\n\nconst markerParser = (\r\n\r\n  function () {\r\n    function parsePayloadLines(payload) {\r\n      var lines = payload.split('\\r\\n');\r\n      var keys = {};\r\n      var line;\r\n      var keysCount = 0;\r\n      for (var i = 0; i < lines.length; i += 1) {\r\n        line = lines[i].split(':');\r\n        if (line.length === 2) {\r\n          keys[line[0]] = line[1].trim();\r\n          keysCount += 1;\r\n        }\r\n      }\r\n      if (keysCount === 0) {\r\n        throw new Error();\r\n      }\r\n      return keys;\r\n    }\r\n\r\n    return function (_markers) {\r\n      var markers = [];\r\n      for (var i = 0; i < _markers.length; i += 1) {\r\n        var _marker = _markers[i];\r\n        var markerData = {\r\n          time: _marker.tm,\r\n          duration: _marker.dr,\r\n        };\r\n        try {\r\n          markerData.payload = JSON.parse(_markers[i].cm);\r\n        } catch (_) {\r\n          try {\r\n            markerData.payload = parsePayloadLines(_markers[i].cm);\r\n          } catch (__) {\r\n            markerData.payload = {\r\n              name: _markers[i].cm,\r\n            };\r\n          }\r\n        }\r\n        markers.push(markerData);\r\n      }\r\n      return markers;\r\n    };\r\n  }());\n\nconst ProjectInterface = (function () {\r\n  function registerComposition(comp) {\r\n    this.compositions.push(comp);\r\n  }\r\n\r\n  return function () {\r\n    function _thisProjectFunction(name) {\r\n      var i = 0;\r\n      var len = this.compositions.length;\r\n      while (i < len) {\r\n        if (this.compositions[i].data && this.compositions[i].data.nm === name) {\r\n          if (this.compositions[i].prepareFrame && this.compositions[i].data.xt) {\r\n            this.compositions[i].prepareFrame(this.currentFrame);\r\n          }\r\n          return this.compositions[i].compInterface;\r\n        }\r\n        i += 1;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    _thisProjectFunction.compositions = [];\r\n    _thisProjectFunction.currentFrame = 0;\r\n\r\n    _thisProjectFunction.registerComposition = registerComposition;\r\n\r\n    return _thisProjectFunction;\r\n  };\r\n}());\n\nconst renderers = {};\r\n\r\nconst registerRenderer = (key, value) => {\r\n  renderers[key] = value;\r\n};\r\n\r\nfunction getRenderer(key) {\r\n  return renderers[key];\r\n}\r\n\r\nfunction getRegisteredRenderer() {\r\n  // Returns canvas by default for compatibility\r\n  if (renderers.canvas) {\r\n    return 'canvas';\r\n  }\r\n  // Returns any renderer that is registered\r\n  for (const key in renderers) {\r\n    if (renderers[key]) {\r\n      return key;\r\n    }\r\n  }\r\n  return '';\r\n}\n\nconst AnimationItem = function () {\r\n  this._cbs = [];\r\n  this.name = '';\r\n  this.path = '';\r\n  this.isLoaded = false;\r\n  this.currentFrame = 0;\r\n  this.currentRawFrame = 0;\r\n  this.firstFrame = 0;\r\n  this.totalFrames = 0;\r\n  this.frameRate = 0;\r\n  this.frameMult = 0;\r\n  this.playSpeed = 1;\r\n  this.playDirection = 1;\r\n  this.playCount = 0;\r\n  this.animationData = {};\r\n  this.assets = [];\r\n  this.isPaused = true;\r\n  this.autoplay = false;\r\n  this.loop = true;\r\n  this.renderer = null;\r\n  this.animationID = createElementID();\r\n  this.assetsPath = '';\r\n  this.timeCompleted = 0;\r\n  this.segmentPos = 0;\r\n  this.isSubframeEnabled = getSubframeEnabled();\r\n  this.segments = [];\r\n  this._idle = true;\r\n  this._completedLoop = false;\r\n  this.projectInterface = ProjectInterface();\r\n  this.imagePreloader = new ImagePreloader();\r\n  this.audioController = audioControllerFactory();\r\n  this.markers = [];\r\n  this.configAnimation = this.configAnimation.bind(this);\r\n  this.onSetupError = this.onSetupError.bind(this);\r\n  this.onSegmentComplete = this.onSegmentComplete.bind(this);\r\n  this.drawnFrameEvent = new BMEnterFrameEvent('drawnFrame', 0, 0, 0);\r\n  this.expressionsPlugin = getExpressionsPlugin();\r\n};\r\n\r\nextendPrototype([BaseEvent], AnimationItem);\r\n\r\nAnimationItem.prototype.setParams = function (params) {\r\n  if (params.wrapper || params.container) {\r\n    this.wrapper = params.wrapper || params.container;\r\n  }\r\n  var animType = 'svg';\r\n  if (params.animType) {\r\n    animType = params.animType;\r\n  } else if (params.renderer) {\r\n    animType = params.renderer;\r\n  }\r\n  const RendererClass = getRenderer(animType);\r\n  this.renderer = new RendererClass(this, params.rendererSettings);\r\n  this.imagePreloader.setCacheType(animType, this.renderer.globalData.defs);\r\n  this.renderer.setProjectInterface(this.projectInterface);\r\n  this.animType = animType;\r\n  if (params.loop === ''\r\n        || params.loop === null\r\n        || params.loop === undefined\r\n        || params.loop === true) {\r\n    this.loop = true;\r\n  } else if (params.loop === false) {\r\n    this.loop = false;\r\n  } else {\r\n    this.loop = parseInt(params.loop, 10);\r\n  }\r\n  this.autoplay = 'autoplay' in params ? params.autoplay : true;\r\n  this.name = params.name ? params.name : '';\r\n  this.autoloadSegments = Object.prototype.hasOwnProperty.call(params, 'autoloadSegments') ? params.autoloadSegments : true;\r\n  this.assetsPath = params.assetsPath;\r\n  this.initialSegment = params.initialSegment;\r\n  if (params.audioFactory) {\r\n    this.audioController.setAudioFactory(params.audioFactory);\r\n  }\r\n  if (params.animationData) {\r\n    this.setupAnimation(params.animationData);\r\n  } else if (params.path) {\r\n    if (params.path.lastIndexOf('\\\\') !== -1) {\r\n      this.path = params.path.substr(0, params.path.lastIndexOf('\\\\') + 1);\r\n    } else {\r\n      this.path = params.path.substr(0, params.path.lastIndexOf('/') + 1);\r\n    }\r\n    this.fileName = params.path.substr(params.path.lastIndexOf('/') + 1);\r\n    this.fileName = this.fileName.substr(0, this.fileName.lastIndexOf('.json'));\r\n    dataManager.loadAnimation(\r\n      params.path,\r\n      this.configAnimation,\r\n      this.onSetupError\r\n    );\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.onSetupError = function () {\r\n  this.trigger('data_failed');\r\n};\r\n\r\nAnimationItem.prototype.setupAnimation = function (data) {\r\n  dataManager.completeAnimation(\r\n    data,\r\n    this.configAnimation\r\n  );\r\n};\r\n\r\nAnimationItem.prototype.setData = function (wrapper, animationData) {\r\n  if (animationData) {\r\n    if (typeof animationData !== 'object') {\r\n      animationData = JSON.parse(animationData);\r\n    }\r\n  }\r\n  var params = {\r\n    wrapper: wrapper,\r\n    animationData: animationData,\r\n  };\r\n  var wrapperAttributes = wrapper.attributes;\r\n\r\n  params.path = wrapperAttributes.getNamedItem('data-animation-path') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-animation-path').value\r\n    : wrapperAttributes.getNamedItem('data-bm-path') // eslint-disable-line no-nested-ternary\r\n      ? wrapperAttributes.getNamedItem('data-bm-path').value\r\n      : wrapperAttributes.getNamedItem('bm-path')\r\n        ? wrapperAttributes.getNamedItem('bm-path').value\r\n        : '';\r\n  params.animType = wrapperAttributes.getNamedItem('data-anim-type') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-anim-type').value\r\n    : wrapperAttributes.getNamedItem('data-bm-type') // eslint-disable-line no-nested-ternary\r\n      ? wrapperAttributes.getNamedItem('data-bm-type').value\r\n      : wrapperAttributes.getNamedItem('bm-type') // eslint-disable-line no-nested-ternary\r\n        ? wrapperAttributes.getNamedItem('bm-type').value\r\n        : wrapperAttributes.getNamedItem('data-bm-renderer') // eslint-disable-line no-nested-ternary\r\n          ? wrapperAttributes.getNamedItem('data-bm-renderer').value\r\n          : wrapperAttributes.getNamedItem('bm-renderer')\r\n            ? wrapperAttributes.getNamedItem('bm-renderer').value\r\n            : getRegisteredRenderer() || 'canvas';\r\n\r\n  var loop = wrapperAttributes.getNamedItem('data-anim-loop') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-anim-loop').value\r\n    : wrapperAttributes.getNamedItem('data-bm-loop') // eslint-disable-line no-nested-ternary\r\n      ? wrapperAttributes.getNamedItem('data-bm-loop').value\r\n      : wrapperAttributes.getNamedItem('bm-loop')\r\n        ? wrapperAttributes.getNamedItem('bm-loop').value\r\n        : '';\r\n  if (loop === 'false') {\r\n    params.loop = false;\r\n  } else if (loop === 'true') {\r\n    params.loop = true;\r\n  } else if (loop !== '') {\r\n    params.loop = parseInt(loop, 10);\r\n  }\r\n  var autoplay = wrapperAttributes.getNamedItem('data-anim-autoplay') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-anim-autoplay').value\r\n    : wrapperAttributes.getNamedItem('data-bm-autoplay') // eslint-disable-line no-nested-ternary\r\n      ? wrapperAttributes.getNamedItem('data-bm-autoplay').value\r\n      : wrapperAttributes.getNamedItem('bm-autoplay')\r\n        ? wrapperAttributes.getNamedItem('bm-autoplay').value\r\n        : true;\r\n  params.autoplay = autoplay !== 'false';\r\n\r\n  params.name = wrapperAttributes.getNamedItem('data-name') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-name').value\r\n    : wrapperAttributes.getNamedItem('data-bm-name') // eslint-disable-line no-nested-ternary\r\n      ? wrapperAttributes.getNamedItem('data-bm-name').value\r\n      : wrapperAttributes.getNamedItem('bm-name')\r\n        ? wrapperAttributes.getNamedItem('bm-name').value\r\n        : '';\r\n  var prerender = wrapperAttributes.getNamedItem('data-anim-prerender') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-anim-prerender').value\r\n    : wrapperAttributes.getNamedItem('data-bm-prerender') // eslint-disable-line no-nested-ternary\r\n      ? wrapperAttributes.getNamedItem('data-bm-prerender').value\r\n      : wrapperAttributes.getNamedItem('bm-prerender')\r\n        ? wrapperAttributes.getNamedItem('bm-prerender').value\r\n        : '';\r\n\r\n  if (prerender === 'false') {\r\n    params.prerender = false;\r\n  }\r\n  if (!params.path) {\r\n    this.trigger('destroy');\r\n  } else {\r\n    this.setParams(params);\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.includeLayers = function (data) {\r\n  if (data.op > this.animationData.op) {\r\n    this.animationData.op = data.op;\r\n    this.totalFrames = Math.floor(data.op - this.animationData.ip);\r\n  }\r\n  var layers = this.animationData.layers;\r\n  var i;\r\n  var len = layers.length;\r\n  var newLayers = data.layers;\r\n  var j;\r\n  var jLen = newLayers.length;\r\n  for (j = 0; j < jLen; j += 1) {\r\n    i = 0;\r\n    while (i < len) {\r\n      if (layers[i].id === newLayers[j].id) {\r\n        layers[i] = newLayers[j];\r\n        break;\r\n      }\r\n      i += 1;\r\n    }\r\n  }\r\n  if (data.chars || data.fonts) {\r\n    this.renderer.globalData.fontManager.addChars(data.chars);\r\n    this.renderer.globalData.fontManager.addFonts(data.fonts, this.renderer.globalData.defs);\r\n  }\r\n  if (data.assets) {\r\n    len = data.assets.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      this.animationData.assets.push(data.assets[i]);\r\n    }\r\n  }\r\n  this.animationData.__complete = false;\r\n  dataManager.completeAnimation(\r\n    this.animationData,\r\n    this.onSegmentComplete\r\n  );\r\n};\r\n\r\nAnimationItem.prototype.onSegmentComplete = function (data) {\r\n  this.animationData = data;\r\n  var expressionsPlugin = getExpressionsPlugin();\r\n  if (expressionsPlugin) {\r\n    expressionsPlugin.initExpressions(this);\r\n  }\r\n  this.loadNextSegment();\r\n};\r\n\r\nAnimationItem.prototype.loadNextSegment = function () {\r\n  var segments = this.animationData.segments;\r\n  if (!segments || segments.length === 0 || !this.autoloadSegments) {\r\n    this.trigger('data_ready');\r\n    this.timeCompleted = this.totalFrames;\r\n    return;\r\n  }\r\n  var segment = segments.shift();\r\n  this.timeCompleted = segment.time * this.frameRate;\r\n  var segmentPath = this.path + this.fileName + '_' + this.segmentPos + '.json';\r\n  this.segmentPos += 1;\r\n  dataManager.loadData(segmentPath, this.includeLayers.bind(this), function () {\r\n    this.trigger('data_failed');\r\n  }.bind(this));\r\n};\r\n\r\nAnimationItem.prototype.loadSegments = function () {\r\n  var segments = this.animationData.segments;\r\n  if (!segments) {\r\n    this.timeCompleted = this.totalFrames;\r\n  }\r\n  this.loadNextSegment();\r\n};\r\n\r\nAnimationItem.prototype.imagesLoaded = function () {\r\n  this.trigger('loaded_images');\r\n  this.checkLoaded();\r\n};\r\n\r\nAnimationItem.prototype.preloadImages = function () {\r\n  this.imagePreloader.setAssetsPath(this.assetsPath);\r\n  this.imagePreloader.setPath(this.path);\r\n  this.imagePreloader.loadAssets(this.animationData.assets, this.imagesLoaded.bind(this));\r\n};\r\n\r\nAnimationItem.prototype.configAnimation = function (animData) {\r\n  if (!this.renderer) {\r\n    return;\r\n  }\r\n  try {\r\n    this.animationData = animData;\r\n    if (this.initialSegment) {\r\n      this.totalFrames = Math.floor(this.initialSegment[1] - this.initialSegment[0]);\r\n      this.firstFrame = Math.round(this.initialSegment[0]);\r\n    } else {\r\n      this.totalFrames = Math.floor(this.animationData.op - this.animationData.ip);\r\n      this.firstFrame = Math.round(this.animationData.ip);\r\n    }\r\n    this.renderer.configAnimation(animData);\r\n    if (!animData.assets) {\r\n      animData.assets = [];\r\n    }\r\n\r\n    this.assets = this.animationData.assets;\r\n    this.frameRate = this.animationData.fr;\r\n    this.frameMult = this.animationData.fr / 1000;\r\n    this.renderer.searchExtraCompositions(animData.assets);\r\n    this.markers = markerParser(animData.markers || []);\r\n    this.trigger('config_ready');\r\n    this.preloadImages();\r\n    this.loadSegments();\r\n    this.updaFrameModifier();\r\n    this.waitForFontsLoaded();\r\n    if (this.isPaused) {\r\n      this.audioController.pause();\r\n    }\r\n  } catch (error) {\r\n    this.triggerConfigError(error);\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.waitForFontsLoaded = function () {\r\n  if (!this.renderer) {\r\n    return;\r\n  }\r\n  if (this.renderer.globalData.fontManager.isLoaded) {\r\n    this.checkLoaded();\r\n  } else {\r\n    setTimeout(this.waitForFontsLoaded.bind(this), 20);\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.checkLoaded = function () {\r\n  if (!this.isLoaded\r\n        && this.renderer.globalData.fontManager.isLoaded\r\n        && (this.imagePreloader.loadedImages() || this.renderer.rendererType !== 'canvas')\r\n        && (this.imagePreloader.loadedFootages())\r\n  ) {\r\n    this.isLoaded = true;\r\n    var expressionsPlugin = getExpressionsPlugin();\r\n    if (expressionsPlugin) {\r\n      expressionsPlugin.initExpressions(this);\r\n    }\r\n    this.renderer.initItems();\r\n    setTimeout(function () {\r\n      this.trigger('DOMLoaded');\r\n    }.bind(this), 0);\r\n    this.gotoFrame();\r\n    if (this.autoplay) {\r\n      this.play();\r\n    }\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.resize = function (width, height) {\r\n  // Adding this validation for backwards compatibility in case an event object was being passed down\r\n  var _width = typeof width === 'number' ? width : undefined;\r\n  var _height = typeof height === 'number' ? height : undefined;\r\n  this.renderer.updateContainerSize(_width, _height);\r\n};\r\n\r\nAnimationItem.prototype.setSubframe = function (flag) {\r\n  this.isSubframeEnabled = !!flag;\r\n};\r\n\r\nAnimationItem.prototype.gotoFrame = function () {\r\n  this.currentFrame = this.isSubframeEnabled ? this.currentRawFrame : ~~this.currentRawFrame; // eslint-disable-line no-bitwise\r\n\r\n  if (this.timeCompleted !== this.totalFrames && this.currentFrame > this.timeCompleted) {\r\n    this.currentFrame = this.timeCompleted;\r\n  }\r\n  this.trigger('enterFrame');\r\n  this.renderFrame();\r\n  this.trigger('drawnFrame');\r\n};\r\n\r\nAnimationItem.prototype.renderFrame = function () {\r\n  if (this.isLoaded === false || !this.renderer) {\r\n    return;\r\n  }\r\n  try {\r\n    if (this.expressionsPlugin) {\r\n      this.expressionsPlugin.resetFrame();\r\n    }\r\n    this.renderer.renderFrame(this.currentFrame + this.firstFrame);\r\n  } catch (error) {\r\n    this.triggerRenderFrameError(error);\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.play = function (name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  if (this.isPaused === true) {\r\n    this.isPaused = false;\r\n    this.trigger('_play');\r\n    this.audioController.resume();\r\n    if (this._idle) {\r\n      this._idle = false;\r\n      this.trigger('_active');\r\n    }\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.pause = function (name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  if (this.isPaused === false) {\r\n    this.isPaused = true;\r\n    this.trigger('_pause');\r\n    this._idle = true;\r\n    this.trigger('_idle');\r\n    this.audioController.pause();\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.togglePause = function (name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  if (this.isPaused === true) {\r\n    this.play();\r\n  } else {\r\n    this.pause();\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.stop = function (name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  this.pause();\r\n  this.playCount = 0;\r\n  this._completedLoop = false;\r\n  this.setCurrentRawFrameValue(0);\r\n};\r\n\r\nAnimationItem.prototype.getMarkerData = function (markerName) {\r\n  var marker;\r\n  for (var i = 0; i < this.markers.length; i += 1) {\r\n    marker = this.markers[i];\r\n    if (marker.payload && marker.payload.name === markerName) {\r\n      return marker;\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\nAnimationItem.prototype.goToAndStop = function (value, isFrame, name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  var numValue = Number(value);\r\n  if (isNaN(numValue)) {\r\n    var marker = this.getMarkerData(value);\r\n    if (marker) {\r\n      this.goToAndStop(marker.time, true);\r\n    }\r\n  } else if (isFrame) {\r\n    this.setCurrentRawFrameValue(value);\r\n  } else {\r\n    this.setCurrentRawFrameValue(value * this.frameModifier);\r\n  }\r\n  this.pause();\r\n};\r\n\r\nAnimationItem.prototype.goToAndPlay = function (value, isFrame, name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  var numValue = Number(value);\r\n  if (isNaN(numValue)) {\r\n    var marker = this.getMarkerData(value);\r\n    if (marker) {\r\n      if (!marker.duration) {\r\n        this.goToAndStop(marker.time, true);\r\n      } else {\r\n        this.playSegments([marker.time, marker.time + marker.duration], true);\r\n      }\r\n    }\r\n  } else {\r\n    this.goToAndStop(numValue, isFrame, name);\r\n  }\r\n  this.play();\r\n};\r\n\r\nAnimationItem.prototype.advanceTime = function (value) {\r\n  if (this.isPaused === true || this.isLoaded === false) {\r\n    return;\r\n  }\r\n  var nextValue = this.currentRawFrame + value * this.frameModifier;\r\n  var _isComplete = false;\r\n  // Checking if nextValue > totalFrames - 1 for addressing non looping and looping animations.\r\n  // If animation won't loop, it should stop at totalFrames - 1. If it will loop it should complete the last frame and then loop.\r\n  if (nextValue >= this.totalFrames - 1 && this.frameModifier > 0) {\r\n    if (!this.loop || this.playCount === this.loop) {\r\n      if (!this.checkSegments(nextValue > this.totalFrames ? nextValue % this.totalFrames : 0)) {\r\n        _isComplete = true;\r\n        nextValue = this.totalFrames - 1;\r\n      }\r\n    } else if (nextValue >= this.totalFrames) {\r\n      this.playCount += 1;\r\n      if (!this.checkSegments(nextValue % this.totalFrames)) {\r\n        this.setCurrentRawFrameValue(nextValue % this.totalFrames);\r\n        this._completedLoop = true;\r\n        this.trigger('loopComplete');\r\n      }\r\n    } else {\r\n      this.setCurrentRawFrameValue(nextValue);\r\n    }\r\n  } else if (nextValue < 0) {\r\n    if (!this.checkSegments(nextValue % this.totalFrames)) {\r\n      if (this.loop && !(this.playCount-- <= 0 && this.loop !== true)) { // eslint-disable-line no-plusplus\r\n        this.setCurrentRawFrameValue(this.totalFrames + (nextValue % this.totalFrames));\r\n        if (!this._completedLoop) {\r\n          this._completedLoop = true;\r\n        } else {\r\n          this.trigger('loopComplete');\r\n        }\r\n      } else {\r\n        _isComplete = true;\r\n        nextValue = 0;\r\n      }\r\n    }\r\n  } else {\r\n    this.setCurrentRawFrameValue(nextValue);\r\n  }\r\n  if (_isComplete) {\r\n    this.setCurrentRawFrameValue(nextValue);\r\n    this.pause();\r\n    this.trigger('complete');\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.adjustSegment = function (arr, offset) {\r\n  this.playCount = 0;\r\n  if (arr[1] < arr[0]) {\r\n    if (this.frameModifier > 0) {\r\n      if (this.playSpeed < 0) {\r\n        this.setSpeed(-this.playSpeed);\r\n      } else {\r\n        this.setDirection(-1);\r\n      }\r\n    }\r\n    this.totalFrames = arr[0] - arr[1];\r\n    this.timeCompleted = this.totalFrames;\r\n    this.firstFrame = arr[1];\r\n    this.setCurrentRawFrameValue(this.totalFrames - 0.001 - offset);\r\n  } else if (arr[1] > arr[0]) {\r\n    if (this.frameModifier < 0) {\r\n      if (this.playSpeed < 0) {\r\n        this.setSpeed(-this.playSpeed);\r\n      } else {\r\n        this.setDirection(1);\r\n      }\r\n    }\r\n    this.totalFrames = arr[1] - arr[0];\r\n    this.timeCompleted = this.totalFrames;\r\n    this.firstFrame = arr[0];\r\n    this.setCurrentRawFrameValue(0.001 + offset);\r\n  }\r\n  this.trigger('segmentStart');\r\n};\r\nAnimationItem.prototype.setSegment = function (init, end) {\r\n  var pendingFrame = -1;\r\n  if (this.isPaused) {\r\n    if (this.currentRawFrame + this.firstFrame < init) {\r\n      pendingFrame = init;\r\n    } else if (this.currentRawFrame + this.firstFrame > end) {\r\n      pendingFrame = end - init;\r\n    }\r\n  }\r\n\r\n  this.firstFrame = init;\r\n  this.totalFrames = end - init;\r\n  this.timeCompleted = this.totalFrames;\r\n  if (pendingFrame !== -1) {\r\n    this.goToAndStop(pendingFrame, true);\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.playSegments = function (arr, forceFlag) {\r\n  if (forceFlag) {\r\n    this.segments.length = 0;\r\n  }\r\n  if (typeof arr[0] === 'object') {\r\n    var i;\r\n    var len = arr.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      this.segments.push(arr[i]);\r\n    }\r\n  } else {\r\n    this.segments.push(arr);\r\n  }\r\n  if (this.segments.length && forceFlag) {\r\n    this.adjustSegment(this.segments.shift(), 0);\r\n  }\r\n  if (this.isPaused) {\r\n    this.play();\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.resetSegments = function (forceFlag) {\r\n  this.segments.length = 0;\r\n  this.segments.push([this.animationData.ip, this.animationData.op]);\r\n  if (forceFlag) {\r\n    this.checkSegments(0);\r\n  }\r\n};\r\nAnimationItem.prototype.checkSegments = function (offset) {\r\n  if (this.segments.length) {\r\n    this.adjustSegment(this.segments.shift(), offset);\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nAnimationItem.prototype.destroy = function (name) {\r\n  if ((name && this.name !== name) || !this.renderer) {\r\n    return;\r\n  }\r\n  this.renderer.destroy();\r\n  this.imagePreloader.destroy();\r\n  this.trigger('destroy');\r\n  this._cbs = null;\r\n  this.onEnterFrame = null;\r\n  this.onLoopComplete = null;\r\n  this.onComplete = null;\r\n  this.onSegmentStart = null;\r\n  this.onDestroy = null;\r\n  this.renderer = null;\r\n  this.expressionsPlugin = null;\r\n  this.imagePreloader = null;\r\n  this.projectInterface = null;\r\n};\r\n\r\nAnimationItem.prototype.setCurrentRawFrameValue = function (value) {\r\n  this.currentRawFrame = value;\r\n  this.gotoFrame();\r\n};\r\n\r\nAnimationItem.prototype.setSpeed = function (val) {\r\n  this.playSpeed = val;\r\n  this.updaFrameModifier();\r\n};\r\n\r\nAnimationItem.prototype.setDirection = function (val) {\r\n  this.playDirection = val < 0 ? -1 : 1;\r\n  this.updaFrameModifier();\r\n};\r\n\r\nAnimationItem.prototype.setLoop = function (isLooping) {\r\n  this.loop = isLooping;\r\n};\r\n\r\nAnimationItem.prototype.setVolume = function (val, name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  this.audioController.setVolume(val);\r\n};\r\n\r\nAnimationItem.prototype.getVolume = function () {\r\n  return this.audioController.getVolume();\r\n};\r\n\r\nAnimationItem.prototype.mute = function (name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  this.audioController.mute();\r\n};\r\n\r\nAnimationItem.prototype.unmute = function (name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  this.audioController.unmute();\r\n};\r\n\r\nAnimationItem.prototype.updaFrameModifier = function () {\r\n  this.frameModifier = this.frameMult * this.playSpeed * this.playDirection;\r\n  this.audioController.setRate(this.playSpeed * this.playDirection);\r\n};\r\n\r\nAnimationItem.prototype.getPath = function () {\r\n  return this.path;\r\n};\r\n\r\nAnimationItem.prototype.getAssetsPath = function (assetData) {\r\n  var path = '';\r\n  if (assetData.e) {\r\n    path = assetData.p;\r\n  } else if (this.assetsPath) {\r\n    var imagePath = assetData.p;\r\n    if (imagePath.indexOf('images/') !== -1) {\r\n      imagePath = imagePath.split('/')[1];\r\n    }\r\n    path = this.assetsPath + imagePath;\r\n  } else {\r\n    path = this.path;\r\n    path += assetData.u ? assetData.u : '';\r\n    path += assetData.p;\r\n  }\r\n  return path;\r\n};\r\n\r\nAnimationItem.prototype.getAssetData = function (id) {\r\n  var i = 0;\r\n  var len = this.assets.length;\r\n  while (i < len) {\r\n    if (id === this.assets[i].id) {\r\n      return this.assets[i];\r\n    }\r\n    i += 1;\r\n  }\r\n  return null;\r\n};\r\n\r\nAnimationItem.prototype.hide = function () {\r\n  this.renderer.hide();\r\n};\r\n\r\nAnimationItem.prototype.show = function () {\r\n  this.renderer.show();\r\n};\r\n\r\nAnimationItem.prototype.getDuration = function (isFrame) {\r\n  return isFrame ? this.totalFrames : this.totalFrames / this.frameRate;\r\n};\r\n\r\nAnimationItem.prototype.updateDocumentData = function (path, documentData, index) {\r\n  try {\r\n    var element = this.renderer.getElementByPath(path);\r\n    element.updateDocumentData(documentData, index);\r\n  } catch (error) {\r\n    // TODO: decide how to handle catch case\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.trigger = function (name) {\r\n  if (this._cbs && this._cbs[name]) {\r\n    switch (name) {\r\n      case 'enterFrame':\r\n        this.triggerEvent(name, new BMEnterFrameEvent(name, this.currentFrame, this.totalFrames, this.frameModifier));\r\n        break;\r\n      case 'drawnFrame':\r\n        this.drawnFrameEvent.currentTime = this.currentFrame;\r\n        this.drawnFrameEvent.totalTime = this.totalFrames;\r\n        this.drawnFrameEvent.direction = this.frameModifier;\r\n        this.triggerEvent(name, this.drawnFrameEvent);\r\n        break;\r\n      case 'loopComplete':\r\n        this.triggerEvent(name, new BMCompleteLoopEvent(name, this.loop, this.playCount, this.frameMult));\r\n        break;\r\n      case 'complete':\r\n        this.triggerEvent(name, new BMCompleteEvent(name, this.frameMult));\r\n        break;\r\n      case 'segmentStart':\r\n        this.triggerEvent(name, new BMSegmentStartEvent(name, this.firstFrame, this.totalFrames));\r\n        break;\r\n      case 'destroy':\r\n        this.triggerEvent(name, new BMDestroyEvent(name, this));\r\n        break;\r\n      default:\r\n        this.triggerEvent(name);\r\n    }\r\n  }\r\n  if (name === 'enterFrame' && this.onEnterFrame) {\r\n    this.onEnterFrame.call(this, new BMEnterFrameEvent(name, this.currentFrame, this.totalFrames, this.frameMult));\r\n  }\r\n  if (name === 'loopComplete' && this.onLoopComplete) {\r\n    this.onLoopComplete.call(this, new BMCompleteLoopEvent(name, this.loop, this.playCount, this.frameMult));\r\n  }\r\n  if (name === 'complete' && this.onComplete) {\r\n    this.onComplete.call(this, new BMCompleteEvent(name, this.frameMult));\r\n  }\r\n  if (name === 'segmentStart' && this.onSegmentStart) {\r\n    this.onSegmentStart.call(this, new BMSegmentStartEvent(name, this.firstFrame, this.totalFrames));\r\n  }\r\n  if (name === 'destroy' && this.onDestroy) {\r\n    this.onDestroy.call(this, new BMDestroyEvent(name, this));\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.triggerRenderFrameError = function (nativeError) {\r\n  var error = new BMRenderFrameErrorEvent(nativeError, this.currentFrame);\r\n  this.triggerEvent('error', error);\r\n\r\n  if (this.onError) {\r\n    this.onError.call(this, error);\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.triggerConfigError = function (nativeError) {\r\n  var error = new BMConfigErrorEvent(nativeError, this.currentFrame);\r\n  this.triggerEvent('error', error);\r\n\r\n  if (this.onError) {\r\n    this.onError.call(this, error);\r\n  }\r\n};\n\nconst animationManager = (function () {\r\n  var moduleOb = {};\r\n  var registeredAnimations = [];\r\n  var initTime = 0;\r\n  var len = 0;\r\n  var playingAnimationsNum = 0;\r\n  var _stopped = true;\r\n  var _isFrozen = false;\r\n\r\n  function removeElement(ev) {\r\n    var i = 0;\r\n    var animItem = ev.target;\r\n    while (i < len) {\r\n      if (registeredAnimations[i].animation === animItem) {\r\n        registeredAnimations.splice(i, 1);\r\n        i -= 1;\r\n        len -= 1;\r\n        if (!animItem.isPaused) {\r\n          subtractPlayingCount();\r\n        }\r\n      }\r\n      i += 1;\r\n    }\r\n  }\r\n\r\n  function registerAnimation(element, animationData) {\r\n    if (!element) {\r\n      return null;\r\n    }\r\n    var i = 0;\r\n    while (i < len) {\r\n      if (registeredAnimations[i].elem === element && registeredAnimations[i].elem !== null) {\r\n        return registeredAnimations[i].animation;\r\n      }\r\n      i += 1;\r\n    }\r\n    var animItem = new AnimationItem();\r\n    setupAnimation(animItem, element);\r\n    animItem.setData(element, animationData);\r\n    return animItem;\r\n  }\r\n\r\n  function getRegisteredAnimations() {\r\n    var i;\r\n    var lenAnims = registeredAnimations.length;\r\n    var animations = [];\r\n    for (i = 0; i < lenAnims; i += 1) {\r\n      animations.push(registeredAnimations[i].animation);\r\n    }\r\n    return animations;\r\n  }\r\n\r\n  function addPlayingCount() {\r\n    playingAnimationsNum += 1;\r\n    activate();\r\n  }\r\n\r\n  function subtractPlayingCount() {\r\n    playingAnimationsNum -= 1;\r\n  }\r\n\r\n  function setupAnimation(animItem, element) {\r\n    animItem.addEventListener('destroy', removeElement);\r\n    animItem.addEventListener('_active', addPlayingCount);\r\n    animItem.addEventListener('_idle', subtractPlayingCount);\r\n    registeredAnimations.push({ elem: element, animation: animItem });\r\n    len += 1;\r\n  }\r\n\r\n  function loadAnimation(params) {\r\n    var animItem = new AnimationItem();\r\n    setupAnimation(animItem, null);\r\n    animItem.setParams(params);\r\n    return animItem;\r\n  }\r\n\r\n  function setSpeed(val, animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.setSpeed(val, animation);\r\n    }\r\n  }\r\n\r\n  function setDirection(val, animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.setDirection(val, animation);\r\n    }\r\n  }\r\n\r\n  function play(animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.play(animation);\r\n    }\r\n  }\r\n  function resume(nowTime) {\r\n    var elapsedTime = nowTime - initTime;\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.advanceTime(elapsedTime);\r\n    }\r\n    initTime = nowTime;\r\n    if (playingAnimationsNum && !_isFrozen) {\r\n      window.requestAnimationFrame(resume);\r\n    } else {\r\n      _stopped = true;\r\n    }\r\n  }\r\n\r\n  function first(nowTime) {\r\n    initTime = nowTime;\r\n    window.requestAnimationFrame(resume);\r\n  }\r\n\r\n  function pause(animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.pause(animation);\r\n    }\r\n  }\r\n\r\n  function goToAndStop(value, isFrame, animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.goToAndStop(value, isFrame, animation);\r\n    }\r\n  }\r\n\r\n  function stop(animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.stop(animation);\r\n    }\r\n  }\r\n\r\n  function togglePause(animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.togglePause(animation);\r\n    }\r\n  }\r\n\r\n  function destroy(animation) {\r\n    var i;\r\n    for (i = (len - 1); i >= 0; i -= 1) {\r\n      registeredAnimations[i].animation.destroy(animation);\r\n    }\r\n  }\r\n\r\n  function searchAnimations(animationData, standalone, renderer) {\r\n    var animElements = [].concat([].slice.call(document.getElementsByClassName('lottie')),\r\n      [].slice.call(document.getElementsByClassName('bodymovin')));\r\n    var i;\r\n    var lenAnims = animElements.length;\r\n    for (i = 0; i < lenAnims; i += 1) {\r\n      if (renderer) {\r\n        animElements[i].setAttribute('data-bm-type', renderer);\r\n      }\r\n      registerAnimation(animElements[i], animationData);\r\n    }\r\n    if (standalone && lenAnims === 0) {\r\n      if (!renderer) {\r\n        renderer = 'svg';\r\n      }\r\n      var body = document.getElementsByTagName('body')[0];\r\n      body.innerText = '';\r\n      var div = createTag('div');\r\n      div.style.width = '100%';\r\n      div.style.height = '100%';\r\n      div.setAttribute('data-bm-type', renderer);\r\n      body.appendChild(div);\r\n      registerAnimation(div, animationData);\r\n    }\r\n  }\r\n\r\n  function resize() {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.resize();\r\n    }\r\n  }\r\n\r\n  function activate() {\r\n    if (!_isFrozen && playingAnimationsNum) {\r\n      if (_stopped) {\r\n        window.requestAnimationFrame(first);\r\n        _stopped = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  function freeze() {\r\n    _isFrozen = true;\r\n  }\r\n\r\n  function unfreeze() {\r\n    _isFrozen = false;\r\n    activate();\r\n  }\r\n\r\n  function setVolume(val, animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.setVolume(val, animation);\r\n    }\r\n  }\r\n\r\n  function mute(animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.mute(animation);\r\n    }\r\n  }\r\n\r\n  function unmute(animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.unmute(animation);\r\n    }\r\n  }\r\n\r\n  moduleOb.registerAnimation = registerAnimation;\r\n  moduleOb.loadAnimation = loadAnimation;\r\n  moduleOb.setSpeed = setSpeed;\r\n  moduleOb.setDirection = setDirection;\r\n  moduleOb.play = play;\r\n  moduleOb.pause = pause;\r\n  moduleOb.stop = stop;\r\n  moduleOb.togglePause = togglePause;\r\n  moduleOb.searchAnimations = searchAnimations;\r\n  moduleOb.resize = resize;\r\n  // moduleOb.start = start;\r\n  moduleOb.goToAndStop = goToAndStop;\r\n  moduleOb.destroy = destroy;\r\n  moduleOb.freeze = freeze;\r\n  moduleOb.unfreeze = unfreeze;\r\n  moduleOb.setVolume = setVolume;\r\n  moduleOb.mute = mute;\r\n  moduleOb.unmute = unmute;\r\n  moduleOb.getRegisteredAnimations = getRegisteredAnimations;\r\n  return moduleOb;\r\n}());\n\n/* eslint-disable */\r\nconst BezierFactory = (function () {\r\n  /**\r\n     * BezierEasing - use bezier curve for transition easing function\r\n     * by Gaëtan Renaudeau 2014 - 2015 – MIT License\r\n     *\r\n     * Credits: is based on Firefox's nsSMILKeySpline.cpp\r\n     * Usage:\r\n     * var spline = BezierEasing([ 0.25, 0.1, 0.25, 1.0 ])\r\n     * spline.get(x) => returns the easing value | x must be in [0, 1] range\r\n     *\r\n     */\r\n\r\n  var ob = {};\r\n  ob.getBezierEasing = getBezierEasing;\r\n  var beziers = {};\r\n\r\n  function getBezierEasing(a, b, c, d, nm) {\r\n    var str = nm || ('bez_' + a + '_' + b + '_' + c + '_' + d).replace(/\\./g, 'p');\r\n    if (beziers[str]) {\r\n      return beziers[str];\r\n    }\r\n    var bezEasing = new BezierEasing([a, b, c, d]);\r\n    beziers[str] = bezEasing;\r\n    return bezEasing;\r\n  }\r\n\r\n  // These values are established by empiricism with tests (tradeoff: performance VS precision)\r\n  var NEWTON_ITERATIONS = 4;\r\n  var NEWTON_MIN_SLOPE = 0.001;\r\n  var SUBDIVISION_PRECISION = 0.0000001;\r\n  var SUBDIVISION_MAX_ITERATIONS = 10;\r\n\r\n  var kSplineTableSize = 11;\r\n  var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\r\n\r\n  var float32ArraySupported = typeof Float32Array === 'function';\r\n\r\n  function A(aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\r\n  function B(aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\r\n  function C(aA1) { return 3.0 * aA1; }\r\n\r\n  // Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\r\n  function calcBezier(aT, aA1, aA2) {\r\n    return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\r\n  }\r\n\r\n  // Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\r\n  function getSlope(aT, aA1, aA2) {\r\n    return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\r\n  }\r\n\r\n  function binarySubdivide(aX, aA, aB, mX1, mX2) {\r\n    var currentX,\r\n      currentT,\r\n      i = 0;\r\n    do {\r\n      currentT = aA + (aB - aA) / 2.0;\r\n      currentX = calcBezier(currentT, mX1, mX2) - aX;\r\n      if (currentX > 0.0) {\r\n        aB = currentT;\r\n      } else {\r\n        aA = currentT;\r\n      }\r\n    } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\r\n    return currentT;\r\n  }\r\n\r\n  function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\r\n    for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\r\n      var currentSlope = getSlope(aGuessT, mX1, mX2);\r\n      if (currentSlope === 0.0) return aGuessT;\r\n      var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\r\n      aGuessT -= currentX / currentSlope;\r\n    }\r\n    return aGuessT;\r\n  }\r\n\r\n  /**\r\n     * points is an array of [ mX1, mY1, mX2, mY2 ]\r\n     */\r\n  function BezierEasing(points) {\r\n    this._p = points;\r\n    this._mSampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\r\n    this._precomputed = false;\r\n\r\n    this.get = this.get.bind(this);\r\n  }\r\n\r\n  BezierEasing.prototype = {\r\n\r\n    get: function (x) {\r\n      var mX1 = this._p[0],\r\n        mY1 = this._p[1],\r\n        mX2 = this._p[2],\r\n        mY2 = this._p[3];\r\n      if (!this._precomputed) this._precompute();\r\n      if (mX1 === mY1 && mX2 === mY2) return x; // linear\r\n      // Because JavaScript number are imprecise, we should guarantee the extremes are right.\r\n      if (x === 0) return 0;\r\n      if (x === 1) return 1;\r\n      return calcBezier(this._getTForX(x), mY1, mY2);\r\n    },\r\n\r\n    // Private part\r\n\r\n    _precompute: function () {\r\n      var mX1 = this._p[0],\r\n        mY1 = this._p[1],\r\n        mX2 = this._p[2],\r\n        mY2 = this._p[3];\r\n      this._precomputed = true;\r\n      if (mX1 !== mY1 || mX2 !== mY2) { this._calcSampleValues(); }\r\n    },\r\n\r\n    _calcSampleValues: function () {\r\n      var mX1 = this._p[0],\r\n        mX2 = this._p[2];\r\n      for (var i = 0; i < kSplineTableSize; ++i) {\r\n        this._mSampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\r\n      }\r\n    },\r\n\r\n    /**\r\n         * getTForX chose the fastest heuristic to determine the percentage value precisely from a given X projection.\r\n         */\r\n    _getTForX: function (aX) {\r\n      var mX1 = this._p[0],\r\n        mX2 = this._p[2],\r\n        mSampleValues = this._mSampleValues;\r\n\r\n      var intervalStart = 0.0;\r\n      var currentSample = 1;\r\n      var lastSample = kSplineTableSize - 1;\r\n\r\n      for (; currentSample !== lastSample && mSampleValues[currentSample] <= aX; ++currentSample) {\r\n        intervalStart += kSampleStepSize;\r\n      }\r\n      --currentSample;\r\n\r\n      // Interpolate to provide an initial guess for t\r\n      var dist = (aX - mSampleValues[currentSample]) / (mSampleValues[currentSample + 1] - mSampleValues[currentSample]);\r\n      var guessForT = intervalStart + dist * kSampleStepSize;\r\n\r\n      var initialSlope = getSlope(guessForT, mX1, mX2);\r\n      if (initialSlope >= NEWTON_MIN_SLOPE) {\r\n        return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\r\n      } if (initialSlope === 0.0) {\r\n        return guessForT;\r\n      }\r\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\r\n    },\r\n  };\r\n\r\n  return ob;\r\n}());\n\nconst pooling = (function () {\r\n  function double(arr) {\r\n    return arr.concat(createSizedArray(arr.length));\r\n  }\r\n\r\n  return {\r\n    double: double,\r\n  };\r\n}());\n\nconst poolFactory = (function () {\r\n  return function (initialLength, _create, _release) {\r\n    var _length = 0;\r\n    var _maxLength = initialLength;\r\n    var pool = createSizedArray(_maxLength);\r\n\r\n    var ob = {\r\n      newElement: newElement,\r\n      release: release,\r\n    };\r\n\r\n    function newElement() {\r\n      var element;\r\n      if (_length) {\r\n        _length -= 1;\r\n        element = pool[_length];\r\n      } else {\r\n        element = _create();\r\n      }\r\n      return element;\r\n    }\r\n\r\n    function release(element) {\r\n      if (_length === _maxLength) {\r\n        pool = pooling.double(pool);\r\n        _maxLength *= 2;\r\n      }\r\n      if (_release) {\r\n        _release(element);\r\n      }\r\n      pool[_length] = element;\r\n      _length += 1;\r\n    }\r\n\r\n    return ob;\r\n  };\r\n}());\n\nconst bezierLengthPool = (function () {\r\n  function create() {\r\n    return {\r\n      addedLength: 0,\r\n      percents: createTypedArray('float32', getDefaultCurveSegments()),\r\n      lengths: createTypedArray('float32', getDefaultCurveSegments()),\r\n    };\r\n  }\r\n  return poolFactory(8, create);\r\n}());\n\nconst segmentsLengthPool = (function () {\r\n  function create() {\r\n    return {\r\n      lengths: [],\r\n      totalLength: 0,\r\n    };\r\n  }\r\n\r\n  function release(element) {\r\n    var i;\r\n    var len = element.lengths.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      bezierLengthPool.release(element.lengths[i]);\r\n    }\r\n    element.lengths.length = 0;\r\n  }\r\n\r\n  return poolFactory(8, create, release);\r\n}());\n\nfunction bezFunction() {\r\n  var math = Math;\r\n\r\n  function pointOnLine2D(x1, y1, x2, y2, x3, y3) {\r\n    var det1 = (x1 * y2) + (y1 * x3) + (x2 * y3) - (x3 * y2) - (y3 * x1) - (x2 * y1);\r\n    return det1 > -0.001 && det1 < 0.001;\r\n  }\r\n\r\n  function pointOnLine3D(x1, y1, z1, x2, y2, z2, x3, y3, z3) {\r\n    if (z1 === 0 && z2 === 0 && z3 === 0) {\r\n      return pointOnLine2D(x1, y1, x2, y2, x3, y3);\r\n    }\r\n    var dist1 = math.sqrt(math.pow(x2 - x1, 2) + math.pow(y2 - y1, 2) + math.pow(z2 - z1, 2));\r\n    var dist2 = math.sqrt(math.pow(x3 - x1, 2) + math.pow(y3 - y1, 2) + math.pow(z3 - z1, 2));\r\n    var dist3 = math.sqrt(math.pow(x3 - x2, 2) + math.pow(y3 - y2, 2) + math.pow(z3 - z2, 2));\r\n    var diffDist;\r\n    if (dist1 > dist2) {\r\n      if (dist1 > dist3) {\r\n        diffDist = dist1 - dist2 - dist3;\r\n      } else {\r\n        diffDist = dist3 - dist2 - dist1;\r\n      }\r\n    } else if (dist3 > dist2) {\r\n      diffDist = dist3 - dist2 - dist1;\r\n    } else {\r\n      diffDist = dist2 - dist1 - dist3;\r\n    }\r\n    return diffDist > -0.0001 && diffDist < 0.0001;\r\n  }\r\n\r\n  var getBezierLength = (function () {\r\n    return function (pt1, pt2, pt3, pt4) {\r\n      var curveSegments = getDefaultCurveSegments();\r\n      var k;\r\n      var i;\r\n      var len;\r\n      var ptCoord;\r\n      var perc;\r\n      var addedLength = 0;\r\n      var ptDistance;\r\n      var point = [];\r\n      var lastPoint = [];\r\n      var lengthData = bezierLengthPool.newElement();\r\n      len = pt3.length;\r\n      for (k = 0; k < curveSegments; k += 1) {\r\n        perc = k / (curveSegments - 1);\r\n        ptDistance = 0;\r\n        for (i = 0; i < len; i += 1) {\r\n          ptCoord = bmPow(1 - perc, 3) * pt1[i] + 3 * bmPow(1 - perc, 2) * perc * pt3[i] + 3 * (1 - perc) * bmPow(perc, 2) * pt4[i] + bmPow(perc, 3) * pt2[i];\r\n          point[i] = ptCoord;\r\n          if (lastPoint[i] !== null) {\r\n            ptDistance += bmPow(point[i] - lastPoint[i], 2);\r\n          }\r\n          lastPoint[i] = point[i];\r\n        }\r\n        if (ptDistance) {\r\n          ptDistance = bmSqrt(ptDistance);\r\n          addedLength += ptDistance;\r\n        }\r\n        lengthData.percents[k] = perc;\r\n        lengthData.lengths[k] = addedLength;\r\n      }\r\n      lengthData.addedLength = addedLength;\r\n      return lengthData;\r\n    };\r\n  }());\r\n\r\n  function getSegmentsLength(shapeData) {\r\n    var segmentsLength = segmentsLengthPool.newElement();\r\n    var closed = shapeData.c;\r\n    var pathV = shapeData.v;\r\n    var pathO = shapeData.o;\r\n    var pathI = shapeData.i;\r\n    var i;\r\n    var len = shapeData._length;\r\n    var lengths = segmentsLength.lengths;\r\n    var totalLength = 0;\r\n    for (i = 0; i < len - 1; i += 1) {\r\n      lengths[i] = getBezierLength(pathV[i], pathV[i + 1], pathO[i], pathI[i + 1]);\r\n      totalLength += lengths[i].addedLength;\r\n    }\r\n    if (closed && len) {\r\n      lengths[i] = getBezierLength(pathV[i], pathV[0], pathO[i], pathI[0]);\r\n      totalLength += lengths[i].addedLength;\r\n    }\r\n    segmentsLength.totalLength = totalLength;\r\n    return segmentsLength;\r\n  }\r\n\r\n  function BezierData(length) {\r\n    this.segmentLength = 0;\r\n    this.points = new Array(length);\r\n  }\r\n\r\n  function PointData(partial, point) {\r\n    this.partialLength = partial;\r\n    this.point = point;\r\n  }\r\n\r\n  var buildBezierData = (function () {\r\n    var storedData = {};\r\n\r\n    return function (pt1, pt2, pt3, pt4) {\r\n      var bezierName = (pt1[0] + '_' + pt1[1] + '_' + pt2[0] + '_' + pt2[1] + '_' + pt3[0] + '_' + pt3[1] + '_' + pt4[0] + '_' + pt4[1]).replace(/\\./g, 'p');\r\n      if (!storedData[bezierName]) {\r\n        var curveSegments = getDefaultCurveSegments();\r\n        var k;\r\n        var i;\r\n        var len;\r\n        var ptCoord;\r\n        var perc;\r\n        var addedLength = 0;\r\n        var ptDistance;\r\n        var point;\r\n        var lastPoint = null;\r\n        if (pt1.length === 2 && (pt1[0] !== pt2[0] || pt1[1] !== pt2[1]) && pointOnLine2D(pt1[0], pt1[1], pt2[0], pt2[1], pt1[0] + pt3[0], pt1[1] + pt3[1]) && pointOnLine2D(pt1[0], pt1[1], pt2[0], pt2[1], pt2[0] + pt4[0], pt2[1] + pt4[1])) {\r\n          curveSegments = 2;\r\n        }\r\n        var bezierData = new BezierData(curveSegments);\r\n        len = pt3.length;\r\n        for (k = 0; k < curveSegments; k += 1) {\r\n          point = createSizedArray(len);\r\n          perc = k / (curveSegments - 1);\r\n          ptDistance = 0;\r\n          for (i = 0; i < len; i += 1) {\r\n            ptCoord = bmPow(1 - perc, 3) * pt1[i] + 3 * bmPow(1 - perc, 2) * perc * (pt1[i] + pt3[i]) + 3 * (1 - perc) * bmPow(perc, 2) * (pt2[i] + pt4[i]) + bmPow(perc, 3) * pt2[i];\r\n            point[i] = ptCoord;\r\n            if (lastPoint !== null) {\r\n              ptDistance += bmPow(point[i] - lastPoint[i], 2);\r\n            }\r\n          }\r\n          ptDistance = bmSqrt(ptDistance);\r\n          addedLength += ptDistance;\r\n          bezierData.points[k] = new PointData(ptDistance, point);\r\n          lastPoint = point;\r\n        }\r\n        bezierData.segmentLength = addedLength;\r\n        storedData[bezierName] = bezierData;\r\n      }\r\n      return storedData[bezierName];\r\n    };\r\n  }());\r\n\r\n  function getDistancePerc(perc, bezierData) {\r\n    var percents = bezierData.percents;\r\n    var lengths = bezierData.lengths;\r\n    var len = percents.length;\r\n    var initPos = bmFloor((len - 1) * perc);\r\n    var lengthPos = perc * bezierData.addedLength;\r\n    var lPerc = 0;\r\n    if (initPos === len - 1 || initPos === 0 || lengthPos === lengths[initPos]) {\r\n      return percents[initPos];\r\n    }\r\n    var dir = lengths[initPos] > lengthPos ? -1 : 1;\r\n    var flag = true;\r\n    while (flag) {\r\n      if (lengths[initPos] <= lengthPos && lengths[initPos + 1] > lengthPos) {\r\n        lPerc = (lengthPos - lengths[initPos]) / (lengths[initPos + 1] - lengths[initPos]);\r\n        flag = false;\r\n      } else {\r\n        initPos += dir;\r\n      }\r\n      if (initPos < 0 || initPos >= len - 1) {\r\n        // FIX for TypedArrays that don't store floating point values with enough accuracy\r\n        if (initPos === len - 1) {\r\n          return percents[initPos];\r\n        }\r\n        flag = false;\r\n      }\r\n    }\r\n    return percents[initPos] + (percents[initPos + 1] - percents[initPos]) * lPerc;\r\n  }\r\n\r\n  function getPointInSegment(pt1, pt2, pt3, pt4, percent, bezierData) {\r\n    var t1 = getDistancePerc(percent, bezierData);\r\n    var u1 = 1 - t1;\r\n    var ptX = math.round((u1 * u1 * u1 * pt1[0] + (t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1) * pt3[0] + (t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1) * pt4[0] + t1 * t1 * t1 * pt2[0]) * 1000) / 1000;\r\n    var ptY = math.round((u1 * u1 * u1 * pt1[1] + (t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1) * pt3[1] + (t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1) * pt4[1] + t1 * t1 * t1 * pt2[1]) * 1000) / 1000;\r\n    return [ptX, ptY];\r\n  }\r\n\r\n  var bezierSegmentPoints = createTypedArray('float32', 8);\r\n\r\n  function getNewSegment(pt1, pt2, pt3, pt4, startPerc, endPerc, bezierData) {\r\n    if (startPerc < 0) {\r\n      startPerc = 0;\r\n    } else if (startPerc > 1) {\r\n      startPerc = 1;\r\n    }\r\n    var t0 = getDistancePerc(startPerc, bezierData);\r\n    endPerc = endPerc > 1 ? 1 : endPerc;\r\n    var t1 = getDistancePerc(endPerc, bezierData);\r\n    var i;\r\n    var len = pt1.length;\r\n    var u0 = 1 - t0;\r\n    var u1 = 1 - t1;\r\n    var u0u0u0 = u0 * u0 * u0;\r\n    var t0u0u0_3 = t0 * u0 * u0 * 3; // eslint-disable-line camelcase\r\n    var t0t0u0_3 = t0 * t0 * u0 * 3; // eslint-disable-line camelcase\r\n    var t0t0t0 = t0 * t0 * t0;\r\n    //\r\n    var u0u0u1 = u0 * u0 * u1;\r\n    var t0u0u1_3 = t0 * u0 * u1 + u0 * t0 * u1 + u0 * u0 * t1; // eslint-disable-line camelcase\r\n    var t0t0u1_3 = t0 * t0 * u1 + u0 * t0 * t1 + t0 * u0 * t1; // eslint-disable-line camelcase\r\n    var t0t0t1 = t0 * t0 * t1;\r\n    //\r\n    var u0u1u1 = u0 * u1 * u1;\r\n    var t0u1u1_3 = t0 * u1 * u1 + u0 * t1 * u1 + u0 * u1 * t1; // eslint-disable-line camelcase\r\n    var t0t1u1_3 = t0 * t1 * u1 + u0 * t1 * t1 + t0 * u1 * t1; // eslint-disable-line camelcase\r\n    var t0t1t1 = t0 * t1 * t1;\r\n    //\r\n    var u1u1u1 = u1 * u1 * u1;\r\n    var t1u1u1_3 = t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1; // eslint-disable-line camelcase\r\n    var t1t1u1_3 = t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1; // eslint-disable-line camelcase\r\n    var t1t1t1 = t1 * t1 * t1;\r\n    for (i = 0; i < len; i += 1) {\r\n      bezierSegmentPoints[i * 4] = math.round((u0u0u0 * pt1[i] + t0u0u0_3 * pt3[i] + t0t0u0_3 * pt4[i] + t0t0t0 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\r\n      bezierSegmentPoints[i * 4 + 1] = math.round((u0u0u1 * pt1[i] + t0u0u1_3 * pt3[i] + t0t0u1_3 * pt4[i] + t0t0t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\r\n      bezierSegmentPoints[i * 4 + 2] = math.round((u0u1u1 * pt1[i] + t0u1u1_3 * pt3[i] + t0t1u1_3 * pt4[i] + t0t1t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\r\n      bezierSegmentPoints[i * 4 + 3] = math.round((u1u1u1 * pt1[i] + t1u1u1_3 * pt3[i] + t1t1u1_3 * pt4[i] + t1t1t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\r\n    }\r\n\r\n    return bezierSegmentPoints;\r\n  }\r\n\r\n  return {\r\n    getSegmentsLength: getSegmentsLength,\r\n    getNewSegment: getNewSegment,\r\n    getPointInSegment: getPointInSegment,\r\n    buildBezierData: buildBezierData,\r\n    pointOnLine2D: pointOnLine2D,\r\n    pointOnLine3D: pointOnLine3D,\r\n  };\r\n}\r\n\r\nconst bez = bezFunction();\n\nvar initFrame = initialDefaultFrame;\r\nvar mathAbs = Math.abs;\r\n\r\nfunction interpolateValue(frameNum, caching) {\r\n  var offsetTime = this.offsetTime;\r\n  var newValue;\r\n  if (this.propType === 'multidimensional') {\r\n    newValue = createTypedArray('float32', this.pv.length);\r\n  }\r\n  var iterationIndex = caching.lastIndex;\r\n  var i = iterationIndex;\r\n  var len = this.keyframes.length - 1;\r\n  var flag = true;\r\n  var keyData;\r\n  var nextKeyData;\r\n  var keyframeMetadata;\r\n\r\n  while (flag) {\r\n    keyData = this.keyframes[i];\r\n    nextKeyData = this.keyframes[i + 1];\r\n    if (i === len - 1 && frameNum >= nextKeyData.t - offsetTime) {\r\n      if (keyData.h) {\r\n        keyData = nextKeyData;\r\n      }\r\n      iterationIndex = 0;\r\n      break;\r\n    }\r\n    if ((nextKeyData.t - offsetTime) > frameNum) {\r\n      iterationIndex = i;\r\n      break;\r\n    }\r\n    if (i < len - 1) {\r\n      i += 1;\r\n    } else {\r\n      iterationIndex = 0;\r\n      flag = false;\r\n    }\r\n  }\r\n  keyframeMetadata = this.keyframesMetadata[i] || {};\r\n\r\n  var k;\r\n  var kLen;\r\n  var perc;\r\n  var jLen;\r\n  var j;\r\n  var fnc;\r\n  var nextKeyTime = nextKeyData.t - offsetTime;\r\n  var keyTime = keyData.t - offsetTime;\r\n  var endValue;\r\n  if (keyData.to) {\r\n    if (!keyframeMetadata.bezierData) {\r\n      keyframeMetadata.bezierData = bez.buildBezierData(keyData.s, nextKeyData.s || keyData.e, keyData.to, keyData.ti);\r\n    }\r\n    var bezierData = keyframeMetadata.bezierData;\r\n    if (frameNum >= nextKeyTime || frameNum < keyTime) {\r\n      var ind = frameNum >= nextKeyTime ? bezierData.points.length - 1 : 0;\r\n      kLen = bezierData.points[ind].point.length;\r\n      for (k = 0; k < kLen; k += 1) {\r\n        newValue[k] = bezierData.points[ind].point[k];\r\n      }\r\n      // caching._lastKeyframeIndex = -1;\r\n    } else {\r\n      if (keyframeMetadata.__fnct) {\r\n        fnc = keyframeMetadata.__fnct;\r\n      } else {\r\n        fnc = BezierFactory.getBezierEasing(keyData.o.x, keyData.o.y, keyData.i.x, keyData.i.y, keyData.n).get;\r\n        keyframeMetadata.__fnct = fnc;\r\n      }\r\n      perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime));\r\n      var distanceInLine = bezierData.segmentLength * perc;\r\n\r\n      var segmentPerc;\r\n      var addedLength = (caching.lastFrame < frameNum && caching._lastKeyframeIndex === i) ? caching._lastAddedLength : 0;\r\n      j = (caching.lastFrame < frameNum && caching._lastKeyframeIndex === i) ? caching._lastPoint : 0;\r\n      flag = true;\r\n      jLen = bezierData.points.length;\r\n      while (flag) {\r\n        addedLength += bezierData.points[j].partialLength;\r\n        if (distanceInLine === 0 || perc === 0 || j === bezierData.points.length - 1) {\r\n          kLen = bezierData.points[j].point.length;\r\n          for (k = 0; k < kLen; k += 1) {\r\n            newValue[k] = bezierData.points[j].point[k];\r\n          }\r\n          break;\r\n        } else if (distanceInLine >= addedLength && distanceInLine < addedLength + bezierData.points[j + 1].partialLength) {\r\n          segmentPerc = (distanceInLine - addedLength) / bezierData.points[j + 1].partialLength;\r\n          kLen = bezierData.points[j].point.length;\r\n          for (k = 0; k < kLen; k += 1) {\r\n            newValue[k] = bezierData.points[j].point[k] + (bezierData.points[j + 1].point[k] - bezierData.points[j].point[k]) * segmentPerc;\r\n          }\r\n          break;\r\n        }\r\n        if (j < jLen - 1) {\r\n          j += 1;\r\n        } else {\r\n          flag = false;\r\n        }\r\n      }\r\n      caching._lastPoint = j;\r\n      caching._lastAddedLength = addedLength - bezierData.points[j].partialLength;\r\n      caching._lastKeyframeIndex = i;\r\n    }\r\n  } else {\r\n    var outX;\r\n    var outY;\r\n    var inX;\r\n    var inY;\r\n    var keyValue;\r\n    len = keyData.s.length;\r\n    endValue = nextKeyData.s || keyData.e;\r\n    if (this.sh && keyData.h !== 1) {\r\n      if (frameNum >= nextKeyTime) {\r\n        newValue[0] = endValue[0];\r\n        newValue[1] = endValue[1];\r\n        newValue[2] = endValue[2];\r\n      } else if (frameNum <= keyTime) {\r\n        newValue[0] = keyData.s[0];\r\n        newValue[1] = keyData.s[1];\r\n        newValue[2] = keyData.s[2];\r\n      } else {\r\n        var quatStart = createQuaternion(keyData.s);\r\n        var quatEnd = createQuaternion(endValue);\r\n        var time = (frameNum - keyTime) / (nextKeyTime - keyTime);\r\n        quaternionToEuler(newValue, slerp(quatStart, quatEnd, time));\r\n      }\r\n    } else {\r\n      for (i = 0; i < len; i += 1) {\r\n        if (keyData.h !== 1) {\r\n          if (frameNum >= nextKeyTime) {\r\n            perc = 1;\r\n          } else if (frameNum < keyTime) {\r\n            perc = 0;\r\n          } else {\r\n            if (keyData.o.x.constructor === Array) {\r\n              if (!keyframeMetadata.__fnct) {\r\n                keyframeMetadata.__fnct = [];\r\n              }\r\n              if (!keyframeMetadata.__fnct[i]) {\r\n                outX = keyData.o.x[i] === undefined ? keyData.o.x[0] : keyData.o.x[i];\r\n                outY = keyData.o.y[i] === undefined ? keyData.o.y[0] : keyData.o.y[i];\r\n                inX = keyData.i.x[i] === undefined ? keyData.i.x[0] : keyData.i.x[i];\r\n                inY = keyData.i.y[i] === undefined ? keyData.i.y[0] : keyData.i.y[i];\r\n                fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\r\n                keyframeMetadata.__fnct[i] = fnc;\r\n              } else {\r\n                fnc = keyframeMetadata.__fnct[i];\r\n              }\r\n            } else if (!keyframeMetadata.__fnct) {\r\n              outX = keyData.o.x;\r\n              outY = keyData.o.y;\r\n              inX = keyData.i.x;\r\n              inY = keyData.i.y;\r\n              fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\r\n              keyData.keyframeMetadata = fnc;\r\n            } else {\r\n              fnc = keyframeMetadata.__fnct;\r\n            }\r\n            perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime));\r\n          }\r\n        }\r\n\r\n        endValue = nextKeyData.s || keyData.e;\r\n        keyValue = keyData.h === 1 ? keyData.s[i] : keyData.s[i] + (endValue[i] - keyData.s[i]) * perc;\r\n\r\n        if (this.propType === 'multidimensional') {\r\n          newValue[i] = keyValue;\r\n        } else {\r\n          newValue = keyValue;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  caching.lastIndex = iterationIndex;\r\n  return newValue;\r\n}\r\n\r\n// based on @Toji's https://github.com/toji/gl-matrix/\r\nfunction slerp(a, b, t) {\r\n  var out = [];\r\n  var ax = a[0];\r\n  var ay = a[1];\r\n  var az = a[2];\r\n  var aw = a[3];\r\n  var bx = b[0];\r\n  var by = b[1];\r\n  var bz = b[2];\r\n  var bw = b[3];\r\n\r\n  var omega;\r\n  var cosom;\r\n  var sinom;\r\n  var scale0;\r\n  var scale1;\r\n\r\n  cosom = ax * bx + ay * by + az * bz + aw * bw;\r\n  if (cosom < 0.0) {\r\n    cosom = -cosom;\r\n    bx = -bx;\r\n    by = -by;\r\n    bz = -bz;\r\n    bw = -bw;\r\n  }\r\n  if ((1.0 - cosom) > 0.000001) {\r\n    omega = Math.acos(cosom);\r\n    sinom = Math.sin(omega);\r\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\r\n    scale1 = Math.sin(t * omega) / sinom;\r\n  } else {\r\n    scale0 = 1.0 - t;\r\n    scale1 = t;\r\n  }\r\n  out[0] = scale0 * ax + scale1 * bx;\r\n  out[1] = scale0 * ay + scale1 * by;\r\n  out[2] = scale0 * az + scale1 * bz;\r\n  out[3] = scale0 * aw + scale1 * bw;\r\n\r\n  return out;\r\n}\r\n\r\nfunction quaternionToEuler(out, quat) {\r\n  var qx = quat[0];\r\n  var qy = quat[1];\r\n  var qz = quat[2];\r\n  var qw = quat[3];\r\n  var heading = Math.atan2(2 * qy * qw - 2 * qx * qz, 1 - 2 * qy * qy - 2 * qz * qz);\r\n  var attitude = Math.asin(2 * qx * qy + 2 * qz * qw);\r\n  var bank = Math.atan2(2 * qx * qw - 2 * qy * qz, 1 - 2 * qx * qx - 2 * qz * qz);\r\n  out[0] = heading / degToRads;\r\n  out[1] = attitude / degToRads;\r\n  out[2] = bank / degToRads;\r\n}\r\n\r\nfunction createQuaternion(values) {\r\n  var heading = values[0] * degToRads;\r\n  var attitude = values[1] * degToRads;\r\n  var bank = values[2] * degToRads;\r\n  var c1 = Math.cos(heading / 2);\r\n  var c2 = Math.cos(attitude / 2);\r\n  var c3 = Math.cos(bank / 2);\r\n  var s1 = Math.sin(heading / 2);\r\n  var s2 = Math.sin(attitude / 2);\r\n  var s3 = Math.sin(bank / 2);\r\n  var w = c1 * c2 * c3 - s1 * s2 * s3;\r\n  var x = s1 * s2 * c3 + c1 * c2 * s3;\r\n  var y = s1 * c2 * c3 + c1 * s2 * s3;\r\n  var z = c1 * s2 * c3 - s1 * c2 * s3;\r\n\r\n  return [x, y, z, w];\r\n}\r\n\r\nfunction getValueAtCurrentTime() {\r\n  var frameNum = this.comp.renderedFrame - this.offsetTime;\r\n  var initTime = this.keyframes[0].t - this.offsetTime;\r\n  var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\r\n  if (!(frameNum === this._caching.lastFrame || (this._caching.lastFrame !== initFrame && ((this._caching.lastFrame >= endTime && frameNum >= endTime) || (this._caching.lastFrame < initTime && frameNum < initTime))))) {\r\n    if (this._caching.lastFrame >= frameNum) {\r\n      this._caching._lastKeyframeIndex = -1;\r\n      this._caching.lastIndex = 0;\r\n    }\r\n\r\n    var renderResult = this.interpolateValue(frameNum, this._caching);\r\n    this.pv = renderResult;\r\n  }\r\n  this._caching.lastFrame = frameNum;\r\n  return this.pv;\r\n}\r\n\r\nfunction setVValue(val) {\r\n  var multipliedValue;\r\n  if (this.propType === 'unidimensional') {\r\n    multipliedValue = val * this.mult;\r\n    if (mathAbs(this.v - multipliedValue) > 0.00001) {\r\n      this.v = multipliedValue;\r\n      this._mdf = true;\r\n    }\r\n  } else {\r\n    var i = 0;\r\n    var len = this.v.length;\r\n    while (i < len) {\r\n      multipliedValue = val[i] * this.mult;\r\n      if (mathAbs(this.v[i] - multipliedValue) > 0.00001) {\r\n        this.v[i] = multipliedValue;\r\n        this._mdf = true;\r\n      }\r\n      i += 1;\r\n    }\r\n  }\r\n}\r\n\r\nfunction processEffectsSequence() {\r\n  if (this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) {\r\n    return;\r\n  }\r\n  if (this.lock) {\r\n    this.setVValue(this.pv);\r\n    return;\r\n  }\r\n  this.lock = true;\r\n  this._mdf = this._isFirstFrame;\r\n  var i;\r\n  var len = this.effectsSequence.length;\r\n  var finalValue = this.kf ? this.pv : this.data.k;\r\n  for (i = 0; i < len; i += 1) {\r\n    finalValue = this.effectsSequence[i](finalValue);\r\n  }\r\n  this.setVValue(finalValue);\r\n  this._isFirstFrame = false;\r\n  this.lock = false;\r\n  this.frameId = this.elem.globalData.frameId;\r\n}\r\n\r\nfunction addEffect(effectFunction) {\r\n  this.effectsSequence.push(effectFunction);\r\n  this.container.addDynamicProperty(this);\r\n}\r\n\r\nfunction ValueProperty(elem, data, mult, container) {\r\n  this.propType = 'unidimensional';\r\n  this.mult = mult || 1;\r\n  this.data = data;\r\n  this.v = mult ? data.k * mult : data.k;\r\n  this.pv = data.k;\r\n  this._mdf = false;\r\n  this.elem = elem;\r\n  this.container = container;\r\n  this.comp = elem.comp;\r\n  this.k = false;\r\n  this.kf = false;\r\n  this.vel = 0;\r\n  this.effectsSequence = [];\r\n  this._isFirstFrame = true;\r\n  this.getValue = processEffectsSequence;\r\n  this.setVValue = setVValue;\r\n  this.addEffect = addEffect;\r\n}\r\n\r\nfunction MultiDimensionalProperty(elem, data, mult, container) {\r\n  this.propType = 'multidimensional';\r\n  this.mult = mult || 1;\r\n  this.data = data;\r\n  this._mdf = false;\r\n  this.elem = elem;\r\n  this.container = container;\r\n  this.comp = elem.comp;\r\n  this.k = false;\r\n  this.kf = false;\r\n  this.frameId = -1;\r\n  var i;\r\n  var len = data.k.length;\r\n  this.v = createTypedArray('float32', len);\r\n  this.pv = createTypedArray('float32', len);\r\n  this.vel = createTypedArray('float32', len);\r\n  for (i = 0; i < len; i += 1) {\r\n    this.v[i] = data.k[i] * this.mult;\r\n    this.pv[i] = data.k[i];\r\n  }\r\n  this._isFirstFrame = true;\r\n  this.effectsSequence = [];\r\n  this.getValue = processEffectsSequence;\r\n  this.setVValue = setVValue;\r\n  this.addEffect = addEffect;\r\n}\r\n\r\nfunction KeyframedValueProperty(elem, data, mult, container) {\r\n  this.propType = 'unidimensional';\r\n  this.keyframes = data.k;\r\n  this.keyframesMetadata = [];\r\n  this.offsetTime = elem.data.st;\r\n  this.frameId = -1;\r\n  this._caching = {\r\n    lastFrame: initFrame, lastIndex: 0, value: 0, _lastKeyframeIndex: -1,\r\n  };\r\n  this.k = true;\r\n  this.kf = true;\r\n  this.data = data;\r\n  this.mult = mult || 1;\r\n  this.elem = elem;\r\n  this.container = container;\r\n  this.comp = elem.comp;\r\n  this.v = initFrame;\r\n  this.pv = initFrame;\r\n  this._isFirstFrame = true;\r\n  this.getValue = processEffectsSequence;\r\n  this.setVValue = setVValue;\r\n  this.interpolateValue = interpolateValue;\r\n  this.effectsSequence = [getValueAtCurrentTime.bind(this)];\r\n  this.addEffect = addEffect;\r\n}\r\n\r\nfunction KeyframedMultidimensionalProperty(elem, data, mult, container) {\r\n  this.propType = 'multidimensional';\r\n  var i;\r\n  var len = data.k.length;\r\n  var s;\r\n  var e;\r\n  var to;\r\n  var ti;\r\n  for (i = 0; i < len - 1; i += 1) {\r\n    if (data.k[i].to && data.k[i].s && data.k[i + 1] && data.k[i + 1].s) {\r\n      s = data.k[i].s;\r\n      e = data.k[i + 1].s;\r\n      to = data.k[i].to;\r\n      ti = data.k[i].ti;\r\n      if ((s.length === 2 && !(s[0] === e[0] && s[1] === e[1]) && bez.pointOnLine2D(s[0], s[1], e[0], e[1], s[0] + to[0], s[1] + to[1]) && bez.pointOnLine2D(s[0], s[1], e[0], e[1], e[0] + ti[0], e[1] + ti[1])) || (s.length === 3 && !(s[0] === e[0] && s[1] === e[1] && s[2] === e[2]) && bez.pointOnLine3D(s[0], s[1], s[2], e[0], e[1], e[2], s[0] + to[0], s[1] + to[1], s[2] + to[2]) && bez.pointOnLine3D(s[0], s[1], s[2], e[0], e[1], e[2], e[0] + ti[0], e[1] + ti[1], e[2] + ti[2]))) {\r\n        data.k[i].to = null;\r\n        data.k[i].ti = null;\r\n      }\r\n      if (s[0] === e[0] && s[1] === e[1] && to[0] === 0 && to[1] === 0 && ti[0] === 0 && ti[1] === 0) {\r\n        if (s.length === 2 || (s[2] === e[2] && to[2] === 0 && ti[2] === 0)) {\r\n          data.k[i].to = null;\r\n          data.k[i].ti = null;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  this.effectsSequence = [getValueAtCurrentTime.bind(this)];\r\n  this.data = data;\r\n  this.keyframes = data.k;\r\n  this.keyframesMetadata = [];\r\n  this.offsetTime = elem.data.st;\r\n  this.k = true;\r\n  this.kf = true;\r\n  this._isFirstFrame = true;\r\n  this.mult = mult || 1;\r\n  this.elem = elem;\r\n  this.container = container;\r\n  this.comp = elem.comp;\r\n  this.getValue = processEffectsSequence;\r\n  this.setVValue = setVValue;\r\n  this.interpolateValue = interpolateValue;\r\n  this.frameId = -1;\r\n  var arrLen = data.k[0].s.length;\r\n  this.v = createTypedArray('float32', arrLen);\r\n  this.pv = createTypedArray('float32', arrLen);\r\n  for (i = 0; i < arrLen; i += 1) {\r\n    this.v[i] = initFrame;\r\n    this.pv[i] = initFrame;\r\n  }\r\n  this._caching = { lastFrame: initFrame, lastIndex: 0, value: createTypedArray('float32', arrLen) };\r\n  this.addEffect = addEffect;\r\n}\r\n\r\nconst PropertyFactory = (function () {\r\n  function getProp(elem, data, type, mult, container) {\r\n    if (data.sid) {\r\n      data = elem.globalData.slotManager.getProp(data);\r\n    }\r\n    var p;\r\n    if (!data.k.length) {\r\n      p = new ValueProperty(elem, data, mult, container);\r\n    } else if (typeof (data.k[0]) === 'number') {\r\n      p = new MultiDimensionalProperty(elem, data, mult, container);\r\n    } else {\r\n      switch (type) {\r\n        case 0:\r\n          p = new KeyframedValueProperty(elem, data, mult, container);\r\n          break;\r\n        case 1:\r\n          p = new KeyframedMultidimensionalProperty(elem, data, mult, container);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n    if (p.effectsSequence.length) {\r\n      container.addDynamicProperty(p);\r\n    }\r\n    return p;\r\n  }\r\n\r\n  var ob = {\r\n    getProp: getProp,\r\n  };\r\n  return ob;\r\n}());\n\nfunction DynamicPropertyContainer() {}\r\nDynamicPropertyContainer.prototype = {\r\n  addDynamicProperty: function (prop) {\r\n    if (this.dynamicProperties.indexOf(prop) === -1) {\r\n      this.dynamicProperties.push(prop);\r\n      this.container.addDynamicProperty(this);\r\n      this._isAnimated = true;\r\n    }\r\n  },\r\n  iterateDynamicProperties: function () {\r\n    this._mdf = false;\r\n    var i;\r\n    var len = this.dynamicProperties.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      this.dynamicProperties[i].getValue();\r\n      if (this.dynamicProperties[i]._mdf) {\r\n        this._mdf = true;\r\n      }\r\n    }\r\n  },\r\n  initDynamicPropertyContainer: function (container) {\r\n    this.container = container;\r\n    this.dynamicProperties = [];\r\n    this._mdf = false;\r\n    this._isAnimated = false;\r\n  },\r\n};\n\nconst pointPool = (function () {\r\n  function create() {\r\n    return createTypedArray('float32', 2);\r\n  }\r\n  return poolFactory(8, create);\r\n}());\n\nfunction ShapePath() {\r\n  this.c = false;\r\n  this._length = 0;\r\n  this._maxLength = 8;\r\n  this.v = createSizedArray(this._maxLength);\r\n  this.o = createSizedArray(this._maxLength);\r\n  this.i = createSizedArray(this._maxLength);\r\n}\r\n\r\nShapePath.prototype.setPathData = function (closed, len) {\r\n  this.c = closed;\r\n  this.setLength(len);\r\n  var i = 0;\r\n  while (i < len) {\r\n    this.v[i] = pointPool.newElement();\r\n    this.o[i] = pointPool.newElement();\r\n    this.i[i] = pointPool.newElement();\r\n    i += 1;\r\n  }\r\n};\r\n\r\nShapePath.prototype.setLength = function (len) {\r\n  while (this._maxLength < len) {\r\n    this.doubleArrayLength();\r\n  }\r\n  this._length = len;\r\n};\r\n\r\nShapePath.prototype.doubleArrayLength = function () {\r\n  this.v = this.v.concat(createSizedArray(this._maxLength));\r\n  this.i = this.i.concat(createSizedArray(this._maxLength));\r\n  this.o = this.o.concat(createSizedArray(this._maxLength));\r\n  this._maxLength *= 2;\r\n};\r\n\r\nShapePath.prototype.setXYAt = function (x, y, type, pos, replace) {\r\n  var arr;\r\n  this._length = Math.max(this._length, pos + 1);\r\n  if (this._length >= this._maxLength) {\r\n    this.doubleArrayLength();\r\n  }\r\n  switch (type) {\r\n    case 'v':\r\n      arr = this.v;\r\n      break;\r\n    case 'i':\r\n      arr = this.i;\r\n      break;\r\n    case 'o':\r\n      arr = this.o;\r\n      break;\r\n    default:\r\n      arr = [];\r\n      break;\r\n  }\r\n  if (!arr[pos] || (arr[pos] && !replace)) {\r\n    arr[pos] = pointPool.newElement();\r\n  }\r\n  arr[pos][0] = x;\r\n  arr[pos][1] = y;\r\n};\r\n\r\nShapePath.prototype.setTripleAt = function (vX, vY, oX, oY, iX, iY, pos, replace) {\r\n  this.setXYAt(vX, vY, 'v', pos, replace);\r\n  this.setXYAt(oX, oY, 'o', pos, replace);\r\n  this.setXYAt(iX, iY, 'i', pos, replace);\r\n};\r\n\r\nShapePath.prototype.reverse = function () {\r\n  var newPath = new ShapePath();\r\n  newPath.setPathData(this.c, this._length);\r\n  var vertices = this.v;\r\n  var outPoints = this.o;\r\n  var inPoints = this.i;\r\n  var init = 0;\r\n  if (this.c) {\r\n    newPath.setTripleAt(vertices[0][0], vertices[0][1], inPoints[0][0], inPoints[0][1], outPoints[0][0], outPoints[0][1], 0, false);\r\n    init = 1;\r\n  }\r\n  var cnt = this._length - 1;\r\n  var len = this._length;\r\n\r\n  var i;\r\n  for (i = init; i < len; i += 1) {\r\n    newPath.setTripleAt(vertices[cnt][0], vertices[cnt][1], inPoints[cnt][0], inPoints[cnt][1], outPoints[cnt][0], outPoints[cnt][1], i, false);\r\n    cnt -= 1;\r\n  }\r\n  return newPath;\r\n};\r\n\r\nShapePath.prototype.length = function () {\r\n  return this._length;\r\n};\n\nconst shapePool = (function () {\r\n  function create() {\r\n    return new ShapePath();\r\n  }\r\n\r\n  function release(shapePath) {\r\n    var len = shapePath._length;\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      pointPool.release(shapePath.v[i]);\r\n      pointPool.release(shapePath.i[i]);\r\n      pointPool.release(shapePath.o[i]);\r\n      shapePath.v[i] = null;\r\n      shapePath.i[i] = null;\r\n      shapePath.o[i] = null;\r\n    }\r\n    shapePath._length = 0;\r\n    shapePath.c = false;\r\n  }\r\n\r\n  function clone(shape) {\r\n    var cloned = factory.newElement();\r\n    var i;\r\n    var len = shape._length === undefined ? shape.v.length : shape._length;\r\n    cloned.setLength(len);\r\n    cloned.c = shape.c;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      cloned.setTripleAt(shape.v[i][0], shape.v[i][1], shape.o[i][0], shape.o[i][1], shape.i[i][0], shape.i[i][1], i);\r\n    }\r\n    return cloned;\r\n  }\r\n\r\n  var factory = poolFactory(4, create, release);\r\n  factory.clone = clone;\r\n\r\n  return factory;\r\n}());\n\nfunction ShapeCollection() {\r\n  this._length = 0;\r\n  this._maxLength = 4;\r\n  this.shapes = createSizedArray(this._maxLength);\r\n}\r\n\r\nShapeCollection.prototype.addShape = function (shapeData) {\r\n  if (this._length === this._maxLength) {\r\n    this.shapes = this.shapes.concat(createSizedArray(this._maxLength));\r\n    this._maxLength *= 2;\r\n  }\r\n  this.shapes[this._length] = shapeData;\r\n  this._length += 1;\r\n};\r\n\r\nShapeCollection.prototype.releaseShapes = function () {\r\n  var i;\r\n  for (i = 0; i < this._length; i += 1) {\r\n    shapePool.release(this.shapes[i]);\r\n  }\r\n  this._length = 0;\r\n};\n\nconst shapeCollectionPool = (function () {\r\n  var ob = {\r\n    newShapeCollection: newShapeCollection,\r\n    release: release,\r\n  };\r\n\r\n  var _length = 0;\r\n  var _maxLength = 4;\r\n  var pool = createSizedArray(_maxLength);\r\n\r\n  function newShapeCollection() {\r\n    var shapeCollection;\r\n    if (_length) {\r\n      _length -= 1;\r\n      shapeCollection = pool[_length];\r\n    } else {\r\n      shapeCollection = new ShapeCollection();\r\n    }\r\n    return shapeCollection;\r\n  }\r\n\r\n  function release(shapeCollection) {\r\n    var i;\r\n    var len = shapeCollection._length;\r\n    for (i = 0; i < len; i += 1) {\r\n      shapePool.release(shapeCollection.shapes[i]);\r\n    }\r\n    shapeCollection._length = 0;\r\n\r\n    if (_length === _maxLength) {\r\n      pool = pooling.double(pool);\r\n      _maxLength *= 2;\r\n    }\r\n    pool[_length] = shapeCollection;\r\n    _length += 1;\r\n  }\r\n\r\n  return ob;\r\n}());\n\nconst ShapePropertyFactory = (function () {\r\n  var initFrame = -999999;\r\n\r\n  function interpolateShape(frameNum, previousValue, caching) {\r\n    var iterationIndex = caching.lastIndex;\r\n    var keyPropS;\r\n    var keyPropE;\r\n    var isHold;\r\n    var j;\r\n    var k;\r\n    var jLen;\r\n    var kLen;\r\n    var perc;\r\n    var vertexValue;\r\n    var kf = this.keyframes;\r\n    if (frameNum < kf[0].t - this.offsetTime) {\r\n      keyPropS = kf[0].s[0];\r\n      isHold = true;\r\n      iterationIndex = 0;\r\n    } else if (frameNum >= kf[kf.length - 1].t - this.offsetTime) {\r\n      keyPropS = kf[kf.length - 1].s ? kf[kf.length - 1].s[0] : kf[kf.length - 2].e[0];\r\n      /* if(kf[kf.length - 1].s){\r\n                keyPropS = kf[kf.length - 1].s[0];\r\n            }else{\r\n                keyPropS = kf[kf.length - 2].e[0];\r\n            } */\r\n      isHold = true;\r\n    } else {\r\n      var i = iterationIndex;\r\n      var len = kf.length - 1;\r\n      var flag = true;\r\n      var keyData;\r\n      var nextKeyData;\r\n      var keyframeMetadata;\r\n      while (flag) {\r\n        keyData = kf[i];\r\n        nextKeyData = kf[i + 1];\r\n        if ((nextKeyData.t - this.offsetTime) > frameNum) {\r\n          break;\r\n        }\r\n        if (i < len - 1) {\r\n          i += 1;\r\n        } else {\r\n          flag = false;\r\n        }\r\n      }\r\n      keyframeMetadata = this.keyframesMetadata[i] || {};\r\n      isHold = keyData.h === 1;\r\n      iterationIndex = i;\r\n      if (!isHold) {\r\n        if (frameNum >= nextKeyData.t - this.offsetTime) {\r\n          perc = 1;\r\n        } else if (frameNum < keyData.t - this.offsetTime) {\r\n          perc = 0;\r\n        } else {\r\n          var fnc;\r\n          if (keyframeMetadata.__fnct) {\r\n            fnc = keyframeMetadata.__fnct;\r\n          } else {\r\n            fnc = BezierFactory.getBezierEasing(keyData.o.x, keyData.o.y, keyData.i.x, keyData.i.y).get;\r\n            keyframeMetadata.__fnct = fnc;\r\n          }\r\n          perc = fnc((frameNum - (keyData.t - this.offsetTime)) / ((nextKeyData.t - this.offsetTime) - (keyData.t - this.offsetTime)));\r\n        }\r\n        keyPropE = nextKeyData.s ? nextKeyData.s[0] : keyData.e[0];\r\n      }\r\n      keyPropS = keyData.s[0];\r\n    }\r\n    jLen = previousValue._length;\r\n    kLen = keyPropS.i[0].length;\r\n    caching.lastIndex = iterationIndex;\r\n\r\n    for (j = 0; j < jLen; j += 1) {\r\n      for (k = 0; k < kLen; k += 1) {\r\n        vertexValue = isHold ? keyPropS.i[j][k] : keyPropS.i[j][k] + (keyPropE.i[j][k] - keyPropS.i[j][k]) * perc;\r\n        previousValue.i[j][k] = vertexValue;\r\n        vertexValue = isHold ? keyPropS.o[j][k] : keyPropS.o[j][k] + (keyPropE.o[j][k] - keyPropS.o[j][k]) * perc;\r\n        previousValue.o[j][k] = vertexValue;\r\n        vertexValue = isHold ? keyPropS.v[j][k] : keyPropS.v[j][k] + (keyPropE.v[j][k] - keyPropS.v[j][k]) * perc;\r\n        previousValue.v[j][k] = vertexValue;\r\n      }\r\n    }\r\n  }\r\n\r\n  function interpolateShapeCurrentTime() {\r\n    var frameNum = this.comp.renderedFrame - this.offsetTime;\r\n    var initTime = this.keyframes[0].t - this.offsetTime;\r\n    var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\r\n    var lastFrame = this._caching.lastFrame;\r\n    if (!(lastFrame !== initFrame && ((lastFrame < initTime && frameNum < initTime) || (lastFrame > endTime && frameNum > endTime)))) {\r\n      /// /\r\n      this._caching.lastIndex = lastFrame < frameNum ? this._caching.lastIndex : 0;\r\n      this.interpolateShape(frameNum, this.pv, this._caching);\r\n      /// /\r\n    }\r\n    this._caching.lastFrame = frameNum;\r\n    return this.pv;\r\n  }\r\n\r\n  function resetShape() {\r\n    this.paths = this.localShapeCollection;\r\n  }\r\n\r\n  function shapesEqual(shape1, shape2) {\r\n    if (shape1._length !== shape2._length || shape1.c !== shape2.c) {\r\n      return false;\r\n    }\r\n    var i;\r\n    var len = shape1._length;\r\n    for (i = 0; i < len; i += 1) {\r\n      if (shape1.v[i][0] !== shape2.v[i][0]\r\n            || shape1.v[i][1] !== shape2.v[i][1]\r\n            || shape1.o[i][0] !== shape2.o[i][0]\r\n            || shape1.o[i][1] !== shape2.o[i][1]\r\n            || shape1.i[i][0] !== shape2.i[i][0]\r\n            || shape1.i[i][1] !== shape2.i[i][1]) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  function setVValue(newPath) {\r\n    if (!shapesEqual(this.v, newPath)) {\r\n      this.v = shapePool.clone(newPath);\r\n      this.localShapeCollection.releaseShapes();\r\n      this.localShapeCollection.addShape(this.v);\r\n      this._mdf = true;\r\n      this.paths = this.localShapeCollection;\r\n    }\r\n  }\r\n\r\n  function processEffectsSequence() {\r\n    if (this.elem.globalData.frameId === this.frameId) {\r\n      return;\r\n    } if (!this.effectsSequence.length) {\r\n      this._mdf = false;\r\n      return;\r\n    }\r\n    if (this.lock) {\r\n      this.setVValue(this.pv);\r\n      return;\r\n    }\r\n    this.lock = true;\r\n    this._mdf = false;\r\n    var finalValue;\r\n    if (this.kf) {\r\n      finalValue = this.pv;\r\n    } else if (this.data.ks) {\r\n      finalValue = this.data.ks.k;\r\n    } else {\r\n      finalValue = this.data.pt.k;\r\n    }\r\n    var i;\r\n    var len = this.effectsSequence.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      finalValue = this.effectsSequence[i](finalValue);\r\n    }\r\n    this.setVValue(finalValue);\r\n    this.lock = false;\r\n    this.frameId = this.elem.globalData.frameId;\r\n  }\r\n\r\n  function ShapeProperty(elem, data, type) {\r\n    this.propType = 'shape';\r\n    this.comp = elem.comp;\r\n    this.container = elem;\r\n    this.elem = elem;\r\n    this.data = data;\r\n    this.k = false;\r\n    this.kf = false;\r\n    this._mdf = false;\r\n    var pathData = type === 3 ? data.pt.k : data.ks.k;\r\n    this.v = shapePool.clone(pathData);\r\n    this.pv = shapePool.clone(this.v);\r\n    this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n    this.paths = this.localShapeCollection;\r\n    this.paths.addShape(this.v);\r\n    this.reset = resetShape;\r\n    this.effectsSequence = [];\r\n  }\r\n\r\n  function addEffect(effectFunction) {\r\n    this.effectsSequence.push(effectFunction);\r\n    this.container.addDynamicProperty(this);\r\n  }\r\n\r\n  ShapeProperty.prototype.interpolateShape = interpolateShape;\r\n  ShapeProperty.prototype.getValue = processEffectsSequence;\r\n  ShapeProperty.prototype.setVValue = setVValue;\r\n  ShapeProperty.prototype.addEffect = addEffect;\r\n\r\n  function KeyframedShapeProperty(elem, data, type) {\r\n    this.propType = 'shape';\r\n    this.comp = elem.comp;\r\n    this.elem = elem;\r\n    this.container = elem;\r\n    this.offsetTime = elem.data.st;\r\n    this.keyframes = type === 3 ? data.pt.k : data.ks.k;\r\n    this.keyframesMetadata = [];\r\n    this.k = true;\r\n    this.kf = true;\r\n    var len = this.keyframes[0].s[0].i.length;\r\n    this.v = shapePool.newElement();\r\n    this.v.setPathData(this.keyframes[0].s[0].c, len);\r\n    this.pv = shapePool.clone(this.v);\r\n    this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n    this.paths = this.localShapeCollection;\r\n    this.paths.addShape(this.v);\r\n    this.lastFrame = initFrame;\r\n    this.reset = resetShape;\r\n    this._caching = { lastFrame: initFrame, lastIndex: 0 };\r\n    this.effectsSequence = [interpolateShapeCurrentTime.bind(this)];\r\n  }\r\n  KeyframedShapeProperty.prototype.getValue = processEffectsSequence;\r\n  KeyframedShapeProperty.prototype.interpolateShape = interpolateShape;\r\n  KeyframedShapeProperty.prototype.setVValue = setVValue;\r\n  KeyframedShapeProperty.prototype.addEffect = addEffect;\r\n\r\n  var EllShapeProperty = (function () {\r\n    var cPoint = roundCorner;\r\n\r\n    function EllShapePropertyFactory(elem, data) {\r\n      this.v = shapePool.newElement();\r\n      this.v.setPathData(true, 4);\r\n      this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n      this.paths = this.localShapeCollection;\r\n      this.localShapeCollection.addShape(this.v);\r\n      this.d = data.d;\r\n      this.elem = elem;\r\n      this.comp = elem.comp;\r\n      this.frameId = -1;\r\n      this.initDynamicPropertyContainer(elem);\r\n      this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\r\n      this.s = PropertyFactory.getProp(elem, data.s, 1, 0, this);\r\n      if (this.dynamicProperties.length) {\r\n        this.k = true;\r\n      } else {\r\n        this.k = false;\r\n        this.convertEllToPath();\r\n      }\r\n    }\r\n\r\n    EllShapePropertyFactory.prototype = {\r\n      reset: resetShape,\r\n      getValue: function () {\r\n        if (this.elem.globalData.frameId === this.frameId) {\r\n          return;\r\n        }\r\n        this.frameId = this.elem.globalData.frameId;\r\n        this.iterateDynamicProperties();\r\n\r\n        if (this._mdf) {\r\n          this.convertEllToPath();\r\n        }\r\n      },\r\n      convertEllToPath: function () {\r\n        var p0 = this.p.v[0];\r\n        var p1 = this.p.v[1];\r\n        var s0 = this.s.v[0] / 2;\r\n        var s1 = this.s.v[1] / 2;\r\n        var _cw = this.d !== 3;\r\n        var _v = this.v;\r\n        _v.v[0][0] = p0;\r\n        _v.v[0][1] = p1 - s1;\r\n        _v.v[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n        _v.v[1][1] = p1;\r\n        _v.v[2][0] = p0;\r\n        _v.v[2][1] = p1 + s1;\r\n        _v.v[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n        _v.v[3][1] = p1;\r\n        _v.i[0][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\r\n        _v.i[0][1] = p1 - s1;\r\n        _v.i[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n        _v.i[1][1] = p1 - s1 * cPoint;\r\n        _v.i[2][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\r\n        _v.i[2][1] = p1 + s1;\r\n        _v.i[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n        _v.i[3][1] = p1 + s1 * cPoint;\r\n        _v.o[0][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\r\n        _v.o[0][1] = p1 - s1;\r\n        _v.o[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n        _v.o[1][1] = p1 + s1 * cPoint;\r\n        _v.o[2][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\r\n        _v.o[2][1] = p1 + s1;\r\n        _v.o[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n        _v.o[3][1] = p1 - s1 * cPoint;\r\n      },\r\n    };\r\n\r\n    extendPrototype([DynamicPropertyContainer], EllShapePropertyFactory);\r\n\r\n    return EllShapePropertyFactory;\r\n  }());\r\n\r\n  var StarShapeProperty = (function () {\r\n    function StarShapePropertyFactory(elem, data) {\r\n      this.v = shapePool.newElement();\r\n      this.v.setPathData(true, 0);\r\n      this.elem = elem;\r\n      this.comp = elem.comp;\r\n      this.data = data;\r\n      this.frameId = -1;\r\n      this.d = data.d;\r\n      this.initDynamicPropertyContainer(elem);\r\n      if (data.sy === 1) {\r\n        this.ir = PropertyFactory.getProp(elem, data.ir, 0, 0, this);\r\n        this.is = PropertyFactory.getProp(elem, data.is, 0, 0.01, this);\r\n        this.convertToPath = this.convertStarToPath;\r\n      } else {\r\n        this.convertToPath = this.convertPolygonToPath;\r\n      }\r\n      this.pt = PropertyFactory.getProp(elem, data.pt, 0, 0, this);\r\n      this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\r\n      this.r = PropertyFactory.getProp(elem, data.r, 0, degToRads, this);\r\n      this.or = PropertyFactory.getProp(elem, data.or, 0, 0, this);\r\n      this.os = PropertyFactory.getProp(elem, data.os, 0, 0.01, this);\r\n      this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n      this.localShapeCollection.addShape(this.v);\r\n      this.paths = this.localShapeCollection;\r\n      if (this.dynamicProperties.length) {\r\n        this.k = true;\r\n      } else {\r\n        this.k = false;\r\n        this.convertToPath();\r\n      }\r\n    }\r\n\r\n    StarShapePropertyFactory.prototype = {\r\n      reset: resetShape,\r\n      getValue: function () {\r\n        if (this.elem.globalData.frameId === this.frameId) {\r\n          return;\r\n        }\r\n        this.frameId = this.elem.globalData.frameId;\r\n        this.iterateDynamicProperties();\r\n        if (this._mdf) {\r\n          this.convertToPath();\r\n        }\r\n      },\r\n      convertStarToPath: function () {\r\n        var numPts = Math.floor(this.pt.v) * 2;\r\n        var angle = (Math.PI * 2) / numPts;\r\n        /* this.v.v.length = numPts;\r\n                this.v.i.length = numPts;\r\n                this.v.o.length = numPts; */\r\n        var longFlag = true;\r\n        var longRad = this.or.v;\r\n        var shortRad = this.ir.v;\r\n        var longRound = this.os.v;\r\n        var shortRound = this.is.v;\r\n        var longPerimSegment = (2 * Math.PI * longRad) / (numPts * 2);\r\n        var shortPerimSegment = (2 * Math.PI * shortRad) / (numPts * 2);\r\n        var i;\r\n        var rad;\r\n        var roundness;\r\n        var perimSegment;\r\n        var currentAng = -Math.PI / 2;\r\n        currentAng += this.r.v;\r\n        var dir = this.data.d === 3 ? -1 : 1;\r\n        this.v._length = 0;\r\n        for (i = 0; i < numPts; i += 1) {\r\n          rad = longFlag ? longRad : shortRad;\r\n          roundness = longFlag ? longRound : shortRound;\r\n          perimSegment = longFlag ? longPerimSegment : shortPerimSegment;\r\n          var x = rad * Math.cos(currentAng);\r\n          var y = rad * Math.sin(currentAng);\r\n          var ox = x === 0 && y === 0 ? 0 : y / Math.sqrt(x * x + y * y);\r\n          var oy = x === 0 && y === 0 ? 0 : -x / Math.sqrt(x * x + y * y);\r\n          x += +this.p.v[0];\r\n          y += +this.p.v[1];\r\n          this.v.setTripleAt(x, y, x - ox * perimSegment * roundness * dir, y - oy * perimSegment * roundness * dir, x + ox * perimSegment * roundness * dir, y + oy * perimSegment * roundness * dir, i, true);\r\n\r\n          /* this.v.v[i] = [x,y];\r\n                    this.v.i[i] = [x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir];\r\n                    this.v.o[i] = [x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir];\r\n                    this.v._length = numPts; */\r\n          longFlag = !longFlag;\r\n          currentAng += angle * dir;\r\n        }\r\n      },\r\n      convertPolygonToPath: function () {\r\n        var numPts = Math.floor(this.pt.v);\r\n        var angle = (Math.PI * 2) / numPts;\r\n        var rad = this.or.v;\r\n        var roundness = this.os.v;\r\n        var perimSegment = (2 * Math.PI * rad) / (numPts * 4);\r\n        var i;\r\n        var currentAng = -Math.PI * 0.5;\r\n        var dir = this.data.d === 3 ? -1 : 1;\r\n        currentAng += this.r.v;\r\n        this.v._length = 0;\r\n        for (i = 0; i < numPts; i += 1) {\r\n          var x = rad * Math.cos(currentAng);\r\n          var y = rad * Math.sin(currentAng);\r\n          var ox = x === 0 && y === 0 ? 0 : y / Math.sqrt(x * x + y * y);\r\n          var oy = x === 0 && y === 0 ? 0 : -x / Math.sqrt(x * x + y * y);\r\n          x += +this.p.v[0];\r\n          y += +this.p.v[1];\r\n          this.v.setTripleAt(x, y, x - ox * perimSegment * roundness * dir, y - oy * perimSegment * roundness * dir, x + ox * perimSegment * roundness * dir, y + oy * perimSegment * roundness * dir, i, true);\r\n          currentAng += angle * dir;\r\n        }\r\n        this.paths.length = 0;\r\n        this.paths[0] = this.v;\r\n      },\r\n\r\n    };\r\n    extendPrototype([DynamicPropertyContainer], StarShapePropertyFactory);\r\n\r\n    return StarShapePropertyFactory;\r\n  }());\r\n\r\n  var RectShapeProperty = (function () {\r\n    function RectShapePropertyFactory(elem, data) {\r\n      this.v = shapePool.newElement();\r\n      this.v.c = true;\r\n      this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n      this.localShapeCollection.addShape(this.v);\r\n      this.paths = this.localShapeCollection;\r\n      this.elem = elem;\r\n      this.comp = elem.comp;\r\n      this.frameId = -1;\r\n      this.d = data.d;\r\n      this.initDynamicPropertyContainer(elem);\r\n      this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\r\n      this.s = PropertyFactory.getProp(elem, data.s, 1, 0, this);\r\n      this.r = PropertyFactory.getProp(elem, data.r, 0, 0, this);\r\n      if (this.dynamicProperties.length) {\r\n        this.k = true;\r\n      } else {\r\n        this.k = false;\r\n        this.convertRectToPath();\r\n      }\r\n    }\r\n\r\n    RectShapePropertyFactory.prototype = {\r\n      convertRectToPath: function () {\r\n        var p0 = this.p.v[0];\r\n        var p1 = this.p.v[1];\r\n        var v0 = this.s.v[0] / 2;\r\n        var v1 = this.s.v[1] / 2;\r\n        var round = bmMin(v0, v1, this.r.v);\r\n        var cPoint = round * (1 - roundCorner);\r\n        this.v._length = 0;\r\n\r\n        if (this.d === 2 || this.d === 1) {\r\n          this.v.setTripleAt(p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + cPoint, 0, true);\r\n          this.v.setTripleAt(p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - cPoint, p0 + v0, p1 + v1 - round, 1, true);\r\n          if (round !== 0) {\r\n            this.v.setTripleAt(p0 + v0 - round, p1 + v1, p0 + v0 - round, p1 + v1, p0 + v0 - cPoint, p1 + v1, 2, true);\r\n            this.v.setTripleAt(p0 - v0 + round, p1 + v1, p0 - v0 + cPoint, p1 + v1, p0 - v0 + round, p1 + v1, 3, true);\r\n            this.v.setTripleAt(p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - cPoint, 4, true);\r\n            this.v.setTripleAt(p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + cPoint, p0 - v0, p1 - v1 + round, 5, true);\r\n            this.v.setTripleAt(p0 - v0 + round, p1 - v1, p0 - v0 + round, p1 - v1, p0 - v0 + cPoint, p1 - v1, 6, true);\r\n            this.v.setTripleAt(p0 + v0 - round, p1 - v1, p0 + v0 - cPoint, p1 - v1, p0 + v0 - round, p1 - v1, 7, true);\r\n          } else {\r\n            this.v.setTripleAt(p0 - v0, p1 + v1, p0 - v0 + cPoint, p1 + v1, p0 - v0, p1 + v1, 2);\r\n            this.v.setTripleAt(p0 - v0, p1 - v1, p0 - v0, p1 - v1 + cPoint, p0 - v0, p1 - v1, 3);\r\n          }\r\n        } else {\r\n          this.v.setTripleAt(p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + cPoint, p0 + v0, p1 - v1 + round, 0, true);\r\n          if (round !== 0) {\r\n            this.v.setTripleAt(p0 + v0 - round, p1 - v1, p0 + v0 - round, p1 - v1, p0 + v0 - cPoint, p1 - v1, 1, true);\r\n            this.v.setTripleAt(p0 - v0 + round, p1 - v1, p0 - v0 + cPoint, p1 - v1, p0 - v0 + round, p1 - v1, 2, true);\r\n            this.v.setTripleAt(p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + cPoint, 3, true);\r\n            this.v.setTripleAt(p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - cPoint, p0 - v0, p1 + v1 - round, 4, true);\r\n            this.v.setTripleAt(p0 - v0 + round, p1 + v1, p0 - v0 + round, p1 + v1, p0 - v0 + cPoint, p1 + v1, 5, true);\r\n            this.v.setTripleAt(p0 + v0 - round, p1 + v1, p0 + v0 - cPoint, p1 + v1, p0 + v0 - round, p1 + v1, 6, true);\r\n            this.v.setTripleAt(p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - cPoint, 7, true);\r\n          } else {\r\n            this.v.setTripleAt(p0 - v0, p1 - v1, p0 - v0 + cPoint, p1 - v1, p0 - v0, p1 - v1, 1, true);\r\n            this.v.setTripleAt(p0 - v0, p1 + v1, p0 - v0, p1 + v1 - cPoint, p0 - v0, p1 + v1, 2, true);\r\n            this.v.setTripleAt(p0 + v0, p1 + v1, p0 + v0 - cPoint, p1 + v1, p0 + v0, p1 + v1, 3, true);\r\n          }\r\n        }\r\n      },\r\n      getValue: function () {\r\n        if (this.elem.globalData.frameId === this.frameId) {\r\n          return;\r\n        }\r\n        this.frameId = this.elem.globalData.frameId;\r\n        this.iterateDynamicProperties();\r\n        if (this._mdf) {\r\n          this.convertRectToPath();\r\n        }\r\n      },\r\n      reset: resetShape,\r\n    };\r\n    extendPrototype([DynamicPropertyContainer], RectShapePropertyFactory);\r\n\r\n    return RectShapePropertyFactory;\r\n  }());\r\n\r\n  function getShapeProp(elem, data, type) {\r\n    var prop;\r\n    if (type === 3 || type === 4) {\r\n      var dataProp = type === 3 ? data.pt : data.ks;\r\n      var keys = dataProp.k;\r\n      if (keys.length) {\r\n        prop = new KeyframedShapeProperty(elem, data, type);\r\n      } else {\r\n        prop = new ShapeProperty(elem, data, type);\r\n      }\r\n    } else if (type === 5) {\r\n      prop = new RectShapeProperty(elem, data);\r\n    } else if (type === 6) {\r\n      prop = new EllShapeProperty(elem, data);\r\n    } else if (type === 7) {\r\n      prop = new StarShapeProperty(elem, data);\r\n    }\r\n    if (prop.k) {\r\n      elem.addDynamicProperty(prop);\r\n    }\r\n    return prop;\r\n  }\r\n\r\n  function getConstructorFunction() {\r\n    return ShapeProperty;\r\n  }\r\n\r\n  function getKeyframedConstructorFunction() {\r\n    return KeyframedShapeProperty;\r\n  }\r\n\r\n  var ob = {};\r\n  ob.getShapeProp = getShapeProp;\r\n  ob.getConstructorFunction = getConstructorFunction;\r\n  ob.getKeyframedConstructorFunction = getKeyframedConstructorFunction;\r\n  return ob;\r\n}());\n\n/*!\r\n Transformation Matrix v2.0\r\n (c) Epistemex 2014-2015\r\n www.epistemex.com\r\n By Ken Fyrstenberg\r\n Contributions by leeoniya.\r\n License: MIT, header required.\r\n */\r\n\r\n/**\r\n * 2D transformation matrix object initialized with identity matrix.\r\n *\r\n * The matrix can synchronize a canvas context by supplying the context\r\n * as an argument, or later apply current absolute transform to an\r\n * existing context.\r\n *\r\n * All values are handled as floating point values.\r\n *\r\n * @param {CanvasRenderingContext2D} [context] - Optional context to sync with Matrix\r\n * @prop {number} a - scale x\r\n * @prop {number} b - shear y\r\n * @prop {number} c - shear x\r\n * @prop {number} d - scale y\r\n * @prop {number} e - translate x\r\n * @prop {number} f - translate y\r\n * @prop {CanvasRenderingContext2D|null} [context=null] - set or get current canvas context\r\n * @constructor\r\n */\r\n\r\nconst Matrix = (function () {\r\n  var _cos = Math.cos;\r\n  var _sin = Math.sin;\r\n  var _tan = Math.tan;\r\n  var _rnd = Math.round;\r\n\r\n  function reset() {\r\n    this.props[0] = 1;\r\n    this.props[1] = 0;\r\n    this.props[2] = 0;\r\n    this.props[3] = 0;\r\n    this.props[4] = 0;\r\n    this.props[5] = 1;\r\n    this.props[6] = 0;\r\n    this.props[7] = 0;\r\n    this.props[8] = 0;\r\n    this.props[9] = 0;\r\n    this.props[10] = 1;\r\n    this.props[11] = 0;\r\n    this.props[12] = 0;\r\n    this.props[13] = 0;\r\n    this.props[14] = 0;\r\n    this.props[15] = 1;\r\n    return this;\r\n  }\r\n\r\n  function rotate(angle) {\r\n    if (angle === 0) {\r\n      return this;\r\n    }\r\n    var mCos = _cos(angle);\r\n    var mSin = _sin(angle);\r\n    return this._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\r\n  }\r\n\r\n  function rotateX(angle) {\r\n    if (angle === 0) {\r\n      return this;\r\n    }\r\n    var mCos = _cos(angle);\r\n    var mSin = _sin(angle);\r\n    return this._t(1, 0, 0, 0, 0, mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1);\r\n  }\r\n\r\n  function rotateY(angle) {\r\n    if (angle === 0) {\r\n      return this;\r\n    }\r\n    var mCos = _cos(angle);\r\n    var mSin = _sin(angle);\r\n    return this._t(mCos, 0, mSin, 0, 0, 1, 0, 0, -mSin, 0, mCos, 0, 0, 0, 0, 1);\r\n  }\r\n\r\n  function rotateZ(angle) {\r\n    if (angle === 0) {\r\n      return this;\r\n    }\r\n    var mCos = _cos(angle);\r\n    var mSin = _sin(angle);\r\n    return this._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\r\n  }\r\n\r\n  function shear(sx, sy) {\r\n    return this._t(1, sy, sx, 1, 0, 0);\r\n  }\r\n\r\n  function skew(ax, ay) {\r\n    return this.shear(_tan(ax), _tan(ay));\r\n  }\r\n\r\n  function skewFromAxis(ax, angle) {\r\n    var mCos = _cos(angle);\r\n    var mSin = _sin(angle);\r\n    return this._t(mCos, mSin, 0, 0, -mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\r\n      ._t(1, 0, 0, 0, _tan(ax), 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\r\n      ._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\r\n    // return this._t(mCos, mSin, -mSin, mCos, 0, 0)._t(1, 0, _tan(ax), 1, 0, 0)._t(mCos, -mSin, mSin, mCos, 0, 0);\r\n  }\r\n\r\n  function scale(sx, sy, sz) {\r\n    if (!sz && sz !== 0) {\r\n      sz = 1;\r\n    }\r\n    if (sx === 1 && sy === 1 && sz === 1) {\r\n      return this;\r\n    }\r\n    return this._t(sx, 0, 0, 0, 0, sy, 0, 0, 0, 0, sz, 0, 0, 0, 0, 1);\r\n  }\r\n\r\n  function setTransform(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {\r\n    this.props[0] = a;\r\n    this.props[1] = b;\r\n    this.props[2] = c;\r\n    this.props[3] = d;\r\n    this.props[4] = e;\r\n    this.props[5] = f;\r\n    this.props[6] = g;\r\n    this.props[7] = h;\r\n    this.props[8] = i;\r\n    this.props[9] = j;\r\n    this.props[10] = k;\r\n    this.props[11] = l;\r\n    this.props[12] = m;\r\n    this.props[13] = n;\r\n    this.props[14] = o;\r\n    this.props[15] = p;\r\n    return this;\r\n  }\r\n\r\n  function translate(tx, ty, tz) {\r\n    tz = tz || 0;\r\n    if (tx !== 0 || ty !== 0 || tz !== 0) {\r\n      return this._t(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, tx, ty, tz, 1);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  function transform(a2, b2, c2, d2, e2, f2, g2, h2, i2, j2, k2, l2, m2, n2, o2, p2) {\r\n    var _p = this.props;\r\n\r\n    if (a2 === 1 && b2 === 0 && c2 === 0 && d2 === 0 && e2 === 0 && f2 === 1 && g2 === 0 && h2 === 0 && i2 === 0 && j2 === 0 && k2 === 1 && l2 === 0) {\r\n      // NOTE: commenting this condition because TurboFan deoptimizes code when present\r\n      // if(m2 !== 0 || n2 !== 0 || o2 !== 0){\r\n      _p[12] = _p[12] * a2 + _p[15] * m2;\r\n      _p[13] = _p[13] * f2 + _p[15] * n2;\r\n      _p[14] = _p[14] * k2 + _p[15] * o2;\r\n      _p[15] *= p2;\r\n      // }\r\n      this._identityCalculated = false;\r\n      return this;\r\n    }\r\n\r\n    var a1 = _p[0];\r\n    var b1 = _p[1];\r\n    var c1 = _p[2];\r\n    var d1 = _p[3];\r\n    var e1 = _p[4];\r\n    var f1 = _p[5];\r\n    var g1 = _p[6];\r\n    var h1 = _p[7];\r\n    var i1 = _p[8];\r\n    var j1 = _p[9];\r\n    var k1 = _p[10];\r\n    var l1 = _p[11];\r\n    var m1 = _p[12];\r\n    var n1 = _p[13];\r\n    var o1 = _p[14];\r\n    var p1 = _p[15];\r\n\r\n    /* matrix order (canvas compatible):\r\n         * ace\r\n         * bdf\r\n         * 001\r\n         */\r\n    _p[0] = a1 * a2 + b1 * e2 + c1 * i2 + d1 * m2;\r\n    _p[1] = a1 * b2 + b1 * f2 + c1 * j2 + d1 * n2;\r\n    _p[2] = a1 * c2 + b1 * g2 + c1 * k2 + d1 * o2;\r\n    _p[3] = a1 * d2 + b1 * h2 + c1 * l2 + d1 * p2;\r\n\r\n    _p[4] = e1 * a2 + f1 * e2 + g1 * i2 + h1 * m2;\r\n    _p[5] = e1 * b2 + f1 * f2 + g1 * j2 + h1 * n2;\r\n    _p[6] = e1 * c2 + f1 * g2 + g1 * k2 + h1 * o2;\r\n    _p[7] = e1 * d2 + f1 * h2 + g1 * l2 + h1 * p2;\r\n\r\n    _p[8] = i1 * a2 + j1 * e2 + k1 * i2 + l1 * m2;\r\n    _p[9] = i1 * b2 + j1 * f2 + k1 * j2 + l1 * n2;\r\n    _p[10] = i1 * c2 + j1 * g2 + k1 * k2 + l1 * o2;\r\n    _p[11] = i1 * d2 + j1 * h2 + k1 * l2 + l1 * p2;\r\n\r\n    _p[12] = m1 * a2 + n1 * e2 + o1 * i2 + p1 * m2;\r\n    _p[13] = m1 * b2 + n1 * f2 + o1 * j2 + p1 * n2;\r\n    _p[14] = m1 * c2 + n1 * g2 + o1 * k2 + p1 * o2;\r\n    _p[15] = m1 * d2 + n1 * h2 + o1 * l2 + p1 * p2;\r\n\r\n    this._identityCalculated = false;\r\n    return this;\r\n  }\r\n\r\n  function multiply(matrix) {\r\n    var matrixProps = matrix.props;\r\n    return this.transform(\r\n      matrixProps[0],\r\n      matrixProps[1],\r\n      matrixProps[2],\r\n      matrixProps[3],\r\n      matrixProps[4],\r\n      matrixProps[5],\r\n      matrixProps[6],\r\n      matrixProps[7],\r\n      matrixProps[8],\r\n      matrixProps[9],\r\n      matrixProps[10],\r\n      matrixProps[11],\r\n      matrixProps[12],\r\n      matrixProps[13],\r\n      matrixProps[14],\r\n      matrixProps[15]\r\n    );\r\n  }\r\n\r\n  function isIdentity() {\r\n    if (!this._identityCalculated) {\r\n      this._identity = !(this.props[0] !== 1 || this.props[1] !== 0 || this.props[2] !== 0 || this.props[3] !== 0 || this.props[4] !== 0 || this.props[5] !== 1 || this.props[6] !== 0 || this.props[7] !== 0 || this.props[8] !== 0 || this.props[9] !== 0 || this.props[10] !== 1 || this.props[11] !== 0 || this.props[12] !== 0 || this.props[13] !== 0 || this.props[14] !== 0 || this.props[15] !== 1);\r\n      this._identityCalculated = true;\r\n    }\r\n    return this._identity;\r\n  }\r\n\r\n  function equals(matr) {\r\n    var i = 0;\r\n    while (i < 16) {\r\n      if (matr.props[i] !== this.props[i]) {\r\n        return false;\r\n      }\r\n      i += 1;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  function clone(matr) {\r\n    var i;\r\n    for (i = 0; i < 16; i += 1) {\r\n      matr.props[i] = this.props[i];\r\n    }\r\n    return matr;\r\n  }\r\n\r\n  function cloneFromProps(props) {\r\n    var i;\r\n    for (i = 0; i < 16; i += 1) {\r\n      this.props[i] = props[i];\r\n    }\r\n  }\r\n\r\n  function applyToPoint(x, y, z) {\r\n    return {\r\n      x: x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],\r\n      y: x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],\r\n      z: x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14],\r\n    };\r\n    /* return {\r\n         x: x * me.a + y * me.c + me.e,\r\n         y: x * me.b + y * me.d + me.f\r\n         }; */\r\n  }\r\n  function applyToX(x, y, z) {\r\n    return x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12];\r\n  }\r\n  function applyToY(x, y, z) {\r\n    return x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13];\r\n  }\r\n  function applyToZ(x, y, z) {\r\n    return x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14];\r\n  }\r\n\r\n  function getInverseMatrix() {\r\n    var determinant = this.props[0] * this.props[5] - this.props[1] * this.props[4];\r\n    var a = this.props[5] / determinant;\r\n    var b = -this.props[1] / determinant;\r\n    var c = -this.props[4] / determinant;\r\n    var d = this.props[0] / determinant;\r\n    var e = (this.props[4] * this.props[13] - this.props[5] * this.props[12]) / determinant;\r\n    var f = -(this.props[0] * this.props[13] - this.props[1] * this.props[12]) / determinant;\r\n    var inverseMatrix = new Matrix();\r\n    inverseMatrix.props[0] = a;\r\n    inverseMatrix.props[1] = b;\r\n    inverseMatrix.props[4] = c;\r\n    inverseMatrix.props[5] = d;\r\n    inverseMatrix.props[12] = e;\r\n    inverseMatrix.props[13] = f;\r\n    return inverseMatrix;\r\n  }\r\n\r\n  function inversePoint(pt) {\r\n    var inverseMatrix = this.getInverseMatrix();\r\n    return inverseMatrix.applyToPointArray(pt[0], pt[1], pt[2] || 0);\r\n  }\r\n\r\n  function inversePoints(pts) {\r\n    var i;\r\n    var len = pts.length;\r\n    var retPts = [];\r\n    for (i = 0; i < len; i += 1) {\r\n      retPts[i] = inversePoint(pts[i]);\r\n    }\r\n    return retPts;\r\n  }\r\n\r\n  function applyToTriplePoints(pt1, pt2, pt3) {\r\n    var arr = createTypedArray('float32', 6);\r\n    if (this.isIdentity()) {\r\n      arr[0] = pt1[0];\r\n      arr[1] = pt1[1];\r\n      arr[2] = pt2[0];\r\n      arr[3] = pt2[1];\r\n      arr[4] = pt3[0];\r\n      arr[5] = pt3[1];\r\n    } else {\r\n      var p0 = this.props[0];\r\n      var p1 = this.props[1];\r\n      var p4 = this.props[4];\r\n      var p5 = this.props[5];\r\n      var p12 = this.props[12];\r\n      var p13 = this.props[13];\r\n      arr[0] = pt1[0] * p0 + pt1[1] * p4 + p12;\r\n      arr[1] = pt1[0] * p1 + pt1[1] * p5 + p13;\r\n      arr[2] = pt2[0] * p0 + pt2[1] * p4 + p12;\r\n      arr[3] = pt2[0] * p1 + pt2[1] * p5 + p13;\r\n      arr[4] = pt3[0] * p0 + pt3[1] * p4 + p12;\r\n      arr[5] = pt3[0] * p1 + pt3[1] * p5 + p13;\r\n    }\r\n    return arr;\r\n  }\r\n\r\n  function applyToPointArray(x, y, z) {\r\n    var arr;\r\n    if (this.isIdentity()) {\r\n      arr = [x, y, z];\r\n    } else {\r\n      arr = [\r\n        x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],\r\n        x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],\r\n        x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14],\r\n      ];\r\n    }\r\n    return arr;\r\n  }\r\n\r\n  function applyToPointStringified(x, y) {\r\n    if (this.isIdentity()) {\r\n      return x + ',' + y;\r\n    }\r\n    var _p = this.props;\r\n    return Math.round((x * _p[0] + y * _p[4] + _p[12]) * 100) / 100 + ',' + Math.round((x * _p[1] + y * _p[5] + _p[13]) * 100) / 100;\r\n  }\r\n\r\n  function toCSS() {\r\n    // Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\r\n    /* if(this.isIdentity()) {\r\n            return '';\r\n        } */\r\n    var i = 0;\r\n    var props = this.props;\r\n    var cssValue = 'matrix3d(';\r\n    var v = 10000;\r\n    while (i < 16) {\r\n      cssValue += _rnd(props[i] * v) / v;\r\n      cssValue += i === 15 ? ')' : ',';\r\n      i += 1;\r\n    }\r\n    return cssValue;\r\n  }\r\n\r\n  function roundMatrixProperty(val) {\r\n    var v = 10000;\r\n    if ((val < 0.000001 && val > 0) || (val > -0.000001 && val < 0)) {\r\n      return _rnd(val * v) / v;\r\n    }\r\n    return val;\r\n  }\r\n\r\n  function to2dCSS() {\r\n    // Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\r\n    /* if(this.isIdentity()) {\r\n            return '';\r\n        } */\r\n    var props = this.props;\r\n    var _a = roundMatrixProperty(props[0]);\r\n    var _b = roundMatrixProperty(props[1]);\r\n    var _c = roundMatrixProperty(props[4]);\r\n    var _d = roundMatrixProperty(props[5]);\r\n    var _e = roundMatrixProperty(props[12]);\r\n    var _f = roundMatrixProperty(props[13]);\r\n    return 'matrix(' + _a + ',' + _b + ',' + _c + ',' + _d + ',' + _e + ',' + _f + ')';\r\n  }\r\n\r\n  return function () {\r\n    this.reset = reset;\r\n    this.rotate = rotate;\r\n    this.rotateX = rotateX;\r\n    this.rotateY = rotateY;\r\n    this.rotateZ = rotateZ;\r\n    this.skew = skew;\r\n    this.skewFromAxis = skewFromAxis;\r\n    this.shear = shear;\r\n    this.scale = scale;\r\n    this.setTransform = setTransform;\r\n    this.translate = translate;\r\n    this.transform = transform;\r\n    this.multiply = multiply;\r\n    this.applyToPoint = applyToPoint;\r\n    this.applyToX = applyToX;\r\n    this.applyToY = applyToY;\r\n    this.applyToZ = applyToZ;\r\n    this.applyToPointArray = applyToPointArray;\r\n    this.applyToTriplePoints = applyToTriplePoints;\r\n    this.applyToPointStringified = applyToPointStringified;\r\n    this.toCSS = toCSS;\r\n    this.to2dCSS = to2dCSS;\r\n    this.clone = clone;\r\n    this.cloneFromProps = cloneFromProps;\r\n    this.equals = equals;\r\n    this.inversePoints = inversePoints;\r\n    this.inversePoint = inversePoint;\r\n    this.getInverseMatrix = getInverseMatrix;\r\n    this._t = this.transform;\r\n    this.isIdentity = isIdentity;\r\n    this._identity = true;\r\n    this._identityCalculated = false;\r\n\r\n    this.props = createTypedArray('float32', 16);\r\n    this.reset();\r\n  };\r\n}());\n\nconst lottie = {};\r\nvar standalone = '__[STANDALONE]__';\r\nvar animationData = '__[ANIMATIONDATA]__';\r\nvar renderer = '';\r\n\r\nfunction setLocation(href) {\r\n  setLocationHref(href);\r\n}\r\n\r\nfunction searchAnimations() {\r\n  if (standalone === true) {\r\n    animationManager.searchAnimations(animationData, standalone, renderer);\r\n  } else {\r\n    animationManager.searchAnimations();\r\n  }\r\n}\r\n\r\nfunction setSubframeRendering(flag) {\r\n  setSubframeEnabled(flag);\r\n}\r\n\r\nfunction setPrefix(prefix) {\r\n  setIdPrefix(prefix);\r\n}\r\n\r\nfunction loadAnimation(params) {\r\n  if (standalone === true) {\r\n    params.animationData = JSON.parse(animationData);\r\n  }\r\n  return animationManager.loadAnimation(params);\r\n}\r\n\r\nfunction setQuality(value) {\r\n  if (typeof value === 'string') {\r\n    switch (value) {\r\n      case 'high':\r\n        setDefaultCurveSegments(200);\r\n        break;\r\n      default:\r\n      case 'medium':\r\n        setDefaultCurveSegments(50);\r\n        break;\r\n      case 'low':\r\n        setDefaultCurveSegments(10);\r\n        break;\r\n    }\r\n  } else if (!isNaN(value) && value > 1) {\r\n    setDefaultCurveSegments(value);\r\n  }\r\n  if (getDefaultCurveSegments() >= 50) {\r\n    roundValues(false);\r\n  } else {\r\n    roundValues(true);\r\n  }\r\n}\r\n\r\nfunction inBrowser() {\r\n  return typeof navigator !== 'undefined';\r\n}\r\n\r\nfunction installPlugin(type, plugin) {\r\n  if (type === 'expressions') {\r\n    setExpressionsPlugin(plugin);\r\n  }\r\n}\r\n\r\nfunction getFactory(name) {\r\n  switch (name) {\r\n    case 'propertyFactory':\r\n      return PropertyFactory;\r\n    case 'shapePropertyFactory':\r\n      return ShapePropertyFactory;\r\n    case 'matrix':\r\n      return Matrix;\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\nlottie.play = animationManager.play;\r\nlottie.pause = animationManager.pause;\r\nlottie.setLocationHref = setLocation;\r\nlottie.togglePause = animationManager.togglePause;\r\nlottie.setSpeed = animationManager.setSpeed;\r\nlottie.setDirection = animationManager.setDirection;\r\nlottie.stop = animationManager.stop;\r\nlottie.searchAnimations = searchAnimations;\r\nlottie.registerAnimation = animationManager.registerAnimation;\r\nlottie.loadAnimation = loadAnimation;\r\nlottie.setSubframeRendering = setSubframeRendering;\r\nlottie.resize = animationManager.resize;\r\n// lottie.start = start;\r\nlottie.goToAndStop = animationManager.goToAndStop;\r\nlottie.destroy = animationManager.destroy;\r\nlottie.setQuality = setQuality;\r\nlottie.inBrowser = inBrowser;\r\nlottie.installPlugin = installPlugin;\r\nlottie.freeze = animationManager.freeze;\r\nlottie.unfreeze = animationManager.unfreeze;\r\nlottie.setVolume = animationManager.setVolume;\r\nlottie.mute = animationManager.mute;\r\nlottie.unmute = animationManager.unmute;\r\nlottie.getRegisteredAnimations = animationManager.getRegisteredAnimations;\r\nlottie.useWebWorker = setWebWorker;\r\nlottie.setIDPrefix = setPrefix;\r\nlottie.__getFactory = getFactory;\r\nlottie.version = '[[BM_VERSION]]';\r\n\r\nfunction checkReady() {\r\n  if (document.readyState === 'complete') {\r\n    clearInterval(readyStateCheckInterval);\r\n    searchAnimations();\r\n  }\r\n}\r\n\r\nfunction getQueryVariable(variable) {\r\n  var vars = queryString.split('&');\r\n  for (var i = 0; i < vars.length; i += 1) {\r\n    var pair = vars[i].split('=');\r\n    if (decodeURIComponent(pair[0]) == variable) { // eslint-disable-line eqeqeq\r\n      return decodeURIComponent(pair[1]);\r\n    }\r\n  }\r\n  return null;\r\n}\r\nvar queryString = '';\r\nif (standalone) {\r\n  var scripts = document.getElementsByTagName('script');\r\n  var index = scripts.length - 1;\r\n  var myScript = scripts[index] || {\r\n    src: '',\r\n  };\r\n  queryString = myScript.src ? myScript.src.replace(/^[^\\?]+\\??/, '') : ''; // eslint-disable-line no-useless-escape\r\n  renderer = getQueryVariable('renderer');\r\n}\r\nvar readyStateCheckInterval = setInterval(checkReady, 100);\r\n\r\n// this adds bodymovin to the window object for backwards compatibility\r\ntry {\r\n  if (!(typeof exports === 'object' && typeof module !== 'undefined')\r\n    && !(typeof define === 'function' && define.amd) // eslint-disable-line no-undef\r\n  ) {\r\n    window.bodymovin = lottie;\r\n  }\r\n} catch (err) {\r\n  //\r\n}\n\nconst ShapeModifiers = (function () {\r\n  var ob = {};\r\n  var modifiers = {};\r\n  ob.registerModifier = registerModifier;\r\n  ob.getModifier = getModifier;\r\n\r\n  function registerModifier(nm, factory) {\r\n    if (!modifiers[nm]) {\r\n      modifiers[nm] = factory;\r\n    }\r\n  }\r\n\r\n  function getModifier(nm, elem, data) {\r\n    return new modifiers[nm](elem, data);\r\n  }\r\n\r\n  return ob;\r\n}());\r\n\r\nfunction ShapeModifier() {}\r\nShapeModifier.prototype.initModifierProperties = function () {};\r\nShapeModifier.prototype.addShapeToModifier = function () {};\r\nShapeModifier.prototype.addShape = function (data) {\r\n  if (!this.closed) {\r\n    // Adding shape to dynamic properties. It covers the case where a shape has no effects applied, to reset it's _mdf state on every tick.\r\n    data.sh.container.addDynamicProperty(data.sh);\r\n    var shapeData = { shape: data.sh, data: data, localShapeCollection: shapeCollectionPool.newShapeCollection() };\r\n    this.shapes.push(shapeData);\r\n    this.addShapeToModifier(shapeData);\r\n    if (this._isAnimated) {\r\n      data.setAsAnimated();\r\n    }\r\n  }\r\n};\r\nShapeModifier.prototype.init = function (elem, data) {\r\n  this.shapes = [];\r\n  this.elem = elem;\r\n  this.initDynamicPropertyContainer(elem);\r\n  this.initModifierProperties(elem, data);\r\n  this.frameId = initialDefaultFrame;\r\n  this.closed = false;\r\n  this.k = false;\r\n  if (this.dynamicProperties.length) {\r\n    this.k = true;\r\n  } else {\r\n    this.getValue(true);\r\n  }\r\n};\r\nShapeModifier.prototype.processKeys = function () {\r\n  if (this.elem.globalData.frameId === this.frameId) {\r\n    return;\r\n  }\r\n  this.frameId = this.elem.globalData.frameId;\r\n  this.iterateDynamicProperties();\r\n};\r\n\r\nextendPrototype([DynamicPropertyContainer], ShapeModifier);\n\nfunction TrimModifier() {\r\n}\r\nextendPrototype([ShapeModifier], TrimModifier);\r\nTrimModifier.prototype.initModifierProperties = function (elem, data) {\r\n  this.s = PropertyFactory.getProp(elem, data.s, 0, 0.01, this);\r\n  this.e = PropertyFactory.getProp(elem, data.e, 0, 0.01, this);\r\n  this.o = PropertyFactory.getProp(elem, data.o, 0, 0, this);\r\n  this.sValue = 0;\r\n  this.eValue = 0;\r\n  this.getValue = this.processKeys;\r\n  this.m = data.m;\r\n  this._isAnimated = !!this.s.effectsSequence.length || !!this.e.effectsSequence.length || !!this.o.effectsSequence.length;\r\n};\r\n\r\nTrimModifier.prototype.addShapeToModifier = function (shapeData) {\r\n  shapeData.pathsData = [];\r\n};\r\n\r\nTrimModifier.prototype.calculateShapeEdges = function (s, e, shapeLength, addedLength, totalModifierLength) {\r\n  var segments = [];\r\n  if (e <= 1) {\r\n    segments.push({\r\n      s: s,\r\n      e: e,\r\n    });\r\n  } else if (s >= 1) {\r\n    segments.push({\r\n      s: s - 1,\r\n      e: e - 1,\r\n    });\r\n  } else {\r\n    segments.push({\r\n      s: s,\r\n      e: 1,\r\n    });\r\n    segments.push({\r\n      s: 0,\r\n      e: e - 1,\r\n    });\r\n  }\r\n  var shapeSegments = [];\r\n  var i;\r\n  var len = segments.length;\r\n  var segmentOb;\r\n  for (i = 0; i < len; i += 1) {\r\n    segmentOb = segments[i];\r\n    if (!(segmentOb.e * totalModifierLength < addedLength || segmentOb.s * totalModifierLength > addedLength + shapeLength)) {\r\n      var shapeS;\r\n      var shapeE;\r\n      if (segmentOb.s * totalModifierLength <= addedLength) {\r\n        shapeS = 0;\r\n      } else {\r\n        shapeS = (segmentOb.s * totalModifierLength - addedLength) / shapeLength;\r\n      }\r\n      if (segmentOb.e * totalModifierLength >= addedLength + shapeLength) {\r\n        shapeE = 1;\r\n      } else {\r\n        shapeE = ((segmentOb.e * totalModifierLength - addedLength) / shapeLength);\r\n      }\r\n      shapeSegments.push([shapeS, shapeE]);\r\n    }\r\n  }\r\n  if (!shapeSegments.length) {\r\n    shapeSegments.push([0, 0]);\r\n  }\r\n  return shapeSegments;\r\n};\r\n\r\nTrimModifier.prototype.releasePathsData = function (pathsData) {\r\n  var i;\r\n  var len = pathsData.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    segmentsLengthPool.release(pathsData[i]);\r\n  }\r\n  pathsData.length = 0;\r\n  return pathsData;\r\n};\r\n\r\nTrimModifier.prototype.processShapes = function (_isFirstFrame) {\r\n  var s;\r\n  var e;\r\n  if (this._mdf || _isFirstFrame) {\r\n    var o = (this.o.v % 360) / 360;\r\n    if (o < 0) {\r\n      o += 1;\r\n    }\r\n    if (this.s.v > 1) {\r\n      s = 1 + o;\r\n    } else if (this.s.v < 0) {\r\n      s = 0 + o;\r\n    } else {\r\n      s = this.s.v + o;\r\n    }\r\n    if (this.e.v > 1) {\r\n      e = 1 + o;\r\n    } else if (this.e.v < 0) {\r\n      e = 0 + o;\r\n    } else {\r\n      e = this.e.v + o;\r\n    }\r\n\r\n    if (s > e) {\r\n      var _s = s;\r\n      s = e;\r\n      e = _s;\r\n    }\r\n    s = Math.round(s * 10000) * 0.0001;\r\n    e = Math.round(e * 10000) * 0.0001;\r\n    this.sValue = s;\r\n    this.eValue = e;\r\n  } else {\r\n    s = this.sValue;\r\n    e = this.eValue;\r\n  }\r\n  var shapePaths;\r\n  var i;\r\n  var len = this.shapes.length;\r\n  var j;\r\n  var jLen;\r\n  var pathsData;\r\n  var pathData;\r\n  var totalShapeLength;\r\n  var totalModifierLength = 0;\r\n\r\n  if (e === s) {\r\n    for (i = 0; i < len; i += 1) {\r\n      this.shapes[i].localShapeCollection.releaseShapes();\r\n      this.shapes[i].shape._mdf = true;\r\n      this.shapes[i].shape.paths = this.shapes[i].localShapeCollection;\r\n      if (this._mdf) {\r\n        this.shapes[i].pathsData.length = 0;\r\n      }\r\n    }\r\n  } else if (!((e === 1 && s === 0) || (e === 0 && s === 1))) {\r\n    var segments = [];\r\n    var shapeData;\r\n    var localShapeCollection;\r\n    for (i = 0; i < len; i += 1) {\r\n      shapeData = this.shapes[i];\r\n      // if shape hasn't changed and trim properties haven't changed, cached previous path can be used\r\n      if (!shapeData.shape._mdf && !this._mdf && !_isFirstFrame && this.m !== 2) {\r\n        shapeData.shape.paths = shapeData.localShapeCollection;\r\n      } else {\r\n        shapePaths = shapeData.shape.paths;\r\n        jLen = shapePaths._length;\r\n        totalShapeLength = 0;\r\n        if (!shapeData.shape._mdf && shapeData.pathsData.length) {\r\n          totalShapeLength = shapeData.totalShapeLength;\r\n        } else {\r\n          pathsData = this.releasePathsData(shapeData.pathsData);\r\n          for (j = 0; j < jLen; j += 1) {\r\n            pathData = bez.getSegmentsLength(shapePaths.shapes[j]);\r\n            pathsData.push(pathData);\r\n            totalShapeLength += pathData.totalLength;\r\n          }\r\n          shapeData.totalShapeLength = totalShapeLength;\r\n          shapeData.pathsData = pathsData;\r\n        }\r\n\r\n        totalModifierLength += totalShapeLength;\r\n        shapeData.shape._mdf = true;\r\n      }\r\n    }\r\n    var shapeS = s;\r\n    var shapeE = e;\r\n    var addedLength = 0;\r\n    var edges;\r\n    for (i = len - 1; i >= 0; i -= 1) {\r\n      shapeData = this.shapes[i];\r\n      if (shapeData.shape._mdf) {\r\n        localShapeCollection = shapeData.localShapeCollection;\r\n        localShapeCollection.releaseShapes();\r\n        // if m === 2 means paths are trimmed individually so edges need to be found for this specific shape relative to whoel group\r\n        if (this.m === 2 && len > 1) {\r\n          edges = this.calculateShapeEdges(s, e, shapeData.totalShapeLength, addedLength, totalModifierLength);\r\n          addedLength += shapeData.totalShapeLength;\r\n        } else {\r\n          edges = [[shapeS, shapeE]];\r\n        }\r\n        jLen = edges.length;\r\n        for (j = 0; j < jLen; j += 1) {\r\n          shapeS = edges[j][0];\r\n          shapeE = edges[j][1];\r\n          segments.length = 0;\r\n          if (shapeE <= 1) {\r\n            segments.push({\r\n              s: shapeData.totalShapeLength * shapeS,\r\n              e: shapeData.totalShapeLength * shapeE,\r\n            });\r\n          } else if (shapeS >= 1) {\r\n            segments.push({\r\n              s: shapeData.totalShapeLength * (shapeS - 1),\r\n              e: shapeData.totalShapeLength * (shapeE - 1),\r\n            });\r\n          } else {\r\n            segments.push({\r\n              s: shapeData.totalShapeLength * shapeS,\r\n              e: shapeData.totalShapeLength,\r\n            });\r\n            segments.push({\r\n              s: 0,\r\n              e: shapeData.totalShapeLength * (shapeE - 1),\r\n            });\r\n          }\r\n          var newShapesData = this.addShapes(shapeData, segments[0]);\r\n          if (segments[0].s !== segments[0].e) {\r\n            if (segments.length > 1) {\r\n              var lastShapeInCollection = shapeData.shape.paths.shapes[shapeData.shape.paths._length - 1];\r\n              if (lastShapeInCollection.c) {\r\n                var lastShape = newShapesData.pop();\r\n                this.addPaths(newShapesData, localShapeCollection);\r\n                newShapesData = this.addShapes(shapeData, segments[1], lastShape);\r\n              } else {\r\n                this.addPaths(newShapesData, localShapeCollection);\r\n                newShapesData = this.addShapes(shapeData, segments[1]);\r\n              }\r\n            }\r\n            this.addPaths(newShapesData, localShapeCollection);\r\n          }\r\n        }\r\n        shapeData.shape.paths = localShapeCollection;\r\n      }\r\n    }\r\n  } else if (this._mdf) {\r\n    for (i = 0; i < len; i += 1) {\r\n      // Releasign Trim Cached paths data when no trim applied in case shapes are modified inbetween.\r\n      // Don't remove this even if it's losing cached info.\r\n      this.shapes[i].pathsData.length = 0;\r\n      this.shapes[i].shape._mdf = true;\r\n    }\r\n  }\r\n};\r\n\r\nTrimModifier.prototype.addPaths = function (newPaths, localShapeCollection) {\r\n  var i;\r\n  var len = newPaths.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    localShapeCollection.addShape(newPaths[i]);\r\n  }\r\n};\r\n\r\nTrimModifier.prototype.addSegment = function (pt1, pt2, pt3, pt4, shapePath, pos, newShape) {\r\n  shapePath.setXYAt(pt2[0], pt2[1], 'o', pos);\r\n  shapePath.setXYAt(pt3[0], pt3[1], 'i', pos + 1);\r\n  if (newShape) {\r\n    shapePath.setXYAt(pt1[0], pt1[1], 'v', pos);\r\n  }\r\n  shapePath.setXYAt(pt4[0], pt4[1], 'v', pos + 1);\r\n};\r\n\r\nTrimModifier.prototype.addSegmentFromArray = function (points, shapePath, pos, newShape) {\r\n  shapePath.setXYAt(points[1], points[5], 'o', pos);\r\n  shapePath.setXYAt(points[2], points[6], 'i', pos + 1);\r\n  if (newShape) {\r\n    shapePath.setXYAt(points[0], points[4], 'v', pos);\r\n  }\r\n  shapePath.setXYAt(points[3], points[7], 'v', pos + 1);\r\n};\r\n\r\nTrimModifier.prototype.addShapes = function (shapeData, shapeSegment, shapePath) {\r\n  var pathsData = shapeData.pathsData;\r\n  var shapePaths = shapeData.shape.paths.shapes;\r\n  var i;\r\n  var len = shapeData.shape.paths._length;\r\n  var j;\r\n  var jLen;\r\n  var addedLength = 0;\r\n  var currentLengthData;\r\n  var segmentCount;\r\n  var lengths;\r\n  var segment;\r\n  var shapes = [];\r\n  var initPos;\r\n  var newShape = true;\r\n  if (!shapePath) {\r\n    shapePath = shapePool.newElement();\r\n    segmentCount = 0;\r\n    initPos = 0;\r\n  } else {\r\n    segmentCount = shapePath._length;\r\n    initPos = shapePath._length;\r\n  }\r\n  shapes.push(shapePath);\r\n  for (i = 0; i < len; i += 1) {\r\n    lengths = pathsData[i].lengths;\r\n    shapePath.c = shapePaths[i].c;\r\n    jLen = shapePaths[i].c ? lengths.length : lengths.length + 1;\r\n    for (j = 1; j < jLen; j += 1) {\r\n      currentLengthData = lengths[j - 1];\r\n      if (addedLength + currentLengthData.addedLength < shapeSegment.s) {\r\n        addedLength += currentLengthData.addedLength;\r\n        shapePath.c = false;\r\n      } else if (addedLength > shapeSegment.e) {\r\n        shapePath.c = false;\r\n        break;\r\n      } else {\r\n        if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + currentLengthData.addedLength) {\r\n          this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[j], shapePaths[i].v[j], shapePath, segmentCount, newShape);\r\n          newShape = false;\r\n        } else {\r\n          segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[j], shapePaths[i].o[j - 1], shapePaths[i].i[j], (shapeSegment.s - addedLength) / currentLengthData.addedLength, (shapeSegment.e - addedLength) / currentLengthData.addedLength, lengths[j - 1]);\r\n          this.addSegmentFromArray(segment, shapePath, segmentCount, newShape);\r\n          // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\r\n          newShape = false;\r\n          shapePath.c = false;\r\n        }\r\n        addedLength += currentLengthData.addedLength;\r\n        segmentCount += 1;\r\n      }\r\n    }\r\n    if (shapePaths[i].c && lengths.length) {\r\n      currentLengthData = lengths[j - 1];\r\n      if (addedLength <= shapeSegment.e) {\r\n        var segmentLength = lengths[j - 1].addedLength;\r\n        if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + segmentLength) {\r\n          this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[0], shapePaths[i].v[0], shapePath, segmentCount, newShape);\r\n          newShape = false;\r\n        } else {\r\n          segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[0], shapePaths[i].o[j - 1], shapePaths[i].i[0], (shapeSegment.s - addedLength) / segmentLength, (shapeSegment.e - addedLength) / segmentLength, lengths[j - 1]);\r\n          this.addSegmentFromArray(segment, shapePath, segmentCount, newShape);\r\n          // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\r\n          newShape = false;\r\n          shapePath.c = false;\r\n        }\r\n      } else {\r\n        shapePath.c = false;\r\n      }\r\n      addedLength += currentLengthData.addedLength;\r\n      segmentCount += 1;\r\n    }\r\n    if (shapePath._length) {\r\n      shapePath.setXYAt(shapePath.v[initPos][0], shapePath.v[initPos][1], 'i', initPos);\r\n      shapePath.setXYAt(shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1], 'o', shapePath._length - 1);\r\n    }\r\n    if (addedLength > shapeSegment.e) {\r\n      break;\r\n    }\r\n    if (i < len - 1) {\r\n      shapePath = shapePool.newElement();\r\n      newShape = true;\r\n      shapes.push(shapePath);\r\n      segmentCount = 0;\r\n    }\r\n  }\r\n  return shapes;\r\n};\n\nfunction PuckerAndBloatModifier() {}\r\nextendPrototype([ShapeModifier], PuckerAndBloatModifier);\r\nPuckerAndBloatModifier.prototype.initModifierProperties = function (elem, data) {\r\n  this.getValue = this.processKeys;\r\n  this.amount = PropertyFactory.getProp(elem, data.a, 0, null, this);\r\n  this._isAnimated = !!this.amount.effectsSequence.length;\r\n};\r\n\r\nPuckerAndBloatModifier.prototype.processPath = function (path, amount) {\r\n  var percent = amount / 100;\r\n  var centerPoint = [0, 0];\r\n  var pathLength = path._length;\r\n  var i = 0;\r\n  for (i = 0; i < pathLength; i += 1) {\r\n    centerPoint[0] += path.v[i][0];\r\n    centerPoint[1] += path.v[i][1];\r\n  }\r\n  centerPoint[0] /= pathLength;\r\n  centerPoint[1] /= pathLength;\r\n  var clonedPath = shapePool.newElement();\r\n  clonedPath.c = path.c;\r\n  var vX;\r\n  var vY;\r\n  var oX;\r\n  var oY;\r\n  var iX;\r\n  var iY;\r\n  for (i = 0; i < pathLength; i += 1) {\r\n    vX = path.v[i][0] + (centerPoint[0] - path.v[i][0]) * percent;\r\n    vY = path.v[i][1] + (centerPoint[1] - path.v[i][1]) * percent;\r\n    oX = path.o[i][0] + (centerPoint[0] - path.o[i][0]) * -percent;\r\n    oY = path.o[i][1] + (centerPoint[1] - path.o[i][1]) * -percent;\r\n    iX = path.i[i][0] + (centerPoint[0] - path.i[i][0]) * -percent;\r\n    iY = path.i[i][1] + (centerPoint[1] - path.i[i][1]) * -percent;\r\n    clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, i);\r\n  }\r\n  return clonedPath;\r\n};\r\n\r\nPuckerAndBloatModifier.prototype.processShapes = function (_isFirstFrame) {\r\n  var shapePaths;\r\n  var i;\r\n  var len = this.shapes.length;\r\n  var j;\r\n  var jLen;\r\n  var amount = this.amount.v;\r\n\r\n  if (amount !== 0) {\r\n    var shapeData;\r\n    var localShapeCollection;\r\n    for (i = 0; i < len; i += 1) {\r\n      shapeData = this.shapes[i];\r\n      localShapeCollection = shapeData.localShapeCollection;\r\n      if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\r\n        localShapeCollection.releaseShapes();\r\n        shapeData.shape._mdf = true;\r\n        shapePaths = shapeData.shape.paths.shapes;\r\n        jLen = shapeData.shape.paths._length;\r\n        for (j = 0; j < jLen; j += 1) {\r\n          localShapeCollection.addShape(this.processPath(shapePaths[j], amount));\r\n        }\r\n      }\r\n      shapeData.shape.paths = shapeData.localShapeCollection;\r\n    }\r\n  }\r\n  if (!this.dynamicProperties.length) {\r\n    this._mdf = false;\r\n  }\r\n};\n\nconst TransformPropertyFactory = (function () {\r\n  var defaultVector = [0, 0];\r\n\r\n  function applyToMatrix(mat) {\r\n    var _mdf = this._mdf;\r\n    this.iterateDynamicProperties();\r\n    this._mdf = this._mdf || _mdf;\r\n    if (this.a) {\r\n      mat.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n    }\r\n    if (this.s) {\r\n      mat.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n    }\r\n    if (this.sk) {\r\n      mat.skewFromAxis(-this.sk.v, this.sa.v);\r\n    }\r\n    if (this.r) {\r\n      mat.rotate(-this.r.v);\r\n    } else {\r\n      mat.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2])\r\n        .rotateY(this.or.v[1])\r\n        .rotateX(this.or.v[0]);\r\n    }\r\n    if (this.data.p.s) {\r\n      if (this.data.p.z) {\r\n        mat.translate(this.px.v, this.py.v, -this.pz.v);\r\n      } else {\r\n        mat.translate(this.px.v, this.py.v, 0);\r\n      }\r\n    } else {\r\n      mat.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\r\n    }\r\n  }\r\n  function processKeys(forceRender) {\r\n    if (this.elem.globalData.frameId === this.frameId) {\r\n      return;\r\n    }\r\n    if (this._isDirty) {\r\n      this.precalculateMatrix();\r\n      this._isDirty = false;\r\n    }\r\n\r\n    this.iterateDynamicProperties();\r\n\r\n    if (this._mdf || forceRender) {\r\n      var frameRate;\r\n      this.v.cloneFromProps(this.pre.props);\r\n      if (this.appliedTransformations < 1) {\r\n        this.v.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n      }\r\n      if (this.appliedTransformations < 2) {\r\n        this.v.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n      }\r\n      if (this.sk && this.appliedTransformations < 3) {\r\n        this.v.skewFromAxis(-this.sk.v, this.sa.v);\r\n      }\r\n      if (this.r && this.appliedTransformations < 4) {\r\n        this.v.rotate(-this.r.v);\r\n      } else if (!this.r && this.appliedTransformations < 4) {\r\n        this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2])\r\n          .rotateY(this.or.v[1])\r\n          .rotateX(this.or.v[0]);\r\n      }\r\n      if (this.autoOriented) {\r\n        var v1;\r\n        var v2;\r\n        frameRate = this.elem.globalData.frameRate;\r\n        if (this.p && this.p.keyframes && this.p.getValueAtTime) {\r\n          if (this.p._caching.lastFrame + this.p.offsetTime <= this.p.keyframes[0].t) {\r\n            v1 = this.p.getValueAtTime((this.p.keyframes[0].t + 0.01) / frameRate, 0);\r\n            v2 = this.p.getValueAtTime(this.p.keyframes[0].t / frameRate, 0);\r\n          } else if (this.p._caching.lastFrame + this.p.offsetTime >= this.p.keyframes[this.p.keyframes.length - 1].t) {\r\n            v1 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t / frameRate), 0);\r\n            v2 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t - 0.05) / frameRate, 0);\r\n          } else {\r\n            v1 = this.p.pv;\r\n            v2 = this.p.getValueAtTime((this.p._caching.lastFrame + this.p.offsetTime - 0.01) / frameRate, this.p.offsetTime);\r\n          }\r\n        } else if (this.px && this.px.keyframes && this.py.keyframes && this.px.getValueAtTime && this.py.getValueAtTime) {\r\n          v1 = [];\r\n          v2 = [];\r\n          var px = this.px;\r\n          var py = this.py;\r\n          if (px._caching.lastFrame + px.offsetTime <= px.keyframes[0].t) {\r\n            v1[0] = px.getValueAtTime((px.keyframes[0].t + 0.01) / frameRate, 0);\r\n            v1[1] = py.getValueAtTime((py.keyframes[0].t + 0.01) / frameRate, 0);\r\n            v2[0] = px.getValueAtTime((px.keyframes[0].t) / frameRate, 0);\r\n            v2[1] = py.getValueAtTime((py.keyframes[0].t) / frameRate, 0);\r\n          } else if (px._caching.lastFrame + px.offsetTime >= px.keyframes[px.keyframes.length - 1].t) {\r\n            v1[0] = px.getValueAtTime((px.keyframes[px.keyframes.length - 1].t / frameRate), 0);\r\n            v1[1] = py.getValueAtTime((py.keyframes[py.keyframes.length - 1].t / frameRate), 0);\r\n            v2[0] = px.getValueAtTime((px.keyframes[px.keyframes.length - 1].t - 0.01) / frameRate, 0);\r\n            v2[1] = py.getValueAtTime((py.keyframes[py.keyframes.length - 1].t - 0.01) / frameRate, 0);\r\n          } else {\r\n            v1 = [px.pv, py.pv];\r\n            v2[0] = px.getValueAtTime((px._caching.lastFrame + px.offsetTime - 0.01) / frameRate, px.offsetTime);\r\n            v2[1] = py.getValueAtTime((py._caching.lastFrame + py.offsetTime - 0.01) / frameRate, py.offsetTime);\r\n          }\r\n        } else {\r\n          v2 = defaultVector;\r\n          v1 = v2;\r\n        }\r\n        this.v.rotate(-Math.atan2(v1[1] - v2[1], v1[0] - v2[0]));\r\n      }\r\n      if (this.data.p && this.data.p.s) {\r\n        if (this.data.p.z) {\r\n          this.v.translate(this.px.v, this.py.v, -this.pz.v);\r\n        } else {\r\n          this.v.translate(this.px.v, this.py.v, 0);\r\n        }\r\n      } else {\r\n        this.v.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\r\n      }\r\n    }\r\n    this.frameId = this.elem.globalData.frameId;\r\n  }\r\n\r\n  function precalculateMatrix() {\r\n    this.appliedTransformations = 0;\r\n    this.pre.reset();\r\n\r\n    if (!this.a.effectsSequence.length) {\r\n      this.pre.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n      this.appliedTransformations = 1;\r\n    } else {\r\n      return;\r\n    }\r\n    if (!this.s.effectsSequence.length) {\r\n      this.pre.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n      this.appliedTransformations = 2;\r\n    } else {\r\n      return;\r\n    }\r\n    if (this.sk) {\r\n      if (!this.sk.effectsSequence.length && !this.sa.effectsSequence.length) {\r\n        this.pre.skewFromAxis(-this.sk.v, this.sa.v);\r\n        this.appliedTransformations = 3;\r\n      } else {\r\n        return;\r\n      }\r\n    }\r\n    if (this.r) {\r\n      if (!this.r.effectsSequence.length) {\r\n        this.pre.rotate(-this.r.v);\r\n        this.appliedTransformations = 4;\r\n      }\r\n    } else if (!this.rz.effectsSequence.length && !this.ry.effectsSequence.length && !this.rx.effectsSequence.length && !this.or.effectsSequence.length) {\r\n      this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2])\r\n        .rotateY(this.or.v[1])\r\n        .rotateX(this.or.v[0]);\r\n      this.appliedTransformations = 4;\r\n    }\r\n  }\r\n\r\n  function autoOrient() {\r\n    //\r\n    // var prevP = this.getValueAtTime();\r\n  }\r\n\r\n  function addDynamicProperty(prop) {\r\n    this._addDynamicProperty(prop);\r\n    this.elem.addDynamicProperty(prop);\r\n    this._isDirty = true;\r\n  }\r\n\r\n  function TransformProperty(elem, data, container) {\r\n    this.elem = elem;\r\n    this.frameId = -1;\r\n    this.propType = 'transform';\r\n    this.data = data;\r\n    this.v = new Matrix();\r\n    // Precalculated matrix with non animated properties\r\n    this.pre = new Matrix();\r\n    this.appliedTransformations = 0;\r\n    this.initDynamicPropertyContainer(container || elem);\r\n    if (data.p && data.p.s) {\r\n      this.px = PropertyFactory.getProp(elem, data.p.x, 0, 0, this);\r\n      this.py = PropertyFactory.getProp(elem, data.p.y, 0, 0, this);\r\n      if (data.p.z) {\r\n        this.pz = PropertyFactory.getProp(elem, data.p.z, 0, 0, this);\r\n      }\r\n    } else {\r\n      this.p = PropertyFactory.getProp(elem, data.p || { k: [0, 0, 0] }, 1, 0, this);\r\n    }\r\n    if (data.rx) {\r\n      this.rx = PropertyFactory.getProp(elem, data.rx, 0, degToRads, this);\r\n      this.ry = PropertyFactory.getProp(elem, data.ry, 0, degToRads, this);\r\n      this.rz = PropertyFactory.getProp(elem, data.rz, 0, degToRads, this);\r\n      if (data.or.k[0].ti) {\r\n        var i;\r\n        var len = data.or.k.length;\r\n        for (i = 0; i < len; i += 1) {\r\n          data.or.k[i].to = null;\r\n          data.or.k[i].ti = null;\r\n        }\r\n      }\r\n      this.or = PropertyFactory.getProp(elem, data.or, 1, degToRads, this);\r\n      // sh Indicates it needs to be capped between -180 and 180\r\n      this.or.sh = true;\r\n    } else {\r\n      this.r = PropertyFactory.getProp(elem, data.r || { k: 0 }, 0, degToRads, this);\r\n    }\r\n    if (data.sk) {\r\n      this.sk = PropertyFactory.getProp(elem, data.sk, 0, degToRads, this);\r\n      this.sa = PropertyFactory.getProp(elem, data.sa, 0, degToRads, this);\r\n    }\r\n    this.a = PropertyFactory.getProp(elem, data.a || { k: [0, 0, 0] }, 1, 0, this);\r\n    this.s = PropertyFactory.getProp(elem, data.s || { k: [100, 100, 100] }, 1, 0.01, this);\r\n    // Opacity is not part of the transform properties, that's why it won't use this.dynamicProperties. That way transforms won't get updated if opacity changes.\r\n    if (data.o) {\r\n      this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, elem);\r\n    } else {\r\n      this.o = { _mdf: false, v: 1 };\r\n    }\r\n    this._isDirty = true;\r\n    if (!this.dynamicProperties.length) {\r\n      this.getValue(true);\r\n    }\r\n  }\r\n\r\n  TransformProperty.prototype = {\r\n    applyToMatrix: applyToMatrix,\r\n    getValue: processKeys,\r\n    precalculateMatrix: precalculateMatrix,\r\n    autoOrient: autoOrient,\r\n  };\r\n\r\n  extendPrototype([DynamicPropertyContainer], TransformProperty);\r\n  TransformProperty.prototype.addDynamicProperty = addDynamicProperty;\r\n  TransformProperty.prototype._addDynamicProperty = DynamicPropertyContainer.prototype.addDynamicProperty;\r\n\r\n  function getTransformProperty(elem, data, container) {\r\n    return new TransformProperty(elem, data, container);\r\n  }\r\n\r\n  return {\r\n    getTransformProperty: getTransformProperty,\r\n  };\r\n}());\n\nfunction RepeaterModifier() {}\r\nextendPrototype([ShapeModifier], RepeaterModifier);\r\n\r\nRepeaterModifier.prototype.initModifierProperties = function (elem, data) {\r\n  this.getValue = this.processKeys;\r\n  this.c = PropertyFactory.getProp(elem, data.c, 0, null, this);\r\n  this.o = PropertyFactory.getProp(elem, data.o, 0, null, this);\r\n  this.tr = TransformPropertyFactory.getTransformProperty(elem, data.tr, this);\r\n  this.so = PropertyFactory.getProp(elem, data.tr.so, 0, 0.01, this);\r\n  this.eo = PropertyFactory.getProp(elem, data.tr.eo, 0, 0.01, this);\r\n  this.data = data;\r\n  if (!this.dynamicProperties.length) {\r\n    this.getValue(true);\r\n  }\r\n  this._isAnimated = !!this.dynamicProperties.length;\r\n  this.pMatrix = new Matrix();\r\n  this.rMatrix = new Matrix();\r\n  this.sMatrix = new Matrix();\r\n  this.tMatrix = new Matrix();\r\n  this.matrix = new Matrix();\r\n};\r\n\r\nRepeaterModifier.prototype.applyTransforms = function (pMatrix, rMatrix, sMatrix, transform, perc, inv) {\r\n  var dir = inv ? -1 : 1;\r\n  var scaleX = transform.s.v[0] + (1 - transform.s.v[0]) * (1 - perc);\r\n  var scaleY = transform.s.v[1] + (1 - transform.s.v[1]) * (1 - perc);\r\n  pMatrix.translate(transform.p.v[0] * dir * perc, transform.p.v[1] * dir * perc, transform.p.v[2]);\r\n  rMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\r\n  rMatrix.rotate(-transform.r.v * dir * perc);\r\n  rMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\r\n  sMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\r\n  sMatrix.scale(inv ? 1 / scaleX : scaleX, inv ? 1 / scaleY : scaleY);\r\n  sMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\r\n};\r\n\r\nRepeaterModifier.prototype.init = function (elem, arr, pos, elemsData) {\r\n  this.elem = elem;\r\n  this.arr = arr;\r\n  this.pos = pos;\r\n  this.elemsData = elemsData;\r\n  this._currentCopies = 0;\r\n  this._elements = [];\r\n  this._groups = [];\r\n  this.frameId = -1;\r\n  this.initDynamicPropertyContainer(elem);\r\n  this.initModifierProperties(elem, arr[pos]);\r\n  while (pos > 0) {\r\n    pos -= 1;\r\n    // this._elements.unshift(arr.splice(pos,1)[0]);\r\n    this._elements.unshift(arr[pos]);\r\n  }\r\n  if (this.dynamicProperties.length) {\r\n    this.k = true;\r\n  } else {\r\n    this.getValue(true);\r\n  }\r\n};\r\n\r\nRepeaterModifier.prototype.resetElements = function (elements) {\r\n  var i;\r\n  var len = elements.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    elements[i]._processed = false;\r\n    if (elements[i].ty === 'gr') {\r\n      this.resetElements(elements[i].it);\r\n    }\r\n  }\r\n};\r\n\r\nRepeaterModifier.prototype.cloneElements = function (elements) {\r\n  var newElements = JSON.parse(JSON.stringify(elements));\r\n  this.resetElements(newElements);\r\n  return newElements;\r\n};\r\n\r\nRepeaterModifier.prototype.changeGroupRender = function (elements, renderFlag) {\r\n  var i;\r\n  var len = elements.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    elements[i]._render = renderFlag;\r\n    if (elements[i].ty === 'gr') {\r\n      this.changeGroupRender(elements[i].it, renderFlag);\r\n    }\r\n  }\r\n};\r\n\r\nRepeaterModifier.prototype.processShapes = function (_isFirstFrame) {\r\n  var items;\r\n  var itemsTransform;\r\n  var i;\r\n  var dir;\r\n  var cont;\r\n  var hasReloaded = false;\r\n  if (this._mdf || _isFirstFrame) {\r\n    var copies = Math.ceil(this.c.v);\r\n    if (this._groups.length < copies) {\r\n      while (this._groups.length < copies) {\r\n        var group = {\r\n          it: this.cloneElements(this._elements),\r\n          ty: 'gr',\r\n        };\r\n        group.it.push({\r\n          a: { a: 0, ix: 1, k: [0, 0] }, nm: 'Transform', o: { a: 0, ix: 7, k: 100 }, p: { a: 0, ix: 2, k: [0, 0] }, r: { a: 1, ix: 6, k: [{ s: 0, e: 0, t: 0 }, { s: 0, e: 0, t: 1 }] }, s: { a: 0, ix: 3, k: [100, 100] }, sa: { a: 0, ix: 5, k: 0 }, sk: { a: 0, ix: 4, k: 0 }, ty: 'tr',\r\n        });\r\n\r\n        this.arr.splice(0, 0, group);\r\n        this._groups.splice(0, 0, group);\r\n        this._currentCopies += 1;\r\n      }\r\n      this.elem.reloadShapes();\r\n      hasReloaded = true;\r\n    }\r\n    cont = 0;\r\n    var renderFlag;\r\n    for (i = 0; i <= this._groups.length - 1; i += 1) {\r\n      renderFlag = cont < copies;\r\n      this._groups[i]._render = renderFlag;\r\n      this.changeGroupRender(this._groups[i].it, renderFlag);\r\n      if (!renderFlag) {\r\n        var elems = this.elemsData[i].it;\r\n        var transformData = elems[elems.length - 1];\r\n        if (transformData.transform.op.v !== 0) {\r\n          transformData.transform.op._mdf = true;\r\n          transformData.transform.op.v = 0;\r\n        } else {\r\n          transformData.transform.op._mdf = false;\r\n        }\r\n      }\r\n      cont += 1;\r\n    }\r\n\r\n    this._currentCopies = copies;\r\n    /// /\r\n\r\n    var offset = this.o.v;\r\n    var offsetModulo = offset % 1;\r\n    var roundOffset = offset > 0 ? Math.floor(offset) : Math.ceil(offset);\r\n    var pProps = this.pMatrix.props;\r\n    var rProps = this.rMatrix.props;\r\n    var sProps = this.sMatrix.props;\r\n    this.pMatrix.reset();\r\n    this.rMatrix.reset();\r\n    this.sMatrix.reset();\r\n    this.tMatrix.reset();\r\n    this.matrix.reset();\r\n    var iteration = 0;\r\n\r\n    if (offset > 0) {\r\n      while (iteration < roundOffset) {\r\n        this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\r\n        iteration += 1;\r\n      }\r\n      if (offsetModulo) {\r\n        this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, offsetModulo, false);\r\n        iteration += offsetModulo;\r\n      }\r\n    } else if (offset < 0) {\r\n      while (iteration > roundOffset) {\r\n        this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, true);\r\n        iteration -= 1;\r\n      }\r\n      if (offsetModulo) {\r\n        this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, -offsetModulo, true);\r\n        iteration -= offsetModulo;\r\n      }\r\n    }\r\n    i = this.data.m === 1 ? 0 : this._currentCopies - 1;\r\n    dir = this.data.m === 1 ? 1 : -1;\r\n    cont = this._currentCopies;\r\n    var j;\r\n    var jLen;\r\n    while (cont) {\r\n      items = this.elemsData[i].it;\r\n      itemsTransform = items[items.length - 1].transform.mProps.v.props;\r\n      jLen = itemsTransform.length;\r\n      items[items.length - 1].transform.mProps._mdf = true;\r\n      items[items.length - 1].transform.op._mdf = true;\r\n      items[items.length - 1].transform.op.v = this._currentCopies === 1\r\n        ? this.so.v\r\n        : this.so.v + (this.eo.v - this.so.v) * (i / (this._currentCopies - 1));\r\n\r\n      if (iteration !== 0) {\r\n        if ((i !== 0 && dir === 1) || (i !== this._currentCopies - 1 && dir === -1)) {\r\n          this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\r\n        }\r\n        this.matrix.transform(rProps[0], rProps[1], rProps[2], rProps[3], rProps[4], rProps[5], rProps[6], rProps[7], rProps[8], rProps[9], rProps[10], rProps[11], rProps[12], rProps[13], rProps[14], rProps[15]);\r\n        this.matrix.transform(sProps[0], sProps[1], sProps[2], sProps[3], sProps[4], sProps[5], sProps[6], sProps[7], sProps[8], sProps[9], sProps[10], sProps[11], sProps[12], sProps[13], sProps[14], sProps[15]);\r\n        this.matrix.transform(pProps[0], pProps[1], pProps[2], pProps[3], pProps[4], pProps[5], pProps[6], pProps[7], pProps[8], pProps[9], pProps[10], pProps[11], pProps[12], pProps[13], pProps[14], pProps[15]);\r\n\r\n        for (j = 0; j < jLen; j += 1) {\r\n          itemsTransform[j] = this.matrix.props[j];\r\n        }\r\n        this.matrix.reset();\r\n      } else {\r\n        this.matrix.reset();\r\n        for (j = 0; j < jLen; j += 1) {\r\n          itemsTransform[j] = this.matrix.props[j];\r\n        }\r\n      }\r\n      iteration += 1;\r\n      cont -= 1;\r\n      i += dir;\r\n    }\r\n  } else {\r\n    cont = this._currentCopies;\r\n    i = 0;\r\n    dir = 1;\r\n    while (cont) {\r\n      items = this.elemsData[i].it;\r\n      itemsTransform = items[items.length - 1].transform.mProps.v.props;\r\n      items[items.length - 1].transform.mProps._mdf = false;\r\n      items[items.length - 1].transform.op._mdf = false;\r\n      cont -= 1;\r\n      i += dir;\r\n    }\r\n  }\r\n  return hasReloaded;\r\n};\r\n\r\nRepeaterModifier.prototype.addShape = function () {};\n\nfunction RoundCornersModifier() {}\r\nextendPrototype([ShapeModifier], RoundCornersModifier);\r\nRoundCornersModifier.prototype.initModifierProperties = function (elem, data) {\r\n  this.getValue = this.processKeys;\r\n  this.rd = PropertyFactory.getProp(elem, data.r, 0, null, this);\r\n  this._isAnimated = !!this.rd.effectsSequence.length;\r\n};\r\n\r\nRoundCornersModifier.prototype.processPath = function (path, round) {\r\n  var clonedPath = shapePool.newElement();\r\n  clonedPath.c = path.c;\r\n  var i;\r\n  var len = path._length;\r\n  var currentV;\r\n  var currentI;\r\n  var currentO;\r\n  var closerV;\r\n  var distance;\r\n  var newPosPerc;\r\n  var index = 0;\r\n  var vX;\r\n  var vY;\r\n  var oX;\r\n  var oY;\r\n  var iX;\r\n  var iY;\r\n  for (i = 0; i < len; i += 1) {\r\n    currentV = path.v[i];\r\n    currentO = path.o[i];\r\n    currentI = path.i[i];\r\n    if (currentV[0] === currentO[0] && currentV[1] === currentO[1] && currentV[0] === currentI[0] && currentV[1] === currentI[1]) {\r\n      if ((i === 0 || i === len - 1) && !path.c) {\r\n        clonedPath.setTripleAt(currentV[0], currentV[1], currentO[0], currentO[1], currentI[0], currentI[1], index);\r\n        /* clonedPath.v[index] = currentV;\r\n                clonedPath.o[index] = currentO;\r\n                clonedPath.i[index] = currentI; */\r\n        index += 1;\r\n      } else {\r\n        if (i === 0) {\r\n          closerV = path.v[len - 1];\r\n        } else {\r\n          closerV = path.v[i - 1];\r\n        }\r\n        distance = Math.sqrt(Math.pow(currentV[0] - closerV[0], 2) + Math.pow(currentV[1] - closerV[1], 2));\r\n        newPosPerc = distance ? Math.min(distance / 2, round) / distance : 0;\r\n        iX = currentV[0] + (closerV[0] - currentV[0]) * newPosPerc;\r\n        vX = iX;\r\n        iY = currentV[1] - (currentV[1] - closerV[1]) * newPosPerc;\r\n        vY = iY;\r\n        oX = vX - (vX - currentV[0]) * roundCorner;\r\n        oY = vY - (vY - currentV[1]) * roundCorner;\r\n        clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, index);\r\n        index += 1;\r\n\r\n        if (i === len - 1) {\r\n          closerV = path.v[0];\r\n        } else {\r\n          closerV = path.v[i + 1];\r\n        }\r\n        distance = Math.sqrt(Math.pow(currentV[0] - closerV[0], 2) + Math.pow(currentV[1] - closerV[1], 2));\r\n        newPosPerc = distance ? Math.min(distance / 2, round) / distance : 0;\r\n        oX = currentV[0] + (closerV[0] - currentV[0]) * newPosPerc;\r\n        vX = oX;\r\n        oY = currentV[1] + (closerV[1] - currentV[1]) * newPosPerc;\r\n        vY = oY;\r\n        iX = vX - (vX - currentV[0]) * roundCorner;\r\n        iY = vY - (vY - currentV[1]) * roundCorner;\r\n        clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, index);\r\n        index += 1;\r\n      }\r\n    } else {\r\n      clonedPath.setTripleAt(path.v[i][0], path.v[i][1], path.o[i][0], path.o[i][1], path.i[i][0], path.i[i][1], index);\r\n      index += 1;\r\n    }\r\n  }\r\n  return clonedPath;\r\n};\r\n\r\nRoundCornersModifier.prototype.processShapes = function (_isFirstFrame) {\r\n  var shapePaths;\r\n  var i;\r\n  var len = this.shapes.length;\r\n  var j;\r\n  var jLen;\r\n  var rd = this.rd.v;\r\n\r\n  if (rd !== 0) {\r\n    var shapeData;\r\n    var localShapeCollection;\r\n    for (i = 0; i < len; i += 1) {\r\n      shapeData = this.shapes[i];\r\n      localShapeCollection = shapeData.localShapeCollection;\r\n      if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\r\n        localShapeCollection.releaseShapes();\r\n        shapeData.shape._mdf = true;\r\n        shapePaths = shapeData.shape.paths.shapes;\r\n        jLen = shapeData.shape.paths._length;\r\n        for (j = 0; j < jLen; j += 1) {\r\n          localShapeCollection.addShape(this.processPath(shapePaths[j], rd));\r\n        }\r\n      }\r\n      shapeData.shape.paths = shapeData.localShapeCollection;\r\n    }\r\n  }\r\n  if (!this.dynamicProperties.length) {\r\n    this._mdf = false;\r\n  }\r\n};\n\nfunction floatEqual(a, b) {\r\n  return Math.abs(a - b) * 100000 <= Math.min(Math.abs(a), Math.abs(b));\r\n}\r\n\r\nfunction floatZero(f) {\r\n  return Math.abs(f) <= 0.00001;\r\n}\r\n\r\nfunction lerp(p0, p1, amount) {\r\n  return p0 * (1 - amount) + p1 * amount;\r\n}\r\n\r\nfunction lerpPoint(p0, p1, amount) {\r\n  return [lerp(p0[0], p1[0], amount), lerp(p0[1], p1[1], amount)];\r\n}\r\n\r\nfunction quadRoots(a, b, c) {\r\n  // no root\r\n  if (a === 0) return [];\r\n  var s = b * b - 4 * a * c;\r\n  // Complex roots\r\n  if (s < 0) return [];\r\n  var singleRoot = -b / (2 * a);\r\n  // 1 root\r\n  if (s === 0) return [singleRoot];\r\n  var delta = Math.sqrt(s) / (2 * a);\r\n  // 2 roots\r\n  return [singleRoot - delta, singleRoot + delta];\r\n}\r\n\r\nfunction polynomialCoefficients(p0, p1, p2, p3) {\r\n  return [\r\n    -p0 + 3 * p1 - 3 * p2 + p3,\r\n    3 * p0 - 6 * p1 + 3 * p2,\r\n    -3 * p0 + 3 * p1,\r\n    p0,\r\n  ];\r\n}\r\n\r\nfunction singlePoint(p) {\r\n  return new PolynomialBezier(p, p, p, p, false);\r\n}\r\n\r\nfunction PolynomialBezier(p0, p1, p2, p3, linearize) {\r\n  if (linearize && pointEqual(p0, p1)) {\r\n    p1 = lerpPoint(p0, p3, 1 / 3);\r\n  }\r\n  if (linearize && pointEqual(p2, p3)) {\r\n    p2 = lerpPoint(p0, p3, 2 / 3);\r\n  }\r\n  var coeffx = polynomialCoefficients(p0[0], p1[0], p2[0], p3[0]);\r\n  var coeffy = polynomialCoefficients(p0[1], p1[1], p2[1], p3[1]);\r\n  this.a = [coeffx[0], coeffy[0]];\r\n  this.b = [coeffx[1], coeffy[1]];\r\n  this.c = [coeffx[2], coeffy[2]];\r\n  this.d = [coeffx[3], coeffy[3]];\r\n  this.points = [p0, p1, p2, p3];\r\n}\r\nPolynomialBezier.prototype.point = function (t) {\r\n  return [\r\n    (((this.a[0] * t) + this.b[0]) * t + this.c[0]) * t + this.d[0],\r\n    (((this.a[1] * t) + this.b[1]) * t + this.c[1]) * t + this.d[1],\r\n  ];\r\n};\r\nPolynomialBezier.prototype.derivative = function (t) {\r\n  return [\r\n    (3 * t * this.a[0] + 2 * this.b[0]) * t + this.c[0],\r\n    (3 * t * this.a[1] + 2 * this.b[1]) * t + this.c[1],\r\n  ];\r\n};\r\nPolynomialBezier.prototype.tangentAngle = function (t) {\r\n  var p = this.derivative(t);\r\n  return Math.atan2(p[1], p[0]);\r\n};\r\nPolynomialBezier.prototype.normalAngle = function (t) {\r\n  var p = this.derivative(t);\r\n  return Math.atan2(p[0], p[1]);\r\n};\r\n\r\nPolynomialBezier.prototype.inflectionPoints = function () {\r\n  var denom = this.a[1] * this.b[0] - this.a[0] * this.b[1];\r\n  if (floatZero(denom)) return [];\r\n  var tcusp = (-0.5 * (this.a[1] * this.c[0] - this.a[0] * this.c[1])) / denom;\r\n  var square = tcusp * tcusp - ((1 / 3) * (this.b[1] * this.c[0] - this.b[0] * this.c[1])) / denom;\r\n  if (square < 0) return [];\r\n  var root = Math.sqrt(square);\r\n  if (floatZero(root)) {\r\n    if (root > 0 && root < 1) return [tcusp];\r\n    return [];\r\n  }\r\n  return [tcusp - root, tcusp + root].filter(function (r) { return r > 0 && r < 1; });\r\n};\r\nPolynomialBezier.prototype.split = function (t) {\r\n  if (t <= 0) return [singlePoint(this.points[0]), this];\r\n  if (t >= 1) return [this, singlePoint(this.points[this.points.length - 1])];\r\n  var p10 = lerpPoint(this.points[0], this.points[1], t);\r\n  var p11 = lerpPoint(this.points[1], this.points[2], t);\r\n  var p12 = lerpPoint(this.points[2], this.points[3], t);\r\n  var p20 = lerpPoint(p10, p11, t);\r\n  var p21 = lerpPoint(p11, p12, t);\r\n  var p3 = lerpPoint(p20, p21, t);\r\n  return [\r\n    new PolynomialBezier(this.points[0], p10, p20, p3, true),\r\n    new PolynomialBezier(p3, p21, p12, this.points[3], true),\r\n  ];\r\n};\r\nfunction extrema(bez, comp) {\r\n  var min = bez.points[0][comp];\r\n  var max = bez.points[bez.points.length - 1][comp];\r\n  if (min > max) {\r\n    var e = max;\r\n    max = min;\r\n    min = e;\r\n  }\r\n  // Derivative roots to find min/max\r\n  var f = quadRoots(3 * bez.a[comp], 2 * bez.b[comp], bez.c[comp]);\r\n  for (var i = 0; i < f.length; i += 1) {\r\n    if (f[i] > 0 && f[i] < 1) {\r\n      var val = bez.point(f[i])[comp];\r\n      if (val < min) min = val;\r\n      else if (val > max) max = val;\r\n    }\r\n  }\r\n  return {\r\n    min: min,\r\n    max: max,\r\n  };\r\n}\r\nPolynomialBezier.prototype.bounds = function () {\r\n  return {\r\n    x: extrema(this, 0),\r\n    y: extrema(this, 1),\r\n  };\r\n};\r\nPolynomialBezier.prototype.boundingBox = function () {\r\n  var bounds = this.bounds();\r\n  return {\r\n    left: bounds.x.min,\r\n    right: bounds.x.max,\r\n    top: bounds.y.min,\r\n    bottom: bounds.y.max,\r\n    width: bounds.x.max - bounds.x.min,\r\n    height: bounds.y.max - bounds.y.min,\r\n    cx: (bounds.x.max + bounds.x.min) / 2,\r\n    cy: (bounds.y.max + bounds.y.min) / 2,\r\n  };\r\n};\r\n\r\nfunction intersectData(bez, t1, t2) {\r\n  var box = bez.boundingBox();\r\n  return {\r\n    cx: box.cx,\r\n    cy: box.cy,\r\n    width: box.width,\r\n    height: box.height,\r\n    bez: bez,\r\n    t: (t1 + t2) / 2,\r\n    t1: t1,\r\n    t2: t2,\r\n  };\r\n}\r\nfunction splitData(data) {\r\n  var split = data.bez.split(0.5);\r\n  return [\r\n    intersectData(split[0], data.t1, data.t),\r\n    intersectData(split[1], data.t, data.t2),\r\n  ];\r\n}\r\n\r\nfunction boxIntersect(b1, b2) {\r\n  return Math.abs(b1.cx - b2.cx) * 2 < b1.width + b2.width\r\n    && Math.abs(b1.cy - b2.cy) * 2 < b1.height + b2.height;\r\n}\r\n\r\nfunction intersectsImpl(d1, d2, depth, tolerance, intersections, maxRecursion) {\r\n  if (!boxIntersect(d1, d2)) return;\r\n  if (depth >= maxRecursion || (d1.width <= tolerance && d1.height <= tolerance && d2.width <= tolerance && d2.height <= tolerance)) {\r\n    intersections.push([d1.t, d2.t]);\r\n    return;\r\n  }\r\n  var d1s = splitData(d1);\r\n  var d2s = splitData(d2);\r\n  intersectsImpl(d1s[0], d2s[0], depth + 1, tolerance, intersections, maxRecursion);\r\n  intersectsImpl(d1s[0], d2s[1], depth + 1, tolerance, intersections, maxRecursion);\r\n  intersectsImpl(d1s[1], d2s[0], depth + 1, tolerance, intersections, maxRecursion);\r\n  intersectsImpl(d1s[1], d2s[1], depth + 1, tolerance, intersections, maxRecursion);\r\n}\r\n\r\nPolynomialBezier.prototype.intersections = function (other, tolerance, maxRecursion) {\r\n  if (tolerance === undefined) tolerance = 2;\r\n  if (maxRecursion === undefined) maxRecursion = 7;\r\n  var intersections = [];\r\n  intersectsImpl(intersectData(this, 0, 1), intersectData(other, 0, 1), 0, tolerance, intersections, maxRecursion);\r\n  return intersections;\r\n};\r\n\r\nPolynomialBezier.shapeSegment = function (shapePath, index) {\r\n  var nextIndex = (index + 1) % shapePath.length();\r\n  return new PolynomialBezier(shapePath.v[index], shapePath.o[index], shapePath.i[nextIndex], shapePath.v[nextIndex], true);\r\n};\r\n\r\nPolynomialBezier.shapeSegmentInverted = function (shapePath, index) {\r\n  var nextIndex = (index + 1) % shapePath.length();\r\n  return new PolynomialBezier(shapePath.v[nextIndex], shapePath.i[nextIndex], shapePath.o[index], shapePath.v[index], true);\r\n};\r\n\r\nfunction crossProduct(a, b) {\r\n  return [\r\n    a[1] * b[2] - a[2] * b[1],\r\n    a[2] * b[0] - a[0] * b[2],\r\n    a[0] * b[1] - a[1] * b[0],\r\n  ];\r\n}\r\n\r\nfunction lineIntersection(start1, end1, start2, end2) {\r\n  var v1 = [start1[0], start1[1], 1];\r\n  var v2 = [end1[0], end1[1], 1];\r\n  var v3 = [start2[0], start2[1], 1];\r\n  var v4 = [end2[0], end2[1], 1];\r\n\r\n  var r = crossProduct(\r\n    crossProduct(v1, v2),\r\n    crossProduct(v3, v4)\r\n  );\r\n\r\n  if (floatZero(r[2])) return null;\r\n\r\n  return [r[0] / r[2], r[1] / r[2]];\r\n}\r\n\r\nfunction polarOffset(p, angle, length) {\r\n  return [\r\n    p[0] + Math.cos(angle) * length,\r\n    p[1] - Math.sin(angle) * length,\r\n  ];\r\n}\r\n\r\nfunction pointDistance(p1, p2) {\r\n  return Math.hypot(p1[0] - p2[0], p1[1] - p2[1]);\r\n}\r\n\r\nfunction pointEqual(p1, p2) {\r\n  return floatEqual(p1[0], p2[0]) && floatEqual(p1[1], p2[1]);\r\n}\n\nfunction ZigZagModifier() {}\r\nextendPrototype([ShapeModifier], ZigZagModifier);\r\nZigZagModifier.prototype.initModifierProperties = function (elem, data) {\r\n  this.getValue = this.processKeys;\r\n  this.amplitude = PropertyFactory.getProp(elem, data.s, 0, null, this);\r\n  this.frequency = PropertyFactory.getProp(elem, data.r, 0, null, this);\r\n  this.pointsType = PropertyFactory.getProp(elem, data.pt, 0, null, this);\r\n  this._isAnimated = this.amplitude.effectsSequence.length !== 0 || this.frequency.effectsSequence.length !== 0 || this.pointsType.effectsSequence.length !== 0;\r\n};\r\n\r\nfunction setPoint(outputBezier, point, angle, direction, amplitude, outAmplitude, inAmplitude) {\r\n  var angO = angle - Math.PI / 2;\r\n  var angI = angle + Math.PI / 2;\r\n  var px = point[0] + Math.cos(angle) * direction * amplitude;\r\n  var py = point[1] - Math.sin(angle) * direction * amplitude;\r\n\r\n  outputBezier.setTripleAt(\r\n    px,\r\n    py,\r\n    px + Math.cos(angO) * outAmplitude,\r\n    py - Math.sin(angO) * outAmplitude,\r\n    px + Math.cos(angI) * inAmplitude,\r\n    py - Math.sin(angI) * inAmplitude,\r\n    outputBezier.length()\r\n  );\r\n}\r\n\r\nfunction getPerpendicularVector(pt1, pt2) {\r\n  var vector = [\r\n    pt2[0] - pt1[0],\r\n    pt2[1] - pt1[1],\r\n  ];\r\n  var rot = -Math.PI * 0.5;\r\n  var rotatedVector = [\r\n    Math.cos(rot) * vector[0] - Math.sin(rot) * vector[1],\r\n    Math.sin(rot) * vector[0] + Math.cos(rot) * vector[1],\r\n  ];\r\n  return rotatedVector;\r\n}\r\n\r\nfunction getProjectingAngle(path, cur) {\r\n  var prevIndex = cur === 0 ? path.length() - 1 : cur - 1;\r\n  var nextIndex = (cur + 1) % path.length();\r\n  var prevPoint = path.v[prevIndex];\r\n  var nextPoint = path.v[nextIndex];\r\n  var pVector = getPerpendicularVector(prevPoint, nextPoint);\r\n  return Math.atan2(0, 1) - Math.atan2(pVector[1], pVector[0]);\r\n}\r\n\r\nfunction zigZagCorner(outputBezier, path, cur, amplitude, frequency, pointType, direction) {\r\n  var angle = getProjectingAngle(path, cur);\r\n  var point = path.v[cur % path._length];\r\n  var prevPoint = path.v[cur === 0 ? path._length - 1 : cur - 1];\r\n  var nextPoint = path.v[(cur + 1) % path._length];\r\n  var prevDist = pointType === 2\r\n    ? Math.sqrt(Math.pow(point[0] - prevPoint[0], 2) + Math.pow(point[1] - prevPoint[1], 2))\r\n    : 0;\r\n  var nextDist = pointType === 2\r\n    ? Math.sqrt(Math.pow(point[0] - nextPoint[0], 2) + Math.pow(point[1] - nextPoint[1], 2))\r\n    : 0;\r\n\r\n  setPoint(\r\n    outputBezier,\r\n    path.v[cur % path._length],\r\n    angle,\r\n    direction,\r\n    amplitude,\r\n    nextDist / ((frequency + 1) * 2),\r\n    prevDist / ((frequency + 1) * 2),\r\n    pointType\r\n  );\r\n}\r\n\r\nfunction zigZagSegment(outputBezier, segment, amplitude, frequency, pointType, direction) {\r\n  for (var i = 0; i < frequency; i += 1) {\r\n    var t = (i + 1) / (frequency + 1);\r\n\r\n    var dist = pointType === 2\r\n      ? Math.sqrt(Math.pow(segment.points[3][0] - segment.points[0][0], 2) + Math.pow(segment.points[3][1] - segment.points[0][1], 2))\r\n      : 0;\r\n\r\n    var angle = segment.normalAngle(t);\r\n    var point = segment.point(t);\r\n    setPoint(\r\n      outputBezier,\r\n      point,\r\n      angle,\r\n      direction,\r\n      amplitude,\r\n      dist / ((frequency + 1) * 2),\r\n      dist / ((frequency + 1) * 2),\r\n      pointType\r\n    );\r\n\r\n    direction = -direction;\r\n  }\r\n\r\n  return direction;\r\n}\r\n\r\nZigZagModifier.prototype.processPath = function (path, amplitude, frequency, pointType) {\r\n  var count = path._length;\r\n  var clonedPath = shapePool.newElement();\r\n  clonedPath.c = path.c;\r\n\r\n  if (!path.c) {\r\n    count -= 1;\r\n  }\r\n\r\n  if (count === 0) return clonedPath;\r\n\r\n  var direction = -1;\r\n  var segment = PolynomialBezier.shapeSegment(path, 0);\r\n  zigZagCorner(clonedPath, path, 0, amplitude, frequency, pointType, direction);\r\n\r\n  for (var i = 0; i < count; i += 1) {\r\n    direction = zigZagSegment(clonedPath, segment, amplitude, frequency, pointType, -direction);\r\n\r\n    if (i === count - 1 && !path.c) {\r\n      segment = null;\r\n    } else {\r\n      segment = PolynomialBezier.shapeSegment(path, (i + 1) % count);\r\n    }\r\n\r\n    zigZagCorner(clonedPath, path, i + 1, amplitude, frequency, pointType, direction);\r\n  }\r\n\r\n  return clonedPath;\r\n};\r\n\r\nZigZagModifier.prototype.processShapes = function (_isFirstFrame) {\r\n  var shapePaths;\r\n  var i;\r\n  var len = this.shapes.length;\r\n  var j;\r\n  var jLen;\r\n  var amplitude = this.amplitude.v;\r\n  var frequency = Math.max(0, Math.round(this.frequency.v));\r\n  var pointType = this.pointsType.v;\r\n\r\n  if (amplitude !== 0) {\r\n    var shapeData;\r\n    var localShapeCollection;\r\n    for (i = 0; i < len; i += 1) {\r\n      shapeData = this.shapes[i];\r\n      localShapeCollection = shapeData.localShapeCollection;\r\n      if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\r\n        localShapeCollection.releaseShapes();\r\n        shapeData.shape._mdf = true;\r\n        shapePaths = shapeData.shape.paths.shapes;\r\n        jLen = shapeData.shape.paths._length;\r\n        for (j = 0; j < jLen; j += 1) {\r\n          localShapeCollection.addShape(this.processPath(shapePaths[j], amplitude, frequency, pointType));\r\n        }\r\n      }\r\n      shapeData.shape.paths = shapeData.localShapeCollection;\r\n    }\r\n  }\r\n  if (!this.dynamicProperties.length) {\r\n    this._mdf = false;\r\n  }\r\n};\n\nfunction linearOffset(p1, p2, amount) {\r\n  var angle = Math.atan2(p2[0] - p1[0], p2[1] - p1[1]);\r\n  return [\r\n    polarOffset(p1, angle, amount),\r\n    polarOffset(p2, angle, amount),\r\n  ];\r\n}\r\n\r\nfunction offsetSegment(segment, amount) {\r\n  var p0; var p1a; var p1b; var p2b; var p2a; var\r\n    p3;\r\n  var e;\r\n  e = linearOffset(segment.points[0], segment.points[1], amount);\r\n  p0 = e[0];\r\n  p1a = e[1];\r\n  e = linearOffset(segment.points[1], segment.points[2], amount);\r\n  p1b = e[0];\r\n  p2b = e[1];\r\n  e = linearOffset(segment.points[2], segment.points[3], amount);\r\n  p2a = e[0];\r\n  p3 = e[1];\r\n  var p1 = lineIntersection(p0, p1a, p1b, p2b);\r\n  if (p1 === null) p1 = p1a;\r\n  var p2 = lineIntersection(p2a, p3, p1b, p2b);\r\n  if (p2 === null) p2 = p2a;\r\n\r\n  return new PolynomialBezier(p0, p1, p2, p3);\r\n}\r\n\r\nfunction joinLines(outputBezier, seg1, seg2, lineJoin, miterLimit) {\r\n  var p0 = seg1.points[3];\r\n  var p1 = seg2.points[0];\r\n\r\n  // Bevel\r\n  if (lineJoin === 3) return p0;\r\n\r\n  // Connected, they don't need a joint\r\n  if (pointEqual(p0, p1)) return p0;\r\n\r\n  // Round\r\n  if (lineJoin === 2) {\r\n    var angleOut = -seg1.tangentAngle(1);\r\n    var angleIn = -seg2.tangentAngle(0) + Math.PI;\r\n    var center = lineIntersection(\r\n      p0,\r\n      polarOffset(p0, angleOut + Math.PI / 2, 100),\r\n      p1,\r\n      polarOffset(p1, angleOut + Math.PI / 2, 100)\r\n    );\r\n    var radius = center ? pointDistance(center, p0) : pointDistance(p0, p1) / 2;\r\n\r\n    var tan = polarOffset(p0, angleOut, 2 * radius * roundCorner);\r\n    outputBezier.setXYAt(tan[0], tan[1], 'o', outputBezier.length() - 1);\r\n\r\n    tan = polarOffset(p1, angleIn, 2 * radius * roundCorner);\r\n    outputBezier.setTripleAt(p1[0], p1[1], p1[0], p1[1], tan[0], tan[1], outputBezier.length());\r\n\r\n    return p1;\r\n  }\r\n\r\n  // Miter\r\n  var t0 = pointEqual(p0, seg1.points[2]) ? seg1.points[0] : seg1.points[2];\r\n  var t1 = pointEqual(p1, seg2.points[1]) ? seg2.points[3] : seg2.points[1];\r\n  var intersection = lineIntersection(t0, p0, p1, t1);\r\n  if (intersection && pointDistance(intersection, p0) < miterLimit) {\r\n    outputBezier.setTripleAt(\r\n      intersection[0],\r\n      intersection[1],\r\n      intersection[0],\r\n      intersection[1],\r\n      intersection[0],\r\n      intersection[1],\r\n      outputBezier.length()\r\n    );\r\n    return intersection;\r\n  }\r\n\r\n  return p0;\r\n}\r\n\r\nfunction getIntersection(a, b) {\r\n  const intersect = a.intersections(b);\r\n\r\n  if (intersect.length && floatEqual(intersect[0][0], 1)) intersect.shift();\r\n\r\n  if (intersect.length) return intersect[0];\r\n\r\n  return null;\r\n}\r\n\r\nfunction pruneSegmentIntersection(a, b) {\r\n  var outa = a.slice();\r\n  var outb = b.slice();\r\n  var intersect = getIntersection(a[a.length - 1], b[0]);\r\n  if (intersect) {\r\n    outa[a.length - 1] = a[a.length - 1].split(intersect[0])[0];\r\n    outb[0] = b[0].split(intersect[1])[1];\r\n  }\r\n  if (a.length > 1 && b.length > 1) {\r\n    intersect = getIntersection(a[0], b[b.length - 1]);\r\n    if (intersect) {\r\n      return [\r\n        [a[0].split(intersect[0])[0]],\r\n        [b[b.length - 1].split(intersect[1])[1]],\r\n      ];\r\n    }\r\n  }\r\n  return [outa, outb];\r\n}\r\n\r\nfunction pruneIntersections(segments) {\r\n  var e;\r\n  for (var i = 1; i < segments.length; i += 1) {\r\n    e = pruneSegmentIntersection(segments[i - 1], segments[i]);\r\n    segments[i - 1] = e[0];\r\n    segments[i] = e[1];\r\n  }\r\n\r\n  if (segments.length > 1) {\r\n    e = pruneSegmentIntersection(segments[segments.length - 1], segments[0]);\r\n    segments[segments.length - 1] = e[0];\r\n    segments[0] = e[1];\r\n  }\r\n\r\n  return segments;\r\n}\r\n\r\nfunction offsetSegmentSplit(segment, amount) {\r\n  /*\r\n    We split each bezier segment into smaller pieces based\r\n    on inflection points, this ensures the control point\r\n    polygon is convex.\r\n\r\n    (A cubic bezier can have none, one, or two inflection points)\r\n  */\r\n  var flex = segment.inflectionPoints();\r\n  var left;\r\n  var right;\r\n  var split;\r\n  var mid;\r\n\r\n  if (flex.length === 0) {\r\n    return [offsetSegment(segment, amount)];\r\n  }\r\n\r\n  if (flex.length === 1 || floatEqual(flex[1], 1)) {\r\n    split = segment.split(flex[0]);\r\n    left = split[0];\r\n    right = split[1];\r\n\r\n    return [\r\n      offsetSegment(left, amount),\r\n      offsetSegment(right, amount),\r\n    ];\r\n  }\r\n\r\n  split = segment.split(flex[0]);\r\n  left = split[0];\r\n  var t = (flex[1] - flex[0]) / (1 - flex[0]);\r\n  split = split[1].split(t);\r\n  mid = split[0];\r\n  right = split[1];\r\n\r\n  return [\r\n    offsetSegment(left, amount),\r\n    offsetSegment(mid, amount),\r\n    offsetSegment(right, amount),\r\n  ];\r\n}\r\n\r\nfunction OffsetPathModifier() {}\r\n\r\nextendPrototype([ShapeModifier], OffsetPathModifier);\r\nOffsetPathModifier.prototype.initModifierProperties = function (elem, data) {\r\n  this.getValue = this.processKeys;\r\n  this.amount = PropertyFactory.getProp(elem, data.a, 0, null, this);\r\n  this.miterLimit = PropertyFactory.getProp(elem, data.ml, 0, null, this);\r\n  this.lineJoin = data.lj;\r\n  this._isAnimated = this.amount.effectsSequence.length !== 0;\r\n};\r\n\r\nOffsetPathModifier.prototype.processPath = function (inputBezier, amount, lineJoin, miterLimit) {\r\n  var outputBezier = shapePool.newElement();\r\n  outputBezier.c = inputBezier.c;\r\n  var count = inputBezier.length();\r\n  if (!inputBezier.c) {\r\n    count -= 1;\r\n  }\r\n  var i; var j; var segment;\r\n  var multiSegments = [];\r\n\r\n  for (i = 0; i < count; i += 1) {\r\n    segment = PolynomialBezier.shapeSegment(inputBezier, i);\r\n    multiSegments.push(offsetSegmentSplit(segment, amount));\r\n  }\r\n\r\n  if (!inputBezier.c) {\r\n    for (i = count - 1; i >= 0; i -= 1) {\r\n      segment = PolynomialBezier.shapeSegmentInverted(inputBezier, i);\r\n      multiSegments.push(offsetSegmentSplit(segment, amount));\r\n    }\r\n  }\r\n\r\n  multiSegments = pruneIntersections(multiSegments);\r\n\r\n  // Add bezier segments to the output and apply line joints\r\n  var lastPoint = null;\r\n  var lastSeg = null;\r\n\r\n  for (i = 0; i < multiSegments.length; i += 1) {\r\n    var multiSegment = multiSegments[i];\r\n\r\n    if (lastSeg) lastPoint = joinLines(outputBezier, lastSeg, multiSegment[0], lineJoin, miterLimit);\r\n\r\n    lastSeg = multiSegment[multiSegment.length - 1];\r\n\r\n    for (j = 0; j < multiSegment.length; j += 1) {\r\n      segment = multiSegment[j];\r\n\r\n      if (lastPoint && pointEqual(segment.points[0], lastPoint)) {\r\n        outputBezier.setXYAt(segment.points[1][0], segment.points[1][1], 'o', outputBezier.length() - 1);\r\n      } else {\r\n        outputBezier.setTripleAt(\r\n          segment.points[0][0],\r\n          segment.points[0][1],\r\n          segment.points[1][0],\r\n          segment.points[1][1],\r\n          segment.points[0][0],\r\n          segment.points[0][1],\r\n          outputBezier.length()\r\n        );\r\n      }\r\n\r\n      outputBezier.setTripleAt(\r\n        segment.points[3][0],\r\n        segment.points[3][1],\r\n        segment.points[3][0],\r\n        segment.points[3][1],\r\n        segment.points[2][0],\r\n        segment.points[2][1],\r\n        outputBezier.length()\r\n      );\r\n\r\n      lastPoint = segment.points[3];\r\n    }\r\n  }\r\n\r\n  if (multiSegments.length) joinLines(outputBezier, lastSeg, multiSegments[0][0], lineJoin, miterLimit);\r\n\r\n  return outputBezier;\r\n};\r\n\r\nOffsetPathModifier.prototype.processShapes = function (_isFirstFrame) {\r\n  var shapePaths;\r\n  var i;\r\n  var len = this.shapes.length;\r\n  var j;\r\n  var jLen;\r\n  var amount = this.amount.v;\r\n  var miterLimit = this.miterLimit.v;\r\n  var lineJoin = this.lineJoin;\r\n\r\n  if (amount !== 0) {\r\n    var shapeData;\r\n    var localShapeCollection;\r\n    for (i = 0; i < len; i += 1) {\r\n      shapeData = this.shapes[i];\r\n      localShapeCollection = shapeData.localShapeCollection;\r\n      if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\r\n        localShapeCollection.releaseShapes();\r\n        shapeData.shape._mdf = true;\r\n        shapePaths = shapeData.shape.paths.shapes;\r\n        jLen = shapeData.shape.paths._length;\r\n        for (j = 0; j < jLen; j += 1) {\r\n          localShapeCollection.addShape(this.processPath(shapePaths[j], amount, lineJoin, miterLimit));\r\n        }\r\n      }\r\n      shapeData.shape.paths = shapeData.localShapeCollection;\r\n    }\r\n  }\r\n  if (!this.dynamicProperties.length) {\r\n    this._mdf = false;\r\n  }\r\n};\n\nfunction getFontProperties(fontData) {\r\n  var styles = fontData.fStyle ? fontData.fStyle.split(' ') : [];\r\n\r\n  var fWeight = 'normal'; var\r\n    fStyle = 'normal';\r\n  var len = styles.length;\r\n  var styleName;\r\n  for (var i = 0; i < len; i += 1) {\r\n    styleName = styles[i].toLowerCase();\r\n    switch (styleName) {\r\n      case 'italic':\r\n        fStyle = 'italic';\r\n        break;\r\n      case 'bold':\r\n        fWeight = '700';\r\n        break;\r\n      case 'black':\r\n        fWeight = '900';\r\n        break;\r\n      case 'medium':\r\n        fWeight = '500';\r\n        break;\r\n      case 'regular':\r\n      case 'normal':\r\n        fWeight = '400';\r\n        break;\r\n      case 'light':\r\n      case 'thin':\r\n        fWeight = '200';\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  return {\r\n    style: fStyle,\r\n    weight: fontData.fWeight || fWeight,\r\n  };\r\n}\n\nconst FontManager = (function () {\r\n  var maxWaitingTime = 5000;\r\n  var emptyChar = {\r\n    w: 0,\r\n    size: 0,\r\n    shapes: [],\r\n    data: {\r\n      shapes: [],\r\n    },\r\n  };\r\n  var combinedCharacters = [];\r\n  // Hindi characters\r\n  combinedCharacters = combinedCharacters.concat([2304, 2305, 2306, 2307, 2362, 2363, 2364, 2364, 2366,\r\n    2367, 2368, 2369, 2370, 2371, 2372, 2373, 2374, 2375, 2376, 2377, 2378, 2379,\r\n    2380, 2381, 2382, 2383, 2387, 2388, 2389, 2390, 2391, 2402, 2403]);\r\n\r\n  var BLACK_FLAG_CODE_POINT = 127988;\r\n  var CANCEL_TAG_CODE_POINT = 917631;\r\n  var A_TAG_CODE_POINT = 917601;\r\n  var Z_TAG_CODE_POINT = 917626;\r\n  var VARIATION_SELECTOR_16_CODE_POINT = 65039;\r\n  var ZERO_WIDTH_JOINER_CODE_POINT = 8205;\r\n  var REGIONAL_CHARACTER_A_CODE_POINT = 127462;\r\n  var REGIONAL_CHARACTER_Z_CODE_POINT = 127487;\r\n\r\n  var surrogateModifiers = [\r\n    'd83cdffb',\r\n    'd83cdffc',\r\n    'd83cdffd',\r\n    'd83cdffe',\r\n    'd83cdfff',\r\n  ];\r\n\r\n  function trimFontOptions(font) {\r\n    var familyArray = font.split(',');\r\n    var i;\r\n    var len = familyArray.length;\r\n    var enabledFamilies = [];\r\n    for (i = 0; i < len; i += 1) {\r\n      if (familyArray[i] !== 'sans-serif' && familyArray[i] !== 'monospace') {\r\n        enabledFamilies.push(familyArray[i]);\r\n      }\r\n    }\r\n    return enabledFamilies.join(',');\r\n  }\r\n\r\n  function setUpNode(font, family) {\r\n    var parentNode = createTag('span');\r\n    // Node is invisible to screen readers.\r\n    parentNode.setAttribute('aria-hidden', true);\r\n    parentNode.style.fontFamily = family;\r\n    var node = createTag('span');\r\n    // Characters that vary significantly among different fonts\r\n    node.innerText = 'giItT1WQy@!-/#';\r\n    // Visible - so we can measure it - but not on the screen\r\n    parentNode.style.position = 'absolute';\r\n    parentNode.style.left = '-10000px';\r\n    parentNode.style.top = '-10000px';\r\n    // Large font size makes even subtle changes obvious\r\n    parentNode.style.fontSize = '300px';\r\n    // Reset any font properties\r\n    parentNode.style.fontVariant = 'normal';\r\n    parentNode.style.fontStyle = 'normal';\r\n    parentNode.style.fontWeight = 'normal';\r\n    parentNode.style.letterSpacing = '0';\r\n    parentNode.appendChild(node);\r\n    document.body.appendChild(parentNode);\r\n\r\n    // Remember width with no applied web font\r\n    var width = node.offsetWidth;\r\n    node.style.fontFamily = trimFontOptions(font) + ', ' + family;\r\n    return { node: node, w: width, parent: parentNode };\r\n  }\r\n\r\n  function checkLoadedFonts() {\r\n    var i;\r\n    var len = this.fonts.length;\r\n    var node;\r\n    var w;\r\n    var loadedCount = len;\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.fonts[i].loaded) {\r\n        loadedCount -= 1;\r\n      } else if (this.fonts[i].fOrigin === 'n' || this.fonts[i].origin === 0) {\r\n        this.fonts[i].loaded = true;\r\n      } else {\r\n        node = this.fonts[i].monoCase.node;\r\n        w = this.fonts[i].monoCase.w;\r\n        if (node.offsetWidth !== w) {\r\n          loadedCount -= 1;\r\n          this.fonts[i].loaded = true;\r\n        } else {\r\n          node = this.fonts[i].sansCase.node;\r\n          w = this.fonts[i].sansCase.w;\r\n          if (node.offsetWidth !== w) {\r\n            loadedCount -= 1;\r\n            this.fonts[i].loaded = true;\r\n          }\r\n        }\r\n        if (this.fonts[i].loaded) {\r\n          this.fonts[i].sansCase.parent.parentNode.removeChild(this.fonts[i].sansCase.parent);\r\n          this.fonts[i].monoCase.parent.parentNode.removeChild(this.fonts[i].monoCase.parent);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (loadedCount !== 0 && Date.now() - this.initTime < maxWaitingTime) {\r\n      setTimeout(this.checkLoadedFontsBinded, 20);\r\n    } else {\r\n      setTimeout(this.setIsLoadedBinded, 10);\r\n    }\r\n  }\r\n\r\n  function createHelper(fontData, def) {\r\n    var engine = (document.body && def) ? 'svg' : 'canvas';\r\n    var helper;\r\n    var fontProps = getFontProperties(fontData);\r\n    if (engine === 'svg') {\r\n      var tHelper = createNS('text');\r\n      tHelper.style.fontSize = '100px';\r\n      // tHelper.style.fontFamily = fontData.fFamily;\r\n      tHelper.setAttribute('font-family', fontData.fFamily);\r\n      tHelper.setAttribute('font-style', fontProps.style);\r\n      tHelper.setAttribute('font-weight', fontProps.weight);\r\n      tHelper.textContent = '1';\r\n      if (fontData.fClass) {\r\n        tHelper.style.fontFamily = 'inherit';\r\n        tHelper.setAttribute('class', fontData.fClass);\r\n      } else {\r\n        tHelper.style.fontFamily = fontData.fFamily;\r\n      }\r\n      def.appendChild(tHelper);\r\n      helper = tHelper;\r\n    } else {\r\n      var tCanvasHelper = new OffscreenCanvas(500, 500).getContext('2d');\r\n      tCanvasHelper.font = fontProps.style + ' ' + fontProps.weight + ' 100px ' + fontData.fFamily;\r\n      helper = tCanvasHelper;\r\n    }\r\n    function measure(text) {\r\n      if (engine === 'svg') {\r\n        helper.textContent = text;\r\n        return helper.getComputedTextLength();\r\n      }\r\n      return helper.measureText(text).width;\r\n    }\r\n    return {\r\n      measureText: measure,\r\n    };\r\n  }\r\n\r\n  function addFonts(fontData, defs) {\r\n    if (!fontData) {\r\n      this.isLoaded = true;\r\n      return;\r\n    }\r\n    if (this.chars) {\r\n      this.isLoaded = true;\r\n      this.fonts = fontData.list;\r\n      return;\r\n    }\r\n    if (!document.body) {\r\n      this.isLoaded = true;\r\n      fontData.list.forEach((data) => {\r\n        data.helper = createHelper(data);\r\n        data.cache = {};\r\n      });\r\n      this.fonts = fontData.list;\r\n      return;\r\n    }\r\n\r\n    var fontArr = fontData.list;\r\n    var i;\r\n    var len = fontArr.length;\r\n    var _pendingFonts = len;\r\n    for (i = 0; i < len; i += 1) {\r\n      var shouldLoadFont = true;\r\n      var loadedSelector;\r\n      var j;\r\n      fontArr[i].loaded = false;\r\n      fontArr[i].monoCase = setUpNode(fontArr[i].fFamily, 'monospace');\r\n      fontArr[i].sansCase = setUpNode(fontArr[i].fFamily, 'sans-serif');\r\n      if (!fontArr[i].fPath) {\r\n        fontArr[i].loaded = true;\r\n        _pendingFonts -= 1;\r\n      } else if (fontArr[i].fOrigin === 'p' || fontArr[i].origin === 3) {\r\n        loadedSelector = document.querySelectorAll('style[f-forigin=\"p\"][f-family=\"' + fontArr[i].fFamily + '\"], style[f-origin=\"3\"][f-family=\"' + fontArr[i].fFamily + '\"]');\r\n\r\n        if (loadedSelector.length > 0) {\r\n          shouldLoadFont = false;\r\n        }\r\n\r\n        if (shouldLoadFont) {\r\n          var s = createTag('style');\r\n          s.setAttribute('f-forigin', fontArr[i].fOrigin);\r\n          s.setAttribute('f-origin', fontArr[i].origin);\r\n          s.setAttribute('f-family', fontArr[i].fFamily);\r\n          s.type = 'text/css';\r\n          s.innerText = '@font-face {font-family: ' + fontArr[i].fFamily + \"; font-style: normal; src: url('\" + fontArr[i].fPath + \"');}\";\r\n          defs.appendChild(s);\r\n        }\r\n      } else if (fontArr[i].fOrigin === 'g' || fontArr[i].origin === 1) {\r\n        loadedSelector = document.querySelectorAll('link[f-forigin=\"g\"], link[f-origin=\"1\"]');\r\n\r\n        for (j = 0; j < loadedSelector.length; j += 1) {\r\n          if (loadedSelector[j].href.indexOf(fontArr[i].fPath) !== -1) {\r\n            // Font is already loaded\r\n            shouldLoadFont = false;\r\n          }\r\n        }\r\n\r\n        if (shouldLoadFont) {\r\n          var l = createTag('link');\r\n          l.setAttribute('f-forigin', fontArr[i].fOrigin);\r\n          l.setAttribute('f-origin', fontArr[i].origin);\r\n          l.type = 'text/css';\r\n          l.rel = 'stylesheet';\r\n          l.href = fontArr[i].fPath;\r\n          document.body.appendChild(l);\r\n        }\r\n      } else if (fontArr[i].fOrigin === 't' || fontArr[i].origin === 2) {\r\n        loadedSelector = document.querySelectorAll('script[f-forigin=\"t\"], script[f-origin=\"2\"]');\r\n\r\n        for (j = 0; j < loadedSelector.length; j += 1) {\r\n          if (fontArr[i].fPath === loadedSelector[j].src) {\r\n            // Font is already loaded\r\n            shouldLoadFont = false;\r\n          }\r\n        }\r\n\r\n        if (shouldLoadFont) {\r\n          var sc = createTag('link');\r\n          sc.setAttribute('f-forigin', fontArr[i].fOrigin);\r\n          sc.setAttribute('f-origin', fontArr[i].origin);\r\n          sc.setAttribute('rel', 'stylesheet');\r\n          sc.setAttribute('href', fontArr[i].fPath);\r\n          defs.appendChild(sc);\r\n        }\r\n      }\r\n      fontArr[i].helper = createHelper(fontArr[i], defs);\r\n      fontArr[i].cache = {};\r\n      this.fonts.push(fontArr[i]);\r\n    }\r\n    if (_pendingFonts === 0) {\r\n      this.isLoaded = true;\r\n    } else {\r\n      // On some cases even if the font is loaded, it won't load correctly when measuring text on canvas.\r\n      // Adding this timeout seems to fix it\r\n      setTimeout(this.checkLoadedFonts.bind(this), 100);\r\n    }\r\n  }\r\n\r\n  function addChars(chars) {\r\n    if (!chars) {\r\n      return;\r\n    }\r\n    if (!this.chars) {\r\n      this.chars = [];\r\n    }\r\n    var i;\r\n    var len = chars.length;\r\n    var j;\r\n    var jLen = this.chars.length;\r\n    var found;\r\n    for (i = 0; i < len; i += 1) {\r\n      j = 0;\r\n      found = false;\r\n      while (j < jLen) {\r\n        if (this.chars[j].style === chars[i].style && this.chars[j].fFamily === chars[i].fFamily && this.chars[j].ch === chars[i].ch) {\r\n          found = true;\r\n        }\r\n        j += 1;\r\n      }\r\n      if (!found) {\r\n        this.chars.push(chars[i]);\r\n        jLen += 1;\r\n      }\r\n    }\r\n  }\r\n\r\n  function getCharData(char, style, font) {\r\n    var i = 0;\r\n    var len = this.chars.length;\r\n    while (i < len) {\r\n      if (this.chars[i].ch === char && this.chars[i].style === style && this.chars[i].fFamily === font) {\r\n        return this.chars[i];\r\n      }\r\n      i += 1;\r\n    }\r\n    if (((typeof char === 'string' && char.charCodeAt(0) !== 13) || !char)\r\n            && console\r\n            && console.warn // eslint-disable-line no-console\r\n            && !this._warned\r\n    ) {\r\n      this._warned = true;\r\n      console.warn('Missing character from exported characters list: ', char, style, font); // eslint-disable-line no-console\r\n    }\r\n    return emptyChar;\r\n  }\r\n\r\n  function measureText(char, fontName, size) {\r\n    var fontData = this.getFontByName(fontName);\r\n    // Using the char instead of char.charCodeAt(0)\r\n    // to avoid collisions between equal chars\r\n    var index = char;\r\n    if (!fontData.cache[index]) {\r\n      var tHelper = fontData.helper;\r\n      if (char === ' ') {\r\n        var doubleSize = tHelper.measureText('|' + char + '|');\r\n        var singleSize = tHelper.measureText('||');\r\n        fontData.cache[index] = (doubleSize - singleSize) / 100;\r\n      } else {\r\n        fontData.cache[index] = tHelper.measureText(char) / 100;\r\n      }\r\n    }\r\n    return fontData.cache[index] * size;\r\n  }\r\n\r\n  function getFontByName(name) {\r\n    var i = 0;\r\n    var len = this.fonts.length;\r\n    while (i < len) {\r\n      if (this.fonts[i].fName === name) {\r\n        return this.fonts[i];\r\n      }\r\n      i += 1;\r\n    }\r\n    return this.fonts[0];\r\n  }\r\n\r\n  function getCodePoint(string) {\r\n    var codePoint = 0;\r\n    var first = string.charCodeAt(0);\r\n    if (first >= 0xD800 && first <= 0xDBFF) {\r\n      var second = string.charCodeAt(1);\r\n      if (second >= 0xDC00 && second <= 0xDFFF) {\r\n        codePoint = (first - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\r\n      }\r\n    }\r\n    return codePoint;\r\n  }\r\n\r\n  // Skin tone modifiers\r\n  function isModifier(firstCharCode, secondCharCode) {\r\n    var sum = firstCharCode.toString(16) + secondCharCode.toString(16);\r\n    return surrogateModifiers.indexOf(sum) !== -1;\r\n  }\r\n\r\n  function isZeroWidthJoiner(charCode) {\r\n    return charCode === ZERO_WIDTH_JOINER_CODE_POINT;\r\n  }\r\n\r\n  // This codepoint may change the appearance of the preceding character.\r\n  // If that is a symbol, dingbat or emoji, U+FE0F forces it to be rendered\r\n  // as a colorful image as compared to a monochrome text variant.\r\n  function isVariationSelector(charCode) {\r\n    return charCode === VARIATION_SELECTOR_16_CODE_POINT;\r\n  }\r\n\r\n  // The regional indicator symbols are a set of 26 alphabetic Unicode\r\n  /// characters (A–Z) intended to be used to encode ISO 3166-1 alpha-2\r\n  // two-letter country codes in a way that allows optional special treatment.\r\n  function isRegionalCode(string) {\r\n    var codePoint = getCodePoint(string);\r\n    if (codePoint >= REGIONAL_CHARACTER_A_CODE_POINT && codePoint <= REGIONAL_CHARACTER_Z_CODE_POINT) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // Some Emoji implementations represent combinations of\r\n  // two “regional indicator” letters as a single flag symbol.\r\n  function isFlagEmoji(string) {\r\n    return isRegionalCode(string.substr(0, 2)) && isRegionalCode(string.substr(2, 2));\r\n  }\r\n\r\n  function isCombinedCharacter(char) {\r\n    return combinedCharacters.indexOf(char) !== -1;\r\n  }\r\n\r\n  // Regional flags start with a BLACK_FLAG_CODE_POINT\r\n  // folowed by 5 chars in the TAG range\r\n  // and end with a CANCEL_TAG_CODE_POINT\r\n  function isRegionalFlag(text, index) {\r\n    var codePoint = getCodePoint(text.substr(index, 2));\r\n    if (codePoint !== BLACK_FLAG_CODE_POINT) {\r\n      return false;\r\n    }\r\n    var count = 0;\r\n    index += 2;\r\n    while (count < 5) {\r\n      codePoint = getCodePoint(text.substr(index, 2));\r\n      if (codePoint < A_TAG_CODE_POINT || codePoint > Z_TAG_CODE_POINT) {\r\n        return false;\r\n      }\r\n      count += 1;\r\n      index += 2;\r\n    }\r\n    return getCodePoint(text.substr(index, 2)) === CANCEL_TAG_CODE_POINT;\r\n  }\r\n\r\n  function setIsLoaded() {\r\n    this.isLoaded = true;\r\n  }\r\n\r\n  var Font = function () {\r\n    this.fonts = [];\r\n    this.chars = null;\r\n    this.typekitLoaded = 0;\r\n    this.isLoaded = false;\r\n    this._warned = false;\r\n    this.initTime = Date.now();\r\n    this.setIsLoadedBinded = this.setIsLoaded.bind(this);\r\n    this.checkLoadedFontsBinded = this.checkLoadedFonts.bind(this);\r\n  };\r\n  Font.isModifier = isModifier;\r\n  Font.isZeroWidthJoiner = isZeroWidthJoiner;\r\n  Font.isFlagEmoji = isFlagEmoji;\r\n  Font.isRegionalCode = isRegionalCode;\r\n  Font.isCombinedCharacter = isCombinedCharacter;\r\n  Font.isRegionalFlag = isRegionalFlag;\r\n  Font.isVariationSelector = isVariationSelector;\r\n  Font.BLACK_FLAG_CODE_POINT = BLACK_FLAG_CODE_POINT;\r\n\r\n  var fontPrototype = {\r\n    addChars: addChars,\r\n    addFonts: addFonts,\r\n    getCharData: getCharData,\r\n    getFontByName: getFontByName,\r\n    measureText: measureText,\r\n    checkLoadedFonts: checkLoadedFonts,\r\n    setIsLoaded: setIsLoaded,\r\n  };\r\n\r\n  Font.prototype = fontPrototype;\r\n\r\n  return Font;\r\n}());\n\nfunction SlotManager(animationData) {\r\n  this.animationData = animationData;\r\n}\r\nSlotManager.prototype.getProp = function (data) {\r\n  if (this.animationData.slots\r\n    && this.animationData.slots[data.sid]\r\n  ) {\r\n    return Object.assign(data, this.animationData.slots[data.sid].p);\r\n  }\r\n  return data;\r\n};\r\n\r\nfunction slotFactory(animationData) {\r\n  return new SlotManager(animationData);\r\n}\n\nfunction RenderableElement() {\r\n\r\n}\r\n\r\nRenderableElement.prototype = {\r\n  initRenderable: function () {\r\n    // layer's visibility related to inpoint and outpoint. Rename isVisible to isInRange\r\n    this.isInRange = false;\r\n    // layer's display state\r\n    this.hidden = false;\r\n    // If layer's transparency equals 0, it can be hidden\r\n    this.isTransparent = false;\r\n    // list of animated components\r\n    this.renderableComponents = [];\r\n  },\r\n  addRenderableComponent: function (component) {\r\n    if (this.renderableComponents.indexOf(component) === -1) {\r\n      this.renderableComponents.push(component);\r\n    }\r\n  },\r\n  removeRenderableComponent: function (component) {\r\n    if (this.renderableComponents.indexOf(component) !== -1) {\r\n      this.renderableComponents.splice(this.renderableComponents.indexOf(component), 1);\r\n    }\r\n  },\r\n  prepareRenderableFrame: function (num) {\r\n    this.checkLayerLimits(num);\r\n  },\r\n  checkTransparency: function () {\r\n    if (this.finalTransform.mProp.o.v <= 0) {\r\n      if (!this.isTransparent && this.globalData.renderConfig.hideOnTransparent) {\r\n        this.isTransparent = true;\r\n        this.hide();\r\n      }\r\n    } else if (this.isTransparent) {\r\n      this.isTransparent = false;\r\n      this.show();\r\n    }\r\n  },\r\n  /**\r\n     * @function\r\n     * Initializes frame related properties.\r\n     *\r\n     * @param {number} num\r\n     * current frame number in Layer's time\r\n     *\r\n     */\r\n  checkLayerLimits: function (num) {\r\n    if (this.data.ip - this.data.st <= num && this.data.op - this.data.st > num) {\r\n      if (this.isInRange !== true) {\r\n        this.globalData._mdf = true;\r\n        this._mdf = true;\r\n        this.isInRange = true;\r\n        this.show();\r\n      }\r\n    } else if (this.isInRange !== false) {\r\n      this.globalData._mdf = true;\r\n      this.isInRange = false;\r\n      this.hide();\r\n    }\r\n  },\r\n  renderRenderable: function () {\r\n    var i;\r\n    var len = this.renderableComponents.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      this.renderableComponents[i].renderFrame(this._isFirstFrame);\r\n    }\r\n    /* this.maskManager.renderFrame(this.finalTransform.mat);\r\n        this.renderableEffectsManager.renderFrame(this._isFirstFrame); */\r\n  },\r\n  sourceRectAtTime: function () {\r\n    return {\r\n      top: 0,\r\n      left: 0,\r\n      width: 100,\r\n      height: 100,\r\n    };\r\n  },\r\n  getLayerSize: function () {\r\n    if (this.data.ty === 5) {\r\n      return { w: this.data.textData.width, h: this.data.textData.height };\r\n    }\r\n    return { w: this.data.width, h: this.data.height };\r\n  },\r\n};\n\nconst getBlendMode = (function () {\r\n  var blendModeEnums = {\r\n    0: 'source-over',\r\n    1: 'multiply',\r\n    2: 'screen',\r\n    3: 'overlay',\r\n    4: 'darken',\r\n    5: 'lighten',\r\n    6: 'color-dodge',\r\n    7: 'color-burn',\r\n    8: 'hard-light',\r\n    9: 'soft-light',\r\n    10: 'difference',\r\n    11: 'exclusion',\r\n    12: 'hue',\r\n    13: 'saturation',\r\n    14: 'color',\r\n    15: 'luminosity',\r\n  };\r\n\r\n  return function (mode) {\r\n    return blendModeEnums[mode] || '';\r\n  };\r\n}());\n\nfunction SliderEffect(data, elem, container) {\r\n  this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n}\r\nfunction AngleEffect(data, elem, container) {\r\n  this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n}\r\nfunction ColorEffect(data, elem, container) {\r\n  this.p = PropertyFactory.getProp(elem, data.v, 1, 0, container);\r\n}\r\nfunction PointEffect(data, elem, container) {\r\n  this.p = PropertyFactory.getProp(elem, data.v, 1, 0, container);\r\n}\r\nfunction LayerIndexEffect(data, elem, container) {\r\n  this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n}\r\nfunction MaskIndexEffect(data, elem, container) {\r\n  this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n}\r\nfunction CheckboxEffect(data, elem, container) {\r\n  this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n}\r\nfunction NoValueEffect() {\r\n  this.p = {};\r\n}\n\nfunction EffectsManager(data, element) {\r\n  var effects = data.ef || [];\r\n  this.effectElements = [];\r\n  var i;\r\n  var len = effects.length;\r\n  var effectItem;\r\n  for (i = 0; i < len; i += 1) {\r\n    effectItem = new GroupEffect(effects[i], element);\r\n    this.effectElements.push(effectItem);\r\n  }\r\n}\r\n\r\nfunction GroupEffect(data, element) {\r\n  this.init(data, element);\r\n}\r\n\r\nextendPrototype([DynamicPropertyContainer], GroupEffect);\r\n\r\nGroupEffect.prototype.getValue = GroupEffect.prototype.iterateDynamicProperties;\r\n\r\nGroupEffect.prototype.init = function (data, element) {\r\n  this.data = data;\r\n  this.effectElements = [];\r\n  this.initDynamicPropertyContainer(element);\r\n  var i;\r\n  var len = this.data.ef.length;\r\n  var eff;\r\n  var effects = this.data.ef;\r\n  for (i = 0; i < len; i += 1) {\r\n    eff = null;\r\n    switch (effects[i].ty) {\r\n      case 0:\r\n        eff = new SliderEffect(effects[i], element, this);\r\n        break;\r\n      case 1:\r\n        eff = new AngleEffect(effects[i], element, this);\r\n        break;\r\n      case 2:\r\n        eff = new ColorEffect(effects[i], element, this);\r\n        break;\r\n      case 3:\r\n        eff = new PointEffect(effects[i], element, this);\r\n        break;\r\n      case 4:\r\n      case 7:\r\n        eff = new CheckboxEffect(effects[i], element, this);\r\n        break;\r\n      case 10:\r\n        eff = new LayerIndexEffect(effects[i], element, this);\r\n        break;\r\n      case 11:\r\n        eff = new MaskIndexEffect(effects[i], element, this);\r\n        break;\r\n      case 5:\r\n        eff = new EffectsManager(effects[i], element, this);\r\n        break;\r\n        // case 6:\r\n      default:\r\n        eff = new NoValueEffect(effects[i], element, this);\r\n        break;\r\n    }\r\n    if (eff) {\r\n      this.effectElements.push(eff);\r\n    }\r\n  }\r\n};\n\nfunction BaseElement() {\r\n}\r\n\r\nBaseElement.prototype = {\r\n  checkMasks: function () {\r\n    if (!this.data.hasMask) {\r\n      return false;\r\n    }\r\n    var i = 0;\r\n    var len = this.data.masksProperties.length;\r\n    while (i < len) {\r\n      if ((this.data.masksProperties[i].mode !== 'n' && this.data.masksProperties[i].cl !== false)) {\r\n        return true;\r\n      }\r\n      i += 1;\r\n    }\r\n    return false;\r\n  },\r\n  initExpressions: function () {\r\n    const expressionsInterfaces = getExpressionInterfaces();\r\n    if (!expressionsInterfaces) {\r\n      return;\r\n    }\r\n    const LayerExpressionInterface = expressionsInterfaces('layer');\r\n    const EffectsExpressionInterface = expressionsInterfaces('effects');\r\n    const ShapeExpressionInterface = expressionsInterfaces('shape');\r\n    const TextExpressionInterface = expressionsInterfaces('text');\r\n    const CompExpressionInterface = expressionsInterfaces('comp');\r\n    this.layerInterface = LayerExpressionInterface(this);\r\n    if (this.data.hasMask && this.maskManager) {\r\n      this.layerInterface.registerMaskInterface(this.maskManager);\r\n    }\r\n    var effectsInterface = EffectsExpressionInterface.createEffectsInterface(this, this.layerInterface);\r\n    this.layerInterface.registerEffectsInterface(effectsInterface);\r\n\r\n    if (this.data.ty === 0 || this.data.xt) {\r\n      this.compInterface = CompExpressionInterface(this);\r\n    } else if (this.data.ty === 4) {\r\n      this.layerInterface.shapeInterface = ShapeExpressionInterface(this.shapesData, this.itemsData, this.layerInterface);\r\n      this.layerInterface.content = this.layerInterface.shapeInterface;\r\n    } else if (this.data.ty === 5) {\r\n      this.layerInterface.textInterface = TextExpressionInterface(this);\r\n      this.layerInterface.text = this.layerInterface.textInterface;\r\n    }\r\n  },\r\n  setBlendMode: function () {\r\n    var blendModeValue = getBlendMode(this.data.bm);\r\n    var elem = this.baseElement || this.layerElement;\r\n\r\n    elem.style['mix-blend-mode'] = blendModeValue;\r\n  },\r\n  initBaseData: function (data, globalData, comp) {\r\n    this.globalData = globalData;\r\n    this.comp = comp;\r\n    this.data = data;\r\n    this.layerId = createElementID();\r\n\r\n    // Stretch factor for old animations missing this property.\r\n    if (!this.data.sr) {\r\n      this.data.sr = 1;\r\n    }\r\n    // effects manager\r\n    this.effectsManager = new EffectsManager(this.data, this, this.dynamicProperties);\r\n  },\r\n  getType: function () {\r\n    return this.type;\r\n  },\r\n  sourceRectAtTime: function () {},\r\n};\n\n/**\r\n * @file\r\n * Handles element's layer frame update.\r\n * Checks layer in point and out point\r\n *\r\n */\r\n\r\nfunction FrameElement() {}\r\n\r\nFrameElement.prototype = {\r\n  /**\r\n     * @function\r\n     * Initializes frame related properties.\r\n     *\r\n     */\r\n  initFrame: function () {\r\n    // set to true when inpoint is rendered\r\n    this._isFirstFrame = false;\r\n    // list of animated properties\r\n    this.dynamicProperties = [];\r\n    // If layer has been modified in current tick this will be true\r\n    this._mdf = false;\r\n  },\r\n  /**\r\n     * @function\r\n     * Calculates all dynamic values\r\n     *\r\n     * @param {number} num\r\n     * current frame number in Layer's time\r\n     * @param {boolean} isVisible\r\n     * if layers is currently in range\r\n     *\r\n     */\r\n  prepareProperties: function (num, isVisible) {\r\n    var i;\r\n    var len = this.dynamicProperties.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      if (isVisible || (this._isParent && this.dynamicProperties[i].propType === 'transform')) {\r\n        this.dynamicProperties[i].getValue();\r\n        if (this.dynamicProperties[i]._mdf) {\r\n          this.globalData._mdf = true;\r\n          this._mdf = true;\r\n        }\r\n      }\r\n    }\r\n  },\r\n  addDynamicProperty: function (prop) {\r\n    if (this.dynamicProperties.indexOf(prop) === -1) {\r\n      this.dynamicProperties.push(prop);\r\n    }\r\n  },\r\n};\n\nfunction FootageElement(data, globalData, comp) {\r\n  this.initFrame();\r\n  this.initRenderable();\r\n  this.assetData = globalData.getAssetData(data.refId);\r\n  this.footageData = globalData.imageLoader.getAsset(this.assetData);\r\n  this.initBaseData(data, globalData, comp);\r\n}\r\n\r\nFootageElement.prototype.prepareFrame = function () {\r\n};\r\n\r\nextendPrototype([RenderableElement, BaseElement, FrameElement], FootageElement);\r\n\r\nFootageElement.prototype.getBaseElement = function () {\r\n  return null;\r\n};\r\n\r\nFootageElement.prototype.renderFrame = function () {\r\n};\r\n\r\nFootageElement.prototype.destroy = function () {\r\n};\r\n\r\nFootageElement.prototype.initExpressions = function () {\r\n  const expressionsInterfaces = getExpressionInterfaces();\r\n  if (!expressionsInterfaces) {\r\n    return;\r\n  }\r\n  const FootageInterface = expressionsInterfaces('footage');\r\n  this.layerInterface = FootageInterface(this);\r\n};\r\n\r\nFootageElement.prototype.getFootageData = function () {\r\n  return this.footageData;\r\n};\n\nfunction AudioElement(data, globalData, comp) {\r\n  this.initFrame();\r\n  this.initRenderable();\r\n  this.assetData = globalData.getAssetData(data.refId);\r\n  this.initBaseData(data, globalData, comp);\r\n  this._isPlaying = false;\r\n  this._canPlay = false;\r\n  var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n  this.audio = this.globalData.audioController.createAudio(assetPath);\r\n  this._currentTime = 0;\r\n  this.globalData.audioController.addAudio(this);\r\n  this._volumeMultiplier = 1;\r\n  this._volume = 1;\r\n  this._previousVolume = null;\r\n  this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : { _placeholder: true };\r\n  this.lv = PropertyFactory.getProp(this, data.au && data.au.lv ? data.au.lv : { k: [100] }, 1, 0.01, this);\r\n}\r\n\r\nAudioElement.prototype.prepareFrame = function (num) {\r\n  this.prepareRenderableFrame(num, true);\r\n  this.prepareProperties(num, true);\r\n  if (!this.tm._placeholder) {\r\n    var timeRemapped = this.tm.v;\r\n    this._currentTime = timeRemapped;\r\n  } else {\r\n    this._currentTime = num / this.data.sr;\r\n  }\r\n  this._volume = this.lv.v[0];\r\n  var totalVolume = this._volume * this._volumeMultiplier;\r\n  if (this._previousVolume !== totalVolume) {\r\n    this._previousVolume = totalVolume;\r\n    this.audio.volume(totalVolume);\r\n  }\r\n};\r\n\r\nextendPrototype([RenderableElement, BaseElement, FrameElement], AudioElement);\r\n\r\nAudioElement.prototype.renderFrame = function () {\r\n  if (this.isInRange && this._canPlay) {\r\n    if (!this._isPlaying) {\r\n      this.audio.play();\r\n      this.audio.seek(this._currentTime / this.globalData.frameRate);\r\n      this._isPlaying = true;\r\n    } else if (!this.audio.playing()\r\n      || Math.abs(this._currentTime / this.globalData.frameRate - this.audio.seek()) > 0.1\r\n    ) {\r\n      this.audio.seek(this._currentTime / this.globalData.frameRate);\r\n    }\r\n  }\r\n};\r\n\r\nAudioElement.prototype.show = function () {\r\n  // this.audio.play()\r\n};\r\n\r\nAudioElement.prototype.hide = function () {\r\n  this.audio.pause();\r\n  this._isPlaying = false;\r\n};\r\n\r\nAudioElement.prototype.pause = function () {\r\n  this.audio.pause();\r\n  this._isPlaying = false;\r\n  this._canPlay = false;\r\n};\r\n\r\nAudioElement.prototype.resume = function () {\r\n  this._canPlay = true;\r\n};\r\n\r\nAudioElement.prototype.setRate = function (rateValue) {\r\n  this.audio.rate(rateValue);\r\n};\r\n\r\nAudioElement.prototype.volume = function (volumeValue) {\r\n  this._volumeMultiplier = volumeValue;\r\n  this._previousVolume = volumeValue * this._volume;\r\n  this.audio.volume(this._previousVolume);\r\n};\r\n\r\nAudioElement.prototype.getBaseElement = function () {\r\n  return null;\r\n};\r\n\r\nAudioElement.prototype.destroy = function () {\r\n};\r\n\r\nAudioElement.prototype.sourceRectAtTime = function () {\r\n};\r\n\r\nAudioElement.prototype.initExpressions = function () {\r\n};\n\nfunction BaseRenderer() {}\r\nBaseRenderer.prototype.checkLayers = function (num) {\r\n  var i;\r\n  var len = this.layers.length;\r\n  var data;\r\n  this.completeLayers = true;\r\n  for (i = len - 1; i >= 0; i -= 1) {\r\n    if (!this.elements[i]) {\r\n      data = this.layers[i];\r\n      if (data.ip - data.st <= (num - this.layers[i].st) && data.op - data.st > (num - this.layers[i].st)) {\r\n        this.buildItem(i);\r\n      }\r\n    }\r\n    this.completeLayers = this.elements[i] ? this.completeLayers : false;\r\n  }\r\n  this.checkPendingElements();\r\n};\r\n\r\nBaseRenderer.prototype.createItem = function (layer) {\r\n  switch (layer.ty) {\r\n    case 2:\r\n      return this.createImage(layer);\r\n    case 0:\r\n      return this.createComp(layer);\r\n    case 1:\r\n      return this.createSolid(layer);\r\n    case 3:\r\n      return this.createNull(layer);\r\n    case 4:\r\n      return this.createShape(layer);\r\n    case 5:\r\n      return this.createText(layer);\r\n    case 6:\r\n      return this.createAudio(layer);\r\n    case 13:\r\n      return this.createCamera(layer);\r\n    case 15:\r\n      return this.createFootage(layer);\r\n    default:\r\n      return this.createNull(layer);\r\n  }\r\n};\r\n\r\nBaseRenderer.prototype.createCamera = function () {\r\n  throw new Error('You\\'re using a 3d camera. Try the html renderer.');\r\n};\r\n\r\nBaseRenderer.prototype.createAudio = function (data) {\r\n  return new AudioElement(data, this.globalData, this);\r\n};\r\n\r\nBaseRenderer.prototype.createFootage = function (data) {\r\n  return new FootageElement(data, this.globalData, this);\r\n};\r\n\r\nBaseRenderer.prototype.buildAllItems = function () {\r\n  var i;\r\n  var len = this.layers.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.buildItem(i);\r\n  }\r\n  this.checkPendingElements();\r\n};\r\n\r\nBaseRenderer.prototype.includeLayers = function (newLayers) {\r\n  this.completeLayers = false;\r\n  var i;\r\n  var len = newLayers.length;\r\n  var j;\r\n  var jLen = this.layers.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    j = 0;\r\n    while (j < jLen) {\r\n      if (this.layers[j].id === newLayers[i].id) {\r\n        this.layers[j] = newLayers[i];\r\n        break;\r\n      }\r\n      j += 1;\r\n    }\r\n  }\r\n};\r\n\r\nBaseRenderer.prototype.setProjectInterface = function (pInterface) {\r\n  this.globalData.projectInterface = pInterface;\r\n};\r\n\r\nBaseRenderer.prototype.initItems = function () {\r\n  if (!this.globalData.progressiveLoad) {\r\n    this.buildAllItems();\r\n  }\r\n};\r\nBaseRenderer.prototype.buildElementParenting = function (element, parentName, hierarchy) {\r\n  var elements = this.elements;\r\n  var layers = this.layers;\r\n  var i = 0;\r\n  var len = layers.length;\r\n  while (i < len) {\r\n    if (layers[i].ind == parentName) { // eslint-disable-line eqeqeq\r\n      if (!elements[i] || elements[i] === true) {\r\n        this.buildItem(i);\r\n        this.addPendingElement(element);\r\n      } else {\r\n        hierarchy.push(elements[i]);\r\n        elements[i].setAsParent();\r\n        if (layers[i].parent !== undefined) {\r\n          this.buildElementParenting(element, layers[i].parent, hierarchy);\r\n        } else {\r\n          element.setHierarchy(hierarchy);\r\n        }\r\n      }\r\n    }\r\n    i += 1;\r\n  }\r\n};\r\n\r\nBaseRenderer.prototype.addPendingElement = function (element) {\r\n  this.pendingElements.push(element);\r\n};\r\n\r\nBaseRenderer.prototype.searchExtraCompositions = function (assets) {\r\n  var i;\r\n  var len = assets.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (assets[i].xt) {\r\n      var comp = this.createComp(assets[i]);\r\n      comp.initExpressions();\r\n      this.globalData.projectInterface.registerComposition(comp);\r\n    }\r\n  }\r\n};\r\n\r\nBaseRenderer.prototype.getElementById = function (ind) {\r\n  var i;\r\n  var len = this.elements.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.elements[i].data.ind === ind) {\r\n      return this.elements[i];\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\nBaseRenderer.prototype.getElementByPath = function (path) {\r\n  var pathValue = path.shift();\r\n  var element;\r\n  if (typeof pathValue === 'number') {\r\n    element = this.elements[pathValue];\r\n  } else {\r\n    var i;\r\n    var len = this.elements.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.elements[i].data.nm === pathValue) {\r\n        element = this.elements[i];\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  if (path.length === 0) {\r\n    return element;\r\n  }\r\n  return element.getElementByPath(path);\r\n};\r\n\r\nBaseRenderer.prototype.setupGlobalData = function (animData, fontsContainer) {\r\n  this.globalData.fontManager = new FontManager();\r\n  this.globalData.slotManager = slotFactory(animData);\r\n  this.globalData.fontManager.addChars(animData.chars);\r\n  this.globalData.fontManager.addFonts(animData.fonts, fontsContainer);\r\n  this.globalData.getAssetData = this.animationItem.getAssetData.bind(this.animationItem);\r\n  this.globalData.getAssetsPath = this.animationItem.getAssetsPath.bind(this.animationItem);\r\n  this.globalData.imageLoader = this.animationItem.imagePreloader;\r\n  this.globalData.audioController = this.animationItem.audioController;\r\n  this.globalData.frameId = 0;\r\n  this.globalData.frameRate = animData.fr;\r\n  this.globalData.nm = animData.nm;\r\n  this.globalData.compSize = {\r\n    w: animData.w,\r\n    h: animData.h,\r\n  };\r\n};\n\nvar effectTypes = {\n  TRANSFORM_EFFECT: 'transformEFfect',\n};\n\nfunction TransformElement() {}\r\n\r\nTransformElement.prototype = {\r\n  initTransform: function () {\r\n    var mat = new Matrix();\r\n    this.finalTransform = {\r\n      mProp: this.data.ks ? TransformPropertyFactory.getTransformProperty(this, this.data.ks, this) : { o: 0 },\r\n      _matMdf: false,\r\n      _localMatMdf: false,\r\n      _opMdf: false,\r\n      mat: mat,\r\n      localMat: mat,\r\n      localOpacity: 1,\r\n    };\r\n    if (this.data.ao) {\r\n      this.finalTransform.mProp.autoOriented = true;\r\n    }\r\n\r\n    // TODO: check TYPE 11: Guided elements\r\n    if (this.data.ty !== 11) {\r\n      // this.createElements();\r\n    }\r\n  },\r\n  renderTransform: function () {\r\n    this.finalTransform._opMdf = this.finalTransform.mProp.o._mdf || this._isFirstFrame;\r\n    this.finalTransform._matMdf = this.finalTransform.mProp._mdf || this._isFirstFrame;\r\n\r\n    if (this.hierarchy) {\r\n      var mat;\r\n      var finalMat = this.finalTransform.mat;\r\n      var i = 0;\r\n      var len = this.hierarchy.length;\r\n      // Checking if any of the transformation matrices in the hierarchy chain has changed.\r\n      if (!this.finalTransform._matMdf) {\r\n        while (i < len) {\r\n          if (this.hierarchy[i].finalTransform.mProp._mdf) {\r\n            this.finalTransform._matMdf = true;\r\n            break;\r\n          }\r\n          i += 1;\r\n        }\r\n      }\r\n\r\n      if (this.finalTransform._matMdf) {\r\n        mat = this.finalTransform.mProp.v.props;\r\n        finalMat.cloneFromProps(mat);\r\n        for (i = 0; i < len; i += 1) {\r\n          finalMat.multiply(this.hierarchy[i].finalTransform.mProp.v);\r\n        }\r\n      }\r\n    }\r\n    if (this.finalTransform._matMdf) {\r\n      this.finalTransform._localMatMdf = this.finalTransform._matMdf;\r\n    }\r\n    if (this.finalTransform._opMdf) {\r\n      this.finalTransform.localOpacity = this.finalTransform.mProp.o.v;\r\n    }\r\n  },\r\n  renderLocalTransform: function () {\r\n    if (this.localTransforms) {\r\n      var i = 0;\r\n      var len = this.localTransforms.length;\r\n      this.finalTransform._localMatMdf = this.finalTransform._matMdf;\r\n      if (!this.finalTransform._localMatMdf || !this.finalTransform._opMdf) {\r\n        while (i < len) {\r\n          if (this.localTransforms[i]._mdf) {\r\n            this.finalTransform._localMatMdf = true;\r\n          }\r\n          if (this.localTransforms[i]._opMdf && !this.finalTransform._opMdf) {\r\n            this.finalTransform.localOpacity = this.finalTransform.mProp.o.v;\r\n            this.finalTransform._opMdf = true;\r\n          }\r\n          i += 1;\r\n        }\r\n      }\r\n      if (this.finalTransform._localMatMdf) {\r\n        var localMat = this.finalTransform.localMat;\r\n        this.localTransforms[0].matrix.clone(localMat);\r\n        for (i = 1; i < len; i += 1) {\r\n          var lmat = this.localTransforms[i].matrix;\r\n          localMat.multiply(lmat);\r\n        }\r\n        localMat.multiply(this.finalTransform.mat);\r\n      }\r\n      if (this.finalTransform._opMdf) {\r\n        var localOp = this.finalTransform.localOpacity;\r\n        for (i = 0; i < len; i += 1) {\r\n          localOp *= this.localTransforms[i].opacity * 0.01;\r\n        }\r\n        this.finalTransform.localOpacity = localOp;\r\n      }\r\n    }\r\n  },\r\n  searchEffectTransforms: function () {\r\n    if (this.renderableEffectsManager) {\r\n      var transformEffects = this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);\r\n      if (transformEffects.length) {\r\n        this.localTransforms = [];\r\n        this.finalTransform.localMat = new Matrix();\r\n        var i = 0;\r\n        var len = transformEffects.length;\r\n        for (i = 0; i < len; i += 1) {\r\n          this.localTransforms.push(transformEffects[i]);\r\n        }\r\n      }\r\n    }\r\n  },\r\n  globalToLocal: function (pt) {\r\n    var transforms = [];\r\n    transforms.push(this.finalTransform);\r\n    var flag = true;\r\n    var comp = this.comp;\r\n    while (flag) {\r\n      if (comp.finalTransform) {\r\n        if (comp.data.hasMask) {\r\n          transforms.splice(0, 0, comp.finalTransform);\r\n        }\r\n        comp = comp.comp;\r\n      } else {\r\n        flag = false;\r\n      }\r\n    }\r\n    var i;\r\n    var len = transforms.length;\r\n    var ptNew;\r\n    for (i = 0; i < len; i += 1) {\r\n      ptNew = transforms[i].mat.applyToPointArray(0, 0, 0);\r\n      // ptNew = transforms[i].mat.applyToPointArray(pt[0],pt[1],pt[2]);\r\n      pt = [pt[0] - ptNew[0], pt[1] - ptNew[1], 0];\r\n    }\r\n    return pt;\r\n  },\r\n  mHelper: new Matrix(),\r\n};\n\nfunction MaskElement(data, element, globalData) {\r\n  this.data = data;\r\n  this.element = element;\r\n  this.globalData = globalData;\r\n  this.storedData = [];\r\n  this.masksProperties = this.data.masksProperties || [];\r\n  this.maskElement = null;\r\n  var defs = this.globalData.defs;\r\n  var i;\r\n  var len = this.masksProperties ? this.masksProperties.length : 0;\r\n  this.viewData = createSizedArray(len);\r\n  this.solidPath = '';\r\n\r\n  var path;\r\n  var properties = this.masksProperties;\r\n  var count = 0;\r\n  var currentMasks = [];\r\n  var j;\r\n  var jLen;\r\n  var layerId = createElementID();\r\n  var rect;\r\n  var expansor;\r\n  var feMorph;\r\n  var x;\r\n  var maskType = 'clipPath';\r\n  var maskRef = 'clip-path';\r\n  for (i = 0; i < len; i += 1) {\r\n    if ((properties[i].mode !== 'a' && properties[i].mode !== 'n') || properties[i].inv || properties[i].o.k !== 100 || properties[i].o.x) {\r\n      maskType = 'mask';\r\n      maskRef = 'mask';\r\n    }\r\n\r\n    if ((properties[i].mode === 's' || properties[i].mode === 'i') && count === 0) {\r\n      rect = createNS('rect');\r\n      rect.setAttribute('fill', '#ffffff');\r\n      rect.setAttribute('width', this.element.comp.data.w || 0);\r\n      rect.setAttribute('height', this.element.comp.data.h || 0);\r\n      currentMasks.push(rect);\r\n    } else {\r\n      rect = null;\r\n    }\r\n\r\n    path = createNS('path');\r\n    if (properties[i].mode === 'n') {\r\n      // TODO move this to a factory or to a constructor\r\n      this.viewData[i] = {\r\n        op: PropertyFactory.getProp(this.element, properties[i].o, 0, 0.01, this.element),\r\n        prop: ShapePropertyFactory.getShapeProp(this.element, properties[i], 3),\r\n        elem: path,\r\n        lastPath: '',\r\n      };\r\n      defs.appendChild(path);\r\n    } else {\r\n      count += 1;\r\n\r\n      path.setAttribute('fill', properties[i].mode === 's' ? '#000000' : '#ffffff');\r\n      path.setAttribute('clip-rule', 'nonzero');\r\n      var filterID;\r\n\r\n      if (properties[i].x.k !== 0) {\r\n        maskType = 'mask';\r\n        maskRef = 'mask';\r\n        x = PropertyFactory.getProp(this.element, properties[i].x, 0, null, this.element);\r\n        filterID = createElementID();\r\n        expansor = createNS('filter');\r\n        expansor.setAttribute('id', filterID);\r\n        feMorph = createNS('feMorphology');\r\n        feMorph.setAttribute('operator', 'erode');\r\n        feMorph.setAttribute('in', 'SourceGraphic');\r\n        feMorph.setAttribute('radius', '0');\r\n        expansor.appendChild(feMorph);\r\n        defs.appendChild(expansor);\r\n        path.setAttribute('stroke', properties[i].mode === 's' ? '#000000' : '#ffffff');\r\n      } else {\r\n        feMorph = null;\r\n        x = null;\r\n      }\r\n\r\n      // TODO move this to a factory or to a constructor\r\n      this.storedData[i] = {\r\n        elem: path,\r\n        x: x,\r\n        expan: feMorph,\r\n        lastPath: '',\r\n        lastOperator: '',\r\n        filterId: filterID,\r\n        lastRadius: 0,\r\n      };\r\n      if (properties[i].mode === 'i') {\r\n        jLen = currentMasks.length;\r\n        var g = createNS('g');\r\n        for (j = 0; j < jLen; j += 1) {\r\n          g.appendChild(currentMasks[j]);\r\n        }\r\n        var mask = createNS('mask');\r\n        mask.setAttribute('mask-type', 'alpha');\r\n        mask.setAttribute('id', layerId + '_' + count);\r\n        mask.appendChild(path);\r\n        defs.appendChild(mask);\r\n        g.setAttribute('mask', 'url(' + getLocationHref() + '#' + layerId + '_' + count + ')');\r\n\r\n        currentMasks.length = 0;\r\n        currentMasks.push(g);\r\n      } else {\r\n        currentMasks.push(path);\r\n      }\r\n      if (properties[i].inv && !this.solidPath) {\r\n        this.solidPath = this.createLayerSolidPath();\r\n      }\r\n      // TODO move this to a factory or to a constructor\r\n      this.viewData[i] = {\r\n        elem: path,\r\n        lastPath: '',\r\n        op: PropertyFactory.getProp(this.element, properties[i].o, 0, 0.01, this.element),\r\n        prop: ShapePropertyFactory.getShapeProp(this.element, properties[i], 3),\r\n        invRect: rect,\r\n      };\r\n      if (!this.viewData[i].prop.k) {\r\n        this.drawPath(properties[i], this.viewData[i].prop.v, this.viewData[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  this.maskElement = createNS(maskType);\r\n\r\n  len = currentMasks.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.maskElement.appendChild(currentMasks[i]);\r\n  }\r\n\r\n  if (count > 0) {\r\n    this.maskElement.setAttribute('id', layerId);\r\n    this.element.maskedElement.setAttribute(maskRef, 'url(' + getLocationHref() + '#' + layerId + ')');\r\n    defs.appendChild(this.maskElement);\r\n  }\r\n  if (this.viewData.length) {\r\n    this.element.addRenderableComponent(this);\r\n  }\r\n}\r\n\r\nMaskElement.prototype.getMaskProperty = function (pos) {\r\n  return this.viewData[pos].prop;\r\n};\r\n\r\nMaskElement.prototype.renderFrame = function (isFirstFrame) {\r\n  var finalMat = this.element.finalTransform.mat;\r\n  var i;\r\n  var len = this.masksProperties.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.viewData[i].prop._mdf || isFirstFrame) {\r\n      this.drawPath(this.masksProperties[i], this.viewData[i].prop.v, this.viewData[i]);\r\n    }\r\n    if (this.viewData[i].op._mdf || isFirstFrame) {\r\n      this.viewData[i].elem.setAttribute('fill-opacity', this.viewData[i].op.v);\r\n    }\r\n    if (this.masksProperties[i].mode !== 'n') {\r\n      if (this.viewData[i].invRect && (this.element.finalTransform.mProp._mdf || isFirstFrame)) {\r\n        this.viewData[i].invRect.setAttribute('transform', finalMat.getInverseMatrix().to2dCSS());\r\n      }\r\n      if (this.storedData[i].x && (this.storedData[i].x._mdf || isFirstFrame)) {\r\n        var feMorph = this.storedData[i].expan;\r\n        if (this.storedData[i].x.v < 0) {\r\n          if (this.storedData[i].lastOperator !== 'erode') {\r\n            this.storedData[i].lastOperator = 'erode';\r\n            this.storedData[i].elem.setAttribute('filter', 'url(' + getLocationHref() + '#' + this.storedData[i].filterId + ')');\r\n          }\r\n          feMorph.setAttribute('radius', -this.storedData[i].x.v);\r\n        } else {\r\n          if (this.storedData[i].lastOperator !== 'dilate') {\r\n            this.storedData[i].lastOperator = 'dilate';\r\n            this.storedData[i].elem.setAttribute('filter', null);\r\n          }\r\n          this.storedData[i].elem.setAttribute('stroke-width', this.storedData[i].x.v * 2);\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nMaskElement.prototype.getMaskelement = function () {\r\n  return this.maskElement;\r\n};\r\n\r\nMaskElement.prototype.createLayerSolidPath = function () {\r\n  var path = 'M0,0 ';\r\n  path += ' h' + this.globalData.compSize.w;\r\n  path += ' v' + this.globalData.compSize.h;\r\n  path += ' h-' + this.globalData.compSize.w;\r\n  path += ' v-' + this.globalData.compSize.h + ' ';\r\n  return path;\r\n};\r\n\r\nMaskElement.prototype.drawPath = function (pathData, pathNodes, viewData) {\r\n  var pathString = ' M' + pathNodes.v[0][0] + ',' + pathNodes.v[0][1];\r\n  var i;\r\n  var len;\r\n  len = pathNodes._length;\r\n  for (i = 1; i < len; i += 1) {\r\n    // pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[i][0]+','+pathNodes.i[i][1] + \" \"+pathNodes.v[i][0]+','+pathNodes.v[i][1];\r\n    pathString += ' C' + pathNodes.o[i - 1][0] + ',' + pathNodes.o[i - 1][1] + ' ' + pathNodes.i[i][0] + ',' + pathNodes.i[i][1] + ' ' + pathNodes.v[i][0] + ',' + pathNodes.v[i][1];\r\n  }\r\n  // pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[0][0]+','+pathNodes.i[0][1] + \" \"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\r\n  if (pathNodes.c && len > 1) {\r\n    pathString += ' C' + pathNodes.o[i - 1][0] + ',' + pathNodes.o[i - 1][1] + ' ' + pathNodes.i[0][0] + ',' + pathNodes.i[0][1] + ' ' + pathNodes.v[0][0] + ',' + pathNodes.v[0][1];\r\n  }\r\n  // pathNodes.__renderedString = pathString;\r\n\r\n  if (viewData.lastPath !== pathString) {\r\n    var pathShapeValue = '';\r\n    if (viewData.elem) {\r\n      if (pathNodes.c) {\r\n        pathShapeValue = pathData.inv ? this.solidPath + pathString : pathString;\r\n      }\r\n      viewData.elem.setAttribute('d', pathShapeValue);\r\n    }\r\n    viewData.lastPath = pathString;\r\n  }\r\n};\r\n\r\nMaskElement.prototype.destroy = function () {\r\n  this.element = null;\r\n  this.globalData = null;\r\n  this.maskElement = null;\r\n  this.data = null;\r\n  this.masksProperties = null;\r\n};\n\nconst filtersFactory = (function () {\r\n  var ob = {};\r\n  ob.createFilter = createFilter;\r\n  ob.createAlphaToLuminanceFilter = createAlphaToLuminanceFilter;\r\n\r\n  function createFilter(filId, skipCoordinates) {\r\n    var fil = createNS('filter');\r\n    fil.setAttribute('id', filId);\r\n    if (skipCoordinates !== true) {\r\n      fil.setAttribute('filterUnits', 'objectBoundingBox');\r\n      fil.setAttribute('x', '0%');\r\n      fil.setAttribute('y', '0%');\r\n      fil.setAttribute('width', '100%');\r\n      fil.setAttribute('height', '100%');\r\n    }\r\n    return fil;\r\n  }\r\n\r\n  function createAlphaToLuminanceFilter() {\r\n    var feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type', 'matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n    feColorMatrix.setAttribute('values', '0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1');\r\n    return feColorMatrix;\r\n  }\r\n\r\n  return ob;\r\n}());\n\nconst featureSupport = (function () {\r\n  var ob = {\r\n    maskType: true,\r\n    svgLumaHidden: true,\r\n    offscreenCanvas: typeof OffscreenCanvas !== 'undefined',\r\n  };\r\n  if (/MSIE 10/i.test(navigator.userAgent) || /MSIE 9/i.test(navigator.userAgent) || /rv:11.0/i.test(navigator.userAgent) || /Edge\\/\\d./i.test(navigator.userAgent)) {\r\n    ob.maskType = false;\r\n  }\r\n  if (/firefox/i.test(navigator.userAgent)) {\r\n    ob.svgLumaHidden = false;\r\n  }\r\n  return ob;\r\n}());\n\nvar registeredEffects$1 = {};\r\nvar idPrefix = 'filter_result_';\r\n\r\nfunction SVGEffects(elem) {\r\n  var i;\r\n  var source = 'SourceGraphic';\r\n  var len = elem.data.ef ? elem.data.ef.length : 0;\r\n  var filId = createElementID();\r\n  var fil = filtersFactory.createFilter(filId, true);\r\n  var count = 0;\r\n  this.filters = [];\r\n  var filterManager;\r\n  for (i = 0; i < len; i += 1) {\r\n    filterManager = null;\r\n    var type = elem.data.ef[i].ty;\r\n    if (registeredEffects$1[type]) {\r\n      var Effect = registeredEffects$1[type].effect;\r\n      filterManager = new Effect(fil, elem.effectsManager.effectElements[i], elem, idPrefix + count, source);\r\n      source = idPrefix + count;\r\n      if (registeredEffects$1[type].countsAsEffect) {\r\n        count += 1;\r\n      }\r\n    }\r\n    if (filterManager) {\r\n      this.filters.push(filterManager);\r\n    }\r\n  }\r\n  if (count) {\r\n    elem.globalData.defs.appendChild(fil);\r\n    elem.layerElement.setAttribute('filter', 'url(' + getLocationHref() + '#' + filId + ')');\r\n  }\r\n  if (this.filters.length) {\r\n    elem.addRenderableComponent(this);\r\n  }\r\n}\r\n\r\nSVGEffects.prototype.renderFrame = function (_isFirstFrame) {\r\n  var i;\r\n  var len = this.filters.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.filters[i].renderFrame(_isFirstFrame);\r\n  }\r\n};\r\n\r\nSVGEffects.prototype.getEffects = function (type) {\r\n  var i;\r\n  var len = this.filters.length;\r\n  var effects = [];\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.filters[i].type === type) {\r\n      effects.push(this.filters[i]);\r\n    }\r\n  }\r\n  return effects;\r\n};\r\n\r\nfunction registerEffect$1(id, effect, countsAsEffect) {\r\n  registeredEffects$1[id] = {\r\n    effect,\r\n    countsAsEffect,\r\n  };\r\n}\n\nfunction SVGBaseElement() {\r\n}\r\n\r\nSVGBaseElement.prototype = {\r\n  initRendererElement: function () {\r\n    this.layerElement = createNS('g');\r\n  },\r\n  createContainerElements: function () {\r\n    this.matteElement = createNS('g');\r\n    this.transformedElement = this.layerElement;\r\n    this.maskedElement = this.layerElement;\r\n    this._sizeChanged = false;\r\n    var layerElementParent = null;\r\n    // If this layer acts as a mask for the following layer\r\n    if (this.data.td) {\r\n      this.matteMasks = {};\r\n      var gg = createNS('g');\r\n      gg.setAttribute('id', this.layerId);\r\n      gg.appendChild(this.layerElement);\r\n      layerElementParent = gg;\r\n      this.globalData.defs.appendChild(gg);\r\n    } else if (this.data.tt) {\r\n      this.matteElement.appendChild(this.layerElement);\r\n      layerElementParent = this.matteElement;\r\n      this.baseElement = this.matteElement;\r\n    } else {\r\n      this.baseElement = this.layerElement;\r\n    }\r\n    if (this.data.ln) {\r\n      this.layerElement.setAttribute('id', this.data.ln);\r\n    }\r\n    if (this.data.cl) {\r\n      this.layerElement.setAttribute('class', this.data.cl);\r\n    }\r\n    // Clipping compositions to hide content that exceeds boundaries. If collapsed transformations is on, component should not be clipped\r\n    if (this.data.ty === 0 && !this.data.hd) {\r\n      var cp = createNS('clipPath');\r\n      var pt = createNS('path');\r\n      pt.setAttribute('d', 'M0,0 L' + this.data.w + ',0 L' + this.data.w + ',' + this.data.h + ' L0,' + this.data.h + 'z');\r\n      var clipId = createElementID();\r\n      cp.setAttribute('id', clipId);\r\n      cp.appendChild(pt);\r\n      this.globalData.defs.appendChild(cp);\r\n\r\n      if (this.checkMasks()) {\r\n        var cpGroup = createNS('g');\r\n        cpGroup.setAttribute('clip-path', 'url(' + getLocationHref() + '#' + clipId + ')');\r\n        cpGroup.appendChild(this.layerElement);\r\n        this.transformedElement = cpGroup;\r\n        if (layerElementParent) {\r\n          layerElementParent.appendChild(this.transformedElement);\r\n        } else {\r\n          this.baseElement = this.transformedElement;\r\n        }\r\n      } else {\r\n        this.layerElement.setAttribute('clip-path', 'url(' + getLocationHref() + '#' + clipId + ')');\r\n      }\r\n    }\r\n    if (this.data.bm !== 0) {\r\n      this.setBlendMode();\r\n    }\r\n  },\r\n  renderElement: function () {\r\n    if (this.finalTransform._localMatMdf) {\r\n      this.transformedElement.setAttribute('transform', this.finalTransform.localMat.to2dCSS());\r\n    }\r\n    if (this.finalTransform._opMdf) {\r\n      this.transformedElement.setAttribute('opacity', this.finalTransform.localOpacity);\r\n    }\r\n  },\r\n  destroyBaseElement: function () {\r\n    this.layerElement = null;\r\n    this.matteElement = null;\r\n    this.maskManager.destroy();\r\n  },\r\n  getBaseElement: function () {\r\n    if (this.data.hd) {\r\n      return null;\r\n    }\r\n    return this.baseElement;\r\n  },\r\n  createRenderableComponents: function () {\r\n    this.maskManager = new MaskElement(this.data, this, this.globalData);\r\n    this.renderableEffectsManager = new SVGEffects(this);\r\n    this.searchEffectTransforms();\r\n  },\r\n  getMatte: function (matteType) {\r\n    // This should not be a common case. But for backward compatibility, we'll create the matte object.\r\n    // It solves animations that have two consecutive layers marked as matte masks.\r\n    // Which is an undefined behavior in AE.\r\n    if (!this.matteMasks) {\r\n      this.matteMasks = {};\r\n    }\r\n    if (!this.matteMasks[matteType]) {\r\n      var id = this.layerId + '_' + matteType;\r\n      var filId;\r\n      var fil;\r\n      var useElement;\r\n      var gg;\r\n      if (matteType === 1 || matteType === 3) {\r\n        var masker = createNS('mask');\r\n        masker.setAttribute('id', id);\r\n        masker.setAttribute('mask-type', matteType === 3 ? 'luminance' : 'alpha');\r\n        useElement = createNS('use');\r\n        useElement.setAttributeNS('http://www.w3.org/1999/xlink', 'href', '#' + this.layerId);\r\n        masker.appendChild(useElement);\r\n        this.globalData.defs.appendChild(masker);\r\n        if (!featureSupport.maskType && matteType === 1) {\r\n          masker.setAttribute('mask-type', 'luminance');\r\n          filId = createElementID();\r\n          fil = filtersFactory.createFilter(filId);\r\n          this.globalData.defs.appendChild(fil);\r\n          fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\r\n          gg = createNS('g');\r\n          gg.appendChild(useElement);\r\n          masker.appendChild(gg);\r\n          gg.setAttribute('filter', 'url(' + getLocationHref() + '#' + filId + ')');\r\n        }\r\n      } else if (matteType === 2) {\r\n        var maskGroup = createNS('mask');\r\n        maskGroup.setAttribute('id', id);\r\n        maskGroup.setAttribute('mask-type', 'alpha');\r\n        var maskGrouper = createNS('g');\r\n        maskGroup.appendChild(maskGrouper);\r\n        filId = createElementID();\r\n        fil = filtersFactory.createFilter(filId);\r\n        /// /\r\n        var feCTr = createNS('feComponentTransfer');\r\n        feCTr.setAttribute('in', 'SourceGraphic');\r\n        fil.appendChild(feCTr);\r\n        var feFunc = createNS('feFuncA');\r\n        feFunc.setAttribute('type', 'table');\r\n        feFunc.setAttribute('tableValues', '1.0 0.0');\r\n        feCTr.appendChild(feFunc);\r\n        /// /\r\n        this.globalData.defs.appendChild(fil);\r\n        var alphaRect = createNS('rect');\r\n        alphaRect.setAttribute('width', this.comp.data.w);\r\n        alphaRect.setAttribute('height', this.comp.data.h);\r\n        alphaRect.setAttribute('x', '0');\r\n        alphaRect.setAttribute('y', '0');\r\n        alphaRect.setAttribute('fill', '#ffffff');\r\n        alphaRect.setAttribute('opacity', '0');\r\n        maskGrouper.setAttribute('filter', 'url(' + getLocationHref() + '#' + filId + ')');\r\n        maskGrouper.appendChild(alphaRect);\r\n        useElement = createNS('use');\r\n        useElement.setAttributeNS('http://www.w3.org/1999/xlink', 'href', '#' + this.layerId);\r\n        maskGrouper.appendChild(useElement);\r\n        if (!featureSupport.maskType) {\r\n          maskGroup.setAttribute('mask-type', 'luminance');\r\n          fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\r\n          gg = createNS('g');\r\n          maskGrouper.appendChild(alphaRect);\r\n          gg.appendChild(this.layerElement);\r\n          maskGrouper.appendChild(gg);\r\n        }\r\n        this.globalData.defs.appendChild(maskGroup);\r\n      }\r\n      this.matteMasks[matteType] = id;\r\n    }\r\n    return this.matteMasks[matteType];\r\n  },\r\n  setMatte: function (id) {\r\n    if (!this.matteElement) {\r\n      return;\r\n    }\r\n    this.matteElement.setAttribute('mask', 'url(' + getLocationHref() + '#' + id + ')');\r\n  },\r\n};\n\n/**\r\n * @file\r\n * Handles AE's layer parenting property.\r\n *\r\n */\r\n\r\nfunction HierarchyElement() {}\r\n\r\nHierarchyElement.prototype = {\r\n  /**\r\n     * @function\r\n     * Initializes hierarchy properties\r\n     *\r\n     */\r\n  initHierarchy: function () {\r\n    // element's parent list\r\n    this.hierarchy = [];\r\n    // if element is parent of another layer _isParent will be true\r\n    this._isParent = false;\r\n    this.checkParenting();\r\n  },\r\n  /**\r\n     * @function\r\n     * Sets layer's hierarchy.\r\n     * @param {array} hierarch\r\n     * layer's parent list\r\n     *\r\n     */\r\n  setHierarchy: function (hierarchy) {\r\n    this.hierarchy = hierarchy;\r\n  },\r\n  /**\r\n     * @function\r\n     * Sets layer as parent.\r\n     *\r\n     */\r\n  setAsParent: function () {\r\n    this._isParent = true;\r\n  },\r\n  /**\r\n     * @function\r\n     * Searches layer's parenting chain\r\n     *\r\n     */\r\n  checkParenting: function () {\r\n    if (this.data.parent !== undefined) {\r\n      this.comp.buildElementParenting(this, this.data.parent, []);\r\n    }\r\n  },\r\n};\n\nfunction RenderableDOMElement() {}\r\n\r\n(function () {\r\n  var _prototype = {\r\n    initElement: function (data, globalData, comp) {\r\n      this.initFrame();\r\n      this.initBaseData(data, globalData, comp);\r\n      this.initTransform(data, globalData, comp);\r\n      this.initHierarchy();\r\n      this.initRenderable();\r\n      this.initRendererElement();\r\n      this.createContainerElements();\r\n      this.createRenderableComponents();\r\n      this.createContent();\r\n      this.hide();\r\n    },\r\n    hide: function () {\r\n      // console.log('HIDE', this);\r\n      if (!this.hidden && (!this.isInRange || this.isTransparent)) {\r\n        var elem = this.baseElement || this.layerElement;\r\n        elem.style.display = 'none';\r\n        this.hidden = true;\r\n      }\r\n    },\r\n    show: function () {\r\n      // console.log('SHOW', this);\r\n      if (this.isInRange && !this.isTransparent) {\r\n        if (!this.data.hd) {\r\n          var elem = this.baseElement || this.layerElement;\r\n          elem.style.display = 'block';\r\n        }\r\n        this.hidden = false;\r\n        this._isFirstFrame = true;\r\n      }\r\n    },\r\n    renderFrame: function () {\r\n      // If it is exported as hidden (data.hd === true) no need to render\r\n      // If it is not visible no need to render\r\n      if (this.data.hd || this.hidden) {\r\n        return;\r\n      }\r\n      this.renderTransform();\r\n      this.renderRenderable();\r\n      this.renderLocalTransform();\r\n      this.renderElement();\r\n      this.renderInnerContent();\r\n      if (this._isFirstFrame) {\r\n        this._isFirstFrame = false;\r\n      }\r\n    },\r\n    renderInnerContent: function () {},\r\n    prepareFrame: function (num) {\r\n      this._mdf = false;\r\n      this.prepareRenderableFrame(num);\r\n      this.prepareProperties(num, this.isInRange);\r\n      this.checkTransparency();\r\n    },\r\n    destroy: function () {\r\n      this.innerElem = null;\r\n      this.destroyBaseElement();\r\n    },\r\n  };\r\n  extendPrototype([RenderableElement, createProxyFunction(_prototype)], RenderableDOMElement);\r\n}());\n\nfunction IImageElement(data, globalData, comp) {\r\n  this.assetData = globalData.getAssetData(data.refId);\r\n  if (this.assetData && this.assetData.sid) {\r\n    this.assetData = globalData.slotManager.getProp(this.assetData);\r\n  }\r\n  this.initElement(data, globalData, comp);\r\n  this.sourceRect = {\r\n    top: 0, left: 0, width: this.assetData.w, height: this.assetData.h,\r\n  };\r\n}\r\n\r\nextendPrototype([BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement, RenderableDOMElement], IImageElement);\r\n\r\nIImageElement.prototype.createContent = function () {\r\n  var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n\r\n  this.innerElem = createNS('image');\r\n  this.innerElem.setAttribute('width', this.assetData.w + 'px');\r\n  this.innerElem.setAttribute('height', this.assetData.h + 'px');\r\n  this.innerElem.setAttribute('preserveAspectRatio', this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio);\r\n  this.innerElem.setAttributeNS('http://www.w3.org/1999/xlink', 'href', assetPath);\r\n\r\n  this.layerElement.appendChild(this.innerElem);\r\n};\r\n\r\nIImageElement.prototype.sourceRectAtTime = function () {\r\n  return this.sourceRect;\r\n};\n\nfunction ProcessedElement(element, position) {\r\n  this.elem = element;\r\n  this.pos = position;\r\n}\n\nfunction IShapeElement() {\r\n}\r\n\r\nIShapeElement.prototype = {\r\n  addShapeToModifiers: function (data) {\r\n    var i;\r\n    var len = this.shapeModifiers.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      this.shapeModifiers[i].addShape(data);\r\n    }\r\n  },\r\n  isShapeInAnimatedModifiers: function (data) {\r\n    var i = 0;\r\n    var len = this.shapeModifiers.length;\r\n    while (i < len) {\r\n      if (this.shapeModifiers[i].isAnimatedWithShape(data)) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  },\r\n  renderModifiers: function () {\r\n    if (!this.shapeModifiers.length) {\r\n      return;\r\n    }\r\n    var i;\r\n    var len = this.shapes.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      this.shapes[i].sh.reset();\r\n    }\r\n\r\n    len = this.shapeModifiers.length;\r\n    var shouldBreakProcess;\r\n    for (i = len - 1; i >= 0; i -= 1) {\r\n      shouldBreakProcess = this.shapeModifiers[i].processShapes(this._isFirstFrame);\r\n      // workaround to fix cases where a repeater resets the shape so the following processes get called twice\r\n      // TODO: find a better solution for this\r\n      if (shouldBreakProcess) {\r\n        break;\r\n      }\r\n    }\r\n  },\r\n\r\n  searchProcessedElement: function (elem) {\r\n    var elements = this.processedElements;\r\n    var i = 0;\r\n    var len = elements.length;\r\n    while (i < len) {\r\n      if (elements[i].elem === elem) {\r\n        return elements[i].pos;\r\n      }\r\n      i += 1;\r\n    }\r\n    return 0;\r\n  },\r\n  addProcessedElement: function (elem, pos) {\r\n    var elements = this.processedElements;\r\n    var i = elements.length;\r\n    while (i) {\r\n      i -= 1;\r\n      if (elements[i].elem === elem) {\r\n        elements[i].pos = pos;\r\n        return;\r\n      }\r\n    }\r\n    elements.push(new ProcessedElement(elem, pos));\r\n  },\r\n  prepareFrame: function (num) {\r\n    this.prepareRenderableFrame(num);\r\n    this.prepareProperties(num, this.isInRange);\r\n  },\r\n};\n\nconst lineCapEnum = {\r\n  1: 'butt',\r\n  2: 'round',\r\n  3: 'square',\r\n};\r\n\r\nconst lineJoinEnum = {\r\n  1: 'miter',\r\n  2: 'round',\r\n  3: 'bevel',\r\n};\n\nfunction SVGShapeData(transformers, level, shape) {\r\n  this.caches = [];\r\n  this.styles = [];\r\n  this.transformers = transformers;\r\n  this.lStr = '';\r\n  this.sh = shape;\r\n  this.lvl = level;\r\n  // TODO find if there are some cases where _isAnimated can be false.\r\n  // For now, since shapes add up with other shapes. They have to be calculated every time.\r\n  // One way of finding out is checking if all styles associated to this shape depend only of this shape\r\n  this._isAnimated = !!shape.k;\r\n  // TODO: commenting this for now since all shapes are animated\r\n  var i = 0;\r\n  var len = transformers.length;\r\n  while (i < len) {\r\n    if (transformers[i].mProps.dynamicProperties.length) {\r\n      this._isAnimated = true;\r\n      break;\r\n    }\r\n    i += 1;\r\n  }\r\n}\r\n\r\nSVGShapeData.prototype.setAsAnimated = function () {\r\n  this._isAnimated = true;\r\n};\n\nfunction SVGStyleData(data, level) {\r\n  this.data = data;\r\n  this.type = data.ty;\r\n  this.d = '';\r\n  this.lvl = level;\r\n  this._mdf = false;\r\n  this.closed = data.hd === true;\r\n  this.pElem = createNS('path');\r\n  this.msElem = null;\r\n}\r\n\r\nSVGStyleData.prototype.reset = function () {\r\n  this.d = '';\r\n  this._mdf = false;\r\n};\n\nfunction DashProperty(elem, data, renderer, container) {\r\n  this.elem = elem;\r\n  this.frameId = -1;\r\n  this.dataProps = createSizedArray(data.length);\r\n  this.renderer = renderer;\r\n  this.k = false;\r\n  this.dashStr = '';\r\n  this.dashArray = createTypedArray('float32', data.length ? data.length - 1 : 0);\r\n  this.dashoffset = createTypedArray('float32', 1);\r\n  this.initDynamicPropertyContainer(container);\r\n  var i;\r\n  var len = data.length || 0;\r\n  var prop;\r\n  for (i = 0; i < len; i += 1) {\r\n    prop = PropertyFactory.getProp(elem, data[i].v, 0, 0, this);\r\n    this.k = prop.k || this.k;\r\n    this.dataProps[i] = { n: data[i].n, p: prop };\r\n  }\r\n  if (!this.k) {\r\n    this.getValue(true);\r\n  }\r\n  this._isAnimated = this.k;\r\n}\r\n\r\nDashProperty.prototype.getValue = function (forceRender) {\r\n  if (this.elem.globalData.frameId === this.frameId && !forceRender) {\r\n    return;\r\n  }\r\n  this.frameId = this.elem.globalData.frameId;\r\n  this.iterateDynamicProperties();\r\n  this._mdf = this._mdf || forceRender;\r\n  if (this._mdf) {\r\n    var i = 0;\r\n    var len = this.dataProps.length;\r\n    if (this.renderer === 'svg') {\r\n      this.dashStr = '';\r\n    }\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.dataProps[i].n !== 'o') {\r\n        if (this.renderer === 'svg') {\r\n          this.dashStr += ' ' + this.dataProps[i].p.v;\r\n        } else {\r\n          this.dashArray[i] = this.dataProps[i].p.v;\r\n        }\r\n      } else {\r\n        this.dashoffset[0] = this.dataProps[i].p.v;\r\n      }\r\n    }\r\n  }\r\n};\r\nextendPrototype([DynamicPropertyContainer], DashProperty);\n\nfunction SVGStrokeStyleData(elem, data, styleOb) {\r\n  this.initDynamicPropertyContainer(elem);\r\n  this.getValue = this.iterateDynamicProperties;\r\n  this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\r\n  this.w = PropertyFactory.getProp(elem, data.w, 0, null, this);\r\n  this.d = new DashProperty(elem, data.d || {}, 'svg', this);\r\n  this.c = PropertyFactory.getProp(elem, data.c, 1, 255, this);\r\n  this.style = styleOb;\r\n  this._isAnimated = !!this._isAnimated;\r\n}\r\n\r\nextendPrototype([DynamicPropertyContainer], SVGStrokeStyleData);\n\nfunction SVGFillStyleData(elem, data, styleOb) {\r\n  this.initDynamicPropertyContainer(elem);\r\n  this.getValue = this.iterateDynamicProperties;\r\n  this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\r\n  this.c = PropertyFactory.getProp(elem, data.c, 1, 255, this);\r\n  this.style = styleOb;\r\n}\r\n\r\nextendPrototype([DynamicPropertyContainer], SVGFillStyleData);\n\nfunction SVGNoStyleData(elem, data, styleOb) {\r\n  this.initDynamicPropertyContainer(elem);\r\n  this.getValue = this.iterateDynamicProperties;\r\n  this.style = styleOb;\r\n}\r\n\r\nextendPrototype([DynamicPropertyContainer], SVGNoStyleData);\n\nfunction GradientProperty(elem, data, container) {\r\n  this.data = data;\r\n  this.c = createTypedArray('uint8c', data.p * 4);\r\n  var cLength = data.k.k[0].s ? (data.k.k[0].s.length - data.p * 4) : data.k.k.length - data.p * 4;\r\n  this.o = createTypedArray('float32', cLength);\r\n  this._cmdf = false;\r\n  this._omdf = false;\r\n  this._collapsable = this.checkCollapsable();\r\n  this._hasOpacity = cLength;\r\n  this.initDynamicPropertyContainer(container);\r\n  this.prop = PropertyFactory.getProp(elem, data.k, 1, null, this);\r\n  this.k = this.prop.k;\r\n  this.getValue(true);\r\n}\r\n\r\nGradientProperty.prototype.comparePoints = function (values, points) {\r\n  var i = 0;\r\n  var len = this.o.length / 2;\r\n  var diff;\r\n  while (i < len) {\r\n    diff = Math.abs(values[i * 4] - values[points * 4 + i * 2]);\r\n    if (diff > 0.01) {\r\n      return false;\r\n    }\r\n    i += 1;\r\n  }\r\n  return true;\r\n};\r\n\r\nGradientProperty.prototype.checkCollapsable = function () {\r\n  if (this.o.length / 2 !== this.c.length / 4) {\r\n    return false;\r\n  }\r\n  if (this.data.k.k[0].s) {\r\n    var i = 0;\r\n    var len = this.data.k.k.length;\r\n    while (i < len) {\r\n      if (!this.comparePoints(this.data.k.k[i].s, this.data.p)) {\r\n        return false;\r\n      }\r\n      i += 1;\r\n    }\r\n  } else if (!this.comparePoints(this.data.k.k, this.data.p)) {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nGradientProperty.prototype.getValue = function (forceRender) {\r\n  this.prop.getValue();\r\n  this._mdf = false;\r\n  this._cmdf = false;\r\n  this._omdf = false;\r\n  if (this.prop._mdf || forceRender) {\r\n    var i;\r\n    var len = this.data.p * 4;\r\n    var mult;\r\n    var val;\r\n    for (i = 0; i < len; i += 1) {\r\n      mult = i % 4 === 0 ? 100 : 255;\r\n      val = Math.round(this.prop.v[i] * mult);\r\n      if (this.c[i] !== val) {\r\n        this.c[i] = val;\r\n        this._cmdf = !forceRender;\r\n      }\r\n    }\r\n    if (this.o.length) {\r\n      len = this.prop.v.length;\r\n      for (i = this.data.p * 4; i < len; i += 1) {\r\n        mult = i % 2 === 0 ? 100 : 1;\r\n        val = i % 2 === 0 ? Math.round(this.prop.v[i] * 100) : this.prop.v[i];\r\n        if (this.o[i - this.data.p * 4] !== val) {\r\n          this.o[i - this.data.p * 4] = val;\r\n          this._omdf = !forceRender;\r\n        }\r\n      }\r\n    }\r\n    this._mdf = !forceRender;\r\n  }\r\n};\r\n\r\nextendPrototype([DynamicPropertyContainer], GradientProperty);\n\nfunction SVGGradientFillStyleData(elem, data, styleOb) {\r\n  this.initDynamicPropertyContainer(elem);\r\n  this.getValue = this.iterateDynamicProperties;\r\n  this.initGradientData(elem, data, styleOb);\r\n}\r\n\r\nSVGGradientFillStyleData.prototype.initGradientData = function (elem, data, styleOb) {\r\n  this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\r\n  this.s = PropertyFactory.getProp(elem, data.s, 1, null, this);\r\n  this.e = PropertyFactory.getProp(elem, data.e, 1, null, this);\r\n  this.h = PropertyFactory.getProp(elem, data.h || { k: 0 }, 0, 0.01, this);\r\n  this.a = PropertyFactory.getProp(elem, data.a || { k: 0 }, 0, degToRads, this);\r\n  this.g = new GradientProperty(elem, data.g, this);\r\n  this.style = styleOb;\r\n  this.stops = [];\r\n  this.setGradientData(styleOb.pElem, data);\r\n  this.setGradientOpacity(data, styleOb);\r\n  this._isAnimated = !!this._isAnimated;\r\n};\r\n\r\nSVGGradientFillStyleData.prototype.setGradientData = function (pathElement, data) {\r\n  var gradientId = createElementID();\r\n  var gfill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\r\n  gfill.setAttribute('id', gradientId);\r\n  gfill.setAttribute('spreadMethod', 'pad');\r\n  gfill.setAttribute('gradientUnits', 'userSpaceOnUse');\r\n  var stops = [];\r\n  var stop;\r\n  var j;\r\n  var jLen;\r\n  jLen = data.g.p * 4;\r\n  for (j = 0; j < jLen; j += 4) {\r\n    stop = createNS('stop');\r\n    gfill.appendChild(stop);\r\n    stops.push(stop);\r\n  }\r\n  pathElement.setAttribute(data.ty === 'gf' ? 'fill' : 'stroke', 'url(' + getLocationHref() + '#' + gradientId + ')');\r\n  this.gf = gfill;\r\n  this.cst = stops;\r\n};\r\n\r\nSVGGradientFillStyleData.prototype.setGradientOpacity = function (data, styleOb) {\r\n  if (this.g._hasOpacity && !this.g._collapsable) {\r\n    var stop;\r\n    var j;\r\n    var jLen;\r\n    var mask = createNS('mask');\r\n    var maskElement = createNS('path');\r\n    mask.appendChild(maskElement);\r\n    var opacityId = createElementID();\r\n    var maskId = createElementID();\r\n    mask.setAttribute('id', maskId);\r\n    var opFill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\r\n    opFill.setAttribute('id', opacityId);\r\n    opFill.setAttribute('spreadMethod', 'pad');\r\n    opFill.setAttribute('gradientUnits', 'userSpaceOnUse');\r\n    jLen = data.g.k.k[0].s ? data.g.k.k[0].s.length : data.g.k.k.length;\r\n    var stops = this.stops;\r\n    for (j = data.g.p * 4; j < jLen; j += 2) {\r\n      stop = createNS('stop');\r\n      stop.setAttribute('stop-color', 'rgb(255,255,255)');\r\n      opFill.appendChild(stop);\r\n      stops.push(stop);\r\n    }\r\n    maskElement.setAttribute(data.ty === 'gf' ? 'fill' : 'stroke', 'url(' + getLocationHref() + '#' + opacityId + ')');\r\n    if (data.ty === 'gs') {\r\n      maskElement.setAttribute('stroke-linecap', lineCapEnum[data.lc || 2]);\r\n      maskElement.setAttribute('stroke-linejoin', lineJoinEnum[data.lj || 2]);\r\n      if (data.lj === 1) {\r\n        maskElement.setAttribute('stroke-miterlimit', data.ml);\r\n      }\r\n    }\r\n    this.of = opFill;\r\n    this.ms = mask;\r\n    this.ost = stops;\r\n    this.maskId = maskId;\r\n    styleOb.msElem = maskElement;\r\n  }\r\n};\r\n\r\nextendPrototype([DynamicPropertyContainer], SVGGradientFillStyleData);\n\nfunction SVGGradientStrokeStyleData(elem, data, styleOb) {\r\n  this.initDynamicPropertyContainer(elem);\r\n  this.getValue = this.iterateDynamicProperties;\r\n  this.w = PropertyFactory.getProp(elem, data.w, 0, null, this);\r\n  this.d = new DashProperty(elem, data.d || {}, 'svg', this);\r\n  this.initGradientData(elem, data, styleOb);\r\n  this._isAnimated = !!this._isAnimated;\r\n}\r\n\r\nextendPrototype([SVGGradientFillStyleData, DynamicPropertyContainer], SVGGradientStrokeStyleData);\n\nfunction ShapeGroupData() {\r\n  this.it = [];\r\n  this.prevViewData = [];\r\n  this.gr = createNS('g');\r\n}\n\nfunction SVGTransformData(mProps, op, container) {\r\n  this.transform = {\r\n    mProps: mProps,\r\n    op: op,\r\n    container: container,\r\n  };\r\n  this.elements = [];\r\n  this._isAnimated = this.transform.mProps.dynamicProperties.length || this.transform.op.effectsSequence.length;\r\n}\n\nconst buildShapeString = function (pathNodes, length, closed, mat) {\r\n  if (length === 0) {\r\n    return '';\r\n  }\r\n  var _o = pathNodes.o;\r\n  var _i = pathNodes.i;\r\n  var _v = pathNodes.v;\r\n  var i;\r\n  var shapeString = ' M' + mat.applyToPointStringified(_v[0][0], _v[0][1]);\r\n  for (i = 1; i < length; i += 1) {\r\n    shapeString += ' C' + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + ' ' + mat.applyToPointStringified(_i[i][0], _i[i][1]) + ' ' + mat.applyToPointStringified(_v[i][0], _v[i][1]);\r\n  }\r\n  if (closed && length) {\r\n    shapeString += ' C' + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + ' ' + mat.applyToPointStringified(_i[0][0], _i[0][1]) + ' ' + mat.applyToPointStringified(_v[0][0], _v[0][1]);\r\n    shapeString += 'z';\r\n  }\r\n  return shapeString;\r\n};\n\nconst SVGElementsRenderer = (function () {\r\n  var _identityMatrix = new Matrix();\r\n  var _matrixHelper = new Matrix();\r\n\r\n  var ob = {\r\n    createRenderFunction: createRenderFunction,\r\n  };\r\n\r\n  function createRenderFunction(data) {\r\n    switch (data.ty) {\r\n      case 'fl':\r\n        return renderFill;\r\n      case 'gf':\r\n        return renderGradient;\r\n      case 'gs':\r\n        return renderGradientStroke;\r\n      case 'st':\r\n        return renderStroke;\r\n      case 'sh':\r\n      case 'el':\r\n      case 'rc':\r\n      case 'sr':\r\n        return renderPath;\r\n      case 'tr':\r\n        return renderContentTransform;\r\n      case 'no':\r\n        return renderNoop;\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  function renderContentTransform(styleData, itemData, isFirstFrame) {\r\n    if (isFirstFrame || itemData.transform.op._mdf) {\r\n      itemData.transform.container.setAttribute('opacity', itemData.transform.op.v);\r\n    }\r\n    if (isFirstFrame || itemData.transform.mProps._mdf) {\r\n      itemData.transform.container.setAttribute('transform', itemData.transform.mProps.v.to2dCSS());\r\n    }\r\n  }\r\n\r\n  function renderNoop() {\r\n\r\n  }\r\n\r\n  function renderPath(styleData, itemData, isFirstFrame) {\r\n    var j;\r\n    var jLen;\r\n    var pathStringTransformed;\r\n    var redraw;\r\n    var pathNodes;\r\n    var l;\r\n    var lLen = itemData.styles.length;\r\n    var lvl = itemData.lvl;\r\n    var paths;\r\n    var mat;\r\n    var iterations;\r\n    var k;\r\n    for (l = 0; l < lLen; l += 1) {\r\n      redraw = itemData.sh._mdf || isFirstFrame;\r\n      if (itemData.styles[l].lvl < lvl) {\r\n        mat = _matrixHelper.reset();\r\n        iterations = lvl - itemData.styles[l].lvl;\r\n        k = itemData.transformers.length - 1;\r\n        while (!redraw && iterations > 0) {\r\n          redraw = itemData.transformers[k].mProps._mdf || redraw;\r\n          iterations -= 1;\r\n          k -= 1;\r\n        }\r\n        if (redraw) {\r\n          iterations = lvl - itemData.styles[l].lvl;\r\n          k = itemData.transformers.length - 1;\r\n          while (iterations > 0) {\r\n            mat.multiply(itemData.transformers[k].mProps.v);\r\n            iterations -= 1;\r\n            k -= 1;\r\n          }\r\n        }\r\n      } else {\r\n        mat = _identityMatrix;\r\n      }\r\n      paths = itemData.sh.paths;\r\n      jLen = paths._length;\r\n      if (redraw) {\r\n        pathStringTransformed = '';\r\n        for (j = 0; j < jLen; j += 1) {\r\n          pathNodes = paths.shapes[j];\r\n          if (pathNodes && pathNodes._length) {\r\n            pathStringTransformed += buildShapeString(pathNodes, pathNodes._length, pathNodes.c, mat);\r\n          }\r\n        }\r\n        itemData.caches[l] = pathStringTransformed;\r\n      } else {\r\n        pathStringTransformed = itemData.caches[l];\r\n      }\r\n      itemData.styles[l].d += styleData.hd === true ? '' : pathStringTransformed;\r\n      itemData.styles[l]._mdf = redraw || itemData.styles[l]._mdf;\r\n    }\r\n  }\r\n\r\n  function renderFill(styleData, itemData, isFirstFrame) {\r\n    var styleElem = itemData.style;\r\n\r\n    if (itemData.c._mdf || isFirstFrame) {\r\n      styleElem.pElem.setAttribute('fill', 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')');\r\n    }\r\n    if (itemData.o._mdf || isFirstFrame) {\r\n      styleElem.pElem.setAttribute('fill-opacity', itemData.o.v);\r\n    }\r\n  }\r\n\r\n  function renderGradientStroke(styleData, itemData, isFirstFrame) {\r\n    renderGradient(styleData, itemData, isFirstFrame);\r\n    renderStroke(styleData, itemData, isFirstFrame);\r\n  }\r\n\r\n  function renderGradient(styleData, itemData, isFirstFrame) {\r\n    var gfill = itemData.gf;\r\n    var hasOpacity = itemData.g._hasOpacity;\r\n    var pt1 = itemData.s.v;\r\n    var pt2 = itemData.e.v;\r\n\r\n    if (itemData.o._mdf || isFirstFrame) {\r\n      var attr = styleData.ty === 'gf' ? 'fill-opacity' : 'stroke-opacity';\r\n      itemData.style.pElem.setAttribute(attr, itemData.o.v);\r\n    }\r\n    if (itemData.s._mdf || isFirstFrame) {\r\n      var attr1 = styleData.t === 1 ? 'x1' : 'cx';\r\n      var attr2 = attr1 === 'x1' ? 'y1' : 'cy';\r\n      gfill.setAttribute(attr1, pt1[0]);\r\n      gfill.setAttribute(attr2, pt1[1]);\r\n      if (hasOpacity && !itemData.g._collapsable) {\r\n        itemData.of.setAttribute(attr1, pt1[0]);\r\n        itemData.of.setAttribute(attr2, pt1[1]);\r\n      }\r\n    }\r\n    var stops;\r\n    var i;\r\n    var len;\r\n    var stop;\r\n    if (itemData.g._cmdf || isFirstFrame) {\r\n      stops = itemData.cst;\r\n      var cValues = itemData.g.c;\r\n      len = stops.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        stop = stops[i];\r\n        stop.setAttribute('offset', cValues[i * 4] + '%');\r\n        stop.setAttribute('stop-color', 'rgb(' + cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ',' + cValues[i * 4 + 3] + ')');\r\n      }\r\n    }\r\n    if (hasOpacity && (itemData.g._omdf || isFirstFrame)) {\r\n      var oValues = itemData.g.o;\r\n      if (itemData.g._collapsable) {\r\n        stops = itemData.cst;\r\n      } else {\r\n        stops = itemData.ost;\r\n      }\r\n      len = stops.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        stop = stops[i];\r\n        if (!itemData.g._collapsable) {\r\n          stop.setAttribute('offset', oValues[i * 2] + '%');\r\n        }\r\n        stop.setAttribute('stop-opacity', oValues[i * 2 + 1]);\r\n      }\r\n    }\r\n    if (styleData.t === 1) {\r\n      if (itemData.e._mdf || isFirstFrame) {\r\n        gfill.setAttribute('x2', pt2[0]);\r\n        gfill.setAttribute('y2', pt2[1]);\r\n        if (hasOpacity && !itemData.g._collapsable) {\r\n          itemData.of.setAttribute('x2', pt2[0]);\r\n          itemData.of.setAttribute('y2', pt2[1]);\r\n        }\r\n      }\r\n    } else {\r\n      var rad;\r\n      if (itemData.s._mdf || itemData.e._mdf || isFirstFrame) {\r\n        rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n        gfill.setAttribute('r', rad);\r\n        if (hasOpacity && !itemData.g._collapsable) {\r\n          itemData.of.setAttribute('r', rad);\r\n        }\r\n      }\r\n      if (itemData.e._mdf || itemData.h._mdf || itemData.a._mdf || isFirstFrame) {\r\n        if (!rad) {\r\n          rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n        }\r\n        var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\r\n\r\n        var percent = itemData.h.v;\r\n        if (percent >= 1) {\r\n          percent = 0.99;\r\n        } else if (percent <= -1) {\r\n          percent = -0.99;\r\n        }\r\n        var dist = rad * percent;\r\n        var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\r\n        var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\r\n        gfill.setAttribute('fx', x);\r\n        gfill.setAttribute('fy', y);\r\n        if (hasOpacity && !itemData.g._collapsable) {\r\n          itemData.of.setAttribute('fx', x);\r\n          itemData.of.setAttribute('fy', y);\r\n        }\r\n      }\r\n      // gfill.setAttribute('fy','200');\r\n    }\r\n  }\r\n\r\n  function renderStroke(styleData, itemData, isFirstFrame) {\r\n    var styleElem = itemData.style;\r\n    var d = itemData.d;\r\n    if (d && (d._mdf || isFirstFrame) && d.dashStr) {\r\n      styleElem.pElem.setAttribute('stroke-dasharray', d.dashStr);\r\n      styleElem.pElem.setAttribute('stroke-dashoffset', d.dashoffset[0]);\r\n    }\r\n    if (itemData.c && (itemData.c._mdf || isFirstFrame)) {\r\n      styleElem.pElem.setAttribute('stroke', 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')');\r\n    }\r\n    if (itemData.o._mdf || isFirstFrame) {\r\n      styleElem.pElem.setAttribute('stroke-opacity', itemData.o.v);\r\n    }\r\n    if (itemData.w._mdf || isFirstFrame) {\r\n      styleElem.pElem.setAttribute('stroke-width', itemData.w.v);\r\n      if (styleElem.msElem) {\r\n        styleElem.msElem.setAttribute('stroke-width', itemData.w.v);\r\n      }\r\n    }\r\n  }\r\n\r\n  return ob;\r\n}());\n\nfunction SVGShapeElement(data, globalData, comp) {\r\n  // List of drawable elements\r\n  this.shapes = [];\r\n  // Full shape data\r\n  this.shapesData = data.shapes;\r\n  // List of styles that will be applied to shapes\r\n  this.stylesList = [];\r\n  // List of modifiers that will be applied to shapes\r\n  this.shapeModifiers = [];\r\n  // List of items in shape tree\r\n  this.itemsData = [];\r\n  // List of items in previous shape tree\r\n  this.processedElements = [];\r\n  // List of animated components\r\n  this.animatedContents = [];\r\n  this.initElement(data, globalData, comp);\r\n  // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n  // List of elements that have been created\r\n  this.prevViewData = [];\r\n  // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n}\r\n\r\nextendPrototype([BaseElement, TransformElement, SVGBaseElement, IShapeElement, HierarchyElement, FrameElement, RenderableDOMElement], SVGShapeElement);\r\n\r\nSVGShapeElement.prototype.initSecondaryElement = function () {\r\n};\r\n\r\nSVGShapeElement.prototype.identityMatrix = new Matrix();\r\n\r\nSVGShapeElement.prototype.buildExpressionInterface = function () {};\r\n\r\nSVGShapeElement.prototype.createContent = function () {\r\n  this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, 0, [], true);\r\n  this.filterUniqueShapes();\r\n};\r\n\r\n/*\r\nThis method searches for multiple shapes that affect a single element and one of them is animated\r\n*/\r\nSVGShapeElement.prototype.filterUniqueShapes = function () {\r\n  var i;\r\n  var len = this.shapes.length;\r\n  var shape;\r\n  var j;\r\n  var jLen = this.stylesList.length;\r\n  var style;\r\n  var tempShapes = [];\r\n  var areAnimated = false;\r\n  for (j = 0; j < jLen; j += 1) {\r\n    style = this.stylesList[j];\r\n    areAnimated = false;\r\n    tempShapes.length = 0;\r\n    for (i = 0; i < len; i += 1) {\r\n      shape = this.shapes[i];\r\n      if (shape.styles.indexOf(style) !== -1) {\r\n        tempShapes.push(shape);\r\n        areAnimated = shape._isAnimated || areAnimated;\r\n      }\r\n    }\r\n    if (tempShapes.length > 1 && areAnimated) {\r\n      this.setShapesAsAnimated(tempShapes);\r\n    }\r\n  }\r\n};\r\n\r\nSVGShapeElement.prototype.setShapesAsAnimated = function (shapes) {\r\n  var i;\r\n  var len = shapes.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    shapes[i].setAsAnimated();\r\n  }\r\n};\r\n\r\nSVGShapeElement.prototype.createStyleElement = function (data, level) {\r\n  // TODO: prevent drawing of hidden styles\r\n  var elementData;\r\n  var styleOb = new SVGStyleData(data, level);\r\n\r\n  var pathElement = styleOb.pElem;\r\n  if (data.ty === 'st') {\r\n    elementData = new SVGStrokeStyleData(this, data, styleOb);\r\n  } else if (data.ty === 'fl') {\r\n    elementData = new SVGFillStyleData(this, data, styleOb);\r\n  } else if (data.ty === 'gf' || data.ty === 'gs') {\r\n    var GradientConstructor = data.ty === 'gf' ? SVGGradientFillStyleData : SVGGradientStrokeStyleData;\r\n    elementData = new GradientConstructor(this, data, styleOb);\r\n    this.globalData.defs.appendChild(elementData.gf);\r\n    if (elementData.maskId) {\r\n      this.globalData.defs.appendChild(elementData.ms);\r\n      this.globalData.defs.appendChild(elementData.of);\r\n      pathElement.setAttribute('mask', 'url(' + getLocationHref() + '#' + elementData.maskId + ')');\r\n    }\r\n  } else if (data.ty === 'no') {\r\n    elementData = new SVGNoStyleData(this, data, styleOb);\r\n  }\r\n\r\n  if (data.ty === 'st' || data.ty === 'gs') {\r\n    pathElement.setAttribute('stroke-linecap', lineCapEnum[data.lc || 2]);\r\n    pathElement.setAttribute('stroke-linejoin', lineJoinEnum[data.lj || 2]);\r\n    pathElement.setAttribute('fill-opacity', '0');\r\n    if (data.lj === 1) {\r\n      pathElement.setAttribute('stroke-miterlimit', data.ml);\r\n    }\r\n  }\r\n\r\n  if (data.r === 2) {\r\n    pathElement.setAttribute('fill-rule', 'evenodd');\r\n  }\r\n\r\n  if (data.ln) {\r\n    pathElement.setAttribute('id', data.ln);\r\n  }\r\n  if (data.cl) {\r\n    pathElement.setAttribute('class', data.cl);\r\n  }\r\n  if (data.bm) {\r\n    pathElement.style['mix-blend-mode'] = getBlendMode(data.bm);\r\n  }\r\n  this.stylesList.push(styleOb);\r\n  this.addToAnimatedContents(data, elementData);\r\n  return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.createGroupElement = function (data) {\r\n  var elementData = new ShapeGroupData();\r\n  if (data.ln) {\r\n    elementData.gr.setAttribute('id', data.ln);\r\n  }\r\n  if (data.cl) {\r\n    elementData.gr.setAttribute('class', data.cl);\r\n  }\r\n  if (data.bm) {\r\n    elementData.gr.style['mix-blend-mode'] = getBlendMode(data.bm);\r\n  }\r\n  return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.createTransformElement = function (data, container) {\r\n  var transformProperty = TransformPropertyFactory.getTransformProperty(this, data, this);\r\n  var elementData = new SVGTransformData(transformProperty, transformProperty.o, container);\r\n  this.addToAnimatedContents(data, elementData);\r\n  return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.createShapeElement = function (data, ownTransformers, level) {\r\n  var ty = 4;\r\n  if (data.ty === 'rc') {\r\n    ty = 5;\r\n  } else if (data.ty === 'el') {\r\n    ty = 6;\r\n  } else if (data.ty === 'sr') {\r\n    ty = 7;\r\n  }\r\n  var shapeProperty = ShapePropertyFactory.getShapeProp(this, data, ty, this);\r\n  var elementData = new SVGShapeData(ownTransformers, level, shapeProperty);\r\n  this.shapes.push(elementData);\r\n  this.addShapeToModifiers(elementData);\r\n  this.addToAnimatedContents(data, elementData);\r\n  return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.addToAnimatedContents = function (data, element) {\r\n  var i = 0;\r\n  var len = this.animatedContents.length;\r\n  while (i < len) {\r\n    if (this.animatedContents[i].element === element) {\r\n      return;\r\n    }\r\n    i += 1;\r\n  }\r\n  this.animatedContents.push({\r\n    fn: SVGElementsRenderer.createRenderFunction(data),\r\n    element: element,\r\n    data: data,\r\n  });\r\n};\r\n\r\nSVGShapeElement.prototype.setElementStyles = function (elementData) {\r\n  var arr = elementData.styles;\r\n  var j;\r\n  var jLen = this.stylesList.length;\r\n  for (j = 0; j < jLen; j += 1) {\r\n    if (!this.stylesList[j].closed) {\r\n      arr.push(this.stylesList[j]);\r\n    }\r\n  }\r\n};\r\n\r\nSVGShapeElement.prototype.reloadShapes = function () {\r\n  this._isFirstFrame = true;\r\n  var i;\r\n  var len = this.itemsData.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.prevViewData[i] = this.itemsData[i];\r\n  }\r\n  this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, 0, [], true);\r\n  this.filterUniqueShapes();\r\n  len = this.dynamicProperties.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.dynamicProperties[i].getValue();\r\n  }\r\n  this.renderModifiers();\r\n};\r\n\r\nSVGShapeElement.prototype.searchShapes = function (arr, itemsData, prevViewData, container, level, transformers, render) {\r\n  var ownTransformers = [].concat(transformers);\r\n  var i;\r\n  var len = arr.length - 1;\r\n  var j;\r\n  var jLen;\r\n  var ownStyles = [];\r\n  var ownModifiers = [];\r\n  var currentTransform;\r\n  var modifier;\r\n  var processedPos;\r\n  for (i = len; i >= 0; i -= 1) {\r\n    processedPos = this.searchProcessedElement(arr[i]);\r\n    if (!processedPos) {\r\n      arr[i]._render = render;\r\n    } else {\r\n      itemsData[i] = prevViewData[processedPos - 1];\r\n    }\r\n    if (arr[i].ty === 'fl' || arr[i].ty === 'st' || arr[i].ty === 'gf' || arr[i].ty === 'gs' || arr[i].ty === 'no') {\r\n      if (!processedPos) {\r\n        itemsData[i] = this.createStyleElement(arr[i], level);\r\n      } else {\r\n        itemsData[i].style.closed = false;\r\n      }\r\n      if (arr[i]._render) {\r\n        if (itemsData[i].style.pElem.parentNode !== container) {\r\n          container.appendChild(itemsData[i].style.pElem);\r\n        }\r\n      }\r\n      ownStyles.push(itemsData[i].style);\r\n    } else if (arr[i].ty === 'gr') {\r\n      if (!processedPos) {\r\n        itemsData[i] = this.createGroupElement(arr[i]);\r\n      } else {\r\n        jLen = itemsData[i].it.length;\r\n        for (j = 0; j < jLen; j += 1) {\r\n          itemsData[i].prevViewData[j] = itemsData[i].it[j];\r\n        }\r\n      }\r\n      this.searchShapes(arr[i].it, itemsData[i].it, itemsData[i].prevViewData, itemsData[i].gr, level + 1, ownTransformers, render);\r\n      if (arr[i]._render) {\r\n        if (itemsData[i].gr.parentNode !== container) {\r\n          container.appendChild(itemsData[i].gr);\r\n        }\r\n      }\r\n    } else if (arr[i].ty === 'tr') {\r\n      if (!processedPos) {\r\n        itemsData[i] = this.createTransformElement(arr[i], container);\r\n      }\r\n      currentTransform = itemsData[i].transform;\r\n      ownTransformers.push(currentTransform);\r\n    } else if (arr[i].ty === 'sh' || arr[i].ty === 'rc' || arr[i].ty === 'el' || arr[i].ty === 'sr') {\r\n      if (!processedPos) {\r\n        itemsData[i] = this.createShapeElement(arr[i], ownTransformers, level);\r\n      }\r\n      this.setElementStyles(itemsData[i]);\r\n    } else if (arr[i].ty === 'tm' || arr[i].ty === 'rd' || arr[i].ty === 'ms' || arr[i].ty === 'pb' || arr[i].ty === 'zz' || arr[i].ty === 'op') {\r\n      if (!processedPos) {\r\n        modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n        modifier.init(this, arr[i]);\r\n        itemsData[i] = modifier;\r\n        this.shapeModifiers.push(modifier);\r\n      } else {\r\n        modifier = itemsData[i];\r\n        modifier.closed = false;\r\n      }\r\n      ownModifiers.push(modifier);\r\n    } else if (arr[i].ty === 'rp') {\r\n      if (!processedPos) {\r\n        modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n        itemsData[i] = modifier;\r\n        modifier.init(this, arr, i, itemsData);\r\n        this.shapeModifiers.push(modifier);\r\n        render = false;\r\n      } else {\r\n        modifier = itemsData[i];\r\n        modifier.closed = true;\r\n      }\r\n      ownModifiers.push(modifier);\r\n    }\r\n    this.addProcessedElement(arr[i], i + 1);\r\n  }\r\n  len = ownStyles.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    ownStyles[i].closed = true;\r\n  }\r\n  len = ownModifiers.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    ownModifiers[i].closed = true;\r\n  }\r\n};\r\n\r\nSVGShapeElement.prototype.renderInnerContent = function () {\r\n  this.renderModifiers();\r\n  var i;\r\n  var len = this.stylesList.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.stylesList[i].reset();\r\n  }\r\n  this.renderShape();\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.stylesList[i]._mdf || this._isFirstFrame) {\r\n      if (this.stylesList[i].msElem) {\r\n        this.stylesList[i].msElem.setAttribute('d', this.stylesList[i].d);\r\n        // Adding M0 0 fixes same mask bug on all browsers\r\n        this.stylesList[i].d = 'M0 0' + this.stylesList[i].d;\r\n      }\r\n      this.stylesList[i].pElem.setAttribute('d', this.stylesList[i].d || 'M0 0');\r\n    }\r\n  }\r\n};\r\n\r\nSVGShapeElement.prototype.renderShape = function () {\r\n  var i;\r\n  var len = this.animatedContents.length;\r\n  var animatedContent;\r\n  for (i = 0; i < len; i += 1) {\r\n    animatedContent = this.animatedContents[i];\r\n    if ((this._isFirstFrame || animatedContent.element._isAnimated) && animatedContent.data !== true) {\r\n      animatedContent.fn(animatedContent.data, animatedContent.element, this._isFirstFrame);\r\n    }\r\n  }\r\n};\r\n\r\nSVGShapeElement.prototype.destroy = function () {\r\n  this.destroyBaseElement();\r\n  this.shapesData = null;\r\n  this.itemsData = null;\r\n};\n\nfunction LetterProps(o, sw, sc, fc, m, p) {\r\n  this.o = o;\r\n  this.sw = sw;\r\n  this.sc = sc;\r\n  this.fc = fc;\r\n  this.m = m;\r\n  this.p = p;\r\n  this._mdf = {\r\n    o: true,\r\n    sw: !!sw,\r\n    sc: !!sc,\r\n    fc: !!fc,\r\n    m: true,\r\n    p: true,\r\n  };\r\n}\r\n\r\nLetterProps.prototype.update = function (o, sw, sc, fc, m, p) {\r\n  this._mdf.o = false;\r\n  this._mdf.sw = false;\r\n  this._mdf.sc = false;\r\n  this._mdf.fc = false;\r\n  this._mdf.m = false;\r\n  this._mdf.p = false;\r\n  var updated = false;\r\n\r\n  if (this.o !== o) {\r\n    this.o = o;\r\n    this._mdf.o = true;\r\n    updated = true;\r\n  }\r\n  if (this.sw !== sw) {\r\n    this.sw = sw;\r\n    this._mdf.sw = true;\r\n    updated = true;\r\n  }\r\n  if (this.sc !== sc) {\r\n    this.sc = sc;\r\n    this._mdf.sc = true;\r\n    updated = true;\r\n  }\r\n  if (this.fc !== fc) {\r\n    this.fc = fc;\r\n    this._mdf.fc = true;\r\n    updated = true;\r\n  }\r\n  if (this.m !== m) {\r\n    this.m = m;\r\n    this._mdf.m = true;\r\n    updated = true;\r\n  }\r\n  if (p.length && (this.p[0] !== p[0] || this.p[1] !== p[1] || this.p[4] !== p[4] || this.p[5] !== p[5] || this.p[12] !== p[12] || this.p[13] !== p[13])) {\r\n    this.p = p;\r\n    this._mdf.p = true;\r\n    updated = true;\r\n  }\r\n  return updated;\r\n};\n\nfunction TextProperty(elem, data) {\r\n  this._frameId = initialDefaultFrame;\r\n  this.pv = '';\r\n  this.v = '';\r\n  this.kf = false;\r\n  this._isFirstFrame = true;\r\n  this._mdf = false;\r\n  if (data.d && data.d.sid) {\r\n    data.d = elem.globalData.slotManager.getProp(data.d);\r\n  }\r\n  this.data = data;\r\n  this.elem = elem;\r\n  this.comp = this.elem.comp;\r\n  this.keysIndex = 0;\r\n  this.canResize = false;\r\n  this.minimumFontSize = 1;\r\n  this.effectsSequence = [];\r\n  this.currentData = {\r\n    ascent: 0,\r\n    boxWidth: this.defaultBoxWidth,\r\n    f: '',\r\n    fStyle: '',\r\n    fWeight: '',\r\n    fc: '',\r\n    j: '',\r\n    justifyOffset: '',\r\n    l: [],\r\n    lh: 0,\r\n    lineWidths: [],\r\n    ls: '',\r\n    of: '',\r\n    s: '',\r\n    sc: '',\r\n    sw: 0,\r\n    t: 0,\r\n    tr: 0,\r\n    sz: 0,\r\n    ps: null,\r\n    fillColorAnim: false,\r\n    strokeColorAnim: false,\r\n    strokeWidthAnim: false,\r\n    yOffset: 0,\r\n    finalSize: 0,\r\n    finalText: [],\r\n    finalLineHeight: 0,\r\n    __complete: false,\r\n\r\n  };\r\n  this.copyData(this.currentData, this.data.d.k[0].s);\r\n\r\n  if (!this.searchProperty()) {\r\n    this.completeTextData(this.currentData);\r\n  }\r\n}\r\n\r\nTextProperty.prototype.defaultBoxWidth = [0, 0];\r\n\r\nTextProperty.prototype.copyData = function (obj, data) {\r\n  for (var s in data) {\r\n    if (Object.prototype.hasOwnProperty.call(data, s)) {\r\n      obj[s] = data[s];\r\n    }\r\n  }\r\n  return obj;\r\n};\r\n\r\nTextProperty.prototype.setCurrentData = function (data) {\r\n  if (!data.__complete) {\r\n    this.completeTextData(data);\r\n  }\r\n  this.currentData = data;\r\n  this.currentData.boxWidth = this.currentData.boxWidth || this.defaultBoxWidth;\r\n  this._mdf = true;\r\n};\r\n\r\nTextProperty.prototype.searchProperty = function () {\r\n  return this.searchKeyframes();\r\n};\r\n\r\nTextProperty.prototype.searchKeyframes = function () {\r\n  this.kf = this.data.d.k.length > 1;\r\n  if (this.kf) {\r\n    this.addEffect(this.getKeyframeValue.bind(this));\r\n  }\r\n  return this.kf;\r\n};\r\n\r\nTextProperty.prototype.addEffect = function (effectFunction) {\r\n  this.effectsSequence.push(effectFunction);\r\n  this.elem.addDynamicProperty(this);\r\n};\r\n\r\nTextProperty.prototype.getValue = function (_finalValue) {\r\n  if ((this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) && !_finalValue) {\r\n    return;\r\n  }\r\n  this.currentData.t = this.data.d.k[this.keysIndex].s.t;\r\n  var currentValue = this.currentData;\r\n  var currentIndex = this.keysIndex;\r\n  if (this.lock) {\r\n    this.setCurrentData(this.currentData);\r\n    return;\r\n  }\r\n  this.lock = true;\r\n  this._mdf = false;\r\n  var i; var\r\n    len = this.effectsSequence.length;\r\n  var finalValue = _finalValue || this.data.d.k[this.keysIndex].s;\r\n  for (i = 0; i < len; i += 1) {\r\n    // Checking if index changed to prevent creating a new object every time the expression updates.\r\n    if (currentIndex !== this.keysIndex) {\r\n      finalValue = this.effectsSequence[i](finalValue, finalValue.t);\r\n    } else {\r\n      finalValue = this.effectsSequence[i](this.currentData, finalValue.t);\r\n    }\r\n  }\r\n  if (currentValue !== finalValue) {\r\n    this.setCurrentData(finalValue);\r\n  }\r\n  this.v = this.currentData;\r\n  this.pv = this.v;\r\n  this.lock = false;\r\n  this.frameId = this.elem.globalData.frameId;\r\n};\r\n\r\nTextProperty.prototype.getKeyframeValue = function () {\r\n  var textKeys = this.data.d.k;\r\n  var frameNum = this.elem.comp.renderedFrame;\r\n  var i = 0; var\r\n    len = textKeys.length;\r\n  while (i <= len - 1) {\r\n    if (i === len - 1 || textKeys[i + 1].t > frameNum) {\r\n      break;\r\n    }\r\n    i += 1;\r\n  }\r\n  if (this.keysIndex !== i) {\r\n    this.keysIndex = i;\r\n  }\r\n  return this.data.d.k[this.keysIndex].s;\r\n};\r\n\r\nTextProperty.prototype.buildFinalText = function (text) {\r\n  var charactersArray = [];\r\n  var i = 0;\r\n  var len = text.length;\r\n  var charCode;\r\n  var secondCharCode;\r\n  var shouldCombine = false;\r\n  var shouldCombineNext = false;\r\n  var currentChars = '';\r\n  while (i < len) {\r\n    shouldCombine = shouldCombineNext;\r\n    shouldCombineNext = false;\r\n    charCode = text.charCodeAt(i);\r\n    currentChars = text.charAt(i);\r\n    if (FontManager.isCombinedCharacter(charCode)) {\r\n      shouldCombine = true;\r\n      // It's a potential surrogate pair (this is the High surrogate)\r\n    } else if (charCode >= 0xD800 && charCode <= 0xDBFF) {\r\n      if (FontManager.isRegionalFlag(text, i)) {\r\n        currentChars = text.substr(i, 14);\r\n      } else {\r\n        secondCharCode = text.charCodeAt(i + 1);\r\n        // It's a surrogate pair (this is the Low surrogate)\r\n        if (secondCharCode >= 0xDC00 && secondCharCode <= 0xDFFF) {\r\n          if (FontManager.isModifier(charCode, secondCharCode)) {\r\n            currentChars = text.substr(i, 2);\r\n            shouldCombine = true;\r\n          } else if (FontManager.isFlagEmoji(text.substr(i, 4))) {\r\n            currentChars = text.substr(i, 4);\r\n          } else {\r\n            currentChars = text.substr(i, 2);\r\n          }\r\n        }\r\n      }\r\n    } else if (charCode > 0xDBFF) {\r\n      secondCharCode = text.charCodeAt(i + 1);\r\n      if (FontManager.isVariationSelector(charCode)) {\r\n        shouldCombine = true;\r\n      }\r\n    } else if (FontManager.isZeroWidthJoiner(charCode)) {\r\n      shouldCombine = true;\r\n      shouldCombineNext = true;\r\n    }\r\n    if (shouldCombine) {\r\n      charactersArray[charactersArray.length - 1] += currentChars;\r\n      shouldCombine = false;\r\n    } else {\r\n      charactersArray.push(currentChars);\r\n    }\r\n    i += currentChars.length;\r\n  }\r\n  return charactersArray;\r\n};\r\n\r\nTextProperty.prototype.completeTextData = function (documentData) {\r\n  documentData.__complete = true;\r\n  var fontManager = this.elem.globalData.fontManager;\r\n  var data = this.data;\r\n  var letters = [];\r\n  var i; var\r\n    len;\r\n  var newLineFlag; var index = 0; var\r\n    val;\r\n  var anchorGrouping = data.m.g;\r\n  var currentSize = 0; var currentPos = 0; var currentLine = 0; var\r\n    lineWidths = [];\r\n  var lineWidth = 0;\r\n  var maxLineWidth = 0;\r\n  var j; var\r\n    jLen;\r\n  var fontData = fontManager.getFontByName(documentData.f);\r\n  var charData; var\r\n    cLength = 0;\r\n\r\n  var fontProps = getFontProperties(fontData);\r\n  documentData.fWeight = fontProps.weight;\r\n  documentData.fStyle = fontProps.style;\r\n  documentData.finalSize = documentData.s;\r\n  documentData.finalText = this.buildFinalText(documentData.t);\r\n  len = documentData.finalText.length;\r\n  documentData.finalLineHeight = documentData.lh;\r\n  var trackingOffset = (documentData.tr / 1000) * documentData.finalSize;\r\n  var charCode;\r\n  if (documentData.sz) {\r\n    var flag = true;\r\n    var boxWidth = documentData.sz[0];\r\n    var boxHeight = documentData.sz[1];\r\n    var currentHeight; var\r\n      finalText;\r\n    while (flag) {\r\n      finalText = this.buildFinalText(documentData.t);\r\n      currentHeight = 0;\r\n      lineWidth = 0;\r\n      len = finalText.length;\r\n      trackingOffset = (documentData.tr / 1000) * documentData.finalSize;\r\n      var lastSpaceIndex = -1;\r\n      for (i = 0; i < len; i += 1) {\r\n        charCode = finalText[i].charCodeAt(0);\r\n        newLineFlag = false;\r\n        if (finalText[i] === ' ') {\r\n          lastSpaceIndex = i;\r\n        } else if (charCode === 13 || charCode === 3) {\r\n          lineWidth = 0;\r\n          newLineFlag = true;\r\n          currentHeight += documentData.finalLineHeight || documentData.finalSize * 1.2;\r\n        }\r\n        if (fontManager.chars) {\r\n          charData = fontManager.getCharData(finalText[i], fontData.fStyle, fontData.fFamily);\r\n          cLength = newLineFlag ? 0 : (charData.w * documentData.finalSize) / 100;\r\n        } else {\r\n          // tCanvasHelper.font = documentData.s + 'px '+ fontData.fFamily;\r\n          cLength = fontManager.measureText(finalText[i], documentData.f, documentData.finalSize);\r\n        }\r\n        if (lineWidth + cLength > boxWidth && finalText[i] !== ' ') {\r\n          if (lastSpaceIndex === -1) {\r\n            len += 1;\r\n          } else {\r\n            i = lastSpaceIndex;\r\n          }\r\n          currentHeight += documentData.finalLineHeight || documentData.finalSize * 1.2;\r\n          finalText.splice(i, lastSpaceIndex === i ? 1 : 0, '\\r');\r\n          // finalText = finalText.substr(0,i) + \"\\r\" + finalText.substr(i === lastSpaceIndex ? i + 1 : i);\r\n          lastSpaceIndex = -1;\r\n          lineWidth = 0;\r\n        } else {\r\n          lineWidth += cLength;\r\n          lineWidth += trackingOffset;\r\n        }\r\n      }\r\n      currentHeight += (fontData.ascent * documentData.finalSize) / 100;\r\n      if (this.canResize && documentData.finalSize > this.minimumFontSize && boxHeight < currentHeight) {\r\n        documentData.finalSize -= 1;\r\n        documentData.finalLineHeight = (documentData.finalSize * documentData.lh) / documentData.s;\r\n      } else {\r\n        documentData.finalText = finalText;\r\n        len = documentData.finalText.length;\r\n        flag = false;\r\n      }\r\n    }\r\n  }\r\n  lineWidth = -trackingOffset;\r\n  cLength = 0;\r\n  var uncollapsedSpaces = 0;\r\n  var currentChar;\r\n  for (i = 0; i < len; i += 1) {\r\n    newLineFlag = false;\r\n    currentChar = documentData.finalText[i];\r\n    charCode = currentChar.charCodeAt(0);\r\n    if (charCode === 13 || charCode === 3) {\r\n      uncollapsedSpaces = 0;\r\n      lineWidths.push(lineWidth);\r\n      maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\r\n      lineWidth = -2 * trackingOffset;\r\n      val = '';\r\n      newLineFlag = true;\r\n      currentLine += 1;\r\n    } else {\r\n      val = currentChar;\r\n    }\r\n    if (fontManager.chars) {\r\n      charData = fontManager.getCharData(currentChar, fontData.fStyle, fontManager.getFontByName(documentData.f).fFamily);\r\n      cLength = newLineFlag ? 0 : (charData.w * documentData.finalSize) / 100;\r\n    } else {\r\n      // var charWidth = fontManager.measureText(val, documentData.f, documentData.finalSize);\r\n      // tCanvasHelper.font = documentData.finalSize + 'px '+ fontManager.getFontByName(documentData.f).fFamily;\r\n      cLength = fontManager.measureText(val, documentData.f, documentData.finalSize);\r\n    }\r\n\r\n    //\r\n    if (currentChar === ' ') {\r\n      uncollapsedSpaces += cLength + trackingOffset;\r\n    } else {\r\n      lineWidth += cLength + trackingOffset + uncollapsedSpaces;\r\n      uncollapsedSpaces = 0;\r\n    }\r\n    letters.push({\r\n      l: cLength, an: cLength, add: currentSize, n: newLineFlag, anIndexes: [], val: val, line: currentLine, animatorJustifyOffset: 0,\r\n    });\r\n    if (anchorGrouping == 2) { // eslint-disable-line eqeqeq\r\n      currentSize += cLength;\r\n      if (val === '' || val === ' ' || i === len - 1) {\r\n        if (val === '' || val === ' ') {\r\n          currentSize -= cLength;\r\n        }\r\n        while (currentPos <= i) {\r\n          letters[currentPos].an = currentSize;\r\n          letters[currentPos].ind = index;\r\n          letters[currentPos].extra = cLength;\r\n          currentPos += 1;\r\n        }\r\n        index += 1;\r\n        currentSize = 0;\r\n      }\r\n    } else if (anchorGrouping == 3) { // eslint-disable-line eqeqeq\r\n      currentSize += cLength;\r\n      if (val === '' || i === len - 1) {\r\n        if (val === '') {\r\n          currentSize -= cLength;\r\n        }\r\n        while (currentPos <= i) {\r\n          letters[currentPos].an = currentSize;\r\n          letters[currentPos].ind = index;\r\n          letters[currentPos].extra = cLength;\r\n          currentPos += 1;\r\n        }\r\n        currentSize = 0;\r\n        index += 1;\r\n      }\r\n    } else {\r\n      letters[index].ind = index;\r\n      letters[index].extra = 0;\r\n      index += 1;\r\n    }\r\n  }\r\n  documentData.l = letters;\r\n  maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\r\n  lineWidths.push(lineWidth);\r\n  if (documentData.sz) {\r\n    documentData.boxWidth = documentData.sz[0];\r\n    documentData.justifyOffset = 0;\r\n  } else {\r\n    documentData.boxWidth = maxLineWidth;\r\n    switch (documentData.j) {\r\n      case 1:\r\n        documentData.justifyOffset = -documentData.boxWidth;\r\n        break;\r\n      case 2:\r\n        documentData.justifyOffset = -documentData.boxWidth / 2;\r\n        break;\r\n      default:\r\n        documentData.justifyOffset = 0;\r\n    }\r\n  }\r\n  documentData.lineWidths = lineWidths;\r\n\r\n  var animators = data.a; var animatorData; var\r\n    letterData;\r\n  jLen = animators.length;\r\n  var based; var ind; var\r\n    indexes = [];\r\n  for (j = 0; j < jLen; j += 1) {\r\n    animatorData = animators[j];\r\n    if (animatorData.a.sc) {\r\n      documentData.strokeColorAnim = true;\r\n    }\r\n    if (animatorData.a.sw) {\r\n      documentData.strokeWidthAnim = true;\r\n    }\r\n    if (animatorData.a.fc || animatorData.a.fh || animatorData.a.fs || animatorData.a.fb) {\r\n      documentData.fillColorAnim = true;\r\n    }\r\n    ind = 0;\r\n    based = animatorData.s.b;\r\n    for (i = 0; i < len; i += 1) {\r\n      letterData = letters[i];\r\n      letterData.anIndexes[j] = ind;\r\n      if ((based == 1 && letterData.val !== '') || (based == 2 && letterData.val !== '' && letterData.val !== ' ') || (based == 3 && (letterData.n || letterData.val == ' ' || i == len - 1)) || (based == 4 && (letterData.n || i == len - 1))) { // eslint-disable-line eqeqeq\r\n        if (animatorData.s.rn === 1) {\r\n          indexes.push(ind);\r\n        }\r\n        ind += 1;\r\n      }\r\n    }\r\n    data.a[j].s.totalChars = ind;\r\n    var currentInd = -1; var\r\n      newInd;\r\n    if (animatorData.s.rn === 1) {\r\n      for (i = 0; i < len; i += 1) {\r\n        letterData = letters[i];\r\n        if (currentInd != letterData.anIndexes[j]) { // eslint-disable-line eqeqeq\r\n          currentInd = letterData.anIndexes[j];\r\n          newInd = indexes.splice(Math.floor(Math.random() * indexes.length), 1)[0];\r\n        }\r\n        letterData.anIndexes[j] = newInd;\r\n      }\r\n    }\r\n  }\r\n  documentData.yOffset = documentData.finalLineHeight || documentData.finalSize * 1.2;\r\n  documentData.ls = documentData.ls || 0;\r\n  documentData.ascent = (fontData.ascent * documentData.finalSize) / 100;\r\n};\r\n\r\nTextProperty.prototype.updateDocumentData = function (newData, index) {\r\n  index = index === undefined ? this.keysIndex : index;\r\n  var dData = this.copyData({}, this.data.d.k[index].s);\r\n  dData = this.copyData(dData, newData);\r\n  this.data.d.k[index].s = dData;\r\n  this.recalculate(index);\r\n  this.setCurrentData(dData);\r\n  this.elem.addDynamicProperty(this);\r\n};\r\n\r\nTextProperty.prototype.recalculate = function (index) {\r\n  var dData = this.data.d.k[index].s;\r\n  dData.__complete = false;\r\n  this.keysIndex = 0;\r\n  this._isFirstFrame = true;\r\n  this.getValue(dData);\r\n};\r\n\r\nTextProperty.prototype.canResizeFont = function (_canResize) {\r\n  this.canResize = _canResize;\r\n  this.recalculate(this.keysIndex);\r\n  this.elem.addDynamicProperty(this);\r\n};\r\n\r\nTextProperty.prototype.setMinimumFontSize = function (_fontValue) {\r\n  this.minimumFontSize = Math.floor(_fontValue) || 1;\r\n  this.recalculate(this.keysIndex);\r\n  this.elem.addDynamicProperty(this);\r\n};\n\nconst TextSelectorProp = (function () {\r\n  var max = Math.max;\r\n  var min = Math.min;\r\n  var floor = Math.floor;\r\n\r\n  function TextSelectorPropFactory(elem, data) {\r\n    this._currentTextLength = -1;\r\n    this.k = false;\r\n    this.data = data;\r\n    this.elem = elem;\r\n    this.comp = elem.comp;\r\n    this.finalS = 0;\r\n    this.finalE = 0;\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.s = PropertyFactory.getProp(elem, data.s || { k: 0 }, 0, 0, this);\r\n    if ('e' in data) {\r\n      this.e = PropertyFactory.getProp(elem, data.e, 0, 0, this);\r\n    } else {\r\n      this.e = { v: 100 };\r\n    }\r\n    this.o = PropertyFactory.getProp(elem, data.o || { k: 0 }, 0, 0, this);\r\n    this.xe = PropertyFactory.getProp(elem, data.xe || { k: 0 }, 0, 0, this);\r\n    this.ne = PropertyFactory.getProp(elem, data.ne || { k: 0 }, 0, 0, this);\r\n    this.sm = PropertyFactory.getProp(elem, data.sm || { k: 100 }, 0, 0, this);\r\n    this.a = PropertyFactory.getProp(elem, data.a, 0, 0.01, this);\r\n    if (!this.dynamicProperties.length) {\r\n      this.getValue();\r\n    }\r\n  }\r\n\r\n  TextSelectorPropFactory.prototype = {\r\n    getMult: function (ind) {\r\n      if (this._currentTextLength !== this.elem.textProperty.currentData.l.length) {\r\n        this.getValue();\r\n      }\r\n      var x1 = 0;\r\n      var y1 = 0;\r\n      var x2 = 1;\r\n      var y2 = 1;\r\n      if (this.ne.v > 0) {\r\n        x1 = this.ne.v / 100.0;\r\n      } else {\r\n        y1 = -this.ne.v / 100.0;\r\n      }\r\n      if (this.xe.v > 0) {\r\n        x2 = 1.0 - this.xe.v / 100.0;\r\n      } else {\r\n        y2 = 1.0 + this.xe.v / 100.0;\r\n      }\r\n      var easer = BezierFactory.getBezierEasing(x1, y1, x2, y2).get;\r\n\r\n      var mult = 0;\r\n      var s = this.finalS;\r\n      var e = this.finalE;\r\n      var type = this.data.sh;\r\n      if (type === 2) {\r\n        if (e === s) {\r\n          mult = ind >= e ? 1 : 0;\r\n        } else {\r\n          mult = max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\r\n        }\r\n        mult = easer(mult);\r\n      } else if (type === 3) {\r\n        if (e === s) {\r\n          mult = ind >= e ? 0 : 1;\r\n        } else {\r\n          mult = 1 - max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\r\n        }\r\n\r\n        mult = easer(mult);\r\n      } else if (type === 4) {\r\n        if (e === s) {\r\n          mult = 0;\r\n        } else {\r\n          mult = max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\r\n          if (mult < 0.5) {\r\n            mult *= 2;\r\n          } else {\r\n            mult = 1 - 2 * (mult - 0.5);\r\n          }\r\n        }\r\n        mult = easer(mult);\r\n      } else if (type === 5) {\r\n        if (e === s) {\r\n          mult = 0;\r\n        } else {\r\n          var tot = e - s;\r\n          /* ind += 0.5;\r\n                    mult = -4/(tot*tot)*(ind*ind)+(4/tot)*ind; */\r\n          ind = min(max(0, ind + 0.5 - s), e - s);\r\n          var x = -tot / 2 + ind;\r\n          var a = tot / 2;\r\n          mult = Math.sqrt(1 - (x * x) / (a * a));\r\n        }\r\n        mult = easer(mult);\r\n      } else if (type === 6) {\r\n        if (e === s) {\r\n          mult = 0;\r\n        } else {\r\n          ind = min(max(0, ind + 0.5 - s), e - s);\r\n          mult = (1 + (Math.cos((Math.PI + Math.PI * 2 * (ind) / (e - s))))) / 2; // eslint-disable-line\r\n        }\r\n        mult = easer(mult);\r\n      } else {\r\n        if (ind >= floor(s)) {\r\n          if (ind - s < 0) {\r\n            mult = max(0, min(min(e, 1) - (s - ind), 1));\r\n          } else {\r\n            mult = max(0, min(e - ind, 1));\r\n          }\r\n        }\r\n        mult = easer(mult);\r\n      }\r\n      // Smoothness implementation.\r\n      // The smoothness represents a reduced range of the original [0; 1] range.\r\n      // if smoothness is 25%, the new range will be [0.375; 0.625]\r\n      // Steps are:\r\n      // - find the lower value of the new range (threshold)\r\n      // - if multiplier is smaller than that value, floor it to 0\r\n      // - if it is larger,\r\n      //     - subtract the threshold\r\n      //     - divide it by the smoothness (this will return the range to [0; 1])\r\n      // Note: If it doesn't work on some scenarios, consider applying it before the easer.\r\n      if (this.sm.v !== 100) {\r\n        var smoothness = this.sm.v * 0.01;\r\n        if (smoothness === 0) {\r\n          smoothness = 0.00000001;\r\n        }\r\n        var threshold = 0.5 - smoothness * 0.5;\r\n        if (mult < threshold) {\r\n          mult = 0;\r\n        } else {\r\n          mult = (mult - threshold) / smoothness;\r\n          if (mult > 1) {\r\n            mult = 1;\r\n          }\r\n        }\r\n      }\r\n      return mult * this.a.v;\r\n    },\r\n    getValue: function (newCharsFlag) {\r\n      this.iterateDynamicProperties();\r\n      this._mdf = newCharsFlag || this._mdf;\r\n      this._currentTextLength = this.elem.textProperty.currentData.l.length || 0;\r\n      if (newCharsFlag && this.data.r === 2) {\r\n        this.e.v = this._currentTextLength;\r\n      }\r\n      var divisor = this.data.r === 2 ? 1 : 100 / this.data.totalChars;\r\n      var o = this.o.v / divisor;\r\n      var s = this.s.v / divisor + o;\r\n      var e = (this.e.v / divisor) + o;\r\n      if (s > e) {\r\n        var _s = s;\r\n        s = e;\r\n        e = _s;\r\n      }\r\n      this.finalS = s;\r\n      this.finalE = e;\r\n    },\r\n  };\r\n  extendPrototype([DynamicPropertyContainer], TextSelectorPropFactory);\r\n\r\n  function getTextSelectorProp(elem, data, arr) {\r\n    return new TextSelectorPropFactory(elem, data, arr);\r\n  }\r\n\r\n  return {\r\n    getTextSelectorProp: getTextSelectorProp,\r\n  };\r\n}());\n\nfunction TextAnimatorDataProperty(elem, animatorProps, container) {\r\n  var defaultData = { propType: false };\r\n  var getProp = PropertyFactory.getProp;\r\n  var textAnimatorAnimatables = animatorProps.a;\r\n  this.a = {\r\n    r: textAnimatorAnimatables.r ? getProp(elem, textAnimatorAnimatables.r, 0, degToRads, container) : defaultData,\r\n    rx: textAnimatorAnimatables.rx ? getProp(elem, textAnimatorAnimatables.rx, 0, degToRads, container) : defaultData,\r\n    ry: textAnimatorAnimatables.ry ? getProp(elem, textAnimatorAnimatables.ry, 0, degToRads, container) : defaultData,\r\n    sk: textAnimatorAnimatables.sk ? getProp(elem, textAnimatorAnimatables.sk, 0, degToRads, container) : defaultData,\r\n    sa: textAnimatorAnimatables.sa ? getProp(elem, textAnimatorAnimatables.sa, 0, degToRads, container) : defaultData,\r\n    s: textAnimatorAnimatables.s ? getProp(elem, textAnimatorAnimatables.s, 1, 0.01, container) : defaultData,\r\n    a: textAnimatorAnimatables.a ? getProp(elem, textAnimatorAnimatables.a, 1, 0, container) : defaultData,\r\n    o: textAnimatorAnimatables.o ? getProp(elem, textAnimatorAnimatables.o, 0, 0.01, container) : defaultData,\r\n    p: textAnimatorAnimatables.p ? getProp(elem, textAnimatorAnimatables.p, 1, 0, container) : defaultData,\r\n    sw: textAnimatorAnimatables.sw ? getProp(elem, textAnimatorAnimatables.sw, 0, 0, container) : defaultData,\r\n    sc: textAnimatorAnimatables.sc ? getProp(elem, textAnimatorAnimatables.sc, 1, 0, container) : defaultData,\r\n    fc: textAnimatorAnimatables.fc ? getProp(elem, textAnimatorAnimatables.fc, 1, 0, container) : defaultData,\r\n    fh: textAnimatorAnimatables.fh ? getProp(elem, textAnimatorAnimatables.fh, 0, 0, container) : defaultData,\r\n    fs: textAnimatorAnimatables.fs ? getProp(elem, textAnimatorAnimatables.fs, 0, 0.01, container) : defaultData,\r\n    fb: textAnimatorAnimatables.fb ? getProp(elem, textAnimatorAnimatables.fb, 0, 0.01, container) : defaultData,\r\n    t: textAnimatorAnimatables.t ? getProp(elem, textAnimatorAnimatables.t, 0, 0, container) : defaultData,\r\n  };\r\n\r\n  this.s = TextSelectorProp.getTextSelectorProp(elem, animatorProps.s, container);\r\n  this.s.t = animatorProps.s.t;\r\n}\n\nfunction TextAnimatorProperty(textData, renderType, elem) {\r\n  this._isFirstFrame = true;\r\n  this._hasMaskedPath = false;\r\n  this._frameId = -1;\r\n  this._textData = textData;\r\n  this._renderType = renderType;\r\n  this._elem = elem;\r\n  this._animatorsData = createSizedArray(this._textData.a.length);\r\n  this._pathData = {};\r\n  this._moreOptions = {\r\n    alignment: {},\r\n  };\r\n  this.renderedLetters = [];\r\n  this.lettersChangedFlag = false;\r\n  this.initDynamicPropertyContainer(elem);\r\n}\r\n\r\nTextAnimatorProperty.prototype.searchProperties = function () {\r\n  var i;\r\n  var len = this._textData.a.length;\r\n  var animatorProps;\r\n  var getProp = PropertyFactory.getProp;\r\n  for (i = 0; i < len; i += 1) {\r\n    animatorProps = this._textData.a[i];\r\n    this._animatorsData[i] = new TextAnimatorDataProperty(this._elem, animatorProps, this);\r\n  }\r\n  if (this._textData.p && 'm' in this._textData.p) {\r\n    this._pathData = {\r\n      a: getProp(this._elem, this._textData.p.a, 0, 0, this),\r\n      f: getProp(this._elem, this._textData.p.f, 0, 0, this),\r\n      l: getProp(this._elem, this._textData.p.l, 0, 0, this),\r\n      r: getProp(this._elem, this._textData.p.r, 0, 0, this),\r\n      p: getProp(this._elem, this._textData.p.p, 0, 0, this),\r\n      m: this._elem.maskManager.getMaskProperty(this._textData.p.m),\r\n    };\r\n    this._hasMaskedPath = true;\r\n  } else {\r\n    this._hasMaskedPath = false;\r\n  }\r\n  this._moreOptions.alignment = getProp(this._elem, this._textData.m.a, 1, 0, this);\r\n};\r\n\r\nTextAnimatorProperty.prototype.getMeasures = function (documentData, lettersChangedFlag) {\r\n  this.lettersChangedFlag = lettersChangedFlag;\r\n  if (!this._mdf && !this._isFirstFrame && !lettersChangedFlag && (!this._hasMaskedPath || !this._pathData.m._mdf)) {\r\n    return;\r\n  }\r\n  this._isFirstFrame = false;\r\n  var alignment = this._moreOptions.alignment.v;\r\n  var animators = this._animatorsData;\r\n  var textData = this._textData;\r\n  var matrixHelper = this.mHelper;\r\n  var renderType = this._renderType;\r\n  var renderedLettersCount = this.renderedLetters.length;\r\n  var xPos;\r\n  var yPos;\r\n  var i;\r\n  var len;\r\n  var letters = documentData.l;\r\n  var pathInfo;\r\n  var currentLength;\r\n  var currentPoint;\r\n  var segmentLength;\r\n  var flag;\r\n  var pointInd;\r\n  var segmentInd;\r\n  var prevPoint;\r\n  var points;\r\n  var segments;\r\n  var partialLength;\r\n  var totalLength;\r\n  var perc;\r\n  var tanAngle;\r\n  var mask;\r\n  if (this._hasMaskedPath) {\r\n    mask = this._pathData.m;\r\n    if (!this._pathData.n || this._pathData._mdf) {\r\n      var paths = mask.v;\r\n      if (this._pathData.r.v) {\r\n        paths = paths.reverse();\r\n      }\r\n      // TODO: release bezier data cached from previous pathInfo: this._pathData.pi\r\n      pathInfo = {\r\n        tLength: 0,\r\n        segments: [],\r\n      };\r\n      len = paths._length - 1;\r\n      var bezierData;\r\n      totalLength = 0;\r\n      for (i = 0; i < len; i += 1) {\r\n        bezierData = bez.buildBezierData(paths.v[i],\r\n          paths.v[i + 1],\r\n          [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]],\r\n          [paths.i[i + 1][0] - paths.v[i + 1][0], paths.i[i + 1][1] - paths.v[i + 1][1]]);\r\n        pathInfo.tLength += bezierData.segmentLength;\r\n        pathInfo.segments.push(bezierData);\r\n        totalLength += bezierData.segmentLength;\r\n      }\r\n      i = len;\r\n      if (mask.v.c) {\r\n        bezierData = bez.buildBezierData(paths.v[i],\r\n          paths.v[0],\r\n          [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]],\r\n          [paths.i[0][0] - paths.v[0][0], paths.i[0][1] - paths.v[0][1]]);\r\n        pathInfo.tLength += bezierData.segmentLength;\r\n        pathInfo.segments.push(bezierData);\r\n        totalLength += bezierData.segmentLength;\r\n      }\r\n      this._pathData.pi = pathInfo;\r\n    }\r\n    pathInfo = this._pathData.pi;\r\n\r\n    currentLength = this._pathData.f.v;\r\n    segmentInd = 0;\r\n    pointInd = 1;\r\n    segmentLength = 0;\r\n    flag = true;\r\n    segments = pathInfo.segments;\r\n    if (currentLength < 0 && mask.v.c) {\r\n      if (pathInfo.tLength < Math.abs(currentLength)) {\r\n        currentLength = -Math.abs(currentLength) % pathInfo.tLength;\r\n      }\r\n      segmentInd = segments.length - 1;\r\n      points = segments[segmentInd].points;\r\n      pointInd = points.length - 1;\r\n      while (currentLength < 0) {\r\n        currentLength += points[pointInd].partialLength;\r\n        pointInd -= 1;\r\n        if (pointInd < 0) {\r\n          segmentInd -= 1;\r\n          points = segments[segmentInd].points;\r\n          pointInd = points.length - 1;\r\n        }\r\n      }\r\n    }\r\n    points = segments[segmentInd].points;\r\n    prevPoint = points[pointInd - 1];\r\n    currentPoint = points[pointInd];\r\n    partialLength = currentPoint.partialLength;\r\n  }\r\n\r\n  len = letters.length;\r\n  xPos = 0;\r\n  yPos = 0;\r\n  var yOff = documentData.finalSize * 1.2 * 0.714;\r\n  var firstLine = true;\r\n  var animatorProps;\r\n  var animatorSelector;\r\n  var j;\r\n  var jLen;\r\n  var letterValue;\r\n\r\n  jLen = animators.length;\r\n\r\n  var mult;\r\n  var ind = -1;\r\n  var offf;\r\n  var xPathPos;\r\n  var yPathPos;\r\n  var initPathPos = currentLength;\r\n  var initSegmentInd = segmentInd;\r\n  var initPointInd = pointInd;\r\n  var currentLine = -1;\r\n  var elemOpacity;\r\n  var sc;\r\n  var sw;\r\n  var fc;\r\n  var k;\r\n  var letterSw;\r\n  var letterSc;\r\n  var letterFc;\r\n  var letterM = '';\r\n  var letterP = this.defaultPropsArray;\r\n  var letterO;\r\n\r\n  //\r\n  if (documentData.j === 2 || documentData.j === 1) {\r\n    var animatorJustifyOffset = 0;\r\n    var animatorFirstCharOffset = 0;\r\n    var justifyOffsetMult = documentData.j === 2 ? -0.5 : -1;\r\n    var lastIndex = 0;\r\n    var isNewLine = true;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (letters[i].n) {\r\n        if (animatorJustifyOffset) {\r\n          animatorJustifyOffset += animatorFirstCharOffset;\r\n        }\r\n        while (lastIndex < i) {\r\n          letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\r\n          lastIndex += 1;\r\n        }\r\n        animatorJustifyOffset = 0;\r\n        isNewLine = true;\r\n      } else {\r\n        for (j = 0; j < jLen; j += 1) {\r\n          animatorProps = animators[j].a;\r\n          if (animatorProps.t.propType) {\r\n            if (isNewLine && documentData.j === 2) {\r\n              animatorFirstCharOffset += animatorProps.t.v * justifyOffsetMult;\r\n            }\r\n            animatorSelector = animators[j].s;\r\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n            if (mult.length) {\r\n              animatorJustifyOffset += animatorProps.t.v * mult[0] * justifyOffsetMult;\r\n            } else {\r\n              animatorJustifyOffset += animatorProps.t.v * mult * justifyOffsetMult;\r\n            }\r\n          }\r\n        }\r\n        isNewLine = false;\r\n      }\r\n    }\r\n    if (animatorJustifyOffset) {\r\n      animatorJustifyOffset += animatorFirstCharOffset;\r\n    }\r\n    while (lastIndex < i) {\r\n      letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\r\n      lastIndex += 1;\r\n    }\r\n  }\r\n  //\r\n\r\n  for (i = 0; i < len; i += 1) {\r\n    matrixHelper.reset();\r\n    elemOpacity = 1;\r\n    if (letters[i].n) {\r\n      xPos = 0;\r\n      yPos += documentData.yOffset;\r\n      yPos += firstLine ? 1 : 0;\r\n      currentLength = initPathPos;\r\n      firstLine = false;\r\n      if (this._hasMaskedPath) {\r\n        segmentInd = initSegmentInd;\r\n        pointInd = initPointInd;\r\n        points = segments[segmentInd].points;\r\n        prevPoint = points[pointInd - 1];\r\n        currentPoint = points[pointInd];\r\n        partialLength = currentPoint.partialLength;\r\n        segmentLength = 0;\r\n      }\r\n      letterM = '';\r\n      letterFc = '';\r\n      letterSw = '';\r\n      letterO = '';\r\n      letterP = this.defaultPropsArray;\r\n    } else {\r\n      if (this._hasMaskedPath) {\r\n        if (currentLine !== letters[i].line) {\r\n          switch (documentData.j) {\r\n            case 1:\r\n              currentLength += totalLength - documentData.lineWidths[letters[i].line];\r\n              break;\r\n            case 2:\r\n              currentLength += (totalLength - documentData.lineWidths[letters[i].line]) / 2;\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n          currentLine = letters[i].line;\r\n        }\r\n        if (ind !== letters[i].ind) {\r\n          if (letters[ind]) {\r\n            currentLength += letters[ind].extra;\r\n          }\r\n          currentLength += letters[i].an / 2;\r\n          ind = letters[i].ind;\r\n        }\r\n        currentLength += (alignment[0] * letters[i].an) * 0.005;\r\n        var animatorOffset = 0;\r\n        for (j = 0; j < jLen; j += 1) {\r\n          animatorProps = animators[j].a;\r\n          if (animatorProps.p.propType) {\r\n            animatorSelector = animators[j].s;\r\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n            if (mult.length) {\r\n              animatorOffset += animatorProps.p.v[0] * mult[0];\r\n            } else {\r\n              animatorOffset += animatorProps.p.v[0] * mult;\r\n            }\r\n          }\r\n          if (animatorProps.a.propType) {\r\n            animatorSelector = animators[j].s;\r\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n            if (mult.length) {\r\n              animatorOffset += animatorProps.a.v[0] * mult[0];\r\n            } else {\r\n              animatorOffset += animatorProps.a.v[0] * mult;\r\n            }\r\n          }\r\n        }\r\n        flag = true;\r\n        // Force alignment only works with a single line for now\r\n        if (this._pathData.a.v) {\r\n          currentLength = letters[0].an * 0.5 + ((totalLength - this._pathData.f.v - letters[0].an * 0.5 - letters[letters.length - 1].an * 0.5) * ind) / (len - 1);\r\n          currentLength += this._pathData.f.v;\r\n        }\r\n        while (flag) {\r\n          if (segmentLength + partialLength >= currentLength + animatorOffset || !points) {\r\n            perc = (currentLength + animatorOffset - segmentLength) / currentPoint.partialLength;\r\n            xPathPos = prevPoint.point[0] + (currentPoint.point[0] - prevPoint.point[0]) * perc;\r\n            yPathPos = prevPoint.point[1] + (currentPoint.point[1] - prevPoint.point[1]) * perc;\r\n            matrixHelper.translate((-alignment[0] * letters[i].an) * 0.005, -(alignment[1] * yOff) * 0.01);\r\n            flag = false;\r\n          } else if (points) {\r\n            segmentLength += currentPoint.partialLength;\r\n            pointInd += 1;\r\n            if (pointInd >= points.length) {\r\n              pointInd = 0;\r\n              segmentInd += 1;\r\n              if (!segments[segmentInd]) {\r\n                if (mask.v.c) {\r\n                  pointInd = 0;\r\n                  segmentInd = 0;\r\n                  points = segments[segmentInd].points;\r\n                } else {\r\n                  segmentLength -= currentPoint.partialLength;\r\n                  points = null;\r\n                }\r\n              } else {\r\n                points = segments[segmentInd].points;\r\n              }\r\n            }\r\n            if (points) {\r\n              prevPoint = currentPoint;\r\n              currentPoint = points[pointInd];\r\n              partialLength = currentPoint.partialLength;\r\n            }\r\n          }\r\n        }\r\n        offf = letters[i].an / 2 - letters[i].add;\r\n        matrixHelper.translate(-offf, 0, 0);\r\n      } else {\r\n        offf = letters[i].an / 2 - letters[i].add;\r\n        matrixHelper.translate(-offf, 0, 0);\r\n\r\n        // Grouping alignment\r\n        matrixHelper.translate((-alignment[0] * letters[i].an) * 0.005, (-alignment[1] * yOff) * 0.01, 0);\r\n      }\r\n\r\n      for (j = 0; j < jLen; j += 1) {\r\n        animatorProps = animators[j].a;\r\n        if (animatorProps.t.propType) {\r\n          animatorSelector = animators[j].s;\r\n          mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n          // This condition is to prevent applying tracking to first character in each line. Might be better to use a boolean \"isNewLine\"\r\n          if (xPos !== 0 || documentData.j !== 0) {\r\n            if (this._hasMaskedPath) {\r\n              if (mult.length) {\r\n                currentLength += animatorProps.t.v * mult[0];\r\n              } else {\r\n                currentLength += animatorProps.t.v * mult;\r\n              }\r\n            } else if (mult.length) {\r\n              xPos += animatorProps.t.v * mult[0];\r\n            } else {\r\n              xPos += animatorProps.t.v * mult;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (documentData.strokeWidthAnim) {\r\n        sw = documentData.sw || 0;\r\n      }\r\n      if (documentData.strokeColorAnim) {\r\n        if (documentData.sc) {\r\n          sc = [documentData.sc[0], documentData.sc[1], documentData.sc[2]];\r\n        } else {\r\n          sc = [0, 0, 0];\r\n        }\r\n      }\r\n      if (documentData.fillColorAnim && documentData.fc) {\r\n        fc = [documentData.fc[0], documentData.fc[1], documentData.fc[2]];\r\n      }\r\n      for (j = 0; j < jLen; j += 1) {\r\n        animatorProps = animators[j].a;\r\n        if (animatorProps.a.propType) {\r\n          animatorSelector = animators[j].s;\r\n          mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n\r\n          if (mult.length) {\r\n            matrixHelper.translate(-animatorProps.a.v[0] * mult[0], -animatorProps.a.v[1] * mult[1], animatorProps.a.v[2] * mult[2]);\r\n          } else {\r\n            matrixHelper.translate(-animatorProps.a.v[0] * mult, -animatorProps.a.v[1] * mult, animatorProps.a.v[2] * mult);\r\n          }\r\n        }\r\n      }\r\n      for (j = 0; j < jLen; j += 1) {\r\n        animatorProps = animators[j].a;\r\n        if (animatorProps.s.propType) {\r\n          animatorSelector = animators[j].s;\r\n          mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n          if (mult.length) {\r\n            matrixHelper.scale(1 + ((animatorProps.s.v[0] - 1) * mult[0]), 1 + ((animatorProps.s.v[1] - 1) * mult[1]), 1);\r\n          } else {\r\n            matrixHelper.scale(1 + ((animatorProps.s.v[0] - 1) * mult), 1 + ((animatorProps.s.v[1] - 1) * mult), 1);\r\n          }\r\n        }\r\n      }\r\n      for (j = 0; j < jLen; j += 1) {\r\n        animatorProps = animators[j].a;\r\n        animatorSelector = animators[j].s;\r\n        mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n        if (animatorProps.sk.propType) {\r\n          if (mult.length) {\r\n            matrixHelper.skewFromAxis(-animatorProps.sk.v * mult[0], animatorProps.sa.v * mult[1]);\r\n          } else {\r\n            matrixHelper.skewFromAxis(-animatorProps.sk.v * mult, animatorProps.sa.v * mult);\r\n          }\r\n        }\r\n        if (animatorProps.r.propType) {\r\n          if (mult.length) {\r\n            matrixHelper.rotateZ(-animatorProps.r.v * mult[2]);\r\n          } else {\r\n            matrixHelper.rotateZ(-animatorProps.r.v * mult);\r\n          }\r\n        }\r\n        if (animatorProps.ry.propType) {\r\n          if (mult.length) {\r\n            matrixHelper.rotateY(animatorProps.ry.v * mult[1]);\r\n          } else {\r\n            matrixHelper.rotateY(animatorProps.ry.v * mult);\r\n          }\r\n        }\r\n        if (animatorProps.rx.propType) {\r\n          if (mult.length) {\r\n            matrixHelper.rotateX(animatorProps.rx.v * mult[0]);\r\n          } else {\r\n            matrixHelper.rotateX(animatorProps.rx.v * mult);\r\n          }\r\n        }\r\n        if (animatorProps.o.propType) {\r\n          if (mult.length) {\r\n            elemOpacity += ((animatorProps.o.v) * mult[0] - elemOpacity) * mult[0];\r\n          } else {\r\n            elemOpacity += ((animatorProps.o.v) * mult - elemOpacity) * mult;\r\n          }\r\n        }\r\n        if (documentData.strokeWidthAnim && animatorProps.sw.propType) {\r\n          if (mult.length) {\r\n            sw += animatorProps.sw.v * mult[0];\r\n          } else {\r\n            sw += animatorProps.sw.v * mult;\r\n          }\r\n        }\r\n        if (documentData.strokeColorAnim && animatorProps.sc.propType) {\r\n          for (k = 0; k < 3; k += 1) {\r\n            if (mult.length) {\r\n              sc[k] += (animatorProps.sc.v[k] - sc[k]) * mult[0];\r\n            } else {\r\n              sc[k] += (animatorProps.sc.v[k] - sc[k]) * mult;\r\n            }\r\n          }\r\n        }\r\n        if (documentData.fillColorAnim && documentData.fc) {\r\n          if (animatorProps.fc.propType) {\r\n            for (k = 0; k < 3; k += 1) {\r\n              if (mult.length) {\r\n                fc[k] += (animatorProps.fc.v[k] - fc[k]) * mult[0];\r\n              } else {\r\n                fc[k] += (animatorProps.fc.v[k] - fc[k]) * mult;\r\n              }\r\n            }\r\n          }\r\n          if (animatorProps.fh.propType) {\r\n            if (mult.length) {\r\n              fc = addHueToRGB(fc, animatorProps.fh.v * mult[0]);\r\n            } else {\r\n              fc = addHueToRGB(fc, animatorProps.fh.v * mult);\r\n            }\r\n          }\r\n          if (animatorProps.fs.propType) {\r\n            if (mult.length) {\r\n              fc = addSaturationToRGB(fc, animatorProps.fs.v * mult[0]);\r\n            } else {\r\n              fc = addSaturationToRGB(fc, animatorProps.fs.v * mult);\r\n            }\r\n          }\r\n          if (animatorProps.fb.propType) {\r\n            if (mult.length) {\r\n              fc = addBrightnessToRGB(fc, animatorProps.fb.v * mult[0]);\r\n            } else {\r\n              fc = addBrightnessToRGB(fc, animatorProps.fb.v * mult);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      for (j = 0; j < jLen; j += 1) {\r\n        animatorProps = animators[j].a;\r\n\r\n        if (animatorProps.p.propType) {\r\n          animatorSelector = animators[j].s;\r\n          mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n          if (this._hasMaskedPath) {\r\n            if (mult.length) {\r\n              matrixHelper.translate(0, animatorProps.p.v[1] * mult[0], -animatorProps.p.v[2] * mult[1]);\r\n            } else {\r\n              matrixHelper.translate(0, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\r\n            }\r\n          } else if (mult.length) {\r\n            matrixHelper.translate(animatorProps.p.v[0] * mult[0], animatorProps.p.v[1] * mult[1], -animatorProps.p.v[2] * mult[2]);\r\n          } else {\r\n            matrixHelper.translate(animatorProps.p.v[0] * mult, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\r\n          }\r\n        }\r\n      }\r\n      if (documentData.strokeWidthAnim) {\r\n        letterSw = sw < 0 ? 0 : sw;\r\n      }\r\n      if (documentData.strokeColorAnim) {\r\n        letterSc = 'rgb(' + Math.round(sc[0] * 255) + ',' + Math.round(sc[1] * 255) + ',' + Math.round(sc[2] * 255) + ')';\r\n      }\r\n      if (documentData.fillColorAnim && documentData.fc) {\r\n        letterFc = 'rgb(' + Math.round(fc[0] * 255) + ',' + Math.round(fc[1] * 255) + ',' + Math.round(fc[2] * 255) + ')';\r\n      }\r\n\r\n      if (this._hasMaskedPath) {\r\n        matrixHelper.translate(0, -documentData.ls);\r\n\r\n        matrixHelper.translate(0, (alignment[1] * yOff) * 0.01 + yPos, 0);\r\n        if (this._pathData.p.v) {\r\n          tanAngle = (currentPoint.point[1] - prevPoint.point[1]) / (currentPoint.point[0] - prevPoint.point[0]);\r\n          var rot = (Math.atan(tanAngle) * 180) / Math.PI;\r\n          if (currentPoint.point[0] < prevPoint.point[0]) {\r\n            rot += 180;\r\n          }\r\n          matrixHelper.rotate((-rot * Math.PI) / 180);\r\n        }\r\n        matrixHelper.translate(xPathPos, yPathPos, 0);\r\n        currentLength -= (alignment[0] * letters[i].an) * 0.005;\r\n        if (letters[i + 1] && ind !== letters[i + 1].ind) {\r\n          currentLength += letters[i].an / 2;\r\n          currentLength += (documentData.tr * 0.001) * documentData.finalSize;\r\n        }\r\n      } else {\r\n        matrixHelper.translate(xPos, yPos, 0);\r\n\r\n        if (documentData.ps) {\r\n          // matrixHelper.translate(documentData.ps[0],documentData.ps[1],0);\r\n          matrixHelper.translate(documentData.ps[0], documentData.ps[1] + documentData.ascent, 0);\r\n        }\r\n        switch (documentData.j) {\r\n          case 1:\r\n            matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]), 0, 0);\r\n            break;\r\n          case 2:\r\n            matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]) / 2, 0, 0);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        matrixHelper.translate(0, -documentData.ls);\r\n        matrixHelper.translate(offf, 0, 0);\r\n        matrixHelper.translate((alignment[0] * letters[i].an) * 0.005, (alignment[1] * yOff) * 0.01, 0);\r\n        xPos += letters[i].l + (documentData.tr * 0.001) * documentData.finalSize;\r\n      }\r\n      if (renderType === 'html') {\r\n        letterM = matrixHelper.toCSS();\r\n      } else if (renderType === 'svg') {\r\n        letterM = matrixHelper.to2dCSS();\r\n      } else {\r\n        letterP = [matrixHelper.props[0], matrixHelper.props[1], matrixHelper.props[2], matrixHelper.props[3], matrixHelper.props[4], matrixHelper.props[5], matrixHelper.props[6], matrixHelper.props[7], matrixHelper.props[8], matrixHelper.props[9], matrixHelper.props[10], matrixHelper.props[11], matrixHelper.props[12], matrixHelper.props[13], matrixHelper.props[14], matrixHelper.props[15]];\r\n      }\r\n      letterO = elemOpacity;\r\n    }\r\n\r\n    if (renderedLettersCount <= i) {\r\n      letterValue = new LetterProps(letterO, letterSw, letterSc, letterFc, letterM, letterP);\r\n      this.renderedLetters.push(letterValue);\r\n      renderedLettersCount += 1;\r\n      this.lettersChangedFlag = true;\r\n    } else {\r\n      letterValue = this.renderedLetters[i];\r\n      this.lettersChangedFlag = letterValue.update(letterO, letterSw, letterSc, letterFc, letterM, letterP) || this.lettersChangedFlag;\r\n    }\r\n  }\r\n};\r\n\r\nTextAnimatorProperty.prototype.getValue = function () {\r\n  if (this._elem.globalData.frameId === this._frameId) {\r\n    return;\r\n  }\r\n  this._frameId = this._elem.globalData.frameId;\r\n  this.iterateDynamicProperties();\r\n};\r\n\r\nTextAnimatorProperty.prototype.mHelper = new Matrix();\r\nTextAnimatorProperty.prototype.defaultPropsArray = [];\r\nextendPrototype([DynamicPropertyContainer], TextAnimatorProperty);\n\nfunction ITextElement() {\r\n}\r\n\r\nITextElement.prototype.initElement = function (data, globalData, comp) {\r\n  this.lettersChangedFlag = true;\r\n  this.initFrame();\r\n  this.initBaseData(data, globalData, comp);\r\n  this.textProperty = new TextProperty(this, data.t, this.dynamicProperties);\r\n  this.textAnimator = new TextAnimatorProperty(data.t, this.renderType, this);\r\n  this.initTransform(data, globalData, comp);\r\n  this.initHierarchy();\r\n  this.initRenderable();\r\n  this.initRendererElement();\r\n  this.createContainerElements();\r\n  this.createRenderableComponents();\r\n  this.createContent();\r\n  this.hide();\r\n  this.textAnimator.searchProperties(this.dynamicProperties);\r\n};\r\n\r\nITextElement.prototype.prepareFrame = function (num) {\r\n  this._mdf = false;\r\n  this.prepareRenderableFrame(num);\r\n  this.prepareProperties(num, this.isInRange);\r\n};\r\n\r\nITextElement.prototype.createPathShape = function (matrixHelper, shapes) {\r\n  var j;\r\n  var jLen = shapes.length;\r\n  var pathNodes;\r\n  var shapeStr = '';\r\n  for (j = 0; j < jLen; j += 1) {\r\n    if (shapes[j].ty === 'sh') {\r\n      pathNodes = shapes[j].ks.k;\r\n      shapeStr += buildShapeString(pathNodes, pathNodes.i.length, true, matrixHelper);\r\n    }\r\n  }\r\n  return shapeStr;\r\n};\r\n\r\nITextElement.prototype.updateDocumentData = function (newData, index) {\r\n  this.textProperty.updateDocumentData(newData, index);\r\n};\r\n\r\nITextElement.prototype.canResizeFont = function (_canResize) {\r\n  this.textProperty.canResizeFont(_canResize);\r\n};\r\n\r\nITextElement.prototype.setMinimumFontSize = function (_fontSize) {\r\n  this.textProperty.setMinimumFontSize(_fontSize);\r\n};\r\n\r\nITextElement.prototype.applyTextPropertiesToMatrix = function (documentData, matrixHelper, lineNumber, xPos, yPos) {\r\n  if (documentData.ps) {\r\n    matrixHelper.translate(documentData.ps[0], documentData.ps[1] + documentData.ascent, 0);\r\n  }\r\n  matrixHelper.translate(0, -documentData.ls, 0);\r\n  switch (documentData.j) {\r\n    case 1:\r\n      matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]), 0, 0);\r\n      break;\r\n    case 2:\r\n      matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]) / 2, 0, 0);\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n  matrixHelper.translate(xPos, yPos, 0);\r\n};\r\n\r\nITextElement.prototype.buildColor = function (colorData) {\r\n  return 'rgb(' + Math.round(colorData[0] * 255) + ',' + Math.round(colorData[1] * 255) + ',' + Math.round(colorData[2] * 255) + ')';\r\n};\r\n\r\nITextElement.prototype.emptyProp = new LetterProps();\r\n\r\nITextElement.prototype.destroy = function () {\r\n\r\n};\r\n\r\nITextElement.prototype.validateText = function () {\r\n  if (this.textProperty._mdf || this.textProperty._isFirstFrame) {\r\n    this.buildNewText();\r\n    this.textProperty._isFirstFrame = false;\r\n    this.textProperty._mdf = false;\r\n  }\r\n};\n\nvar emptyShapeData = {\r\n  shapes: [],\r\n};\r\n\r\nfunction SVGTextLottieElement(data, globalData, comp) {\r\n  this.textSpans = [];\r\n  this.renderType = 'svg';\r\n  this.initElement(data, globalData, comp);\r\n}\r\n\r\nextendPrototype([BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement, RenderableDOMElement, ITextElement], SVGTextLottieElement);\r\n\r\nSVGTextLottieElement.prototype.createContent = function () {\r\n  if (this.data.singleShape && !this.globalData.fontManager.chars) {\r\n    this.textContainer = createNS('text');\r\n  }\r\n};\r\n\r\nSVGTextLottieElement.prototype.buildTextContents = function (textArray) {\r\n  var i = 0;\r\n  var len = textArray.length;\r\n  var textContents = [];\r\n  var currentTextContent = '';\r\n  while (i < len) {\r\n    if (textArray[i] === String.fromCharCode(13) || textArray[i] === String.fromCharCode(3)) {\r\n      textContents.push(currentTextContent);\r\n      currentTextContent = '';\r\n    } else {\r\n      currentTextContent += textArray[i];\r\n    }\r\n    i += 1;\r\n  }\r\n  textContents.push(currentTextContent);\r\n  return textContents;\r\n};\r\n\r\nSVGTextLottieElement.prototype.buildShapeData = function (data, scale) {\r\n  // data should probably be cloned to apply scale separately to each instance of a text on different layers\r\n  // but since text internal content gets only rendered once and then it's never rerendered,\r\n  // it's probably safe not to clone data and reuse always the same instance even if the object is mutated.\r\n  // Avoiding cloning is preferred since cloning each character shape data is expensive\r\n  if (data.shapes && data.shapes.length) {\r\n    var shape = data.shapes[0];\r\n    if (shape.it) {\r\n      var shapeItem = shape.it[shape.it.length - 1];\r\n      if (shapeItem.s) {\r\n        shapeItem.s.k[0] = scale;\r\n        shapeItem.s.k[1] = scale;\r\n      }\r\n    }\r\n  }\r\n  return data;\r\n};\r\n\r\nSVGTextLottieElement.prototype.buildNewText = function () {\r\n  this.addDynamicProperty(this);\r\n  var i;\r\n  var len;\r\n\r\n  var documentData = this.textProperty.currentData;\r\n  this.renderedLetters = createSizedArray(documentData ? documentData.l.length : 0);\r\n  if (documentData.fc) {\r\n    this.layerElement.setAttribute('fill', this.buildColor(documentData.fc));\r\n  } else {\r\n    this.layerElement.setAttribute('fill', 'rgba(0,0,0,0)');\r\n  }\r\n  if (documentData.sc) {\r\n    this.layerElement.setAttribute('stroke', this.buildColor(documentData.sc));\r\n    this.layerElement.setAttribute('stroke-width', documentData.sw);\r\n  }\r\n  this.layerElement.setAttribute('font-size', documentData.finalSize);\r\n  var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n  if (fontData.fClass) {\r\n    this.layerElement.setAttribute('class', fontData.fClass);\r\n  } else {\r\n    this.layerElement.setAttribute('font-family', fontData.fFamily);\r\n    var fWeight = documentData.fWeight;\r\n    var fStyle = documentData.fStyle;\r\n    this.layerElement.setAttribute('font-style', fStyle);\r\n    this.layerElement.setAttribute('font-weight', fWeight);\r\n  }\r\n  this.layerElement.setAttribute('aria-label', documentData.t);\r\n\r\n  var letters = documentData.l || [];\r\n  var usesGlyphs = !!this.globalData.fontManager.chars;\r\n  len = letters.length;\r\n\r\n  var tSpan;\r\n  var matrixHelper = this.mHelper;\r\n  var shapeStr = '';\r\n  var singleShape = this.data.singleShape;\r\n  var xPos = 0;\r\n  var yPos = 0;\r\n  var firstLine = true;\r\n  var trackingOffset = documentData.tr * 0.001 * documentData.finalSize;\r\n  if (singleShape && !usesGlyphs && !documentData.sz) {\r\n    var tElement = this.textContainer;\r\n    var justify = 'start';\r\n    switch (documentData.j) {\r\n      case 1:\r\n        justify = 'end';\r\n        break;\r\n      case 2:\r\n        justify = 'middle';\r\n        break;\r\n      default:\r\n        justify = 'start';\r\n        break;\r\n    }\r\n    tElement.setAttribute('text-anchor', justify);\r\n    tElement.setAttribute('letter-spacing', trackingOffset);\r\n    var textContent = this.buildTextContents(documentData.finalText);\r\n    len = textContent.length;\r\n    yPos = documentData.ps ? documentData.ps[1] + documentData.ascent : 0;\r\n    for (i = 0; i < len; i += 1) {\r\n      tSpan = this.textSpans[i].span || createNS('tspan');\r\n      tSpan.textContent = textContent[i];\r\n      tSpan.setAttribute('x', 0);\r\n      tSpan.setAttribute('y', yPos);\r\n      tSpan.style.display = 'inherit';\r\n      tElement.appendChild(tSpan);\r\n      if (!this.textSpans[i]) {\r\n        this.textSpans[i] = {\r\n          span: null,\r\n          glyph: null,\r\n        };\r\n      }\r\n      this.textSpans[i].span = tSpan;\r\n      yPos += documentData.finalLineHeight;\r\n    }\r\n\r\n    this.layerElement.appendChild(tElement);\r\n  } else {\r\n    var cachedSpansLength = this.textSpans.length;\r\n    var charData;\r\n    for (i = 0; i < len; i += 1) {\r\n      if (!this.textSpans[i]) {\r\n        this.textSpans[i] = {\r\n          span: null,\r\n          childSpan: null,\r\n          glyph: null,\r\n        };\r\n      }\r\n      if (!usesGlyphs || !singleShape || i === 0) {\r\n        tSpan = cachedSpansLength > i ? this.textSpans[i].span : createNS(usesGlyphs ? 'g' : 'text');\r\n        if (cachedSpansLength <= i) {\r\n          tSpan.setAttribute('stroke-linecap', 'butt');\r\n          tSpan.setAttribute('stroke-linejoin', 'round');\r\n          tSpan.setAttribute('stroke-miterlimit', '4');\r\n          this.textSpans[i].span = tSpan;\r\n          if (usesGlyphs) {\r\n            var childSpan = createNS('g');\r\n            tSpan.appendChild(childSpan);\r\n            this.textSpans[i].childSpan = childSpan;\r\n          }\r\n          this.textSpans[i].span = tSpan;\r\n          this.layerElement.appendChild(tSpan);\r\n        }\r\n        tSpan.style.display = 'inherit';\r\n      }\r\n\r\n      matrixHelper.reset();\r\n      if (singleShape) {\r\n        if (letters[i].n) {\r\n          xPos = -trackingOffset;\r\n          yPos += documentData.yOffset;\r\n          yPos += firstLine ? 1 : 0;\r\n          firstLine = false;\r\n        }\r\n        this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\r\n        xPos += letters[i].l || 0;\r\n        // xPos += letters[i].val === ' ' ? 0 : trackingOffset;\r\n        xPos += trackingOffset;\r\n      }\r\n      if (usesGlyphs) {\r\n        charData = this.globalData.fontManager.getCharData(\r\n          documentData.finalText[i],\r\n          fontData.fStyle,\r\n          this.globalData.fontManager.getFontByName(documentData.f).fFamily\r\n        );\r\n        var glyphElement;\r\n        // t === 1 means the character has been replaced with an animated shaped\r\n        if (charData.t === 1) {\r\n          glyphElement = new SVGCompElement(charData.data, this.globalData, this);\r\n        } else {\r\n          var data = emptyShapeData;\r\n          if (charData.data && charData.data.shapes) {\r\n            data = this.buildShapeData(charData.data, documentData.finalSize);\r\n          }\r\n          glyphElement = new SVGShapeElement(data, this.globalData, this);\r\n        }\r\n        if (this.textSpans[i].glyph) {\r\n          var glyph = this.textSpans[i].glyph;\r\n          this.textSpans[i].childSpan.removeChild(glyph.layerElement);\r\n          glyph.destroy();\r\n        }\r\n        this.textSpans[i].glyph = glyphElement;\r\n        glyphElement._debug = true;\r\n        glyphElement.prepareFrame(0);\r\n        glyphElement.renderFrame();\r\n        this.textSpans[i].childSpan.appendChild(glyphElement.layerElement);\r\n        // when using animated shapes, the layer will be scaled instead of replacing the internal scale\r\n        // this might have issues with strokes and might need a different solution\r\n        if (charData.t === 1) {\r\n          this.textSpans[i].childSpan.setAttribute('transform', 'scale(' + documentData.finalSize / 100 + ',' + documentData.finalSize / 100 + ')');\r\n        }\r\n      } else {\r\n        if (singleShape) {\r\n          tSpan.setAttribute('transform', 'translate(' + matrixHelper.props[12] + ',' + matrixHelper.props[13] + ')');\r\n        }\r\n        tSpan.textContent = letters[i].val;\r\n        tSpan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\r\n      }\r\n      //\r\n    }\r\n    if (singleShape && tSpan) {\r\n      tSpan.setAttribute('d', shapeStr);\r\n    }\r\n  }\r\n  while (i < this.textSpans.length) {\r\n    this.textSpans[i].span.style.display = 'none';\r\n    i += 1;\r\n  }\r\n\r\n  this._sizeChanged = true;\r\n};\r\n\r\nSVGTextLottieElement.prototype.sourceRectAtTime = function () {\r\n  this.prepareFrame(this.comp.renderedFrame - this.data.st);\r\n  this.renderInnerContent();\r\n  if (this._sizeChanged) {\r\n    this._sizeChanged = false;\r\n    var textBox = this.layerElement.getBBox();\r\n    this.bbox = {\r\n      top: textBox.y,\r\n      left: textBox.x,\r\n      width: textBox.width,\r\n      height: textBox.height,\r\n    };\r\n  }\r\n  return this.bbox;\r\n};\r\n\r\nSVGTextLottieElement.prototype.getValue = function () {\r\n  var i;\r\n  var len = this.textSpans.length;\r\n  var glyphElement;\r\n  this.renderedFrame = this.comp.renderedFrame;\r\n  for (i = 0; i < len; i += 1) {\r\n    glyphElement = this.textSpans[i].glyph;\r\n    if (glyphElement) {\r\n      glyphElement.prepareFrame(this.comp.renderedFrame - this.data.st);\r\n      if (glyphElement._mdf) {\r\n        this._mdf = true;\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nSVGTextLottieElement.prototype.renderInnerContent = function () {\r\n  this.validateText();\r\n  if (!this.data.singleShape || this._mdf) {\r\n    this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n    if (this.lettersChangedFlag || this.textAnimator.lettersChangedFlag) {\r\n      this._sizeChanged = true;\r\n      var i;\r\n      var len;\r\n      var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n      var letters = this.textProperty.currentData.l;\r\n\r\n      len = letters.length;\r\n      var renderedLetter;\r\n      var textSpan;\r\n      var glyphElement;\r\n      for (i = 0; i < len; i += 1) {\r\n        if (!letters[i].n) {\r\n          renderedLetter = renderedLetters[i];\r\n          textSpan = this.textSpans[i].span;\r\n          glyphElement = this.textSpans[i].glyph;\r\n          if (glyphElement) {\r\n            glyphElement.renderFrame();\r\n          }\r\n          if (renderedLetter._mdf.m) {\r\n            textSpan.setAttribute('transform', renderedLetter.m);\r\n          }\r\n          if (renderedLetter._mdf.o) {\r\n            textSpan.setAttribute('opacity', renderedLetter.o);\r\n          }\r\n          if (renderedLetter._mdf.sw) {\r\n            textSpan.setAttribute('stroke-width', renderedLetter.sw);\r\n          }\r\n          if (renderedLetter._mdf.sc) {\r\n            textSpan.setAttribute('stroke', renderedLetter.sc);\r\n          }\r\n          if (renderedLetter._mdf.fc) {\r\n            textSpan.setAttribute('fill', renderedLetter.fc);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\n\nfunction ISolidElement(data, globalData, comp) {\r\n  this.initElement(data, globalData, comp);\r\n}\r\nextendPrototype([IImageElement], ISolidElement);\r\n\r\nISolidElement.prototype.createContent = function () {\r\n  var rect = createNS('rect');\r\n  /// /rect.style.width = this.data.sw;\r\n  /// /rect.style.height = this.data.sh;\r\n  /// /rect.style.fill = this.data.sc;\r\n  rect.setAttribute('width', this.data.sw);\r\n  rect.setAttribute('height', this.data.sh);\r\n  rect.setAttribute('fill', this.data.sc);\r\n  this.layerElement.appendChild(rect);\r\n};\n\nfunction NullElement(data, globalData, comp) {\r\n  this.initFrame();\r\n  this.initBaseData(data, globalData, comp);\r\n  this.initFrame();\r\n  this.initTransform(data, globalData, comp);\r\n  this.initHierarchy();\r\n}\r\n\r\nNullElement.prototype.prepareFrame = function (num) {\r\n  this.prepareProperties(num, true);\r\n};\r\n\r\nNullElement.prototype.renderFrame = function () {\r\n};\r\n\r\nNullElement.prototype.getBaseElement = function () {\r\n  return null;\r\n};\r\n\r\nNullElement.prototype.destroy = function () {\r\n};\r\n\r\nNullElement.prototype.sourceRectAtTime = function () {\r\n};\r\n\r\nNullElement.prototype.hide = function () {\r\n};\r\n\r\nextendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement], NullElement);\n\nfunction SVGRendererBase() {\r\n}\r\n\r\nextendPrototype([BaseRenderer], SVGRendererBase);\r\n\r\nSVGRendererBase.prototype.createNull = function (data) {\r\n  return new NullElement(data, this.globalData, this);\r\n};\r\n\r\nSVGRendererBase.prototype.createShape = function (data) {\r\n  return new SVGShapeElement(data, this.globalData, this);\r\n};\r\n\r\nSVGRendererBase.prototype.createText = function (data) {\r\n  return new SVGTextLottieElement(data, this.globalData, this);\r\n};\r\n\r\nSVGRendererBase.prototype.createImage = function (data) {\r\n  return new IImageElement(data, this.globalData, this);\r\n};\r\n\r\nSVGRendererBase.prototype.createSolid = function (data) {\r\n  return new ISolidElement(data, this.globalData, this);\r\n};\r\n\r\nSVGRendererBase.prototype.configAnimation = function (animData) {\r\n  this.svgElement.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\r\n  this.svgElement.setAttribute('xmlns:xlink', 'http://www.w3.org/1999/xlink');\r\n  if (this.renderConfig.viewBoxSize) {\r\n    this.svgElement.setAttribute('viewBox', this.renderConfig.viewBoxSize);\r\n  } else {\r\n    this.svgElement.setAttribute('viewBox', '0 0 ' + animData.w + ' ' + animData.h);\r\n  }\r\n\r\n  if (!this.renderConfig.viewBoxOnly) {\r\n    this.svgElement.setAttribute('width', animData.w);\r\n    this.svgElement.setAttribute('height', animData.h);\r\n    this.svgElement.style.width = '100%';\r\n    this.svgElement.style.height = '100%';\r\n    this.svgElement.style.transform = 'translate3d(0,0,0)';\r\n    this.svgElement.style.contentVisibility = this.renderConfig.contentVisibility;\r\n  }\r\n  if (this.renderConfig.width) {\r\n    this.svgElement.setAttribute('width', this.renderConfig.width);\r\n  }\r\n  if (this.renderConfig.height) {\r\n    this.svgElement.setAttribute('height', this.renderConfig.height);\r\n  }\r\n  if (this.renderConfig.className) {\r\n    this.svgElement.setAttribute('class', this.renderConfig.className);\r\n  }\r\n  if (this.renderConfig.id) {\r\n    this.svgElement.setAttribute('id', this.renderConfig.id);\r\n  }\r\n  if (this.renderConfig.focusable !== undefined) {\r\n    this.svgElement.setAttribute('focusable', this.renderConfig.focusable);\r\n  }\r\n  this.svgElement.setAttribute('preserveAspectRatio', this.renderConfig.preserveAspectRatio);\r\n  // this.layerElement.style.transform = 'translate3d(0,0,0)';\r\n  // this.layerElement.style.transformOrigin = this.layerElement.style.mozTransformOrigin = this.layerElement.style.webkitTransformOrigin = this.layerElement.style['-webkit-transform'] = \"0px 0px 0px\";\r\n  this.animationItem.wrapper.appendChild(this.svgElement);\r\n  // Mask animation\r\n  var defs = this.globalData.defs;\r\n\r\n  this.setupGlobalData(animData, defs);\r\n  this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\r\n  this.data = animData;\r\n\r\n  var maskElement = createNS('clipPath');\r\n  var rect = createNS('rect');\r\n  rect.setAttribute('width', animData.w);\r\n  rect.setAttribute('height', animData.h);\r\n  rect.setAttribute('x', 0);\r\n  rect.setAttribute('y', 0);\r\n  var maskId = createElementID();\r\n  maskElement.setAttribute('id', maskId);\r\n  maskElement.appendChild(rect);\r\n  this.layerElement.setAttribute('clip-path', 'url(' + getLocationHref() + '#' + maskId + ')');\r\n\r\n  defs.appendChild(maskElement);\r\n  this.layers = animData.layers;\r\n  this.elements = createSizedArray(animData.layers.length);\r\n};\r\n\r\nSVGRendererBase.prototype.destroy = function () {\r\n  if (this.animationItem.wrapper) {\r\n    this.animationItem.wrapper.innerText = '';\r\n  }\r\n  this.layerElement = null;\r\n  this.globalData.defs = null;\r\n  var i;\r\n  var len = this.layers ? this.layers.length : 0;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.elements[i] && this.elements[i].destroy) {\r\n      this.elements[i].destroy();\r\n    }\r\n  }\r\n  this.elements.length = 0;\r\n  this.destroyed = true;\r\n  this.animationItem = null;\r\n};\r\n\r\nSVGRendererBase.prototype.updateContainerSize = function () {\r\n};\r\n\r\nSVGRendererBase.prototype.findIndexByInd = function (ind) {\r\n  var i = 0;\r\n  var len = this.layers.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.layers[i].ind === ind) {\r\n      return i;\r\n    }\r\n  }\r\n  return -1;\r\n};\r\n\r\nSVGRendererBase.prototype.buildItem = function (pos) {\r\n  var elements = this.elements;\r\n  if (elements[pos] || this.layers[pos].ty === 99) {\r\n    return;\r\n  }\r\n  elements[pos] = true;\r\n  var element = this.createItem(this.layers[pos]);\r\n\r\n  elements[pos] = element;\r\n  if (getExpressionsPlugin()) {\r\n    if (this.layers[pos].ty === 0) {\r\n      this.globalData.projectInterface.registerComposition(element);\r\n    }\r\n    element.initExpressions();\r\n  }\r\n  this.appendElementInPos(element, pos);\r\n  if (this.layers[pos].tt) {\r\n    var elementIndex = ('tp' in this.layers[pos])\r\n      ? this.findIndexByInd(this.layers[pos].tp)\r\n      : pos - 1;\r\n    if (elementIndex === -1) {\r\n      return;\r\n    }\r\n    if (!this.elements[elementIndex] || this.elements[elementIndex] === true) {\r\n      this.buildItem(elementIndex);\r\n      this.addPendingElement(element);\r\n    } else {\r\n      var matteElement = elements[elementIndex];\r\n      var matteMask = matteElement.getMatte(this.layers[pos].tt);\r\n      element.setMatte(matteMask);\r\n    }\r\n  }\r\n};\r\n\r\nSVGRendererBase.prototype.checkPendingElements = function () {\r\n  while (this.pendingElements.length) {\r\n    var element = this.pendingElements.pop();\r\n    element.checkParenting();\r\n    if (element.data.tt) {\r\n      var i = 0;\r\n      var len = this.elements.length;\r\n      while (i < len) {\r\n        if (this.elements[i] === element) {\r\n          var elementIndex = 'tp' in element.data\r\n            ? this.findIndexByInd(element.data.tp)\r\n            : i - 1;\r\n          var matteElement = this.elements[elementIndex];\r\n          var matteMask = matteElement.getMatte(this.layers[i].tt);\r\n          element.setMatte(matteMask);\r\n          break;\r\n        }\r\n        i += 1;\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nSVGRendererBase.prototype.renderFrame = function (num) {\r\n  if (this.renderedFrame === num || this.destroyed) {\r\n    return;\r\n  }\r\n  if (num === null) {\r\n    num = this.renderedFrame;\r\n  } else {\r\n    this.renderedFrame = num;\r\n  }\r\n  // console.log('-------');\r\n  // console.log('FRAME ',num);\r\n  this.globalData.frameNum = num;\r\n  this.globalData.frameId += 1;\r\n  this.globalData.projectInterface.currentFrame = num;\r\n  this.globalData._mdf = false;\r\n  var i;\r\n  var len = this.layers.length;\r\n  if (!this.completeLayers) {\r\n    this.checkLayers(num);\r\n  }\r\n  for (i = len - 1; i >= 0; i -= 1) {\r\n    if (this.completeLayers || this.elements[i]) {\r\n      this.elements[i].prepareFrame(num - this.layers[i].st);\r\n    }\r\n  }\r\n  if (this.globalData._mdf) {\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.completeLayers || this.elements[i]) {\r\n        this.elements[i].renderFrame();\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nSVGRendererBase.prototype.appendElementInPos = function (element, pos) {\r\n  var newElement = element.getBaseElement();\r\n  if (!newElement) {\r\n    return;\r\n  }\r\n  var i = 0;\r\n  var nextElement;\r\n  while (i < pos) {\r\n    if (this.elements[i] && this.elements[i] !== true && this.elements[i].getBaseElement()) {\r\n      nextElement = this.elements[i].getBaseElement();\r\n    }\r\n    i += 1;\r\n  }\r\n  if (nextElement) {\r\n    this.layerElement.insertBefore(newElement, nextElement);\r\n  } else {\r\n    this.layerElement.appendChild(newElement);\r\n  }\r\n};\r\n\r\nSVGRendererBase.prototype.hide = function () {\r\n  this.layerElement.style.display = 'none';\r\n};\r\n\r\nSVGRendererBase.prototype.show = function () {\r\n  this.layerElement.style.display = 'block';\r\n};\n\nfunction ICompElement() {}\r\n\r\nextendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement, RenderableDOMElement], ICompElement);\r\n\r\nICompElement.prototype.initElement = function (data, globalData, comp) {\r\n  this.initFrame();\r\n  this.initBaseData(data, globalData, comp);\r\n  this.initTransform(data, globalData, comp);\r\n  this.initRenderable();\r\n  this.initHierarchy();\r\n  this.initRendererElement();\r\n  this.createContainerElements();\r\n  this.createRenderableComponents();\r\n  if (this.data.xt || !globalData.progressiveLoad) {\r\n    this.buildAllItems();\r\n  }\r\n  this.hide();\r\n};\r\n\r\n/* ICompElement.prototype.hide = function(){\r\n    if(!this.hidden){\r\n        this.hideElement();\r\n        var i,len = this.elements.length;\r\n        for( i = 0; i < len; i+=1 ){\r\n            if(this.elements[i]){\r\n                this.elements[i].hide();\r\n            }\r\n        }\r\n    }\r\n}; */\r\n\r\nICompElement.prototype.prepareFrame = function (num) {\r\n  this._mdf = false;\r\n  this.prepareRenderableFrame(num);\r\n  this.prepareProperties(num, this.isInRange);\r\n  if (!this.isInRange && !this.data.xt) {\r\n    return;\r\n  }\r\n\r\n  if (!this.tm._placeholder) {\r\n    var timeRemapped = this.tm.v;\r\n    if (timeRemapped === this.data.op) {\r\n      timeRemapped = this.data.op - 1;\r\n    }\r\n    this.renderedFrame = timeRemapped;\r\n  } else {\r\n    this.renderedFrame = num / this.data.sr;\r\n  }\r\n  var i;\r\n  var len = this.elements.length;\r\n  if (!this.completeLayers) {\r\n    this.checkLayers(this.renderedFrame);\r\n  }\r\n  // This iteration needs to be backwards because of how expressions connect between each other\r\n  for (i = len - 1; i >= 0; i -= 1) {\r\n    if (this.completeLayers || this.elements[i]) {\r\n      this.elements[i].prepareFrame(this.renderedFrame - this.layers[i].st);\r\n      if (this.elements[i]._mdf) {\r\n        this._mdf = true;\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nICompElement.prototype.renderInnerContent = function () {\r\n  var i;\r\n  var len = this.layers.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.completeLayers || this.elements[i]) {\r\n      this.elements[i].renderFrame();\r\n    }\r\n  }\r\n};\r\n\r\nICompElement.prototype.setElements = function (elems) {\r\n  this.elements = elems;\r\n};\r\n\r\nICompElement.prototype.getElements = function () {\r\n  return this.elements;\r\n};\r\n\r\nICompElement.prototype.destroyElements = function () {\r\n  var i;\r\n  var len = this.layers.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.elements[i]) {\r\n      this.elements[i].destroy();\r\n    }\r\n  }\r\n};\r\n\r\nICompElement.prototype.destroy = function () {\r\n  this.destroyElements();\r\n  this.destroyBaseElement();\r\n};\n\nfunction SVGCompElement(data, globalData, comp) {\r\n  this.layers = data.layers;\r\n  this.supports3d = true;\r\n  this.completeLayers = false;\r\n  this.pendingElements = [];\r\n  this.elements = this.layers ? createSizedArray(this.layers.length) : [];\r\n  this.initElement(data, globalData, comp);\r\n  this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : { _placeholder: true };\r\n}\r\n\r\nextendPrototype([SVGRendererBase, ICompElement, SVGBaseElement], SVGCompElement);\r\n\r\nSVGCompElement.prototype.createComp = function (data) {\r\n  return new SVGCompElement(data, this.globalData, this);\r\n};\n\nfunction SVGRenderer(animationItem, config) {\r\n  this.animationItem = animationItem;\r\n  this.layers = null;\r\n  this.renderedFrame = -1;\r\n  this.svgElement = createNS('svg');\r\n  var ariaLabel = '';\r\n  if (config && config.title) {\r\n    var titleElement = createNS('title');\r\n    var titleId = createElementID();\r\n    titleElement.setAttribute('id', titleId);\r\n    titleElement.textContent = config.title;\r\n    this.svgElement.appendChild(titleElement);\r\n    ariaLabel += titleId;\r\n  }\r\n  if (config && config.description) {\r\n    var descElement = createNS('desc');\r\n    var descId = createElementID();\r\n    descElement.setAttribute('id', descId);\r\n    descElement.textContent = config.description;\r\n    this.svgElement.appendChild(descElement);\r\n    ariaLabel += ' ' + descId;\r\n  }\r\n  if (ariaLabel) {\r\n    this.svgElement.setAttribute('aria-labelledby', ariaLabel);\r\n  }\r\n  var defs = createNS('defs');\r\n  this.svgElement.appendChild(defs);\r\n  var maskElement = createNS('g');\r\n  this.svgElement.appendChild(maskElement);\r\n  this.layerElement = maskElement;\r\n  this.renderConfig = {\r\n    preserveAspectRatio: (config && config.preserveAspectRatio) || 'xMidYMid meet',\r\n    imagePreserveAspectRatio: (config && config.imagePreserveAspectRatio) || 'xMidYMid slice',\r\n    contentVisibility: (config && config.contentVisibility) || 'visible',\r\n    progressiveLoad: (config && config.progressiveLoad) || false,\r\n    hideOnTransparent: !((config && config.hideOnTransparent === false)),\r\n    viewBoxOnly: (config && config.viewBoxOnly) || false,\r\n    viewBoxSize: (config && config.viewBoxSize) || false,\r\n    className: (config && config.className) || '',\r\n    id: (config && config.id) || '',\r\n    focusable: config && config.focusable,\r\n    filterSize: {\r\n      width: (config && config.filterSize && config.filterSize.width) || '100%',\r\n      height: (config && config.filterSize && config.filterSize.height) || '100%',\r\n      x: (config && config.filterSize && config.filterSize.x) || '0%',\r\n      y: (config && config.filterSize && config.filterSize.y) || '0%',\r\n    },\r\n    width: (config && config.width),\r\n    height: (config && config.height),\r\n    runExpressions: !config || config.runExpressions === undefined || config.runExpressions,\r\n  };\r\n\r\n  this.globalData = {\r\n    _mdf: false,\r\n    frameNum: -1,\r\n    defs: defs,\r\n    renderConfig: this.renderConfig,\r\n  };\r\n  this.elements = [];\r\n  this.pendingElements = [];\r\n  this.destroyed = false;\r\n  this.rendererType = 'svg';\r\n}\r\n\r\nextendPrototype([SVGRendererBase], SVGRenderer);\r\n\r\nSVGRenderer.prototype.createComp = function (data) {\r\n  return new SVGCompElement(data, this.globalData, this);\r\n};\n\nfunction ShapeTransformManager() {\r\n  this.sequences = {};\r\n  this.sequenceList = [];\r\n  this.transform_key_count = 0;\r\n}\r\n\r\nShapeTransformManager.prototype = {\r\n  addTransformSequence: function (transforms) {\r\n    var i;\r\n    var len = transforms.length;\r\n    var key = '_';\r\n    for (i = 0; i < len; i += 1) {\r\n      key += transforms[i].transform.key + '_';\r\n    }\r\n    var sequence = this.sequences[key];\r\n    if (!sequence) {\r\n      sequence = {\r\n        transforms: [].concat(transforms),\r\n        finalTransform: new Matrix(),\r\n        _mdf: false,\r\n      };\r\n      this.sequences[key] = sequence;\r\n      this.sequenceList.push(sequence);\r\n    }\r\n    return sequence;\r\n  },\r\n  processSequence: function (sequence, isFirstFrame) {\r\n    var i = 0;\r\n    var len = sequence.transforms.length;\r\n    var _mdf = isFirstFrame;\r\n    while (i < len && !isFirstFrame) {\r\n      if (sequence.transforms[i].transform.mProps._mdf) {\r\n        _mdf = true;\r\n        break;\r\n      }\r\n      i += 1;\r\n    }\r\n    if (_mdf) {\r\n      sequence.finalTransform.reset();\r\n      for (i = len - 1; i >= 0; i -= 1) {\r\n        sequence.finalTransform.multiply(sequence.transforms[i].transform.mProps.v);\r\n      }\r\n    }\r\n    sequence._mdf = _mdf;\r\n  },\r\n  processSequences: function (isFirstFrame) {\r\n    var i;\r\n    var len = this.sequenceList.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      this.processSequence(this.sequenceList[i], isFirstFrame);\r\n    }\r\n  },\r\n  getNewKey: function () {\r\n    this.transform_key_count += 1;\r\n    return '_' + this.transform_key_count;\r\n  },\r\n};\n\nvar lumaLoader = (function () {\r\n  var id = '__lottie_element_luma_buffer';\r\n  var lumaBuffer = null;\r\n  var lumaBufferCtx = null;\r\n  var svg = null;\r\n\r\n  // This alternate solution has a slight delay before the filter is applied, resulting in a flicker on the first frame.\r\n  // Keeping this here for reference, and in the future, if offscreen canvas supports url filters, this can be used.\r\n  // For now, neither of them work for offscreen canvas, so canvas workers can't support the luma track matte mask.\r\n  // Naming it solution 2 to mark the extra comment lines.\r\n  /*\r\n  var svgString = [\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\">',\r\n    '<filter id=\"' + id + '\">',\r\n    '<feColorMatrix type=\"matrix\" color-interpolation-filters=\"sRGB\" values=\"',\r\n    '0.3, 0.3, 0.3, 0, 0, ',\r\n    '0.3, 0.3, 0.3, 0, 0, ',\r\n    '0.3, 0.3, 0.3, 0, 0, ',\r\n    '0.3, 0.3, 0.3, 0, 0',\r\n    '\"/>',\r\n    '</filter>',\r\n    '</svg>',\r\n  ].join('');\r\n  var blob = new Blob([svgString], { type: 'image/svg+xml' });\r\n  var url = URL.createObjectURL(blob);\r\n  */\r\n\r\n  function createLumaSvgFilter() {\r\n    var _svg = createNS('svg');\r\n    var fil = createNS('filter');\r\n    var matrix = createNS('feColorMatrix');\r\n    fil.setAttribute('id', id);\r\n    matrix.setAttribute('type', 'matrix');\r\n    matrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n    matrix.setAttribute('values', '0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0');\r\n    fil.appendChild(matrix);\r\n    _svg.appendChild(fil);\r\n    _svg.setAttribute('id', id + '_svg');\r\n    if (featureSupport.svgLumaHidden) {\r\n      _svg.style.display = 'none';\r\n    }\r\n    return _svg;\r\n  }\r\n\r\n  function loadLuma() {\r\n    if (!lumaBuffer) {\r\n      svg = createLumaSvgFilter();\r\n      document.body.appendChild(svg);\r\n      lumaBuffer = createTag('canvas');\r\n      lumaBufferCtx = lumaBuffer.getContext('2d');\r\n      // lumaBufferCtx.filter = `url('${url}#__lottie_element_luma_buffer')`; // part of solution 2\r\n      lumaBufferCtx.filter = 'url(#' + id + ')';\r\n      lumaBufferCtx.fillStyle = 'rgba(0,0,0,0)';\r\n      lumaBufferCtx.fillRect(0, 0, 1, 1);\r\n    }\r\n  }\r\n\r\n  function getLuma(canvas) {\r\n    if (!lumaBuffer) {\r\n      loadLuma();\r\n    }\r\n    lumaBuffer.width = canvas.width;\r\n    lumaBuffer.height = canvas.height;\r\n    // lumaBufferCtx.filter = `url('${url}#__lottie_element_luma_buffer')`; // part of solution 2\r\n    lumaBufferCtx.filter = 'url(#' + id + ')';\r\n    return lumaBuffer;\r\n  }\r\n  return {\r\n    load: loadLuma,\r\n    get: getLuma,\r\n  };\r\n});\r\n\r\nfunction createCanvas(width, height) {\r\n  if (featureSupport.offscreenCanvas) {\r\n    return new OffscreenCanvas(width, height);\r\n  }\r\n  var canvas = createTag('canvas');\r\n  canvas.width = width;\r\n  canvas.height = height;\r\n  return canvas;\r\n}\r\n\r\nconst assetLoader = (function () {\r\n  return {\r\n    loadLumaCanvas: lumaLoader.load,\r\n    getLumaCanvas: lumaLoader.get,\r\n    createCanvas: createCanvas,\r\n  };\r\n}());\n\nvar registeredEffects = {};\r\n\r\nfunction CVEffects(elem) {\r\n  var i;\r\n  var len = elem.data.ef ? elem.data.ef.length : 0;\r\n  this.filters = [];\r\n  var filterManager;\r\n  for (i = 0; i < len; i += 1) {\r\n    filterManager = null;\r\n    var type = elem.data.ef[i].ty;\r\n    if (registeredEffects[type]) {\r\n      var Effect = registeredEffects[type].effect;\r\n      filterManager = new Effect(elem.effectsManager.effectElements[i], elem);\r\n    }\r\n    if (filterManager) {\r\n      this.filters.push(filterManager);\r\n    }\r\n  }\r\n  if (this.filters.length) {\r\n    elem.addRenderableComponent(this);\r\n  }\r\n}\r\n\r\nCVEffects.prototype.renderFrame = function (_isFirstFrame) {\r\n  var i;\r\n  var len = this.filters.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.filters[i].renderFrame(_isFirstFrame);\r\n  }\r\n};\r\n\r\nCVEffects.prototype.getEffects = function (type) {\r\n  var i;\r\n  var len = this.filters.length;\r\n  var effects = [];\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.filters[i].type === type) {\r\n      effects.push(this.filters[i]);\r\n    }\r\n  }\r\n  return effects;\r\n};\r\n\r\nfunction registerEffect(id, effect) {\r\n  registeredEffects[id] = {\r\n    effect,\r\n  };\r\n}\n\nfunction CVMaskElement(data, element) {\r\n  this.data = data;\r\n  this.element = element;\r\n  this.masksProperties = this.data.masksProperties || [];\r\n  this.viewData = createSizedArray(this.masksProperties.length);\r\n  var i;\r\n  var len = this.masksProperties.length;\r\n  var hasMasks = false;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.masksProperties[i].mode !== 'n') {\r\n      hasMasks = true;\r\n    }\r\n    this.viewData[i] = ShapePropertyFactory.getShapeProp(this.element, this.masksProperties[i], 3);\r\n  }\r\n  this.hasMasks = hasMasks;\r\n  if (hasMasks) {\r\n    this.element.addRenderableComponent(this);\r\n  }\r\n}\r\n\r\nCVMaskElement.prototype.renderFrame = function () {\r\n  if (!this.hasMasks) {\r\n    return;\r\n  }\r\n  var transform = this.element.finalTransform.mat;\r\n  var ctx = this.element.canvasContext;\r\n  var i;\r\n  var len = this.masksProperties.length;\r\n  var pt;\r\n  var pts;\r\n  var data;\r\n  ctx.beginPath();\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.masksProperties[i].mode !== 'n') {\r\n      if (this.masksProperties[i].inv) {\r\n        ctx.moveTo(0, 0);\r\n        ctx.lineTo(this.element.globalData.compSize.w, 0);\r\n        ctx.lineTo(this.element.globalData.compSize.w, this.element.globalData.compSize.h);\r\n        ctx.lineTo(0, this.element.globalData.compSize.h);\r\n        ctx.lineTo(0, 0);\r\n      }\r\n      data = this.viewData[i].v;\r\n      pt = transform.applyToPointArray(data.v[0][0], data.v[0][1], 0);\r\n      ctx.moveTo(pt[0], pt[1]);\r\n      var j;\r\n      var jLen = data._length;\r\n      for (j = 1; j < jLen; j += 1) {\r\n        pts = transform.applyToTriplePoints(data.o[j - 1], data.i[j], data.v[j]);\r\n        ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\r\n      }\r\n      pts = transform.applyToTriplePoints(data.o[j - 1], data.i[0], data.v[0]);\r\n      ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\r\n    }\r\n  }\r\n  this.element.globalData.renderer.save(true);\r\n  ctx.clip();\r\n};\r\n\r\nCVMaskElement.prototype.getMaskProperty = MaskElement.prototype.getMaskProperty;\r\n\r\nCVMaskElement.prototype.destroy = function () {\r\n  this.element = null;\r\n};\n\nfunction CVBaseElement() {\r\n}\r\n\r\nvar operationsMap = {\r\n  1: 'source-in',\r\n  2: 'source-out',\r\n  3: 'source-in',\r\n  4: 'source-out',\r\n};\r\n\r\nCVBaseElement.prototype = {\r\n  createElements: function () {},\r\n  initRendererElement: function () {},\r\n  createContainerElements: function () {\r\n    // If the layer is masked we will use two buffers to store each different states of the drawing\r\n    // This solution is not ideal for several reason. But unfortunately, because of the recursive\r\n    // nature of the render tree, it's the only simple way to make sure one inner mask doesn't override an outer mask.\r\n    // TODO: try to reduce the size of these buffers to the size of the composition contaning the layer\r\n    // It might be challenging because the layer most likely is transformed in some way\r\n    if (this.data.tt >= 1) {\r\n      this.buffers = [];\r\n      var canvasContext = this.globalData.canvasContext;\r\n      var bufferCanvas = assetLoader.createCanvas(canvasContext.canvas.width, canvasContext.canvas.height);\r\n      this.buffers.push(bufferCanvas);\r\n      var bufferCanvas2 = assetLoader.createCanvas(canvasContext.canvas.width, canvasContext.canvas.height);\r\n      this.buffers.push(bufferCanvas2);\r\n      if (this.data.tt >= 3 && !document._isProxy) {\r\n        assetLoader.loadLumaCanvas();\r\n      }\r\n    }\r\n    this.canvasContext = this.globalData.canvasContext;\r\n    this.transformCanvas = this.globalData.transformCanvas;\r\n    this.renderableEffectsManager = new CVEffects(this);\r\n    this.searchEffectTransforms();\r\n  },\r\n  createContent: function () {},\r\n  setBlendMode: function () {\r\n    var globalData = this.globalData;\r\n    if (globalData.blendMode !== this.data.bm) {\r\n      globalData.blendMode = this.data.bm;\r\n      var blendModeValue = getBlendMode(this.data.bm);\r\n      globalData.canvasContext.globalCompositeOperation = blendModeValue;\r\n    }\r\n  },\r\n  createRenderableComponents: function () {\r\n    this.maskManager = new CVMaskElement(this.data, this);\r\n    this.transformEffects = this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);\r\n  },\r\n  hideElement: function () {\r\n    if (!this.hidden && (!this.isInRange || this.isTransparent)) {\r\n      this.hidden = true;\r\n    }\r\n  },\r\n  showElement: function () {\r\n    if (this.isInRange && !this.isTransparent) {\r\n      this.hidden = false;\r\n      this._isFirstFrame = true;\r\n      this.maskManager._isFirstFrame = true;\r\n    }\r\n  },\r\n  clearCanvas: function (canvasContext) {\r\n    canvasContext.clearRect(\r\n      this.transformCanvas.tx,\r\n      this.transformCanvas.ty,\r\n      this.transformCanvas.w * this.transformCanvas.sx,\r\n      this.transformCanvas.h * this.transformCanvas.sy\r\n    );\r\n  },\r\n  prepareLayer: function () {\r\n    if (this.data.tt >= 1) {\r\n      var buffer = this.buffers[0];\r\n      var bufferCtx = buffer.getContext('2d');\r\n      this.clearCanvas(bufferCtx);\r\n      // on the first buffer we store the current state of the global drawing\r\n      bufferCtx.drawImage(this.canvasContext.canvas, 0, 0);\r\n      // The next four lines are to clear the canvas\r\n      // TODO: Check if there is a way to clear the canvas without resetting the transform\r\n      this.currentTransform = this.canvasContext.getTransform();\r\n      this.canvasContext.setTransform(1, 0, 0, 1, 0, 0);\r\n      this.clearCanvas(this.canvasContext);\r\n      this.canvasContext.setTransform(this.currentTransform);\r\n    }\r\n  },\r\n  exitLayer: function () {\r\n    if (this.data.tt >= 1) {\r\n      var buffer = this.buffers[1];\r\n      // On the second buffer we store the current state of the global drawing\r\n      // that only contains the content of this layer\r\n      // (if it is a composition, it also includes the nested layers)\r\n      var bufferCtx = buffer.getContext('2d');\r\n      this.clearCanvas(bufferCtx);\r\n      bufferCtx.drawImage(this.canvasContext.canvas, 0, 0);\r\n      // We clear the canvas again\r\n      this.canvasContext.setTransform(1, 0, 0, 1, 0, 0);\r\n      this.clearCanvas(this.canvasContext);\r\n      this.canvasContext.setTransform(this.currentTransform);\r\n      // We draw the mask\r\n      const mask = this.comp.getElementById('tp' in this.data ? this.data.tp : this.data.ind - 1);\r\n      mask.renderFrame(true);\r\n      // We draw the second buffer (that contains the content of this layer)\r\n      this.canvasContext.setTransform(1, 0, 0, 1, 0, 0);\r\n\r\n      // If the mask is a Luma matte, we need to do two extra painting operations\r\n      // the _isProxy check is to avoid drawing a fake canvas in workers that will throw an error\r\n      if (this.data.tt >= 3 && !document._isProxy) {\r\n        // We copy the painted mask to a buffer that has a color matrix filter applied to it\r\n        // that applies the rgb values to the alpha channel\r\n        var lumaBuffer = assetLoader.getLumaCanvas(this.canvasContext.canvas);\r\n        var lumaBufferCtx = lumaBuffer.getContext('2d');\r\n        lumaBufferCtx.drawImage(this.canvasContext.canvas, 0, 0);\r\n        this.clearCanvas(this.canvasContext);\r\n        // we repaint the context with the mask applied to it\r\n        this.canvasContext.drawImage(lumaBuffer, 0, 0);\r\n      }\r\n      this.canvasContext.globalCompositeOperation = operationsMap[this.data.tt];\r\n      this.canvasContext.drawImage(buffer, 0, 0);\r\n      // We finally draw the first buffer (that contains the content of the global drawing)\r\n      // We use destination-over to draw the global drawing below the current layer\r\n      this.canvasContext.globalCompositeOperation = 'destination-over';\r\n      this.canvasContext.drawImage(this.buffers[0], 0, 0);\r\n      this.canvasContext.setTransform(this.currentTransform);\r\n      // We reset the globalCompositeOperation to source-over, the standard type of operation\r\n      this.canvasContext.globalCompositeOperation = 'source-over';\r\n    }\r\n  },\r\n  renderFrame: function (forceRender) {\r\n    if (this.hidden || this.data.hd) {\r\n      return;\r\n    }\r\n    if (this.data.td === 1 && !forceRender) {\r\n      return;\r\n    }\r\n    this.renderTransform();\r\n    this.renderRenderable();\r\n    this.renderLocalTransform();\r\n    this.setBlendMode();\r\n    var forceRealStack = this.data.ty === 0;\r\n    this.prepareLayer();\r\n    this.globalData.renderer.save(forceRealStack);\r\n    this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props);\r\n    this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity);\r\n    this.renderInnerContent();\r\n    this.globalData.renderer.restore(forceRealStack);\r\n    this.exitLayer();\r\n    if (this.maskManager.hasMasks) {\r\n      this.globalData.renderer.restore(true);\r\n    }\r\n    if (this._isFirstFrame) {\r\n      this._isFirstFrame = false;\r\n    }\r\n  },\r\n  destroy: function () {\r\n    this.canvasContext = null;\r\n    this.data = null;\r\n    this.globalData = null;\r\n    this.maskManager.destroy();\r\n  },\r\n  mHelper: new Matrix(),\r\n};\r\nCVBaseElement.prototype.hide = CVBaseElement.prototype.hideElement;\r\nCVBaseElement.prototype.show = CVBaseElement.prototype.showElement;\n\nfunction CVShapeData(element, data, styles, transformsManager) {\r\n  this.styledShapes = [];\r\n  this.tr = [0, 0, 0, 0, 0, 0];\r\n  var ty = 4;\r\n  if (data.ty === 'rc') {\r\n    ty = 5;\r\n  } else if (data.ty === 'el') {\r\n    ty = 6;\r\n  } else if (data.ty === 'sr') {\r\n    ty = 7;\r\n  }\r\n  this.sh = ShapePropertyFactory.getShapeProp(element, data, ty, element);\r\n  var i;\r\n  var len = styles.length;\r\n  var styledShape;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (!styles[i].closed) {\r\n      styledShape = {\r\n        transforms: transformsManager.addTransformSequence(styles[i].transforms),\r\n        trNodes: [],\r\n      };\r\n      this.styledShapes.push(styledShape);\r\n      styles[i].elements.push(styledShape);\r\n    }\r\n  }\r\n}\r\n\r\nCVShapeData.prototype.setAsAnimated = SVGShapeData.prototype.setAsAnimated;\n\nfunction CVShapeElement(data, globalData, comp) {\r\n  this.shapes = [];\r\n  this.shapesData = data.shapes;\r\n  this.stylesList = [];\r\n  this.itemsData = [];\r\n  this.prevViewData = [];\r\n  this.shapeModifiers = [];\r\n  this.processedElements = [];\r\n  this.transformsManager = new ShapeTransformManager();\r\n  this.initElement(data, globalData, comp);\r\n}\r\n\r\nextendPrototype([BaseElement, TransformElement, CVBaseElement, IShapeElement, HierarchyElement, FrameElement, RenderableElement], CVShapeElement);\r\n\r\nCVShapeElement.prototype.initElement = RenderableDOMElement.prototype.initElement;\r\n\r\nCVShapeElement.prototype.transformHelper = { opacity: 1, _opMdf: false };\r\n\r\nCVShapeElement.prototype.dashResetter = [];\r\n\r\nCVShapeElement.prototype.createContent = function () {\r\n  this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, true, []);\r\n};\r\n\r\nCVShapeElement.prototype.createStyleElement = function (data, transforms) {\r\n  var styleElem = {\r\n    data: data,\r\n    type: data.ty,\r\n    preTransforms: this.transformsManager.addTransformSequence(transforms),\r\n    transforms: [],\r\n    elements: [],\r\n    closed: data.hd === true,\r\n  };\r\n  var elementData = {};\r\n  if (data.ty === 'fl' || data.ty === 'st') {\r\n    elementData.c = PropertyFactory.getProp(this, data.c, 1, 255, this);\r\n    if (!elementData.c.k) {\r\n      styleElem.co = 'rgb(' + bmFloor(elementData.c.v[0]) + ',' + bmFloor(elementData.c.v[1]) + ',' + bmFloor(elementData.c.v[2]) + ')';\r\n    }\r\n  } else if (data.ty === 'gf' || data.ty === 'gs') {\r\n    elementData.s = PropertyFactory.getProp(this, data.s, 1, null, this);\r\n    elementData.e = PropertyFactory.getProp(this, data.e, 1, null, this);\r\n    elementData.h = PropertyFactory.getProp(this, data.h || { k: 0 }, 0, 0.01, this);\r\n    elementData.a = PropertyFactory.getProp(this, data.a || { k: 0 }, 0, degToRads, this);\r\n    elementData.g = new GradientProperty(this, data.g, this);\r\n  }\r\n  elementData.o = PropertyFactory.getProp(this, data.o, 0, 0.01, this);\r\n  if (data.ty === 'st' || data.ty === 'gs') {\r\n    styleElem.lc = lineCapEnum[data.lc || 2];\r\n    styleElem.lj = lineJoinEnum[data.lj || 2];\r\n    if (data.lj == 1) { // eslint-disable-line eqeqeq\r\n      styleElem.ml = data.ml;\r\n    }\r\n    elementData.w = PropertyFactory.getProp(this, data.w, 0, null, this);\r\n    if (!elementData.w.k) {\r\n      styleElem.wi = elementData.w.v;\r\n    }\r\n    if (data.d) {\r\n      var d = new DashProperty(this, data.d, 'canvas', this);\r\n      elementData.d = d;\r\n      if (!elementData.d.k) {\r\n        styleElem.da = elementData.d.dashArray;\r\n        styleElem.do = elementData.d.dashoffset[0];\r\n      }\r\n    }\r\n  } else {\r\n    styleElem.r = data.r === 2 ? 'evenodd' : 'nonzero';\r\n  }\r\n  this.stylesList.push(styleElem);\r\n  elementData.style = styleElem;\r\n  return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.createGroupElement = function () {\r\n  var elementData = {\r\n    it: [],\r\n    prevViewData: [],\r\n  };\r\n  return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.createTransformElement = function (data) {\r\n  var elementData = {\r\n    transform: {\r\n      opacity: 1,\r\n      _opMdf: false,\r\n      key: this.transformsManager.getNewKey(),\r\n      op: PropertyFactory.getProp(this, data.o, 0, 0.01, this),\r\n      mProps: TransformPropertyFactory.getTransformProperty(this, data, this),\r\n    },\r\n  };\r\n  return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.createShapeElement = function (data) {\r\n  var elementData = new CVShapeData(this, data, this.stylesList, this.transformsManager);\r\n\r\n  this.shapes.push(elementData);\r\n  this.addShapeToModifiers(elementData);\r\n  return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.reloadShapes = function () {\r\n  this._isFirstFrame = true;\r\n  var i;\r\n  var len = this.itemsData.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.prevViewData[i] = this.itemsData[i];\r\n  }\r\n  this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, true, []);\r\n  len = this.dynamicProperties.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.dynamicProperties[i].getValue();\r\n  }\r\n  this.renderModifiers();\r\n  this.transformsManager.processSequences(this._isFirstFrame);\r\n};\r\n\r\nCVShapeElement.prototype.addTransformToStyleList = function (transform) {\r\n  var i;\r\n  var len = this.stylesList.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (!this.stylesList[i].closed) {\r\n      this.stylesList[i].transforms.push(transform);\r\n    }\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.removeTransformFromStyleList = function () {\r\n  var i;\r\n  var len = this.stylesList.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (!this.stylesList[i].closed) {\r\n      this.stylesList[i].transforms.pop();\r\n    }\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.closeStyles = function (styles) {\r\n  var i;\r\n  var len = styles.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    styles[i].closed = true;\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.searchShapes = function (arr, itemsData, prevViewData, shouldRender, transforms) {\r\n  var i;\r\n  var len = arr.length - 1;\r\n  var j;\r\n  var jLen;\r\n  var ownStyles = [];\r\n  var ownModifiers = [];\r\n  var processedPos;\r\n  var modifier;\r\n  var currentTransform;\r\n  var ownTransforms = [].concat(transforms);\r\n  for (i = len; i >= 0; i -= 1) {\r\n    processedPos = this.searchProcessedElement(arr[i]);\r\n    if (!processedPos) {\r\n      arr[i]._shouldRender = shouldRender;\r\n    } else {\r\n      itemsData[i] = prevViewData[processedPos - 1];\r\n    }\r\n    if (arr[i].ty === 'fl' || arr[i].ty === 'st' || arr[i].ty === 'gf' || arr[i].ty === 'gs') {\r\n      if (!processedPos) {\r\n        itemsData[i] = this.createStyleElement(arr[i], ownTransforms);\r\n      } else {\r\n        itemsData[i].style.closed = false;\r\n      }\r\n\r\n      ownStyles.push(itemsData[i].style);\r\n    } else if (arr[i].ty === 'gr') {\r\n      if (!processedPos) {\r\n        itemsData[i] = this.createGroupElement(arr[i]);\r\n      } else {\r\n        jLen = itemsData[i].it.length;\r\n        for (j = 0; j < jLen; j += 1) {\r\n          itemsData[i].prevViewData[j] = itemsData[i].it[j];\r\n        }\r\n      }\r\n      this.searchShapes(arr[i].it, itemsData[i].it, itemsData[i].prevViewData, shouldRender, ownTransforms);\r\n    } else if (arr[i].ty === 'tr') {\r\n      if (!processedPos) {\r\n        currentTransform = this.createTransformElement(arr[i]);\r\n        itemsData[i] = currentTransform;\r\n      }\r\n      ownTransforms.push(itemsData[i]);\r\n      this.addTransformToStyleList(itemsData[i]);\r\n    } else if (arr[i].ty === 'sh' || arr[i].ty === 'rc' || arr[i].ty === 'el' || arr[i].ty === 'sr') {\r\n      if (!processedPos) {\r\n        itemsData[i] = this.createShapeElement(arr[i]);\r\n      }\r\n    } else if (arr[i].ty === 'tm' || arr[i].ty === 'rd' || arr[i].ty === 'pb' || arr[i].ty === 'zz' || arr[i].ty === 'op') {\r\n      if (!processedPos) {\r\n        modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n        modifier.init(this, arr[i]);\r\n        itemsData[i] = modifier;\r\n        this.shapeModifiers.push(modifier);\r\n      } else {\r\n        modifier = itemsData[i];\r\n        modifier.closed = false;\r\n      }\r\n      ownModifiers.push(modifier);\r\n    } else if (arr[i].ty === 'rp') {\r\n      if (!processedPos) {\r\n        modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n        itemsData[i] = modifier;\r\n        modifier.init(this, arr, i, itemsData);\r\n        this.shapeModifiers.push(modifier);\r\n        shouldRender = false;\r\n      } else {\r\n        modifier = itemsData[i];\r\n        modifier.closed = true;\r\n      }\r\n      ownModifiers.push(modifier);\r\n    }\r\n    this.addProcessedElement(arr[i], i + 1);\r\n  }\r\n  this.removeTransformFromStyleList();\r\n  this.closeStyles(ownStyles);\r\n  len = ownModifiers.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    ownModifiers[i].closed = true;\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.renderInnerContent = function () {\r\n  this.transformHelper.opacity = 1;\r\n  this.transformHelper._opMdf = false;\r\n  this.renderModifiers();\r\n  this.transformsManager.processSequences(this._isFirstFrame);\r\n  this.renderShape(this.transformHelper, this.shapesData, this.itemsData, true);\r\n};\r\n\r\nCVShapeElement.prototype.renderShapeTransform = function (parentTransform, groupTransform) {\r\n  if (parentTransform._opMdf || groupTransform.op._mdf || this._isFirstFrame) {\r\n    groupTransform.opacity = parentTransform.opacity;\r\n    groupTransform.opacity *= groupTransform.op.v;\r\n    groupTransform._opMdf = true;\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.drawLayer = function () {\r\n  var i;\r\n  var len = this.stylesList.length;\r\n  var j;\r\n  var jLen;\r\n  var k;\r\n  var kLen;\r\n  var elems;\r\n  var nodes;\r\n  var renderer = this.globalData.renderer;\r\n  var ctx = this.globalData.canvasContext;\r\n  var type;\r\n  var currentStyle;\r\n  for (i = 0; i < len; i += 1) {\r\n    currentStyle = this.stylesList[i];\r\n    type = currentStyle.type;\r\n\r\n    // Skipping style when\r\n    // Stroke width equals 0\r\n    // style should not be rendered (extra unused repeaters)\r\n    // current opacity equals 0\r\n    // global opacity equals 0\r\n    if (!(((type === 'st' || type === 'gs') && currentStyle.wi === 0) || !currentStyle.data._shouldRender || currentStyle.coOp === 0 || this.globalData.currentGlobalAlpha === 0)) {\r\n      renderer.save();\r\n      elems = currentStyle.elements;\r\n      if (type === 'st' || type === 'gs') {\r\n        renderer.ctxStrokeStyle(type === 'st' ? currentStyle.co : currentStyle.grd);\r\n        // ctx.strokeStyle = type === 'st' ? currentStyle.co : currentStyle.grd;\r\n        renderer.ctxLineWidth(currentStyle.wi);\r\n        // ctx.lineWidth = currentStyle.wi;\r\n        renderer.ctxLineCap(currentStyle.lc);\r\n        // ctx.lineCap = currentStyle.lc;\r\n        renderer.ctxLineJoin(currentStyle.lj);\r\n        // ctx.lineJoin = currentStyle.lj;\r\n        renderer.ctxMiterLimit(currentStyle.ml || 0);\r\n        // ctx.miterLimit = currentStyle.ml || 0;\r\n      } else {\r\n        renderer.ctxFillStyle(type === 'fl' ? currentStyle.co : currentStyle.grd);\r\n        // ctx.fillStyle = type === 'fl' ? currentStyle.co : currentStyle.grd;\r\n      }\r\n      renderer.ctxOpacity(currentStyle.coOp);\r\n      if (type !== 'st' && type !== 'gs') {\r\n        ctx.beginPath();\r\n      }\r\n      renderer.ctxTransform(currentStyle.preTransforms.finalTransform.props);\r\n      jLen = elems.length;\r\n      for (j = 0; j < jLen; j += 1) {\r\n        if (type === 'st' || type === 'gs') {\r\n          ctx.beginPath();\r\n          if (currentStyle.da) {\r\n            ctx.setLineDash(currentStyle.da);\r\n            ctx.lineDashOffset = currentStyle.do;\r\n          }\r\n        }\r\n        nodes = elems[j].trNodes;\r\n        kLen = nodes.length;\r\n\r\n        for (k = 0; k < kLen; k += 1) {\r\n          if (nodes[k].t === 'm') {\r\n            ctx.moveTo(nodes[k].p[0], nodes[k].p[1]);\r\n          } else if (nodes[k].t === 'c') {\r\n            ctx.bezierCurveTo(nodes[k].pts[0], nodes[k].pts[1], nodes[k].pts[2], nodes[k].pts[3], nodes[k].pts[4], nodes[k].pts[5]);\r\n          } else {\r\n            ctx.closePath();\r\n          }\r\n        }\r\n        if (type === 'st' || type === 'gs') {\r\n          // ctx.stroke();\r\n          renderer.ctxStroke();\r\n          if (currentStyle.da) {\r\n            ctx.setLineDash(this.dashResetter);\r\n          }\r\n        }\r\n      }\r\n      if (type !== 'st' && type !== 'gs') {\r\n        // ctx.fill(currentStyle.r);\r\n        this.globalData.renderer.ctxFill(currentStyle.r);\r\n      }\r\n      renderer.restore();\r\n    }\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.renderShape = function (parentTransform, items, data, isMain) {\r\n  var i;\r\n  var len = items.length - 1;\r\n  var groupTransform;\r\n  groupTransform = parentTransform;\r\n  for (i = len; i >= 0; i -= 1) {\r\n    if (items[i].ty === 'tr') {\r\n      groupTransform = data[i].transform;\r\n      this.renderShapeTransform(parentTransform, groupTransform);\r\n    } else if (items[i].ty === 'sh' || items[i].ty === 'el' || items[i].ty === 'rc' || items[i].ty === 'sr') {\r\n      this.renderPath(items[i], data[i]);\r\n    } else if (items[i].ty === 'fl') {\r\n      this.renderFill(items[i], data[i], groupTransform);\r\n    } else if (items[i].ty === 'st') {\r\n      this.renderStroke(items[i], data[i], groupTransform);\r\n    } else if (items[i].ty === 'gf' || items[i].ty === 'gs') {\r\n      this.renderGradientFill(items[i], data[i], groupTransform);\r\n    } else if (items[i].ty === 'gr') {\r\n      this.renderShape(groupTransform, items[i].it, data[i].it);\r\n    } else if (items[i].ty === 'tm') {\r\n      //\r\n    }\r\n  }\r\n  if (isMain) {\r\n    this.drawLayer();\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.renderStyledShape = function (styledShape, shape) {\r\n  if (this._isFirstFrame || shape._mdf || styledShape.transforms._mdf) {\r\n    var shapeNodes = styledShape.trNodes;\r\n    var paths = shape.paths;\r\n    var i;\r\n    var len;\r\n    var j;\r\n    var jLen = paths._length;\r\n    shapeNodes.length = 0;\r\n    var groupTransformMat = styledShape.transforms.finalTransform;\r\n    for (j = 0; j < jLen; j += 1) {\r\n      var pathNodes = paths.shapes[j];\r\n      if (pathNodes && pathNodes.v) {\r\n        len = pathNodes._length;\r\n        for (i = 1; i < len; i += 1) {\r\n          if (i === 1) {\r\n            shapeNodes.push({\r\n              t: 'm',\r\n              p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0),\r\n            });\r\n          }\r\n          shapeNodes.push({\r\n            t: 'c',\r\n            pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[i], pathNodes.v[i]),\r\n          });\r\n        }\r\n        if (len === 1) {\r\n          shapeNodes.push({\r\n            t: 'm',\r\n            p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0),\r\n          });\r\n        }\r\n        if (pathNodes.c && len) {\r\n          shapeNodes.push({\r\n            t: 'c',\r\n            pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[0], pathNodes.v[0]),\r\n          });\r\n          shapeNodes.push({\r\n            t: 'z',\r\n          });\r\n        }\r\n      }\r\n    }\r\n    styledShape.trNodes = shapeNodes;\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.renderPath = function (pathData, itemData) {\r\n  if (pathData.hd !== true && pathData._shouldRender) {\r\n    var i;\r\n    var len = itemData.styledShapes.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      this.renderStyledShape(itemData.styledShapes[i], itemData.sh);\r\n    }\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.renderFill = function (styleData, itemData, groupTransform) {\r\n  var styleElem = itemData.style;\r\n\r\n  if (itemData.c._mdf || this._isFirstFrame) {\r\n    styleElem.co = 'rgb('\r\n        + bmFloor(itemData.c.v[0]) + ','\r\n        + bmFloor(itemData.c.v[1]) + ','\r\n        + bmFloor(itemData.c.v[2]) + ')';\r\n  }\r\n  if (itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame) {\r\n    styleElem.coOp = itemData.o.v * groupTransform.opacity;\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.renderGradientFill = function (styleData, itemData, groupTransform) {\r\n  var styleElem = itemData.style;\r\n  var grd;\r\n  if (!styleElem.grd || itemData.g._mdf || itemData.s._mdf || itemData.e._mdf || (styleData.t !== 1 && (itemData.h._mdf || itemData.a._mdf))) {\r\n    var ctx = this.globalData.canvasContext;\r\n    var pt1 = itemData.s.v;\r\n    var pt2 = itemData.e.v;\r\n    if (styleData.t === 1) {\r\n      grd = ctx.createLinearGradient(pt1[0], pt1[1], pt2[0], pt2[1]);\r\n    } else {\r\n      var rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n      var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\r\n\r\n      var percent = itemData.h.v;\r\n      if (percent >= 1) {\r\n        percent = 0.99;\r\n      } else if (percent <= -1) {\r\n        percent = -0.99;\r\n      }\r\n      var dist = rad * percent;\r\n      var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\r\n      var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\r\n      grd = ctx.createRadialGradient(x, y, 0, pt1[0], pt1[1], rad);\r\n    }\r\n\r\n    var i;\r\n    var len = styleData.g.p;\r\n    var cValues = itemData.g.c;\r\n    var opacity = 1;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (itemData.g._hasOpacity && itemData.g._collapsable) {\r\n        opacity = itemData.g.o[i * 2 + 1];\r\n      }\r\n      grd.addColorStop(cValues[i * 4] / 100, 'rgba(' + cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ',' + cValues[i * 4 + 3] + ',' + opacity + ')');\r\n    }\r\n    styleElem.grd = grd;\r\n  }\r\n  styleElem.coOp = itemData.o.v * groupTransform.opacity;\r\n};\r\n\r\nCVShapeElement.prototype.renderStroke = function (styleData, itemData, groupTransform) {\r\n  var styleElem = itemData.style;\r\n  var d = itemData.d;\r\n  if (d && (d._mdf || this._isFirstFrame)) {\r\n    styleElem.da = d.dashArray;\r\n    styleElem.do = d.dashoffset[0];\r\n  }\r\n  if (itemData.c._mdf || this._isFirstFrame) {\r\n    styleElem.co = 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')';\r\n  }\r\n  if (itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame) {\r\n    styleElem.coOp = itemData.o.v * groupTransform.opacity;\r\n  }\r\n  if (itemData.w._mdf || this._isFirstFrame) {\r\n    styleElem.wi = itemData.w.v;\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.destroy = function () {\r\n  this.shapesData = null;\r\n  this.globalData = null;\r\n  this.canvasContext = null;\r\n  this.stylesList.length = 0;\r\n  this.itemsData.length = 0;\r\n};\n\nfunction CVTextElement(data, globalData, comp) {\r\n  this.textSpans = [];\r\n  this.yOffset = 0;\r\n  this.fillColorAnim = false;\r\n  this.strokeColorAnim = false;\r\n  this.strokeWidthAnim = false;\r\n  this.stroke = false;\r\n  this.fill = false;\r\n  this.justifyOffset = 0;\r\n  this.currentRender = null;\r\n  this.renderType = 'canvas';\r\n  this.values = {\r\n    fill: 'rgba(0,0,0,0)',\r\n    stroke: 'rgba(0,0,0,0)',\r\n    sWidth: 0,\r\n    fValue: '',\r\n  };\r\n  this.initElement(data, globalData, comp);\r\n}\r\nextendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement, ITextElement], CVTextElement);\r\n\r\nCVTextElement.prototype.tHelper = createTag('canvas').getContext('2d');\r\n\r\nCVTextElement.prototype.buildNewText = function () {\r\n  var documentData = this.textProperty.currentData;\r\n  this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\r\n\r\n  var hasFill = false;\r\n  if (documentData.fc) {\r\n    hasFill = true;\r\n    this.values.fill = this.buildColor(documentData.fc);\r\n  } else {\r\n    this.values.fill = 'rgba(0,0,0,0)';\r\n  }\r\n  this.fill = hasFill;\r\n  var hasStroke = false;\r\n  if (documentData.sc) {\r\n    hasStroke = true;\r\n    this.values.stroke = this.buildColor(documentData.sc);\r\n    this.values.sWidth = documentData.sw;\r\n  }\r\n  var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n  var i;\r\n  var len;\r\n  var letters = documentData.l;\r\n  var matrixHelper = this.mHelper;\r\n  this.stroke = hasStroke;\r\n  this.values.fValue = documentData.finalSize + 'px ' + this.globalData.fontManager.getFontByName(documentData.f).fFamily;\r\n  len = documentData.finalText.length;\r\n  // this.tHelper.font = this.values.fValue;\r\n  var charData;\r\n  var shapeData;\r\n  var k;\r\n  var kLen;\r\n  var shapes;\r\n  var j;\r\n  var jLen;\r\n  var pathNodes;\r\n  var commands;\r\n  var pathArr;\r\n  var singleShape = this.data.singleShape;\r\n  var trackingOffset = documentData.tr * 0.001 * documentData.finalSize;\r\n  var xPos = 0;\r\n  var yPos = 0;\r\n  var firstLine = true;\r\n  var cnt = 0;\r\n  for (i = 0; i < len; i += 1) {\r\n    charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n    shapeData = (charData && charData.data) || {};\r\n    matrixHelper.reset();\r\n    if (singleShape && letters[i].n) {\r\n      xPos = -trackingOffset;\r\n      yPos += documentData.yOffset;\r\n      yPos += firstLine ? 1 : 0;\r\n      firstLine = false;\r\n    }\r\n    shapes = shapeData.shapes ? shapeData.shapes[0].it : [];\r\n    jLen = shapes.length;\r\n    matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\r\n    if (singleShape) {\r\n      this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\r\n    }\r\n    commands = createSizedArray(jLen - 1);\r\n    var commandsCounter = 0;\r\n    for (j = 0; j < jLen; j += 1) {\r\n      if (shapes[j].ty === 'sh') {\r\n        kLen = shapes[j].ks.k.i.length;\r\n        pathNodes = shapes[j].ks.k;\r\n        pathArr = [];\r\n        for (k = 1; k < kLen; k += 1) {\r\n          if (k === 1) {\r\n            pathArr.push(matrixHelper.applyToX(pathNodes.v[0][0], pathNodes.v[0][1], 0), matrixHelper.applyToY(pathNodes.v[0][0], pathNodes.v[0][1], 0));\r\n          }\r\n          pathArr.push(matrixHelper.applyToX(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToY(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToX(pathNodes.i[k][0], pathNodes.i[k][1], 0), matrixHelper.applyToY(pathNodes.i[k][0], pathNodes.i[k][1], 0), matrixHelper.applyToX(pathNodes.v[k][0], pathNodes.v[k][1], 0), matrixHelper.applyToY(pathNodes.v[k][0], pathNodes.v[k][1], 0));\r\n        }\r\n        pathArr.push(matrixHelper.applyToX(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToY(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToX(pathNodes.i[0][0], pathNodes.i[0][1], 0), matrixHelper.applyToY(pathNodes.i[0][0], pathNodes.i[0][1], 0), matrixHelper.applyToX(pathNodes.v[0][0], pathNodes.v[0][1], 0), matrixHelper.applyToY(pathNodes.v[0][0], pathNodes.v[0][1], 0));\r\n        commands[commandsCounter] = pathArr;\r\n        commandsCounter += 1;\r\n      }\r\n    }\r\n    if (singleShape) {\r\n      xPos += letters[i].l;\r\n      xPos += trackingOffset;\r\n    }\r\n    if (this.textSpans[cnt]) {\r\n      this.textSpans[cnt].elem = commands;\r\n    } else {\r\n      this.textSpans[cnt] = { elem: commands };\r\n    }\r\n    cnt += 1;\r\n  }\r\n};\r\n\r\nCVTextElement.prototype.renderInnerContent = function () {\r\n  this.validateText();\r\n  var ctx = this.canvasContext;\r\n  ctx.font = this.values.fValue;\r\n  this.globalData.renderer.ctxLineCap('butt');\r\n  // ctx.lineCap = 'butt';\r\n  this.globalData.renderer.ctxLineJoin('miter');\r\n  // ctx.lineJoin = 'miter';\r\n  this.globalData.renderer.ctxMiterLimit(4);\r\n  // ctx.miterLimit = 4;\r\n\r\n  if (!this.data.singleShape) {\r\n    this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n  }\r\n\r\n  var i;\r\n  var len;\r\n  var j;\r\n  var jLen;\r\n  var k;\r\n  var kLen;\r\n  var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n  var letters = this.textProperty.currentData.l;\r\n\r\n  len = letters.length;\r\n  var renderedLetter;\r\n  var lastFill = null;\r\n  var lastStroke = null;\r\n  var lastStrokeW = null;\r\n  var commands;\r\n  var pathArr;\r\n  var renderer = this.globalData.renderer;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (!letters[i].n) {\r\n      renderedLetter = renderedLetters[i];\r\n      if (renderedLetter) {\r\n        renderer.save();\r\n        renderer.ctxTransform(renderedLetter.p);\r\n        renderer.ctxOpacity(renderedLetter.o);\r\n      }\r\n      if (this.fill) {\r\n        if (renderedLetter && renderedLetter.fc) {\r\n          if (lastFill !== renderedLetter.fc) {\r\n            renderer.ctxFillStyle(renderedLetter.fc);\r\n            lastFill = renderedLetter.fc;\r\n            // ctx.fillStyle = renderedLetter.fc;\r\n          }\r\n        } else if (lastFill !== this.values.fill) {\r\n          lastFill = this.values.fill;\r\n          renderer.ctxFillStyle(this.values.fill);\r\n          // ctx.fillStyle = this.values.fill;\r\n        }\r\n        commands = this.textSpans[i].elem;\r\n        jLen = commands.length;\r\n        this.globalData.canvasContext.beginPath();\r\n        for (j = 0; j < jLen; j += 1) {\r\n          pathArr = commands[j];\r\n          kLen = pathArr.length;\r\n          this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\r\n          for (k = 2; k < kLen; k += 6) {\r\n            this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\r\n          }\r\n        }\r\n        this.globalData.canvasContext.closePath();\r\n        renderer.ctxFill();\r\n        // this.globalData.canvasContext.fill();\r\n        /// ctx.fillText(this.textSpans[i].val,0,0);\r\n      }\r\n      if (this.stroke) {\r\n        if (renderedLetter && renderedLetter.sw) {\r\n          if (lastStrokeW !== renderedLetter.sw) {\r\n            lastStrokeW = renderedLetter.sw;\r\n            renderer.ctxLineWidth(renderedLetter.sw);\r\n            // ctx.lineWidth = renderedLetter.sw;\r\n          }\r\n        } else if (lastStrokeW !== this.values.sWidth) {\r\n          lastStrokeW = this.values.sWidth;\r\n          renderer.ctxLineWidth(this.values.sWidth);\r\n          // ctx.lineWidth = this.values.sWidth;\r\n        }\r\n        if (renderedLetter && renderedLetter.sc) {\r\n          if (lastStroke !== renderedLetter.sc) {\r\n            lastStroke = renderedLetter.sc;\r\n            renderer.ctxStrokeStyle(renderedLetter.sc);\r\n            // ctx.strokeStyle = renderedLetter.sc;\r\n          }\r\n        } else if (lastStroke !== this.values.stroke) {\r\n          lastStroke = this.values.stroke;\r\n          renderer.ctxStrokeStyle(this.values.stroke);\r\n          // ctx.strokeStyle = this.values.stroke;\r\n        }\r\n        commands = this.textSpans[i].elem;\r\n        jLen = commands.length;\r\n        this.globalData.canvasContext.beginPath();\r\n        for (j = 0; j < jLen; j += 1) {\r\n          pathArr = commands[j];\r\n          kLen = pathArr.length;\r\n          this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\r\n          for (k = 2; k < kLen; k += 6) {\r\n            this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\r\n          }\r\n        }\r\n        this.globalData.canvasContext.closePath();\r\n        renderer.ctxStroke();\r\n        // this.globalData.canvasContext.stroke();\r\n        /// ctx.strokeText(letters[i].val,0,0);\r\n      }\r\n      if (renderedLetter) {\r\n        this.globalData.renderer.restore();\r\n      }\r\n    }\r\n  }\r\n};\n\nfunction CVImageElement(data, globalData, comp) {\r\n  this.assetData = globalData.getAssetData(data.refId);\r\n  this.img = globalData.imageLoader.getAsset(this.assetData);\r\n  this.initElement(data, globalData, comp);\r\n}\r\nextendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVImageElement);\r\n\r\nCVImageElement.prototype.initElement = SVGShapeElement.prototype.initElement;\r\nCVImageElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\r\n\r\nCVImageElement.prototype.createContent = function () {\r\n  if (this.img.width && (this.assetData.w !== this.img.width || this.assetData.h !== this.img.height)) {\r\n    var canvas = createTag('canvas');\r\n    canvas.width = this.assetData.w;\r\n    canvas.height = this.assetData.h;\r\n    var ctx = canvas.getContext('2d');\r\n\r\n    var imgW = this.img.width;\r\n    var imgH = this.img.height;\r\n    var imgRel = imgW / imgH;\r\n    var canvasRel = this.assetData.w / this.assetData.h;\r\n    var widthCrop;\r\n    var heightCrop;\r\n    var par = this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio;\r\n    if ((imgRel > canvasRel && par === 'xMidYMid slice') || (imgRel < canvasRel && par !== 'xMidYMid slice')) {\r\n      heightCrop = imgH;\r\n      widthCrop = heightCrop * canvasRel;\r\n    } else {\r\n      widthCrop = imgW;\r\n      heightCrop = widthCrop / canvasRel;\r\n    }\r\n    ctx.drawImage(this.img, (imgW - widthCrop) / 2, (imgH - heightCrop) / 2, widthCrop, heightCrop, 0, 0, this.assetData.w, this.assetData.h);\r\n    this.img = canvas;\r\n  }\r\n};\r\n\r\nCVImageElement.prototype.renderInnerContent = function () {\r\n  this.canvasContext.drawImage(this.img, 0, 0);\r\n};\r\n\r\nCVImageElement.prototype.destroy = function () {\r\n  this.img = null;\r\n};\n\nfunction CVSolidElement(data, globalData, comp) {\r\n  this.initElement(data, globalData, comp);\r\n}\r\nextendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVSolidElement);\r\n\r\nCVSolidElement.prototype.initElement = SVGShapeElement.prototype.initElement;\r\nCVSolidElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\r\n\r\nCVSolidElement.prototype.renderInnerContent = function () {\r\n  // var ctx = this.canvasContext;\r\n  this.globalData.renderer.ctxFillStyle(this.data.sc);\r\n  // ctx.fillStyle = this.data.sc;\r\n  this.globalData.renderer.ctxFillRect(0, 0, this.data.sw, this.data.sh);\r\n  // ctx.fillRect(0, 0, this.data.sw, this.data.sh);\r\n  //\r\n};\n\nfunction CanvasRendererBase() {\r\n}\r\nextendPrototype([BaseRenderer], CanvasRendererBase);\r\n\r\nCanvasRendererBase.prototype.createShape = function (data) {\r\n  return new CVShapeElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRendererBase.prototype.createText = function (data) {\r\n  return new CVTextElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRendererBase.prototype.createImage = function (data) {\r\n  return new CVImageElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRendererBase.prototype.createSolid = function (data) {\r\n  return new CVSolidElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRendererBase.prototype.createNull = SVGRenderer.prototype.createNull;\r\n\r\nCanvasRendererBase.prototype.ctxTransform = function (props) {\r\n  if (props[0] === 1 && props[1] === 0 && props[4] === 0 && props[5] === 1 && props[12] === 0 && props[13] === 0) {\r\n    return;\r\n  }\r\n  this.canvasContext.transform(props[0], props[1], props[4], props[5], props[12], props[13]);\r\n};\r\n\r\nCanvasRendererBase.prototype.ctxOpacity = function (op) {\r\n  this.canvasContext.globalAlpha *= op < 0 ? 0 : op;\r\n};\r\n\r\nCanvasRendererBase.prototype.ctxFillStyle = function (value) {\r\n  this.canvasContext.fillStyle = value;\r\n};\r\n\r\nCanvasRendererBase.prototype.ctxStrokeStyle = function (value) {\r\n  this.canvasContext.strokeStyle = value;\r\n};\r\n\r\nCanvasRendererBase.prototype.ctxLineWidth = function (value) {\r\n  this.canvasContext.lineWidth = value;\r\n};\r\n\r\nCanvasRendererBase.prototype.ctxLineCap = function (value) {\r\n  this.canvasContext.lineCap = value;\r\n};\r\n\r\nCanvasRendererBase.prototype.ctxLineJoin = function (value) {\r\n  this.canvasContext.lineJoin = value;\r\n};\r\n\r\nCanvasRendererBase.prototype.ctxMiterLimit = function (value) {\r\n  this.canvasContext.miterLimit = value;\r\n};\r\n\r\nCanvasRendererBase.prototype.ctxFill = function (rule) {\r\n  this.canvasContext.fill(rule);\r\n};\r\n\r\nCanvasRendererBase.prototype.ctxFillRect = function (x, y, w, h) {\r\n  this.canvasContext.fillRect(x, y, w, h);\r\n};\r\n\r\nCanvasRendererBase.prototype.ctxStroke = function () {\r\n  this.canvasContext.stroke();\r\n};\r\n\r\nCanvasRendererBase.prototype.reset = function () {\r\n  if (!this.renderConfig.clearCanvas) {\r\n    this.canvasContext.restore();\r\n    return;\r\n  }\r\n  this.contextData.reset();\r\n};\r\n\r\nCanvasRendererBase.prototype.save = function () {\r\n  this.canvasContext.save();\r\n};\r\n\r\nCanvasRendererBase.prototype.restore = function (actionFlag) {\r\n  if (!this.renderConfig.clearCanvas) {\r\n    this.canvasContext.restore();\r\n    return;\r\n  }\r\n  if (actionFlag) {\r\n    this.globalData.blendMode = 'source-over';\r\n  }\r\n  this.contextData.restore(actionFlag);\r\n};\r\n\r\nCanvasRendererBase.prototype.configAnimation = function (animData) {\r\n  if (this.animationItem.wrapper) {\r\n    this.animationItem.container = createTag('canvas');\r\n    var containerStyle = this.animationItem.container.style;\r\n    containerStyle.width = '100%';\r\n    containerStyle.height = '100%';\r\n    var origin = '0px 0px 0px';\r\n    containerStyle.transformOrigin = origin;\r\n    containerStyle.mozTransformOrigin = origin;\r\n    containerStyle.webkitTransformOrigin = origin;\r\n    containerStyle['-webkit-transform'] = origin;\r\n    containerStyle.contentVisibility = this.renderConfig.contentVisibility;\r\n    this.animationItem.wrapper.appendChild(this.animationItem.container);\r\n    this.canvasContext = this.animationItem.container.getContext('2d');\r\n    if (this.renderConfig.className) {\r\n      this.animationItem.container.setAttribute('class', this.renderConfig.className);\r\n    }\r\n    if (this.renderConfig.id) {\r\n      this.animationItem.container.setAttribute('id', this.renderConfig.id);\r\n    }\r\n  } else {\r\n    this.canvasContext = this.renderConfig.context;\r\n  }\r\n  this.contextData.setContext(this.canvasContext);\r\n  this.data = animData;\r\n  this.layers = animData.layers;\r\n  this.transformCanvas = {\r\n    w: animData.w,\r\n    h: animData.h,\r\n    sx: 0,\r\n    sy: 0,\r\n    tx: 0,\r\n    ty: 0,\r\n  };\r\n  this.setupGlobalData(animData, document.body);\r\n  this.globalData.canvasContext = this.canvasContext;\r\n  this.globalData.renderer = this;\r\n  this.globalData.isDashed = false;\r\n  this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\r\n  this.globalData.transformCanvas = this.transformCanvas;\r\n  this.elements = createSizedArray(animData.layers.length);\r\n\r\n  this.updateContainerSize();\r\n};\r\n\r\nCanvasRendererBase.prototype.updateContainerSize = function (width, height) {\r\n  this.reset();\r\n  var elementWidth;\r\n  var elementHeight;\r\n  if (width) {\r\n    elementWidth = width;\r\n    elementHeight = height;\r\n    this.canvasContext.canvas.width = elementWidth;\r\n    this.canvasContext.canvas.height = elementHeight;\r\n  } else {\r\n    if (this.animationItem.wrapper && this.animationItem.container) {\r\n      elementWidth = this.animationItem.wrapper.offsetWidth;\r\n      elementHeight = this.animationItem.wrapper.offsetHeight;\r\n    } else {\r\n      elementWidth = this.canvasContext.canvas.width;\r\n      elementHeight = this.canvasContext.canvas.height;\r\n    }\r\n    this.canvasContext.canvas.width = elementWidth * this.renderConfig.dpr;\r\n    this.canvasContext.canvas.height = elementHeight * this.renderConfig.dpr;\r\n  }\r\n\r\n  var elementRel;\r\n  var animationRel;\r\n  if (this.renderConfig.preserveAspectRatio.indexOf('meet') !== -1 || this.renderConfig.preserveAspectRatio.indexOf('slice') !== -1) {\r\n    var par = this.renderConfig.preserveAspectRatio.split(' ');\r\n    var fillType = par[1] || 'meet';\r\n    var pos = par[0] || 'xMidYMid';\r\n    var xPos = pos.substr(0, 4);\r\n    var yPos = pos.substr(4);\r\n    elementRel = elementWidth / elementHeight;\r\n    animationRel = this.transformCanvas.w / this.transformCanvas.h;\r\n    if ((animationRel > elementRel && fillType === 'meet') || (animationRel < elementRel && fillType === 'slice')) {\r\n      this.transformCanvas.sx = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\r\n      this.transformCanvas.sy = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\r\n    } else {\r\n      this.transformCanvas.sx = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\r\n      this.transformCanvas.sy = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\r\n    }\r\n\r\n    if (xPos === 'xMid' && ((animationRel < elementRel && fillType === 'meet') || (animationRel > elementRel && fillType === 'slice'))) {\r\n      this.transformCanvas.tx = ((elementWidth - this.transformCanvas.w * (elementHeight / this.transformCanvas.h)) / 2) * this.renderConfig.dpr;\r\n    } else if (xPos === 'xMax' && ((animationRel < elementRel && fillType === 'meet') || (animationRel > elementRel && fillType === 'slice'))) {\r\n      this.transformCanvas.tx = (elementWidth - this.transformCanvas.w * (elementHeight / this.transformCanvas.h)) * this.renderConfig.dpr;\r\n    } else {\r\n      this.transformCanvas.tx = 0;\r\n    }\r\n    if (yPos === 'YMid' && ((animationRel > elementRel && fillType === 'meet') || (animationRel < elementRel && fillType === 'slice'))) {\r\n      this.transformCanvas.ty = ((elementHeight - this.transformCanvas.h * (elementWidth / this.transformCanvas.w)) / 2) * this.renderConfig.dpr;\r\n    } else if (yPos === 'YMax' && ((animationRel > elementRel && fillType === 'meet') || (animationRel < elementRel && fillType === 'slice'))) {\r\n      this.transformCanvas.ty = ((elementHeight - this.transformCanvas.h * (elementWidth / this.transformCanvas.w))) * this.renderConfig.dpr;\r\n    } else {\r\n      this.transformCanvas.ty = 0;\r\n    }\r\n  } else if (this.renderConfig.preserveAspectRatio === 'none') {\r\n    this.transformCanvas.sx = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\r\n    this.transformCanvas.sy = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\r\n    this.transformCanvas.tx = 0;\r\n    this.transformCanvas.ty = 0;\r\n  } else {\r\n    this.transformCanvas.sx = this.renderConfig.dpr;\r\n    this.transformCanvas.sy = this.renderConfig.dpr;\r\n    this.transformCanvas.tx = 0;\r\n    this.transformCanvas.ty = 0;\r\n  }\r\n  this.transformCanvas.props = [this.transformCanvas.sx, 0, 0, 0, 0, this.transformCanvas.sy, 0, 0, 0, 0, 1, 0, this.transformCanvas.tx, this.transformCanvas.ty, 0, 1];\r\n  /* var i, len = this.elements.length;\r\n    for(i=0;i<len;i+=1){\r\n        if(this.elements[i] && this.elements[i].data.ty === 0){\r\n            this.elements[i].resize(this.globalData.transformCanvas);\r\n        }\r\n    } */\r\n  this.ctxTransform(this.transformCanvas.props);\r\n  this.canvasContext.beginPath();\r\n  this.canvasContext.rect(0, 0, this.transformCanvas.w, this.transformCanvas.h);\r\n  this.canvasContext.closePath();\r\n  this.canvasContext.clip();\r\n\r\n  this.renderFrame(this.renderedFrame, true);\r\n};\r\n\r\nCanvasRendererBase.prototype.destroy = function () {\r\n  if (this.renderConfig.clearCanvas && this.animationItem.wrapper) {\r\n    this.animationItem.wrapper.innerText = '';\r\n  }\r\n  var i;\r\n  var len = this.layers ? this.layers.length : 0;\r\n  for (i = len - 1; i >= 0; i -= 1) {\r\n    if (this.elements[i] && this.elements[i].destroy) {\r\n      this.elements[i].destroy();\r\n    }\r\n  }\r\n  this.elements.length = 0;\r\n  this.globalData.canvasContext = null;\r\n  this.animationItem.container = null;\r\n  this.destroyed = true;\r\n};\r\n\r\nCanvasRendererBase.prototype.renderFrame = function (num, forceRender) {\r\n  if ((this.renderedFrame === num && this.renderConfig.clearCanvas === true && !forceRender) || this.destroyed || num === -1) {\r\n    return;\r\n  }\r\n  this.renderedFrame = num;\r\n  this.globalData.frameNum = num - this.animationItem._isFirstFrame;\r\n  this.globalData.frameId += 1;\r\n  this.globalData._mdf = !this.renderConfig.clearCanvas || forceRender;\r\n  this.globalData.projectInterface.currentFrame = num;\r\n\r\n  // console.log('--------');\r\n  // console.log('NEW: ',num);\r\n  var i;\r\n  var len = this.layers.length;\r\n  if (!this.completeLayers) {\r\n    this.checkLayers(num);\r\n  }\r\n\r\n  for (i = len - 1; i >= 0; i -= 1) {\r\n    if (this.completeLayers || this.elements[i]) {\r\n      this.elements[i].prepareFrame(num - this.layers[i].st);\r\n    }\r\n  }\r\n  if (this.globalData._mdf) {\r\n    if (this.renderConfig.clearCanvas === true) {\r\n      this.canvasContext.clearRect(0, 0, this.transformCanvas.w, this.transformCanvas.h);\r\n    } else {\r\n      this.save();\r\n    }\r\n    for (i = len - 1; i >= 0; i -= 1) {\r\n      if (this.completeLayers || this.elements[i]) {\r\n        this.elements[i].renderFrame();\r\n      }\r\n    }\r\n    if (this.renderConfig.clearCanvas !== true) {\r\n      this.restore();\r\n    }\r\n  }\r\n};\r\n\r\nCanvasRendererBase.prototype.buildItem = function (pos) {\r\n  var elements = this.elements;\r\n  if (elements[pos] || this.layers[pos].ty === 99) {\r\n    return;\r\n  }\r\n  var element = this.createItem(this.layers[pos], this, this.globalData);\r\n  elements[pos] = element;\r\n  element.initExpressions();\r\n  /* if(this.layers[pos].ty === 0){\r\n        element.resize(this.globalData.transformCanvas);\r\n    } */\r\n};\r\n\r\nCanvasRendererBase.prototype.checkPendingElements = function () {\r\n  while (this.pendingElements.length) {\r\n    var element = this.pendingElements.pop();\r\n    element.checkParenting();\r\n  }\r\n};\r\n\r\nCanvasRendererBase.prototype.hide = function () {\r\n  this.animationItem.container.style.display = 'none';\r\n};\r\n\r\nCanvasRendererBase.prototype.show = function () {\r\n  this.animationItem.container.style.display = 'block';\r\n};\n\nfunction CanvasContext() {\r\n  this.opacity = -1;\r\n  this.transform = createTypedArray('float32', 16);\r\n  this.fillStyle = '';\r\n  this.strokeStyle = '';\r\n  this.lineWidth = '';\r\n  this.lineCap = '';\r\n  this.lineJoin = '';\r\n  this.miterLimit = '';\r\n  this.id = Math.random();\r\n}\r\n\r\nfunction CVContextData() {\r\n  this.stack = [];\r\n  this.cArrPos = 0;\r\n  this.cTr = new Matrix();\r\n  var i;\r\n  var len = 15;\r\n  for (i = 0; i < len; i += 1) {\r\n    var canvasContext = new CanvasContext();\r\n    this.stack[i] = canvasContext;\r\n  }\r\n  this._length = len;\r\n  this.nativeContext = null;\r\n  this.transformMat = new Matrix();\r\n  this.currentOpacity = 1;\r\n  //\r\n  this.currentFillStyle = '';\r\n  this.appliedFillStyle = '';\r\n  //\r\n  this.currentStrokeStyle = '';\r\n  this.appliedStrokeStyle = '';\r\n  //\r\n  this.currentLineWidth = '';\r\n  this.appliedLineWidth = '';\r\n  //\r\n  this.currentLineCap = '';\r\n  this.appliedLineCap = '';\r\n  //\r\n  this.currentLineJoin = '';\r\n  this.appliedLineJoin = '';\r\n  //\r\n  this.appliedMiterLimit = '';\r\n  this.currentMiterLimit = '';\r\n}\r\n\r\nCVContextData.prototype.duplicate = function () {\r\n  var newLength = this._length * 2;\r\n  var i = 0;\r\n  for (i = this._length; i < newLength; i += 1) {\r\n    this.stack[i] = new CanvasContext();\r\n  }\r\n  this._length = newLength;\r\n};\r\n\r\nCVContextData.prototype.reset = function () {\r\n  this.cArrPos = 0;\r\n  this.cTr.reset();\r\n  this.stack[this.cArrPos].opacity = 1;\r\n};\r\n\r\nCVContextData.prototype.restore = function (forceRestore) {\r\n  this.cArrPos -= 1;\r\n  var currentContext = this.stack[this.cArrPos];\r\n  var transform = currentContext.transform;\r\n  var i;\r\n  var arr = this.cTr.props;\r\n  for (i = 0; i < 16; i += 1) {\r\n    arr[i] = transform[i];\r\n  }\r\n  if (forceRestore) {\r\n    this.nativeContext.restore();\r\n    var prevStack = this.stack[this.cArrPos + 1];\r\n    this.appliedFillStyle = prevStack.fillStyle;\r\n    this.appliedStrokeStyle = prevStack.strokeStyle;\r\n    this.appliedLineWidth = prevStack.lineWidth;\r\n    this.appliedLineCap = prevStack.lineCap;\r\n    this.appliedLineJoin = prevStack.lineJoin;\r\n    this.appliedMiterLimit = prevStack.miterLimit;\r\n  }\r\n  this.nativeContext.setTransform(transform[0], transform[1], transform[4], transform[5], transform[12], transform[13]);\r\n  if (forceRestore || (currentContext.opacity !== -1 && this.currentOpacity !== currentContext.opacity)) {\r\n    this.nativeContext.globalAlpha = currentContext.opacity;\r\n    this.currentOpacity = currentContext.opacity;\r\n  }\r\n  this.currentFillStyle = currentContext.fillStyle;\r\n  this.currentStrokeStyle = currentContext.strokeStyle;\r\n  this.currentLineWidth = currentContext.lineWidth;\r\n  this.currentLineCap = currentContext.lineCap;\r\n  this.currentLineJoin = currentContext.lineJoin;\r\n  this.currentMiterLimit = currentContext.miterLimit;\r\n};\r\n\r\nCVContextData.prototype.save = function (saveOnNativeFlag) {\r\n  if (saveOnNativeFlag) {\r\n    this.nativeContext.save();\r\n  }\r\n  var props = this.cTr.props;\r\n  if (this._length <= this.cArrPos) {\r\n    this.duplicate();\r\n  }\r\n\r\n  var currentStack = this.stack[this.cArrPos];\r\n  var i;\r\n  for (i = 0; i < 16; i += 1) {\r\n    currentStack.transform[i] = props[i];\r\n  }\r\n  this.cArrPos += 1;\r\n  var newStack = this.stack[this.cArrPos];\r\n  newStack.opacity = currentStack.opacity;\r\n  newStack.fillStyle = currentStack.fillStyle;\r\n  newStack.strokeStyle = currentStack.strokeStyle;\r\n  newStack.lineWidth = currentStack.lineWidth;\r\n  newStack.lineCap = currentStack.lineCap;\r\n  newStack.lineJoin = currentStack.lineJoin;\r\n  newStack.miterLimit = currentStack.miterLimit;\r\n};\r\n\r\nCVContextData.prototype.setOpacity = function (value) {\r\n  this.stack[this.cArrPos].opacity = value;\r\n};\r\n\r\nCVContextData.prototype.setContext = function (value) {\r\n  this.nativeContext = value;\r\n};\r\n\r\nCVContextData.prototype.fillStyle = function (value) {\r\n  if (this.stack[this.cArrPos].fillStyle !== value) {\r\n    this.currentFillStyle = value;\r\n    this.stack[this.cArrPos].fillStyle = value;\r\n  }\r\n};\r\n\r\nCVContextData.prototype.strokeStyle = function (value) {\r\n  if (this.stack[this.cArrPos].strokeStyle !== value) {\r\n    this.currentStrokeStyle = value;\r\n    this.stack[this.cArrPos].strokeStyle = value;\r\n  }\r\n};\r\n\r\nCVContextData.prototype.lineWidth = function (value) {\r\n  if (this.stack[this.cArrPos].lineWidth !== value) {\r\n    this.currentLineWidth = value;\r\n    this.stack[this.cArrPos].lineWidth = value;\r\n  }\r\n};\r\n\r\nCVContextData.prototype.lineCap = function (value) {\r\n  if (this.stack[this.cArrPos].lineCap !== value) {\r\n    this.currentLineCap = value;\r\n    this.stack[this.cArrPos].lineCap = value;\r\n  }\r\n};\r\n\r\nCVContextData.prototype.lineJoin = function (value) {\r\n  if (this.stack[this.cArrPos].lineJoin !== value) {\r\n    this.currentLineJoin = value;\r\n    this.stack[this.cArrPos].lineJoin = value;\r\n  }\r\n};\r\n\r\nCVContextData.prototype.miterLimit = function (value) {\r\n  if (this.stack[this.cArrPos].miterLimit !== value) {\r\n    this.currentMiterLimit = value;\r\n    this.stack[this.cArrPos].miterLimit = value;\r\n  }\r\n};\r\n\r\nCVContextData.prototype.transform = function (props) {\r\n  this.transformMat.cloneFromProps(props);\r\n  // Taking the last transform value from the stored stack of transforms\r\n  var currentTransform = this.cTr;\r\n  // Applying the last transform value after the new transform to respect the order of transformations\r\n  this.transformMat.multiply(currentTransform);\r\n  // Storing the new transformed value in the stored transform\r\n  currentTransform.cloneFromProps(this.transformMat.props);\r\n  var trProps = currentTransform.props;\r\n  // Applying the new transform to the canvas\r\n  this.nativeContext.setTransform(trProps[0], trProps[1], trProps[4], trProps[5], trProps[12], trProps[13]);\r\n};\r\n\r\nCVContextData.prototype.opacity = function (op) {\r\n  var currentOpacity = this.stack[this.cArrPos].opacity;\r\n  currentOpacity *= op < 0 ? 0 : op;\r\n  if (this.stack[this.cArrPos].opacity !== currentOpacity) {\r\n    if (this.currentOpacity !== op) {\r\n      this.nativeContext.globalAlpha = op;\r\n      this.currentOpacity = op;\r\n    }\r\n    this.stack[this.cArrPos].opacity = currentOpacity;\r\n  }\r\n};\r\n\r\nCVContextData.prototype.fill = function (rule) {\r\n  if (this.appliedFillStyle !== this.currentFillStyle) {\r\n    this.appliedFillStyle = this.currentFillStyle;\r\n    this.nativeContext.fillStyle = this.appliedFillStyle;\r\n  }\r\n  this.nativeContext.fill(rule);\r\n};\r\n\r\nCVContextData.prototype.fillRect = function (x, y, w, h) {\r\n  if (this.appliedFillStyle !== this.currentFillStyle) {\r\n    this.appliedFillStyle = this.currentFillStyle;\r\n    this.nativeContext.fillStyle = this.appliedFillStyle;\r\n  }\r\n  this.nativeContext.fillRect(x, y, w, h);\r\n};\r\n\r\nCVContextData.prototype.stroke = function () {\r\n  if (this.appliedStrokeStyle !== this.currentStrokeStyle) {\r\n    this.appliedStrokeStyle = this.currentStrokeStyle;\r\n    this.nativeContext.strokeStyle = this.appliedStrokeStyle;\r\n  }\r\n  if (this.appliedLineWidth !== this.currentLineWidth) {\r\n    this.appliedLineWidth = this.currentLineWidth;\r\n    this.nativeContext.lineWidth = this.appliedLineWidth;\r\n  }\r\n  if (this.appliedLineCap !== this.currentLineCap) {\r\n    this.appliedLineCap = this.currentLineCap;\r\n    this.nativeContext.lineCap = this.appliedLineCap;\r\n  }\r\n  if (this.appliedLineJoin !== this.currentLineJoin) {\r\n    this.appliedLineJoin = this.currentLineJoin;\r\n    this.nativeContext.lineJoin = this.appliedLineJoin;\r\n  }\r\n  if (this.appliedMiterLimit !== this.currentMiterLimit) {\r\n    this.appliedMiterLimit = this.currentMiterLimit;\r\n    this.nativeContext.miterLimit = this.appliedMiterLimit;\r\n  }\r\n  this.nativeContext.stroke();\r\n};\n\nfunction CVCompElement(data, globalData, comp) {\r\n  this.completeLayers = false;\r\n  this.layers = data.layers;\r\n  this.pendingElements = [];\r\n  this.elements = createSizedArray(this.layers.length);\r\n  this.initElement(data, globalData, comp);\r\n  this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : { _placeholder: true };\r\n}\r\n\r\nextendPrototype([CanvasRendererBase, ICompElement, CVBaseElement], CVCompElement);\r\n\r\nCVCompElement.prototype.renderInnerContent = function () {\r\n  var ctx = this.canvasContext;\r\n  ctx.beginPath();\r\n  ctx.moveTo(0, 0);\r\n  ctx.lineTo(this.data.w, 0);\r\n  ctx.lineTo(this.data.w, this.data.h);\r\n  ctx.lineTo(0, this.data.h);\r\n  ctx.lineTo(0, 0);\r\n  ctx.clip();\r\n  var i;\r\n  var len = this.layers.length;\r\n  for (i = len - 1; i >= 0; i -= 1) {\r\n    if (this.completeLayers || this.elements[i]) {\r\n      this.elements[i].renderFrame();\r\n    }\r\n  }\r\n};\r\n\r\nCVCompElement.prototype.destroy = function () {\r\n  var i;\r\n  var len = this.layers.length;\r\n  for (i = len - 1; i >= 0; i -= 1) {\r\n    if (this.elements[i]) {\r\n      this.elements[i].destroy();\r\n    }\r\n  }\r\n  this.layers = null;\r\n  this.elements = null;\r\n};\r\n\r\nCVCompElement.prototype.createComp = function (data) {\r\n  return new CVCompElement(data, this.globalData, this);\r\n};\n\nfunction CanvasRenderer(animationItem, config) {\r\n  this.animationItem = animationItem;\r\n  this.renderConfig = {\r\n    clearCanvas: (config && config.clearCanvas !== undefined) ? config.clearCanvas : true,\r\n    context: (config && config.context) || null,\r\n    progressiveLoad: (config && config.progressiveLoad) || false,\r\n    preserveAspectRatio: (config && config.preserveAspectRatio) || 'xMidYMid meet',\r\n    imagePreserveAspectRatio: (config && config.imagePreserveAspectRatio) || 'xMidYMid slice',\r\n    contentVisibility: (config && config.contentVisibility) || 'visible',\r\n    className: (config && config.className) || '',\r\n    id: (config && config.id) || '',\r\n    runExpressions: !config || config.runExpressions === undefined || config.runExpressions,\r\n  };\r\n  this.renderConfig.dpr = (config && config.dpr) || 1;\r\n  if (this.animationItem.wrapper) {\r\n    this.renderConfig.dpr = (config && config.dpr) || window.devicePixelRatio || 1;\r\n  }\r\n  this.renderedFrame = -1;\r\n  this.globalData = {\r\n    frameNum: -1,\r\n    _mdf: false,\r\n    renderConfig: this.renderConfig,\r\n    currentGlobalAlpha: -1,\r\n  };\r\n  this.contextData = new CVContextData();\r\n  this.elements = [];\r\n  this.pendingElements = [];\r\n  this.transformMat = new Matrix();\r\n  this.completeLayers = false;\r\n  this.rendererType = 'canvas';\r\n  if (this.renderConfig.clearCanvas) {\r\n    this.ctxTransform = this.contextData.transform.bind(this.contextData);\r\n    this.ctxOpacity = this.contextData.opacity.bind(this.contextData);\r\n    this.ctxFillStyle = this.contextData.fillStyle.bind(this.contextData);\r\n    this.ctxStrokeStyle = this.contextData.strokeStyle.bind(this.contextData);\r\n    this.ctxLineWidth = this.contextData.lineWidth.bind(this.contextData);\r\n    this.ctxLineCap = this.contextData.lineCap.bind(this.contextData);\r\n    this.ctxLineJoin = this.contextData.lineJoin.bind(this.contextData);\r\n    this.ctxMiterLimit = this.contextData.miterLimit.bind(this.contextData);\r\n    this.ctxFill = this.contextData.fill.bind(this.contextData);\r\n    this.ctxFillRect = this.contextData.fillRect.bind(this.contextData);\r\n    this.ctxStroke = this.contextData.stroke.bind(this.contextData);\r\n    this.save = this.contextData.save.bind(this.contextData);\r\n  }\r\n}\r\nextendPrototype([CanvasRendererBase], CanvasRenderer);\r\n\r\nCanvasRenderer.prototype.createComp = function (data) {\r\n  return new CVCompElement(data, this.globalData, this);\r\n};\n\nfunction HBaseElement() {}\r\nHBaseElement.prototype = {\r\n  checkBlendMode: function () {},\r\n  initRendererElement: function () {\r\n    this.baseElement = createTag(this.data.tg || 'div');\r\n    if (this.data.hasMask) {\r\n      this.svgElement = createNS('svg');\r\n      this.layerElement = createNS('g');\r\n      this.maskedElement = this.layerElement;\r\n      this.svgElement.appendChild(this.layerElement);\r\n      this.baseElement.appendChild(this.svgElement);\r\n    } else {\r\n      this.layerElement = this.baseElement;\r\n    }\r\n    styleDiv(this.baseElement);\r\n  },\r\n  createContainerElements: function () {\r\n    this.renderableEffectsManager = new CVEffects(this);\r\n    this.transformedElement = this.baseElement;\r\n    this.maskedElement = this.layerElement;\r\n    if (this.data.ln) {\r\n      this.layerElement.setAttribute('id', this.data.ln);\r\n    }\r\n    if (this.data.cl) {\r\n      this.layerElement.setAttribute('class', this.data.cl);\r\n    }\r\n    if (this.data.bm !== 0) {\r\n      this.setBlendMode();\r\n    }\r\n  },\r\n  renderElement: function () {\r\n    var transformedElementStyle = this.transformedElement ? this.transformedElement.style : {};\r\n    if (this.finalTransform._matMdf) {\r\n      var matrixValue = this.finalTransform.mat.toCSS();\r\n      transformedElementStyle.transform = matrixValue;\r\n      transformedElementStyle.webkitTransform = matrixValue;\r\n    }\r\n    if (this.finalTransform._opMdf) {\r\n      transformedElementStyle.opacity = this.finalTransform.mProp.o.v;\r\n    }\r\n  },\r\n  renderFrame: function () {\r\n    // If it is exported as hidden (data.hd === true) no need to render\r\n    // If it is not visible no need to render\r\n    if (this.data.hd || this.hidden) {\r\n      return;\r\n    }\r\n    this.renderTransform();\r\n    this.renderRenderable();\r\n    this.renderElement();\r\n    this.renderInnerContent();\r\n    if (this._isFirstFrame) {\r\n      this._isFirstFrame = false;\r\n    }\r\n  },\r\n  destroy: function () {\r\n    this.layerElement = null;\r\n    this.transformedElement = null;\r\n    if (this.matteElement) {\r\n      this.matteElement = null;\r\n    }\r\n    if (this.maskManager) {\r\n      this.maskManager.destroy();\r\n      this.maskManager = null;\r\n    }\r\n  },\r\n  createRenderableComponents: function () {\r\n    this.maskManager = new MaskElement(this.data, this, this.globalData);\r\n  },\r\n  addEffects: function () {\r\n  },\r\n  setMatte: function () {},\r\n};\r\nHBaseElement.prototype.getBaseElement = SVGBaseElement.prototype.getBaseElement;\r\nHBaseElement.prototype.destroyBaseElement = HBaseElement.prototype.destroy;\r\nHBaseElement.prototype.buildElementParenting = BaseRenderer.prototype.buildElementParenting;\n\nfunction HSolidElement(data, globalData, comp) {\r\n  this.initElement(data, globalData, comp);\r\n}\r\nextendPrototype([BaseElement, TransformElement, HBaseElement, HierarchyElement, FrameElement, RenderableDOMElement], HSolidElement);\r\n\r\nHSolidElement.prototype.createContent = function () {\r\n  var rect;\r\n  if (this.data.hasMask) {\r\n    rect = createNS('rect');\r\n    rect.setAttribute('width', this.data.sw);\r\n    rect.setAttribute('height', this.data.sh);\r\n    rect.setAttribute('fill', this.data.sc);\r\n    this.svgElement.setAttribute('width', this.data.sw);\r\n    this.svgElement.setAttribute('height', this.data.sh);\r\n  } else {\r\n    rect = createTag('div');\r\n    rect.style.width = this.data.sw + 'px';\r\n    rect.style.height = this.data.sh + 'px';\r\n    rect.style.backgroundColor = this.data.sc;\r\n  }\r\n  this.layerElement.appendChild(rect);\r\n};\n\nfunction HShapeElement(data, globalData, comp) {\r\n  // List of drawable elements\r\n  this.shapes = [];\r\n  // Full shape data\r\n  this.shapesData = data.shapes;\r\n  // List of styles that will be applied to shapes\r\n  this.stylesList = [];\r\n  // List of modifiers that will be applied to shapes\r\n  this.shapeModifiers = [];\r\n  // List of items in shape tree\r\n  this.itemsData = [];\r\n  // List of items in previous shape tree\r\n  this.processedElements = [];\r\n  // List of animated components\r\n  this.animatedContents = [];\r\n  this.shapesContainer = createNS('g');\r\n  this.initElement(data, globalData, comp);\r\n  // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n  // List of elements that have been created\r\n  this.prevViewData = [];\r\n  this.currentBBox = {\r\n    x: 999999,\r\n    y: -999999,\r\n    h: 0,\r\n    w: 0,\r\n  };\r\n}\r\nextendPrototype([BaseElement, TransformElement, HSolidElement, SVGShapeElement, HBaseElement, HierarchyElement, FrameElement, RenderableElement], HShapeElement);\r\nHShapeElement.prototype._renderShapeFrame = HShapeElement.prototype.renderInnerContent;\r\n\r\nHShapeElement.prototype.createContent = function () {\r\n  var cont;\r\n  this.baseElement.style.fontSize = 0;\r\n  if (this.data.hasMask) {\r\n    this.layerElement.appendChild(this.shapesContainer);\r\n    cont = this.svgElement;\r\n  } else {\r\n    cont = createNS('svg');\r\n    var size = this.comp.data ? this.comp.data : this.globalData.compSize;\r\n    cont.setAttribute('width', size.w);\r\n    cont.setAttribute('height', size.h);\r\n    cont.appendChild(this.shapesContainer);\r\n    this.layerElement.appendChild(cont);\r\n  }\r\n\r\n  this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.shapesContainer, 0, [], true);\r\n  this.filterUniqueShapes();\r\n  this.shapeCont = cont;\r\n};\r\n\r\nHShapeElement.prototype.getTransformedPoint = function (transformers, point) {\r\n  var i;\r\n  var len = transformers.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    point = transformers[i].mProps.v.applyToPointArray(point[0], point[1], 0);\r\n  }\r\n  return point;\r\n};\r\n\r\nHShapeElement.prototype.calculateShapeBoundingBox = function (item, boundingBox) {\r\n  var shape = item.sh.v;\r\n  var transformers = item.transformers;\r\n  var i;\r\n  var len = shape._length;\r\n  var vPoint;\r\n  var oPoint;\r\n  var nextIPoint;\r\n  var nextVPoint;\r\n  if (len <= 1) {\r\n    return;\r\n  }\r\n  for (i = 0; i < len - 1; i += 1) {\r\n    vPoint = this.getTransformedPoint(transformers, shape.v[i]);\r\n    oPoint = this.getTransformedPoint(transformers, shape.o[i]);\r\n    nextIPoint = this.getTransformedPoint(transformers, shape.i[i + 1]);\r\n    nextVPoint = this.getTransformedPoint(transformers, shape.v[i + 1]);\r\n    this.checkBounds(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox);\r\n  }\r\n  if (shape.c) {\r\n    vPoint = this.getTransformedPoint(transformers, shape.v[i]);\r\n    oPoint = this.getTransformedPoint(transformers, shape.o[i]);\r\n    nextIPoint = this.getTransformedPoint(transformers, shape.i[0]);\r\n    nextVPoint = this.getTransformedPoint(transformers, shape.v[0]);\r\n    this.checkBounds(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox);\r\n  }\r\n};\r\n\r\nHShapeElement.prototype.checkBounds = function (vPoint, oPoint, nextIPoint, nextVPoint, boundingBox) {\r\n  this.getBoundsOfCurve(vPoint, oPoint, nextIPoint, nextVPoint);\r\n  var bounds = this.shapeBoundingBox;\r\n  boundingBox.x = bmMin(bounds.left, boundingBox.x);\r\n  boundingBox.xMax = bmMax(bounds.right, boundingBox.xMax);\r\n  boundingBox.y = bmMin(bounds.top, boundingBox.y);\r\n  boundingBox.yMax = bmMax(bounds.bottom, boundingBox.yMax);\r\n};\r\n\r\nHShapeElement.prototype.shapeBoundingBox = {\r\n  left: 0,\r\n  right: 0,\r\n  top: 0,\r\n  bottom: 0,\r\n};\r\n\r\nHShapeElement.prototype.tempBoundingBox = {\r\n  x: 0,\r\n  xMax: 0,\r\n  y: 0,\r\n  yMax: 0,\r\n  width: 0,\r\n  height: 0,\r\n};\r\n\r\nHShapeElement.prototype.getBoundsOfCurve = function (p0, p1, p2, p3) {\r\n  var bounds = [[p0[0], p3[0]], [p0[1], p3[1]]];\r\n\r\n  for (var a, b, c, t, b2ac, t1, t2, i = 0; i < 2; ++i) { // eslint-disable-line no-plusplus\r\n    b = 6 * p0[i] - 12 * p1[i] + 6 * p2[i];\r\n    a = -3 * p0[i] + 9 * p1[i] - 9 * p2[i] + 3 * p3[i];\r\n    c = 3 * p1[i] - 3 * p0[i];\r\n\r\n    b |= 0; // eslint-disable-line no-bitwise\r\n    a |= 0; // eslint-disable-line no-bitwise\r\n    c |= 0; // eslint-disable-line no-bitwise\r\n\r\n    if (a === 0 && b === 0) {\r\n      //\r\n    } else if (a === 0) {\r\n      t = -c / b;\r\n\r\n      if (t > 0 && t < 1) {\r\n        bounds[i].push(this.calculateF(t, p0, p1, p2, p3, i));\r\n      }\r\n    } else {\r\n      b2ac = b * b - 4 * c * a;\r\n\r\n      if (b2ac >= 0) {\r\n        t1 = (-b + bmSqrt(b2ac)) / (2 * a);\r\n        if (t1 > 0 && t1 < 1) bounds[i].push(this.calculateF(t1, p0, p1, p2, p3, i));\r\n        t2 = (-b - bmSqrt(b2ac)) / (2 * a);\r\n        if (t2 > 0 && t2 < 1) bounds[i].push(this.calculateF(t2, p0, p1, p2, p3, i));\r\n      }\r\n    }\r\n  }\r\n\r\n  this.shapeBoundingBox.left = bmMin.apply(null, bounds[0]);\r\n  this.shapeBoundingBox.top = bmMin.apply(null, bounds[1]);\r\n  this.shapeBoundingBox.right = bmMax.apply(null, bounds[0]);\r\n  this.shapeBoundingBox.bottom = bmMax.apply(null, bounds[1]);\r\n};\r\n\r\nHShapeElement.prototype.calculateF = function (t, p0, p1, p2, p3, i) {\r\n  return bmPow(1 - t, 3) * p0[i]\r\n        + 3 * bmPow(1 - t, 2) * t * p1[i]\r\n        + 3 * (1 - t) * bmPow(t, 2) * p2[i]\r\n        + bmPow(t, 3) * p3[i];\r\n};\r\n\r\nHShapeElement.prototype.calculateBoundingBox = function (itemsData, boundingBox) {\r\n  var i;\r\n  var len = itemsData.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (itemsData[i] && itemsData[i].sh) {\r\n      this.calculateShapeBoundingBox(itemsData[i], boundingBox);\r\n    } else if (itemsData[i] && itemsData[i].it) {\r\n      this.calculateBoundingBox(itemsData[i].it, boundingBox);\r\n    } else if (itemsData[i] && itemsData[i].style && itemsData[i].w) {\r\n      this.expandStrokeBoundingBox(itemsData[i].w, boundingBox);\r\n    }\r\n  }\r\n};\r\n\r\nHShapeElement.prototype.expandStrokeBoundingBox = function (widthProperty, boundingBox) {\r\n  var width = 0;\r\n  if (widthProperty.keyframes) {\r\n    for (var i = 0; i < widthProperty.keyframes.length; i += 1) {\r\n      var kfw = widthProperty.keyframes[i].s;\r\n      if (kfw > width) {\r\n        width = kfw;\r\n      }\r\n    }\r\n    width *= widthProperty.mult;\r\n  } else {\r\n    width = widthProperty.v * widthProperty.mult;\r\n  }\r\n\r\n  boundingBox.x -= width;\r\n  boundingBox.xMax += width;\r\n  boundingBox.y -= width;\r\n  boundingBox.yMax += width;\r\n};\r\n\r\nHShapeElement.prototype.currentBoxContains = function (box) {\r\n  return this.currentBBox.x <= box.x\r\n    && this.currentBBox.y <= box.y\r\n    && this.currentBBox.width + this.currentBBox.x >= box.x + box.width\r\n    && this.currentBBox.height + this.currentBBox.y >= box.y + box.height;\r\n};\r\n\r\nHShapeElement.prototype.renderInnerContent = function () {\r\n  this._renderShapeFrame();\r\n\r\n  if (!this.hidden && (this._isFirstFrame || this._mdf)) {\r\n    var tempBoundingBox = this.tempBoundingBox;\r\n    var max = 999999;\r\n    tempBoundingBox.x = max;\r\n    tempBoundingBox.xMax = -max;\r\n    tempBoundingBox.y = max;\r\n    tempBoundingBox.yMax = -max;\r\n    this.calculateBoundingBox(this.itemsData, tempBoundingBox);\r\n    tempBoundingBox.width = tempBoundingBox.xMax < tempBoundingBox.x ? 0 : tempBoundingBox.xMax - tempBoundingBox.x;\r\n    tempBoundingBox.height = tempBoundingBox.yMax < tempBoundingBox.y ? 0 : tempBoundingBox.yMax - tempBoundingBox.y;\r\n    // var tempBoundingBox = this.shapeCont.getBBox();\r\n    if (this.currentBoxContains(tempBoundingBox)) {\r\n      return;\r\n    }\r\n    var changed = false;\r\n    if (this.currentBBox.w !== tempBoundingBox.width) {\r\n      this.currentBBox.w = tempBoundingBox.width;\r\n      this.shapeCont.setAttribute('width', tempBoundingBox.width);\r\n      changed = true;\r\n    }\r\n    if (this.currentBBox.h !== tempBoundingBox.height) {\r\n      this.currentBBox.h = tempBoundingBox.height;\r\n      this.shapeCont.setAttribute('height', tempBoundingBox.height);\r\n      changed = true;\r\n    }\r\n    if (changed || this.currentBBox.x !== tempBoundingBox.x || this.currentBBox.y !== tempBoundingBox.y) {\r\n      this.currentBBox.w = tempBoundingBox.width;\r\n      this.currentBBox.h = tempBoundingBox.height;\r\n      this.currentBBox.x = tempBoundingBox.x;\r\n      this.currentBBox.y = tempBoundingBox.y;\r\n\r\n      this.shapeCont.setAttribute('viewBox', this.currentBBox.x + ' ' + this.currentBBox.y + ' ' + this.currentBBox.w + ' ' + this.currentBBox.h);\r\n      var shapeStyle = this.shapeCont.style;\r\n      var shapeTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\r\n      shapeStyle.transform = shapeTransform;\r\n      shapeStyle.webkitTransform = shapeTransform;\r\n    }\r\n  }\r\n};\n\nfunction HTextElement(data, globalData, comp) {\r\n  this.textSpans = [];\r\n  this.textPaths = [];\r\n  this.currentBBox = {\r\n    x: 999999,\r\n    y: -999999,\r\n    h: 0,\r\n    w: 0,\r\n  };\r\n  this.renderType = 'svg';\r\n  this.isMasked = false;\r\n  this.initElement(data, globalData, comp);\r\n}\r\nextendPrototype([BaseElement, TransformElement, HBaseElement, HierarchyElement, FrameElement, RenderableDOMElement, ITextElement], HTextElement);\r\n\r\nHTextElement.prototype.createContent = function () {\r\n  this.isMasked = this.checkMasks();\r\n  if (this.isMasked) {\r\n    this.renderType = 'svg';\r\n    this.compW = this.comp.data.w;\r\n    this.compH = this.comp.data.h;\r\n    this.svgElement.setAttribute('width', this.compW);\r\n    this.svgElement.setAttribute('height', this.compH);\r\n    var g = createNS('g');\r\n    this.maskedElement.appendChild(g);\r\n    this.innerElem = g;\r\n  } else {\r\n    this.renderType = 'html';\r\n    this.innerElem = this.layerElement;\r\n  }\r\n\r\n  this.checkParenting();\r\n};\r\n\r\nHTextElement.prototype.buildNewText = function () {\r\n  var documentData = this.textProperty.currentData;\r\n  this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\r\n  var innerElemStyle = this.innerElem.style;\r\n  var textColor = documentData.fc ? this.buildColor(documentData.fc) : 'rgba(0,0,0,0)';\r\n  innerElemStyle.fill = textColor;\r\n  innerElemStyle.color = textColor;\r\n  if (documentData.sc) {\r\n    innerElemStyle.stroke = this.buildColor(documentData.sc);\r\n    innerElemStyle.strokeWidth = documentData.sw + 'px';\r\n  }\r\n  var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n  if (!this.globalData.fontManager.chars) {\r\n    innerElemStyle.fontSize = documentData.finalSize + 'px';\r\n    innerElemStyle.lineHeight = documentData.finalSize + 'px';\r\n    if (fontData.fClass) {\r\n      this.innerElem.className = fontData.fClass;\r\n    } else {\r\n      innerElemStyle.fontFamily = fontData.fFamily;\r\n      var fWeight = documentData.fWeight;\r\n      var fStyle = documentData.fStyle;\r\n      innerElemStyle.fontStyle = fStyle;\r\n      innerElemStyle.fontWeight = fWeight;\r\n    }\r\n  }\r\n  var i;\r\n  var len;\r\n\r\n  var letters = documentData.l;\r\n  len = letters.length;\r\n  var tSpan;\r\n  var tParent;\r\n  var tCont;\r\n  var matrixHelper = this.mHelper;\r\n  var shapes;\r\n  var shapeStr = '';\r\n  var cnt = 0;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.globalData.fontManager.chars) {\r\n      if (!this.textPaths[cnt]) {\r\n        tSpan = createNS('path');\r\n        tSpan.setAttribute('stroke-linecap', lineCapEnum[1]);\r\n        tSpan.setAttribute('stroke-linejoin', lineJoinEnum[2]);\r\n        tSpan.setAttribute('stroke-miterlimit', '4');\r\n      } else {\r\n        tSpan = this.textPaths[cnt];\r\n      }\r\n      if (!this.isMasked) {\r\n        if (this.textSpans[cnt]) {\r\n          tParent = this.textSpans[cnt];\r\n          tCont = tParent.children[0];\r\n        } else {\r\n          tParent = createTag('div');\r\n          tParent.style.lineHeight = 0;\r\n          tCont = createNS('svg');\r\n          tCont.appendChild(tSpan);\r\n          styleDiv(tParent);\r\n        }\r\n      }\r\n    } else if (!this.isMasked) {\r\n      if (this.textSpans[cnt]) {\r\n        tParent = this.textSpans[cnt];\r\n        tSpan = this.textPaths[cnt];\r\n      } else {\r\n        tParent = createTag('span');\r\n        styleDiv(tParent);\r\n        tSpan = createTag('span');\r\n        styleDiv(tSpan);\r\n        tParent.appendChild(tSpan);\r\n      }\r\n    } else {\r\n      tSpan = this.textPaths[cnt] ? this.textPaths[cnt] : createNS('text');\r\n    }\r\n    // tSpan.setAttribute('visibility', 'hidden');\r\n    if (this.globalData.fontManager.chars) {\r\n      var charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n      var shapeData;\r\n      if (charData) {\r\n        shapeData = charData.data;\r\n      } else {\r\n        shapeData = null;\r\n      }\r\n      matrixHelper.reset();\r\n      if (shapeData && shapeData.shapes && shapeData.shapes.length) {\r\n        shapes = shapeData.shapes[0].it;\r\n        matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\r\n        shapeStr = this.createPathShape(matrixHelper, shapes);\r\n        tSpan.setAttribute('d', shapeStr);\r\n      }\r\n      if (!this.isMasked) {\r\n        this.innerElem.appendChild(tParent);\r\n        if (shapeData && shapeData.shapes) {\r\n          // document.body.appendChild is needed to get exact measure of shape\r\n          document.body.appendChild(tCont);\r\n          var boundingBox = tCont.getBBox();\r\n          tCont.setAttribute('width', boundingBox.width + 2);\r\n          tCont.setAttribute('height', boundingBox.height + 2);\r\n          tCont.setAttribute('viewBox', (boundingBox.x - 1) + ' ' + (boundingBox.y - 1) + ' ' + (boundingBox.width + 2) + ' ' + (boundingBox.height + 2));\r\n          var tContStyle = tCont.style;\r\n          var tContTranslation = 'translate(' + (boundingBox.x - 1) + 'px,' + (boundingBox.y - 1) + 'px)';\r\n          tContStyle.transform = tContTranslation;\r\n          tContStyle.webkitTransform = tContTranslation;\r\n\r\n          letters[i].yOffset = boundingBox.y - 1;\r\n        } else {\r\n          tCont.setAttribute('width', 1);\r\n          tCont.setAttribute('height', 1);\r\n        }\r\n        tParent.appendChild(tCont);\r\n      } else {\r\n        this.innerElem.appendChild(tSpan);\r\n      }\r\n    } else {\r\n      tSpan.textContent = letters[i].val;\r\n      tSpan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\r\n      if (!this.isMasked) {\r\n        this.innerElem.appendChild(tParent);\r\n        //\r\n        var tStyle = tSpan.style;\r\n        var tSpanTranslation = 'translate3d(0,' + -documentData.finalSize / 1.2 + 'px,0)';\r\n        tStyle.transform = tSpanTranslation;\r\n        tStyle.webkitTransform = tSpanTranslation;\r\n      } else {\r\n        this.innerElem.appendChild(tSpan);\r\n      }\r\n    }\r\n    //\r\n    if (!this.isMasked) {\r\n      this.textSpans[cnt] = tParent;\r\n    } else {\r\n      this.textSpans[cnt] = tSpan;\r\n    }\r\n    this.textSpans[cnt].style.display = 'block';\r\n    this.textPaths[cnt] = tSpan;\r\n    cnt += 1;\r\n  }\r\n  while (cnt < this.textSpans.length) {\r\n    this.textSpans[cnt].style.display = 'none';\r\n    cnt += 1;\r\n  }\r\n};\r\n\r\nHTextElement.prototype.renderInnerContent = function () {\r\n  this.validateText();\r\n  var svgStyle;\r\n  if (this.data.singleShape) {\r\n    if (!this._isFirstFrame && !this.lettersChangedFlag) {\r\n      return;\r\n    } if (this.isMasked && this.finalTransform._matMdf) {\r\n      // Todo Benchmark if using this is better than getBBox\r\n      this.svgElement.setAttribute('viewBox', -this.finalTransform.mProp.p.v[0] + ' ' + -this.finalTransform.mProp.p.v[1] + ' ' + this.compW + ' ' + this.compH);\r\n      svgStyle = this.svgElement.style;\r\n      var translation = 'translate(' + -this.finalTransform.mProp.p.v[0] + 'px,' + -this.finalTransform.mProp.p.v[1] + 'px)';\r\n      svgStyle.transform = translation;\r\n      svgStyle.webkitTransform = translation;\r\n    }\r\n  }\r\n\r\n  this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n  if (!this.lettersChangedFlag && !this.textAnimator.lettersChangedFlag) {\r\n    return;\r\n  }\r\n  var i;\r\n  var len;\r\n  var count = 0;\r\n  var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n  var letters = this.textProperty.currentData.l;\r\n\r\n  len = letters.length;\r\n  var renderedLetter;\r\n  var textSpan;\r\n  var textPath;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (letters[i].n) {\r\n      count += 1;\r\n    } else {\r\n      textSpan = this.textSpans[i];\r\n      textPath = this.textPaths[i];\r\n      renderedLetter = renderedLetters[count];\r\n      count += 1;\r\n      if (renderedLetter._mdf.m) {\r\n        if (!this.isMasked) {\r\n          textSpan.style.webkitTransform = renderedLetter.m;\r\n          textSpan.style.transform = renderedLetter.m;\r\n        } else {\r\n          textSpan.setAttribute('transform', renderedLetter.m);\r\n        }\r\n      }\r\n      /// /textSpan.setAttribute('opacity',renderedLetter.o);\r\n      textSpan.style.opacity = renderedLetter.o;\r\n      if (renderedLetter.sw && renderedLetter._mdf.sw) {\r\n        textPath.setAttribute('stroke-width', renderedLetter.sw);\r\n      }\r\n      if (renderedLetter.sc && renderedLetter._mdf.sc) {\r\n        textPath.setAttribute('stroke', renderedLetter.sc);\r\n      }\r\n      if (renderedLetter.fc && renderedLetter._mdf.fc) {\r\n        textPath.setAttribute('fill', renderedLetter.fc);\r\n        textPath.style.color = renderedLetter.fc;\r\n      }\r\n    }\r\n  }\r\n\r\n  if (this.innerElem.getBBox && !this.hidden && (this._isFirstFrame || this._mdf)) {\r\n    var boundingBox = this.innerElem.getBBox();\r\n\r\n    if (this.currentBBox.w !== boundingBox.width) {\r\n      this.currentBBox.w = boundingBox.width;\r\n      this.svgElement.setAttribute('width', boundingBox.width);\r\n    }\r\n    if (this.currentBBox.h !== boundingBox.height) {\r\n      this.currentBBox.h = boundingBox.height;\r\n      this.svgElement.setAttribute('height', boundingBox.height);\r\n    }\r\n\r\n    var margin = 1;\r\n    if (this.currentBBox.w !== (boundingBox.width + margin * 2) || this.currentBBox.h !== (boundingBox.height + margin * 2) || this.currentBBox.x !== (boundingBox.x - margin) || this.currentBBox.y !== (boundingBox.y - margin)) {\r\n      this.currentBBox.w = boundingBox.width + margin * 2;\r\n      this.currentBBox.h = boundingBox.height + margin * 2;\r\n      this.currentBBox.x = boundingBox.x - margin;\r\n      this.currentBBox.y = boundingBox.y - margin;\r\n\r\n      this.svgElement.setAttribute('viewBox', this.currentBBox.x + ' ' + this.currentBBox.y + ' ' + this.currentBBox.w + ' ' + this.currentBBox.h);\r\n      svgStyle = this.svgElement.style;\r\n      var svgTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\r\n      svgStyle.transform = svgTransform;\r\n      svgStyle.webkitTransform = svgTransform;\r\n    }\r\n  }\r\n};\n\nfunction HCameraElement(data, globalData, comp) {\r\n  this.initFrame();\r\n  this.initBaseData(data, globalData, comp);\r\n  this.initHierarchy();\r\n  var getProp = PropertyFactory.getProp;\r\n  this.pe = getProp(this, data.pe, 0, 0, this);\r\n  if (data.ks.p.s) {\r\n    this.px = getProp(this, data.ks.p.x, 1, 0, this);\r\n    this.py = getProp(this, data.ks.p.y, 1, 0, this);\r\n    this.pz = getProp(this, data.ks.p.z, 1, 0, this);\r\n  } else {\r\n    this.p = getProp(this, data.ks.p, 1, 0, this);\r\n  }\r\n  if (data.ks.a) {\r\n    this.a = getProp(this, data.ks.a, 1, 0, this);\r\n  }\r\n  if (data.ks.or.k.length && data.ks.or.k[0].to) {\r\n    var i;\r\n    var len = data.ks.or.k.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      data.ks.or.k[i].to = null;\r\n      data.ks.or.k[i].ti = null;\r\n    }\r\n  }\r\n  this.or = getProp(this, data.ks.or, 1, degToRads, this);\r\n  this.or.sh = true;\r\n  this.rx = getProp(this, data.ks.rx, 0, degToRads, this);\r\n  this.ry = getProp(this, data.ks.ry, 0, degToRads, this);\r\n  this.rz = getProp(this, data.ks.rz, 0, degToRads, this);\r\n  this.mat = new Matrix();\r\n  this._prevMat = new Matrix();\r\n  this._isFirstFrame = true;\r\n\r\n  // TODO: find a better way to make the HCamera element to be compatible with the LayerInterface and TransformInterface.\r\n  this.finalTransform = {\r\n    mProp: this,\r\n  };\r\n}\r\nextendPrototype([BaseElement, FrameElement, HierarchyElement], HCameraElement);\r\n\r\nHCameraElement.prototype.setup = function () {\r\n  var i;\r\n  var len = this.comp.threeDElements.length;\r\n  var comp;\r\n  var perspectiveStyle;\r\n  var containerStyle;\r\n  for (i = 0; i < len; i += 1) {\r\n    // [perspectiveElem,container]\r\n    comp = this.comp.threeDElements[i];\r\n    if (comp.type === '3d') {\r\n      perspectiveStyle = comp.perspectiveElem.style;\r\n      containerStyle = comp.container.style;\r\n      var perspective = this.pe.v + 'px';\r\n      var origin = '0px 0px 0px';\r\n      var matrix = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\r\n      perspectiveStyle.perspective = perspective;\r\n      perspectiveStyle.webkitPerspective = perspective;\r\n      containerStyle.transformOrigin = origin;\r\n      containerStyle.mozTransformOrigin = origin;\r\n      containerStyle.webkitTransformOrigin = origin;\r\n      perspectiveStyle.transform = matrix;\r\n      perspectiveStyle.webkitTransform = matrix;\r\n    }\r\n  }\r\n};\r\n\r\nHCameraElement.prototype.createElements = function () {\r\n};\r\n\r\nHCameraElement.prototype.hide = function () {\r\n};\r\n\r\nHCameraElement.prototype.renderFrame = function () {\r\n  var _mdf = this._isFirstFrame;\r\n  var i;\r\n  var len;\r\n  if (this.hierarchy) {\r\n    len = this.hierarchy.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      _mdf = this.hierarchy[i].finalTransform.mProp._mdf || _mdf;\r\n    }\r\n  }\r\n  if (_mdf || this.pe._mdf || (this.p && this.p._mdf) || (this.px && (this.px._mdf || this.py._mdf || this.pz._mdf)) || this.rx._mdf || this.ry._mdf || this.rz._mdf || this.or._mdf || (this.a && this.a._mdf)) {\r\n    this.mat.reset();\r\n\r\n    if (this.hierarchy) {\r\n      len = this.hierarchy.length - 1;\r\n      for (i = len; i >= 0; i -= 1) {\r\n        var mTransf = this.hierarchy[i].finalTransform.mProp;\r\n        this.mat.translate(-mTransf.p.v[0], -mTransf.p.v[1], mTransf.p.v[2]);\r\n        this.mat.rotateX(-mTransf.or.v[0]).rotateY(-mTransf.or.v[1]).rotateZ(mTransf.or.v[2]);\r\n        this.mat.rotateX(-mTransf.rx.v).rotateY(-mTransf.ry.v).rotateZ(mTransf.rz.v);\r\n        this.mat.scale(1 / mTransf.s.v[0], 1 / mTransf.s.v[1], 1 / mTransf.s.v[2]);\r\n        this.mat.translate(mTransf.a.v[0], mTransf.a.v[1], mTransf.a.v[2]);\r\n      }\r\n    }\r\n    if (this.p) {\r\n      this.mat.translate(-this.p.v[0], -this.p.v[1], this.p.v[2]);\r\n    } else {\r\n      this.mat.translate(-this.px.v, -this.py.v, this.pz.v);\r\n    }\r\n    if (this.a) {\r\n      var diffVector;\r\n      if (this.p) {\r\n        diffVector = [this.p.v[0] - this.a.v[0], this.p.v[1] - this.a.v[1], this.p.v[2] - this.a.v[2]];\r\n      } else {\r\n        diffVector = [this.px.v - this.a.v[0], this.py.v - this.a.v[1], this.pz.v - this.a.v[2]];\r\n      }\r\n      var mag = Math.sqrt(Math.pow(diffVector[0], 2) + Math.pow(diffVector[1], 2) + Math.pow(diffVector[2], 2));\r\n      // var lookDir = getNormalizedPoint(getDiffVector(this.a.v,this.p.v));\r\n      var lookDir = [diffVector[0] / mag, diffVector[1] / mag, diffVector[2] / mag];\r\n      var lookLengthOnXZ = Math.sqrt(lookDir[2] * lookDir[2] + lookDir[0] * lookDir[0]);\r\n      var mRotationX = (Math.atan2(lookDir[1], lookLengthOnXZ));\r\n      var mRotationY = (Math.atan2(lookDir[0], -lookDir[2]));\r\n      this.mat.rotateY(mRotationY).rotateX(-mRotationX);\r\n    }\r\n    this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v);\r\n    this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]);\r\n    this.mat.translate(this.globalData.compSize.w / 2, this.globalData.compSize.h / 2, 0);\r\n    this.mat.translate(0, 0, this.pe.v);\r\n\r\n    var hasMatrixChanged = !this._prevMat.equals(this.mat);\r\n    if ((hasMatrixChanged || this.pe._mdf) && this.comp.threeDElements) {\r\n      len = this.comp.threeDElements.length;\r\n      var comp;\r\n      var perspectiveStyle;\r\n      var containerStyle;\r\n      for (i = 0; i < len; i += 1) {\r\n        comp = this.comp.threeDElements[i];\r\n        if (comp.type === '3d') {\r\n          if (hasMatrixChanged) {\r\n            var matValue = this.mat.toCSS();\r\n            containerStyle = comp.container.style;\r\n            containerStyle.transform = matValue;\r\n            containerStyle.webkitTransform = matValue;\r\n          }\r\n          if (this.pe._mdf) {\r\n            perspectiveStyle = comp.perspectiveElem.style;\r\n            perspectiveStyle.perspective = this.pe.v + 'px';\r\n            perspectiveStyle.webkitPerspective = this.pe.v + 'px';\r\n          }\r\n        }\r\n      }\r\n      this.mat.clone(this._prevMat);\r\n    }\r\n  }\r\n  this._isFirstFrame = false;\r\n};\r\n\r\nHCameraElement.prototype.prepareFrame = function (num) {\r\n  this.prepareProperties(num, true);\r\n};\r\n\r\nHCameraElement.prototype.destroy = function () {\r\n};\r\nHCameraElement.prototype.getBaseElement = function () { return null; };\n\nfunction HImageElement(data, globalData, comp) {\r\n  this.assetData = globalData.getAssetData(data.refId);\r\n  this.initElement(data, globalData, comp);\r\n}\r\n\r\nextendPrototype([BaseElement, TransformElement, HBaseElement, HSolidElement, HierarchyElement, FrameElement, RenderableElement], HImageElement);\r\n\r\nHImageElement.prototype.createContent = function () {\r\n  var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n  var img = new Image();\r\n\r\n  if (this.data.hasMask) {\r\n    this.imageElem = createNS('image');\r\n    this.imageElem.setAttribute('width', this.assetData.w + 'px');\r\n    this.imageElem.setAttribute('height', this.assetData.h + 'px');\r\n    this.imageElem.setAttributeNS('http://www.w3.org/1999/xlink', 'href', assetPath);\r\n    this.layerElement.appendChild(this.imageElem);\r\n    this.baseElement.setAttribute('width', this.assetData.w);\r\n    this.baseElement.setAttribute('height', this.assetData.h);\r\n  } else {\r\n    this.layerElement.appendChild(img);\r\n  }\r\n  img.crossOrigin = 'anonymous';\r\n  img.src = assetPath;\r\n  if (this.data.ln) {\r\n    this.baseElement.setAttribute('id', this.data.ln);\r\n  }\r\n};\n\nfunction HybridRendererBase(animationItem, config) {\r\n  this.animationItem = animationItem;\r\n  this.layers = null;\r\n  this.renderedFrame = -1;\r\n  this.renderConfig = {\r\n    className: (config && config.className) || '',\r\n    imagePreserveAspectRatio: (config && config.imagePreserveAspectRatio) || 'xMidYMid slice',\r\n    hideOnTransparent: !(config && config.hideOnTransparent === false),\r\n    filterSize: {\r\n      width: (config && config.filterSize && config.filterSize.width) || '400%',\r\n      height: (config && config.filterSize && config.filterSize.height) || '400%',\r\n      x: (config && config.filterSize && config.filterSize.x) || '-100%',\r\n      y: (config && config.filterSize && config.filterSize.y) || '-100%',\r\n    },\r\n  };\r\n  this.globalData = {\r\n    _mdf: false,\r\n    frameNum: -1,\r\n    renderConfig: this.renderConfig,\r\n  };\r\n  this.pendingElements = [];\r\n  this.elements = [];\r\n  this.threeDElements = [];\r\n  this.destroyed = false;\r\n  this.camera = null;\r\n  this.supports3d = true;\r\n  this.rendererType = 'html';\r\n}\r\n\r\nextendPrototype([BaseRenderer], HybridRendererBase);\r\n\r\nHybridRendererBase.prototype.buildItem = SVGRenderer.prototype.buildItem;\r\n\r\nHybridRendererBase.prototype.checkPendingElements = function () {\r\n  while (this.pendingElements.length) {\r\n    var element = this.pendingElements.pop();\r\n    element.checkParenting();\r\n  }\r\n};\r\n\r\nHybridRendererBase.prototype.appendElementInPos = function (element, pos) {\r\n  var newDOMElement = element.getBaseElement();\r\n  if (!newDOMElement) {\r\n    return;\r\n  }\r\n  var layer = this.layers[pos];\r\n  if (!layer.ddd || !this.supports3d) {\r\n    if (this.threeDElements) {\r\n      this.addTo3dContainer(newDOMElement, pos);\r\n    } else {\r\n      var i = 0;\r\n      var nextDOMElement;\r\n      var nextLayer;\r\n      var tmpDOMElement;\r\n      while (i < pos) {\r\n        if (this.elements[i] && this.elements[i] !== true && this.elements[i].getBaseElement) {\r\n          nextLayer = this.elements[i];\r\n          tmpDOMElement = this.layers[i].ddd ? this.getThreeDContainerByPos(i) : nextLayer.getBaseElement();\r\n          nextDOMElement = tmpDOMElement || nextDOMElement;\r\n        }\r\n        i += 1;\r\n      }\r\n      if (nextDOMElement) {\r\n        if (!layer.ddd || !this.supports3d) {\r\n          this.layerElement.insertBefore(newDOMElement, nextDOMElement);\r\n        }\r\n      } else if (!layer.ddd || !this.supports3d) {\r\n        this.layerElement.appendChild(newDOMElement);\r\n      }\r\n    }\r\n  } else {\r\n    this.addTo3dContainer(newDOMElement, pos);\r\n  }\r\n};\r\n\r\nHybridRendererBase.prototype.createShape = function (data) {\r\n  if (!this.supports3d) {\r\n    return new SVGShapeElement(data, this.globalData, this);\r\n  }\r\n  return new HShapeElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRendererBase.prototype.createText = function (data) {\r\n  if (!this.supports3d) {\r\n    return new SVGTextLottieElement(data, this.globalData, this);\r\n  }\r\n  return new HTextElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRendererBase.prototype.createCamera = function (data) {\r\n  this.camera = new HCameraElement(data, this.globalData, this);\r\n  return this.camera;\r\n};\r\n\r\nHybridRendererBase.prototype.createImage = function (data) {\r\n  if (!this.supports3d) {\r\n    return new IImageElement(data, this.globalData, this);\r\n  }\r\n  return new HImageElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRendererBase.prototype.createSolid = function (data) {\r\n  if (!this.supports3d) {\r\n    return new ISolidElement(data, this.globalData, this);\r\n  }\r\n  return new HSolidElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRendererBase.prototype.createNull = SVGRenderer.prototype.createNull;\r\n\r\nHybridRendererBase.prototype.getThreeDContainerByPos = function (pos) {\r\n  var i = 0;\r\n  var len = this.threeDElements.length;\r\n  while (i < len) {\r\n    if (this.threeDElements[i].startPos <= pos && this.threeDElements[i].endPos >= pos) {\r\n      return this.threeDElements[i].perspectiveElem;\r\n    }\r\n    i += 1;\r\n  }\r\n  return null;\r\n};\r\n\r\nHybridRendererBase.prototype.createThreeDContainer = function (pos, type) {\r\n  var perspectiveElem = createTag('div');\r\n  var style;\r\n  var containerStyle;\r\n  styleDiv(perspectiveElem);\r\n  var container = createTag('div');\r\n  styleDiv(container);\r\n  if (type === '3d') {\r\n    style = perspectiveElem.style;\r\n    style.width = this.globalData.compSize.w + 'px';\r\n    style.height = this.globalData.compSize.h + 'px';\r\n    var center = '50% 50%';\r\n    style.webkitTransformOrigin = center;\r\n    style.mozTransformOrigin = center;\r\n    style.transformOrigin = center;\r\n    containerStyle = container.style;\r\n    var matrix = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\r\n    containerStyle.transform = matrix;\r\n    containerStyle.webkitTransform = matrix;\r\n  }\r\n\r\n  perspectiveElem.appendChild(container);\r\n  // this.resizerElem.appendChild(perspectiveElem);\r\n  var threeDContainerData = {\r\n    container: container,\r\n    perspectiveElem: perspectiveElem,\r\n    startPos: pos,\r\n    endPos: pos,\r\n    type: type,\r\n  };\r\n  this.threeDElements.push(threeDContainerData);\r\n  return threeDContainerData;\r\n};\r\n\r\nHybridRendererBase.prototype.build3dContainers = function () {\r\n  var i;\r\n  var len = this.layers.length;\r\n  var lastThreeDContainerData;\r\n  var currentContainer = '';\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.layers[i].ddd && this.layers[i].ty !== 3) {\r\n      if (currentContainer !== '3d') {\r\n        currentContainer = '3d';\r\n        lastThreeDContainerData = this.createThreeDContainer(i, '3d');\r\n      }\r\n      lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos, i);\r\n    } else {\r\n      if (currentContainer !== '2d') {\r\n        currentContainer = '2d';\r\n        lastThreeDContainerData = this.createThreeDContainer(i, '2d');\r\n      }\r\n      lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos, i);\r\n    }\r\n  }\r\n  len = this.threeDElements.length;\r\n  for (i = len - 1; i >= 0; i -= 1) {\r\n    this.resizerElem.appendChild(this.threeDElements[i].perspectiveElem);\r\n  }\r\n};\r\n\r\nHybridRendererBase.prototype.addTo3dContainer = function (elem, pos) {\r\n  var i = 0;\r\n  var len = this.threeDElements.length;\r\n  while (i < len) {\r\n    if (pos <= this.threeDElements[i].endPos) {\r\n      var j = this.threeDElements[i].startPos;\r\n      var nextElement;\r\n      while (j < pos) {\r\n        if (this.elements[j] && this.elements[j].getBaseElement) {\r\n          nextElement = this.elements[j].getBaseElement();\r\n        }\r\n        j += 1;\r\n      }\r\n      if (nextElement) {\r\n        this.threeDElements[i].container.insertBefore(elem, nextElement);\r\n      } else {\r\n        this.threeDElements[i].container.appendChild(elem);\r\n      }\r\n      break;\r\n    }\r\n    i += 1;\r\n  }\r\n};\r\n\r\nHybridRendererBase.prototype.configAnimation = function (animData) {\r\n  var resizerElem = createTag('div');\r\n  var wrapper = this.animationItem.wrapper;\r\n  var style = resizerElem.style;\r\n  style.width = animData.w + 'px';\r\n  style.height = animData.h + 'px';\r\n  this.resizerElem = resizerElem;\r\n  styleDiv(resizerElem);\r\n  style.transformStyle = 'flat';\r\n  style.mozTransformStyle = 'flat';\r\n  style.webkitTransformStyle = 'flat';\r\n  if (this.renderConfig.className) {\r\n    resizerElem.setAttribute('class', this.renderConfig.className);\r\n  }\r\n  wrapper.appendChild(resizerElem);\r\n\r\n  style.overflow = 'hidden';\r\n  var svg = createNS('svg');\r\n  svg.setAttribute('width', '1');\r\n  svg.setAttribute('height', '1');\r\n  styleDiv(svg);\r\n  this.resizerElem.appendChild(svg);\r\n  var defs = createNS('defs');\r\n  svg.appendChild(defs);\r\n  this.data = animData;\r\n  // Mask animation\r\n  this.setupGlobalData(animData, svg);\r\n  this.globalData.defs = defs;\r\n  this.layers = animData.layers;\r\n  this.layerElement = this.resizerElem;\r\n  this.build3dContainers();\r\n  this.updateContainerSize();\r\n};\r\n\r\nHybridRendererBase.prototype.destroy = function () {\r\n  if (this.animationItem.wrapper) {\r\n    this.animationItem.wrapper.innerText = '';\r\n  }\r\n  this.animationItem.container = null;\r\n  this.globalData.defs = null;\r\n  var i;\r\n  var len = this.layers ? this.layers.length : 0;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.elements[i] && this.elements[i].destroy) {\r\n      this.elements[i].destroy();\r\n    }\r\n  }\r\n  this.elements.length = 0;\r\n  this.destroyed = true;\r\n  this.animationItem = null;\r\n};\r\n\r\nHybridRendererBase.prototype.updateContainerSize = function () {\r\n  var elementWidth = this.animationItem.wrapper.offsetWidth;\r\n  var elementHeight = this.animationItem.wrapper.offsetHeight;\r\n  var elementRel = elementWidth / elementHeight;\r\n  var animationRel = this.globalData.compSize.w / this.globalData.compSize.h;\r\n  var sx;\r\n  var sy;\r\n  var tx;\r\n  var ty;\r\n  if (animationRel > elementRel) {\r\n    sx = elementWidth / (this.globalData.compSize.w);\r\n    sy = elementWidth / (this.globalData.compSize.w);\r\n    tx = 0;\r\n    ty = ((elementHeight - this.globalData.compSize.h * (elementWidth / this.globalData.compSize.w)) / 2);\r\n  } else {\r\n    sx = elementHeight / (this.globalData.compSize.h);\r\n    sy = elementHeight / (this.globalData.compSize.h);\r\n    tx = (elementWidth - this.globalData.compSize.w * (elementHeight / this.globalData.compSize.h)) / 2;\r\n    ty = 0;\r\n  }\r\n  var style = this.resizerElem.style;\r\n  style.webkitTransform = 'matrix3d(' + sx + ',0,0,0,0,' + sy + ',0,0,0,0,1,0,' + tx + ',' + ty + ',0,1)';\r\n  style.transform = style.webkitTransform;\r\n};\r\n\r\nHybridRendererBase.prototype.renderFrame = SVGRenderer.prototype.renderFrame;\r\n\r\nHybridRendererBase.prototype.hide = function () {\r\n  this.resizerElem.style.display = 'none';\r\n};\r\n\r\nHybridRendererBase.prototype.show = function () {\r\n  this.resizerElem.style.display = 'block';\r\n};\r\n\r\nHybridRendererBase.prototype.initItems = function () {\r\n  this.buildAllItems();\r\n  if (this.camera) {\r\n    this.camera.setup();\r\n  } else {\r\n    var cWidth = this.globalData.compSize.w;\r\n    var cHeight = this.globalData.compSize.h;\r\n    var i;\r\n    var len = this.threeDElements.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      var style = this.threeDElements[i].perspectiveElem.style;\r\n      style.webkitPerspective = Math.sqrt(Math.pow(cWidth, 2) + Math.pow(cHeight, 2)) + 'px';\r\n      style.perspective = style.webkitPerspective;\r\n    }\r\n  }\r\n};\r\n\r\nHybridRendererBase.prototype.searchExtraCompositions = function (assets) {\r\n  var i;\r\n  var len = assets.length;\r\n  var floatingContainer = createTag('div');\r\n  for (i = 0; i < len; i += 1) {\r\n    if (assets[i].xt) {\r\n      var comp = this.createComp(assets[i], floatingContainer, this.globalData.comp, null);\r\n      comp.initExpressions();\r\n      this.globalData.projectInterface.registerComposition(comp);\r\n    }\r\n  }\r\n};\n\nfunction HCompElement(data, globalData, comp) {\r\n  this.layers = data.layers;\r\n  this.supports3d = !data.hasMask;\r\n  this.completeLayers = false;\r\n  this.pendingElements = [];\r\n  this.elements = this.layers ? createSizedArray(this.layers.length) : [];\r\n  this.initElement(data, globalData, comp);\r\n  this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : { _placeholder: true };\r\n}\r\n\r\nextendPrototype([HybridRendererBase, ICompElement, HBaseElement], HCompElement);\r\nHCompElement.prototype._createBaseContainerElements = HCompElement.prototype.createContainerElements;\r\n\r\nHCompElement.prototype.createContainerElements = function () {\r\n  this._createBaseContainerElements();\r\n  // divElement.style.clip = 'rect(0px, '+this.data.w+'px, '+this.data.h+'px, 0px)';\r\n  if (this.data.hasMask) {\r\n    this.svgElement.setAttribute('width', this.data.w);\r\n    this.svgElement.setAttribute('height', this.data.h);\r\n    this.transformedElement = this.baseElement;\r\n  } else {\r\n    this.transformedElement = this.layerElement;\r\n  }\r\n};\r\n\r\nHCompElement.prototype.addTo3dContainer = function (elem, pos) {\r\n  var j = 0;\r\n  var nextElement;\r\n  while (j < pos) {\r\n    if (this.elements[j] && this.elements[j].getBaseElement) {\r\n      nextElement = this.elements[j].getBaseElement();\r\n    }\r\n    j += 1;\r\n  }\r\n  if (nextElement) {\r\n    this.layerElement.insertBefore(elem, nextElement);\r\n  } else {\r\n    this.layerElement.appendChild(elem);\r\n  }\r\n};\r\n\r\nHCompElement.prototype.createComp = function (data) {\r\n  if (!this.supports3d) {\r\n    return new SVGCompElement(data, this.globalData, this);\r\n  }\r\n  return new HCompElement(data, this.globalData, this);\r\n};\n\nfunction HybridRenderer(animationItem, config) {\r\n  this.animationItem = animationItem;\r\n  this.layers = null;\r\n  this.renderedFrame = -1;\r\n  this.renderConfig = {\r\n    className: (config && config.className) || '',\r\n    imagePreserveAspectRatio: (config && config.imagePreserveAspectRatio) || 'xMidYMid slice',\r\n    hideOnTransparent: !(config && config.hideOnTransparent === false),\r\n    filterSize: {\r\n      width: (config && config.filterSize && config.filterSize.width) || '400%',\r\n      height: (config && config.filterSize && config.filterSize.height) || '400%',\r\n      x: (config && config.filterSize && config.filterSize.x) || '-100%',\r\n      y: (config && config.filterSize && config.filterSize.y) || '-100%',\r\n    },\r\n    runExpressions: !config || config.runExpressions === undefined || config.runExpressions,\r\n  };\r\n  this.globalData = {\r\n    _mdf: false,\r\n    frameNum: -1,\r\n    renderConfig: this.renderConfig,\r\n  };\r\n  this.pendingElements = [];\r\n  this.elements = [];\r\n  this.threeDElements = [];\r\n  this.destroyed = false;\r\n  this.camera = null;\r\n  this.supports3d = true;\r\n  this.rendererType = 'html';\r\n}\r\n\r\nextendPrototype([HybridRendererBase], HybridRenderer);\r\n\r\nHybridRenderer.prototype.createComp = function (data) {\r\n  if (!this.supports3d) {\r\n    return new SVGCompElement(data, this.globalData, this);\r\n  }\r\n  return new HCompElement(data, this.globalData, this);\r\n};\n\nconst CompExpressionInterface = (function () {\r\n  return function (comp) {\r\n    function _thisLayerFunction(name) {\r\n      var i = 0;\r\n      var len = comp.layers.length;\r\n      while (i < len) {\r\n        if (comp.layers[i].nm === name || comp.layers[i].ind === name) {\r\n          return comp.elements[i].layerInterface;\r\n        }\r\n        i += 1;\r\n      }\r\n      return null;\r\n      // return {active:false};\r\n    }\r\n    Object.defineProperty(_thisLayerFunction, '_name', { value: comp.data.nm });\r\n    _thisLayerFunction.layer = _thisLayerFunction;\r\n    _thisLayerFunction.pixelAspect = 1;\r\n    _thisLayerFunction.height = comp.data.h || comp.globalData.compSize.h;\r\n    _thisLayerFunction.width = comp.data.w || comp.globalData.compSize.w;\r\n    _thisLayerFunction.pixelAspect = 1;\r\n    _thisLayerFunction.frameDuration = 1 / comp.globalData.frameRate;\r\n    _thisLayerFunction.displayStartTime = 0;\r\n    _thisLayerFunction.numLayers = comp.layers.length;\r\n    return _thisLayerFunction;\r\n  };\r\n}());\n\n/* eslint-disable */\r\n/*\r\n Copyright 2014 David Bau.\r\n\r\n Permission is hereby granted, free of charge, to any person obtaining\r\n a copy of this software and associated documentation files (the\r\n \"Software\"), to deal in the Software without restriction, including\r\n without limitation the rights to use, copy, modify, merge, publish,\r\n distribute, sublicense, and/or sell copies of the Software, and to\r\n permit persons to whom the Software is furnished to do so, subject to\r\n the following conditions:\r\n\r\n The above copyright notice and this permission notice shall be\r\n included in all copies or substantial portions of the Software.\r\n\r\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\r\n IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\r\n CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\r\n TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\r\n SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n */\r\n\r\nfunction seedRandom(pool, math) {\r\n//\r\n// The following constants are related to IEEE 754 limits.\r\n//\r\n    var global = this,\r\n        width = 256,        // each RC4 output is 0 <= x < 256\r\n        chunks = 6,         // at least six RC4 outputs for each double\r\n        digits = 52,        // there are 52 significant digits in a double\r\n        rngname = 'random', // rngname: name for Math.random and Math.seedrandom\r\n        startdenom = math.pow(width, chunks),\r\n        significance = math.pow(2, digits),\r\n        overflow = significance * 2,\r\n        mask = width - 1,\r\n        nodecrypto;         // node.js crypto module, initialized at the bottom.\r\n\r\n//\r\n// seedrandom()\r\n// This is the seedrandom function described above.\r\n//\r\n    function seedrandom(seed, options, callback) {\r\n        var key = [];\r\n        options = (options === true) ? { entropy: true } : (options || {});\r\n\r\n        // Flatten the seed string or build one from local entropy if needed.\r\n        var shortseed = mixkey(flatten(\r\n            options.entropy ? [seed, tostring(pool)] :\r\n                (seed === null) ? autoseed() : seed, 3), key);\r\n\r\n        // Use the seed to initialize an ARC4 generator.\r\n        var arc4 = new ARC4(key);\r\n\r\n        // This function returns a random double in [0, 1) that contains\r\n        // randomness in every bit of the mantissa of the IEEE 754 value.\r\n        var prng = function() {\r\n            var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\r\n                d = startdenom,                 //   and denominator d = 2 ^ 48.\r\n                x = 0;                          //   and no 'extra last byte'.\r\n            while (n < significance) {          // Fill up all significant digits by\r\n                n = (n + x) * width;              //   shifting numerator and\r\n                d *= width;                       //   denominator and generating a\r\n                x = arc4.g(1);                    //   new least-significant-byte.\r\n            }\r\n            while (n >= overflow) {             // To avoid rounding up, before adding\r\n                n /= 2;                           //   last byte, shift everything\r\n                d /= 2;                           //   right using integer math until\r\n                x >>>= 1;                         //   we have exactly the desired bits.\r\n            }\r\n            return (n + x) / d;                 // Form the number within [0, 1).\r\n        };\r\n\r\n        prng.int32 = function() { return arc4.g(4) | 0; };\r\n        prng.quick = function() { return arc4.g(4) / 0x100000000; };\r\n        prng.double = prng;\r\n\r\n        // Mix the randomness into accumulated entropy.\r\n        mixkey(tostring(arc4.S), pool);\r\n\r\n        // Calling convention: what to return as a function of prng, seed, is_math.\r\n        return (options.pass || callback ||\r\n        function(prng, seed, is_math_call, state) {\r\n            if (state) {\r\n                // Load the arc4 state from the given state if it has an S array.\r\n                if (state.S) { copy(state, arc4); }\r\n                // Only provide the .state method if requested via options.state.\r\n                prng.state = function() { return copy(arc4, {}); };\r\n            }\r\n\r\n            // If called as a method of Math (Math.seedrandom()), mutate\r\n            // Math.random because that is how seedrandom.js has worked since v1.0.\r\n            if (is_math_call) { math[rngname] = prng; return seed; }\r\n\r\n            // Otherwise, it is a newer calling convention, so return the\r\n            // prng directly.\r\n            else return prng;\r\n        })(\r\n            prng,\r\n            shortseed,\r\n            'global' in options ? options.global : (this == math),\r\n            options.state);\r\n    }\r\n    math['seed' + rngname] = seedrandom;\r\n\r\n//\r\n// ARC4\r\n//\r\n// An ARC4 implementation.  The constructor takes a key in the form of\r\n// an array of at most (width) integers that should be 0 <= x < (width).\r\n//\r\n// The g(count) method returns a pseudorandom integer that concatenates\r\n// the next (count) outputs from ARC4.  Its return value is a number x\r\n// that is in the range 0 <= x < (width ^ count).\r\n//\r\n    function ARC4(key) {\r\n        var t, keylen = key.length,\r\n            me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\r\n\r\n        // The empty key [] is treated as [0].\r\n        if (!keylen) { key = [keylen++]; }\r\n\r\n        // Set up S using the standard key scheduling algorithm.\r\n        while (i < width) {\r\n            s[i] = i++;\r\n        }\r\n        for (i = 0; i < width; i++) {\r\n            s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\r\n            s[j] = t;\r\n        }\r\n\r\n        // The \"g\" method returns the next (count) outputs as one number.\r\n        me.g = function(count) {\r\n            // Using instance members instead of closure state nearly doubles speed.\r\n            var t, r = 0,\r\n                i = me.i, j = me.j, s = me.S;\r\n            while (count--) {\r\n                t = s[i = mask & (i + 1)];\r\n                r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\r\n            }\r\n            me.i = i; me.j = j;\r\n            return r;\r\n            // For robust unpredictability, the function call below automatically\r\n            // discards an initial batch of values.  This is called RC4-drop[256].\r\n            // See http://google.com/search?q=rsa+fluhrer+response&btnI\r\n        };\r\n    }\r\n\r\n//\r\n// copy()\r\n// Copies internal state of ARC4 to or from a plain object.\r\n//\r\n    function copy(f, t) {\r\n        t.i = f.i;\r\n        t.j = f.j;\r\n        t.S = f.S.slice();\r\n        return t;\r\n    }\r\n\r\n//\r\n// flatten()\r\n// Converts an object tree to nested arrays of strings.\r\n//\r\n    function flatten(obj, depth) {\r\n        var result = [], typ = (typeof obj), prop;\r\n        if (depth && typ == 'object') {\r\n            for (prop in obj) {\r\n                try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\r\n            }\r\n        }\r\n        return (result.length ? result : typ == 'string' ? obj : obj + '\\0');\r\n    }\r\n\r\n//\r\n// mixkey()\r\n// Mixes a string seed into a key that is an array of integers, and\r\n// returns a shortened string seed that is equivalent to the result key.\r\n//\r\n    function mixkey(seed, key) {\r\n        var stringseed = seed + '', smear, j = 0;\r\n        while (j < stringseed.length) {\r\n            key[mask & j] =\r\n                mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\r\n        }\r\n        return tostring(key);\r\n    }\r\n\r\n//\r\n// autoseed()\r\n// Returns an object for autoseeding, using window.crypto and Node crypto\r\n// module if available.\r\n//\r\n    function autoseed() {\r\n        try {\r\n            if (nodecrypto) { return tostring(nodecrypto.randomBytes(width)); }\r\n            var out = new Uint8Array(width);\r\n            (global.crypto || global.msCrypto).getRandomValues(out);\r\n            return tostring(out);\r\n        } catch (e) {\r\n            var browser = global.navigator,\r\n                plugins = browser && browser.plugins;\r\n            return [+new Date(), global, plugins, global.screen, tostring(pool)];\r\n        }\r\n    }\r\n\r\n//\r\n// tostring()\r\n// Converts an array of charcodes to a string\r\n//\r\n    function tostring(a) {\r\n        return String.fromCharCode.apply(0, a);\r\n    }\r\n\r\n//\r\n// When seedrandom.js is loaded, we immediately mix a few bits\r\n// from the built-in RNG into the entropy pool.  Because we do\r\n// not want to interfere with deterministic PRNG state later,\r\n// seedrandom will not call math.random on its own again after\r\n// initialization.\r\n//\r\n    mixkey(math.random(), pool);\r\n\r\n//\r\n// Nodejs and AMD support: export the implementation as a module using\r\n// either convention.\r\n//\r\n\r\n// End anonymous scope, and pass initial values.\r\n};\r\n\r\nfunction initialize$2(BMMath) {\r\n    seedRandom([], BMMath);\r\n}\n\nvar propTypes = {\r\n  SHAPE: 'shape',\r\n};\n\n/* eslint-disable camelcase */\r\n\r\nconst ExpressionManager = (function () {\r\n  'use strict';\r\n\r\n  var ob = {};\r\n  var Math = BMMath;\r\n  var window = null;\r\n  var document = null;\r\n  var XMLHttpRequest = null;\r\n  var fetch = null;\r\n  var frames = null;\r\n  var _lottieGlobal = {};\r\n  initialize$2(BMMath);\r\n\r\n  function resetFrame() {\r\n    _lottieGlobal = {};\r\n  }\r\n\r\n  function $bm_isInstanceOfArray(arr) {\r\n    return arr.constructor === Array || arr.constructor === Float32Array;\r\n  }\r\n\r\n  function isNumerable(tOfV, v) {\r\n    return tOfV === 'number' || v instanceof Number || tOfV === 'boolean' || tOfV === 'string';\r\n  }\r\n\r\n  function $bm_neg(a) {\r\n    var tOfA = typeof a;\r\n    if (tOfA === 'number' || a instanceof Number || tOfA === 'boolean') {\r\n      return -a;\r\n    }\r\n    if ($bm_isInstanceOfArray(a)) {\r\n      var i;\r\n      var lenA = a.length;\r\n      var retArr = [];\r\n      for (i = 0; i < lenA; i += 1) {\r\n        retArr[i] = -a[i];\r\n      }\r\n      return retArr;\r\n    }\r\n    if (a.propType) {\r\n      return a.v;\r\n    }\r\n    return -a;\r\n  }\r\n\r\n  var easeInBez = BezierFactory.getBezierEasing(0.333, 0, 0.833, 0.833, 'easeIn').get;\r\n  var easeOutBez = BezierFactory.getBezierEasing(0.167, 0.167, 0.667, 1, 'easeOut').get;\r\n  var easeInOutBez = BezierFactory.getBezierEasing(0.33, 0, 0.667, 1, 'easeInOut').get;\r\n\r\n  function sum(a, b) {\r\n    var tOfA = typeof a;\r\n    var tOfB = typeof b;\r\n    if ((isNumerable(tOfA, a) && isNumerable(tOfB, b)) || tOfA === 'string' || tOfB === 'string') {\r\n      return a + b;\r\n    }\r\n    if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\r\n      a = a.slice(0);\r\n      a[0] += b;\r\n      return a;\r\n    }\r\n    if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\r\n      b = b.slice(0);\r\n      b[0] = a + b[0];\r\n      return b;\r\n    }\r\n    if ($bm_isInstanceOfArray(a) && $bm_isInstanceOfArray(b)) {\r\n      var i = 0;\r\n      var lenA = a.length;\r\n      var lenB = b.length;\r\n      var retArr = [];\r\n      while (i < lenA || i < lenB) {\r\n        if ((typeof a[i] === 'number' || a[i] instanceof Number) && (typeof b[i] === 'number' || b[i] instanceof Number)) {\r\n          retArr[i] = a[i] + b[i];\r\n        } else {\r\n          retArr[i] = b[i] === undefined ? a[i] : a[i] || b[i];\r\n        }\r\n        i += 1;\r\n      }\r\n      return retArr;\r\n    }\r\n    return 0;\r\n  }\r\n  var add = sum;\r\n\r\n  function sub(a, b) {\r\n    var tOfA = typeof a;\r\n    var tOfB = typeof b;\r\n    if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n      if (tOfA === 'string') {\r\n        a = parseInt(a, 10);\r\n      }\r\n      if (tOfB === 'string') {\r\n        b = parseInt(b, 10);\r\n      }\r\n      return a - b;\r\n    }\r\n    if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\r\n      a = a.slice(0);\r\n      a[0] -= b;\r\n      return a;\r\n    }\r\n    if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\r\n      b = b.slice(0);\r\n      b[0] = a - b[0];\r\n      return b;\r\n    }\r\n    if ($bm_isInstanceOfArray(a) && $bm_isInstanceOfArray(b)) {\r\n      var i = 0;\r\n      var lenA = a.length;\r\n      var lenB = b.length;\r\n      var retArr = [];\r\n      while (i < lenA || i < lenB) {\r\n        if ((typeof a[i] === 'number' || a[i] instanceof Number) && (typeof b[i] === 'number' || b[i] instanceof Number)) {\r\n          retArr[i] = a[i] - b[i];\r\n        } else {\r\n          retArr[i] = b[i] === undefined ? a[i] : a[i] || b[i];\r\n        }\r\n        i += 1;\r\n      }\r\n      return retArr;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  function mul(a, b) {\r\n    var tOfA = typeof a;\r\n    var tOfB = typeof b;\r\n    var arr;\r\n    if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n      return a * b;\r\n    }\r\n\r\n    var i;\r\n    var len;\r\n    if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\r\n      len = a.length;\r\n      arr = createTypedArray('float32', len);\r\n      for (i = 0; i < len; i += 1) {\r\n        arr[i] = a[i] * b;\r\n      }\r\n      return arr;\r\n    }\r\n    if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\r\n      len = b.length;\r\n      arr = createTypedArray('float32', len);\r\n      for (i = 0; i < len; i += 1) {\r\n        arr[i] = a * b[i];\r\n      }\r\n      return arr;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  function div(a, b) {\r\n    var tOfA = typeof a;\r\n    var tOfB = typeof b;\r\n    var arr;\r\n    if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n      return a / b;\r\n    }\r\n    var i;\r\n    var len;\r\n    if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\r\n      len = a.length;\r\n      arr = createTypedArray('float32', len);\r\n      for (i = 0; i < len; i += 1) {\r\n        arr[i] = a[i] / b;\r\n      }\r\n      return arr;\r\n    }\r\n    if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\r\n      len = b.length;\r\n      arr = createTypedArray('float32', len);\r\n      for (i = 0; i < len; i += 1) {\r\n        arr[i] = a / b[i];\r\n      }\r\n      return arr;\r\n    }\r\n    return 0;\r\n  }\r\n  function mod(a, b) {\r\n    if (typeof a === 'string') {\r\n      a = parseInt(a, 10);\r\n    }\r\n    if (typeof b === 'string') {\r\n      b = parseInt(b, 10);\r\n    }\r\n    return a % b;\r\n  }\r\n  var $bm_sum = sum;\r\n  var $bm_sub = sub;\r\n  var $bm_mul = mul;\r\n  var $bm_div = div;\r\n  var $bm_mod = mod;\r\n\r\n  function clamp(num, min, max) {\r\n    if (min > max) {\r\n      var mm = max;\r\n      max = min;\r\n      min = mm;\r\n    }\r\n    return Math.min(Math.max(num, min), max);\r\n  }\r\n\r\n  function radiansToDegrees(val) {\r\n    return val / degToRads;\r\n  }\r\n  var radians_to_degrees = radiansToDegrees;\r\n\r\n  function degreesToRadians(val) {\r\n    return val * degToRads;\r\n  }\r\n  var degrees_to_radians = radiansToDegrees;\r\n\r\n  var helperLengthArray = [0, 0, 0, 0, 0, 0];\r\n\r\n  function length(arr1, arr2) {\r\n    if (typeof arr1 === 'number' || arr1 instanceof Number) {\r\n      arr2 = arr2 || 0;\r\n      return Math.abs(arr1 - arr2);\r\n    }\r\n    if (!arr2) {\r\n      arr2 = helperLengthArray;\r\n    }\r\n    var i;\r\n    var len = Math.min(arr1.length, arr2.length);\r\n    var addedLength = 0;\r\n    for (i = 0; i < len; i += 1) {\r\n      addedLength += Math.pow(arr2[i] - arr1[i], 2);\r\n    }\r\n    return Math.sqrt(addedLength);\r\n  }\r\n\r\n  function normalize(vec) {\r\n    return div(vec, length(vec));\r\n  }\r\n\r\n  function rgbToHsl(val) {\r\n    var r = val[0]; var g = val[1]; var b = val[2];\r\n    var max = Math.max(r, g, b);\r\n    var min = Math.min(r, g, b);\r\n    var h;\r\n    var s;\r\n    var l = (max + min) / 2;\r\n\r\n    if (max === min) {\r\n      h = 0; // achromatic\r\n      s = 0; // achromatic\r\n    } else {\r\n      var d = max - min;\r\n      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n      switch (max) {\r\n        case r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n        case g: h = (b - r) / d + 2; break;\r\n        case b: h = (r - g) / d + 4; break;\r\n        default: break;\r\n      }\r\n      h /= 6;\r\n    }\r\n\r\n    return [h, s, l, val[3]];\r\n  }\r\n\r\n  function hue2rgb(p, q, t) {\r\n    if (t < 0) t += 1;\r\n    if (t > 1) t -= 1;\r\n    if (t < 1 / 6) return p + (q - p) * 6 * t;\r\n    if (t < 1 / 2) return q;\r\n    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\r\n    return p;\r\n  }\r\n\r\n  function hslToRgb(val) {\r\n    var h = val[0];\r\n    var s = val[1];\r\n    var l = val[2];\r\n\r\n    var r;\r\n    var g;\r\n    var b;\r\n\r\n    if (s === 0) {\r\n      r = l; // achromatic\r\n      b = l; // achromatic\r\n      g = l; // achromatic\r\n    } else {\r\n      var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n      var p = 2 * l - q;\r\n      r = hue2rgb(p, q, h + 1 / 3);\r\n      g = hue2rgb(p, q, h);\r\n      b = hue2rgb(p, q, h - 1 / 3);\r\n    }\r\n\r\n    return [r, g, b, val[3]];\r\n  }\r\n\r\n  function linear(t, tMin, tMax, value1, value2) {\r\n    if (value1 === undefined || value2 === undefined) {\r\n      value1 = tMin;\r\n      value2 = tMax;\r\n      tMin = 0;\r\n      tMax = 1;\r\n    }\r\n    if (tMax < tMin) {\r\n      var _tMin = tMax;\r\n      tMax = tMin;\r\n      tMin = _tMin;\r\n    }\r\n    if (t <= tMin) {\r\n      return value1;\r\n    } if (t >= tMax) {\r\n      return value2;\r\n    }\r\n    var perc = tMax === tMin ? 0 : (t - tMin) / (tMax - tMin);\r\n    if (!value1.length) {\r\n      return value1 + (value2 - value1) * perc;\r\n    }\r\n    var i;\r\n    var len = value1.length;\r\n    var arr = createTypedArray('float32', len);\r\n    for (i = 0; i < len; i += 1) {\r\n      arr[i] = value1[i] + (value2[i] - value1[i]) * perc;\r\n    }\r\n    return arr;\r\n  }\r\n  function random(min, max) {\r\n    if (max === undefined) {\r\n      if (min === undefined) {\r\n        min = 0;\r\n        max = 1;\r\n      } else {\r\n        max = min;\r\n        min = undefined;\r\n      }\r\n    }\r\n    if (max.length) {\r\n      var i;\r\n      var len = max.length;\r\n      if (!min) {\r\n        min = createTypedArray('float32', len);\r\n      }\r\n      var arr = createTypedArray('float32', len);\r\n      var rnd = BMMath.random();\r\n      for (i = 0; i < len; i += 1) {\r\n        arr[i] = min[i] + rnd * (max[i] - min[i]);\r\n      }\r\n      return arr;\r\n    }\r\n    if (min === undefined) {\r\n      min = 0;\r\n    }\r\n    var rndm = BMMath.random();\r\n    return min + rndm * (max - min);\r\n  }\r\n\r\n  function createPath(points, inTangents, outTangents, closed) {\r\n    var i;\r\n    var len = points.length;\r\n    var path = shapePool.newElement();\r\n    path.setPathData(!!closed, len);\r\n    var arrPlaceholder = [0, 0];\r\n    var inVertexPoint;\r\n    var outVertexPoint;\r\n    for (i = 0; i < len; i += 1) {\r\n      inVertexPoint = (inTangents && inTangents[i]) ? inTangents[i] : arrPlaceholder;\r\n      outVertexPoint = (outTangents && outTangents[i]) ? outTangents[i] : arrPlaceholder;\r\n      path.setTripleAt(points[i][0], points[i][1], outVertexPoint[0] + points[i][0], outVertexPoint[1] + points[i][1], inVertexPoint[0] + points[i][0], inVertexPoint[1] + points[i][1], i, true);\r\n    }\r\n    return path;\r\n  }\r\n\r\n  function initiateExpression(elem, data, property) {\r\n    // Bail out if we don't want expressions\r\n    function noOp(_value) {\r\n      return _value;\r\n    }\r\n    if (!elem.globalData.renderConfig.runExpressions) {\r\n      return noOp;\r\n    }\r\n\r\n    var val = data.x;\r\n    var needsVelocity = /velocity(?![\\w\\d])/.test(val);\r\n    var _needsRandom = val.indexOf('random') !== -1;\r\n    var elemType = elem.data.ty;\r\n    var transform;\r\n    var $bm_transform;\r\n    var content;\r\n    var effect;\r\n    var thisProperty = property;\r\n    thisProperty.valueAtTime = thisProperty.getValueAtTime;\r\n    Object.defineProperty(thisProperty, 'value', {\r\n      get: function () {\r\n        return thisProperty.v;\r\n      },\r\n    });\r\n    elem.comp.frameDuration = 1 / elem.comp.globalData.frameRate;\r\n    elem.comp.displayStartTime = 0;\r\n    var inPoint = elem.data.ip / elem.comp.globalData.frameRate;\r\n    var outPoint = elem.data.op / elem.comp.globalData.frameRate;\r\n    var width = elem.data.sw ? elem.data.sw : 0;\r\n    var height = elem.data.sh ? elem.data.sh : 0;\r\n    var name = elem.data.nm;\r\n    var loopIn;\r\n    var loop_in;\r\n    var loopOut;\r\n    var loop_out;\r\n    var smooth;\r\n    var toWorld;\r\n    var fromWorld;\r\n    var fromComp;\r\n    var toComp;\r\n    var fromCompToSurface;\r\n    var position;\r\n    var rotation;\r\n    var anchorPoint;\r\n    var scale;\r\n    var thisLayer;\r\n    var thisComp;\r\n    var mask;\r\n    var valueAtTime;\r\n    var velocityAtTime;\r\n\r\n    var scoped_bm_rt;\r\n    // val = val.replace(/(\\\\?\"|')((http)(s)?(:\\/))?\\/.*?(\\\\?\"|')/g, \"\\\"\\\"\"); // deter potential network calls\r\n    var expression_function = eval('[function _expression_function(){' + val + ';scoped_bm_rt=$bm_rt}]')[0]; // eslint-disable-line no-eval\r\n    var numKeys = property.kf ? data.k.length : 0;\r\n\r\n    var active = !this.data || this.data.hd !== true;\r\n\r\n    var wiggle = function wiggle(freq, amp) {\r\n      var iWiggle;\r\n      var j;\r\n      var lenWiggle = this.pv.length ? this.pv.length : 1;\r\n      var addedAmps = createTypedArray('float32', lenWiggle);\r\n      freq = 5;\r\n      var iterations = Math.floor(time * freq);\r\n      iWiggle = 0;\r\n      j = 0;\r\n      while (iWiggle < iterations) {\r\n        // var rnd = BMMath.random();\r\n        for (j = 0; j < lenWiggle; j += 1) {\r\n          addedAmps[j] += -amp + amp * 2 * BMMath.random();\r\n          // addedAmps[j] += -amp + amp*2*rnd;\r\n        }\r\n        iWiggle += 1;\r\n      }\r\n      // var rnd2 = BMMath.random();\r\n      var periods = time * freq;\r\n      var perc = periods - Math.floor(periods);\r\n      var arr = createTypedArray('float32', lenWiggle);\r\n      if (lenWiggle > 1) {\r\n        for (j = 0; j < lenWiggle; j += 1) {\r\n          arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp * 2 * BMMath.random()) * perc;\r\n          // arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp*2*rnd)*perc;\r\n          // arr[i] = this.pv[i] + addedAmp + amp1*perc + amp2*(1-perc);\r\n        }\r\n        return arr;\r\n      }\r\n      return this.pv + addedAmps[0] + (-amp + amp * 2 * BMMath.random()) * perc;\r\n    }.bind(this);\r\n\r\n    if (thisProperty.loopIn) {\r\n      loopIn = thisProperty.loopIn.bind(thisProperty);\r\n      loop_in = loopIn;\r\n    }\r\n\r\n    if (thisProperty.loopOut) {\r\n      loopOut = thisProperty.loopOut.bind(thisProperty);\r\n      loop_out = loopOut;\r\n    }\r\n\r\n    if (thisProperty.smooth) {\r\n      smooth = thisProperty.smooth.bind(thisProperty);\r\n    }\r\n\r\n    function loopInDuration(type, duration) {\r\n      return loopIn(type, duration, true);\r\n    }\r\n\r\n    function loopOutDuration(type, duration) {\r\n      return loopOut(type, duration, true);\r\n    }\r\n\r\n    if (this.getValueAtTime) {\r\n      valueAtTime = this.getValueAtTime.bind(this);\r\n    }\r\n\r\n    if (this.getVelocityAtTime) {\r\n      velocityAtTime = this.getVelocityAtTime.bind(this);\r\n    }\r\n\r\n    var comp = elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);\r\n\r\n    function lookAt(elem1, elem2) {\r\n      var fVec = [elem2[0] - elem1[0], elem2[1] - elem1[1], elem2[2] - elem1[2]];\r\n      var pitch = Math.atan2(fVec[0], Math.sqrt(fVec[1] * fVec[1] + fVec[2] * fVec[2])) / degToRads;\r\n      var yaw = -Math.atan2(fVec[1], fVec[2]) / degToRads;\r\n      return [yaw, pitch, 0];\r\n    }\r\n\r\n    function easeOut(t, tMin, tMax, val1, val2) {\r\n      return applyEase(easeOutBez, t, tMin, tMax, val1, val2);\r\n    }\r\n\r\n    function easeIn(t, tMin, tMax, val1, val2) {\r\n      return applyEase(easeInBez, t, tMin, tMax, val1, val2);\r\n    }\r\n\r\n    function ease(t, tMin, tMax, val1, val2) {\r\n      return applyEase(easeInOutBez, t, tMin, tMax, val1, val2);\r\n    }\r\n\r\n    function applyEase(fn, t, tMin, tMax, val1, val2) {\r\n      if (val1 === undefined) {\r\n        val1 = tMin;\r\n        val2 = tMax;\r\n      } else {\r\n        t = (t - tMin) / (tMax - tMin);\r\n      }\r\n      if (t > 1) {\r\n        t = 1;\r\n      } else if (t < 0) {\r\n        t = 0;\r\n      }\r\n      var mult = fn(t);\r\n      if ($bm_isInstanceOfArray(val1)) {\r\n        var iKey;\r\n        var lenKey = val1.length;\r\n        var arr = createTypedArray('float32', lenKey);\r\n        for (iKey = 0; iKey < lenKey; iKey += 1) {\r\n          arr[iKey] = (val2[iKey] - val1[iKey]) * mult + val1[iKey];\r\n        }\r\n        return arr;\r\n      }\r\n      return (val2 - val1) * mult + val1;\r\n    }\r\n\r\n    function nearestKey(time) {\r\n      var iKey;\r\n      var lenKey = data.k.length;\r\n      var index;\r\n      var keyTime;\r\n      if (!data.k.length || typeof (data.k[0]) === 'number') {\r\n        index = 0;\r\n        keyTime = 0;\r\n      } else {\r\n        index = -1;\r\n        time *= elem.comp.globalData.frameRate;\r\n        if (time < data.k[0].t) {\r\n          index = 1;\r\n          keyTime = data.k[0].t;\r\n        } else {\r\n          for (iKey = 0; iKey < lenKey - 1; iKey += 1) {\r\n            if (time === data.k[iKey].t) {\r\n              index = iKey + 1;\r\n              keyTime = data.k[iKey].t;\r\n              break;\r\n            } else if (time > data.k[iKey].t && time < data.k[iKey + 1].t) {\r\n              if (time - data.k[iKey].t > data.k[iKey + 1].t - time) {\r\n                index = iKey + 2;\r\n                keyTime = data.k[iKey + 1].t;\r\n              } else {\r\n                index = iKey + 1;\r\n                keyTime = data.k[iKey].t;\r\n              }\r\n              break;\r\n            }\r\n          }\r\n          if (index === -1) {\r\n            index = iKey + 1;\r\n            keyTime = data.k[iKey].t;\r\n          }\r\n        }\r\n      }\r\n      var obKey = {};\r\n      obKey.index = index;\r\n      obKey.time = keyTime / elem.comp.globalData.frameRate;\r\n      return obKey;\r\n    }\r\n\r\n    function key(ind) {\r\n      var obKey;\r\n      var iKey;\r\n      var lenKey;\r\n      if (!data.k.length || typeof (data.k[0]) === 'number') {\r\n        throw new Error('The property has no keyframe at index ' + ind);\r\n      }\r\n      ind -= 1;\r\n      obKey = {\r\n        time: data.k[ind].t / elem.comp.globalData.frameRate,\r\n        value: [],\r\n      };\r\n      var arr = Object.prototype.hasOwnProperty.call(data.k[ind], 's') ? data.k[ind].s : data.k[ind - 1].e;\r\n\r\n      lenKey = arr.length;\r\n      for (iKey = 0; iKey < lenKey; iKey += 1) {\r\n        obKey[iKey] = arr[iKey];\r\n        obKey.value[iKey] = arr[iKey];\r\n      }\r\n      return obKey;\r\n    }\r\n\r\n    function framesToTime(fr, fps) {\r\n      if (!fps) {\r\n        fps = elem.comp.globalData.frameRate;\r\n      }\r\n      return fr / fps;\r\n    }\r\n\r\n    function timeToFrames(t, fps) {\r\n      if (!t && t !== 0) {\r\n        t = time;\r\n      }\r\n      if (!fps) {\r\n        fps = elem.comp.globalData.frameRate;\r\n      }\r\n      return t * fps;\r\n    }\r\n\r\n    function seedRandom(seed) {\r\n      BMMath.seedrandom(randSeed + seed);\r\n    }\r\n\r\n    function sourceRectAtTime() {\r\n      return elem.sourceRectAtTime();\r\n    }\r\n\r\n    function substring(init, end) {\r\n      if (typeof value === 'string') {\r\n        if (end === undefined) {\r\n          return value.substring(init);\r\n        }\r\n        return value.substring(init, end);\r\n      }\r\n      return '';\r\n    }\r\n\r\n    function substr(init, end) {\r\n      if (typeof value === 'string') {\r\n        if (end === undefined) {\r\n          return value.substr(init);\r\n        }\r\n        return value.substr(init, end);\r\n      }\r\n      return '';\r\n    }\r\n\r\n    function posterizeTime(framesPerSecond) {\r\n      time = framesPerSecond === 0 ? 0 : Math.floor(time * framesPerSecond) / framesPerSecond;\r\n      value = valueAtTime(time);\r\n    }\r\n\r\n    var time;\r\n    var velocity;\r\n    var value;\r\n    var text;\r\n    var textIndex;\r\n    var textTotal;\r\n    var selectorValue;\r\n    var index = elem.data.ind;\r\n    var hasParent = !!(elem.hierarchy && elem.hierarchy.length);\r\n    var parent;\r\n    var randSeed = Math.floor(Math.random() * 1000000);\r\n    var globalData = elem.globalData;\r\n\r\n    function executeExpression(_value) {\r\n      // globalData.pushExpression();\r\n      value = _value;\r\n      if (this.frameExpressionId === elem.globalData.frameId && this.propType !== 'textSelector') {\r\n        return value;\r\n      }\r\n      if (this.propType === 'textSelector') {\r\n        textIndex = this.textIndex;\r\n        textTotal = this.textTotal;\r\n        selectorValue = this.selectorValue;\r\n      }\r\n      if (!thisLayer) {\r\n        text = elem.layerInterface.text;\r\n        thisLayer = elem.layerInterface;\r\n        thisComp = elem.comp.compInterface;\r\n        toWorld = thisLayer.toWorld.bind(thisLayer);\r\n        fromWorld = thisLayer.fromWorld.bind(thisLayer);\r\n        fromComp = thisLayer.fromComp.bind(thisLayer);\r\n        toComp = thisLayer.toComp.bind(thisLayer);\r\n        mask = thisLayer.mask ? thisLayer.mask.bind(thisLayer) : null;\r\n        fromCompToSurface = fromComp;\r\n      }\r\n      if (!transform) {\r\n        transform = elem.layerInterface('ADBE Transform Group');\r\n        $bm_transform = transform;\r\n        if (transform) {\r\n          anchorPoint = transform.anchorPoint;\r\n          /* position = transform.position;\r\n                    rotation = transform.rotation;\r\n                    scale = transform.scale; */\r\n        }\r\n      }\r\n\r\n      if (elemType === 4 && !content) {\r\n        content = thisLayer('ADBE Root Vectors Group');\r\n      }\r\n      if (!effect) {\r\n        effect = thisLayer(4);\r\n      }\r\n      hasParent = !!(elem.hierarchy && elem.hierarchy.length);\r\n      if (hasParent && !parent) {\r\n        parent = elem.hierarchy[0].layerInterface;\r\n      }\r\n      time = this.comp.renderedFrame / this.comp.globalData.frameRate;\r\n      if (_needsRandom) {\r\n        seedRandom(randSeed + time);\r\n      }\r\n      if (needsVelocity) {\r\n        velocity = velocityAtTime(time);\r\n      }\r\n      expression_function();\r\n      this.frameExpressionId = elem.globalData.frameId;\r\n\r\n      // TODO: Check if it's possible to return on ShapeInterface the .v value\r\n      // Changed this to a ternary operation because Rollup failed compiling it correctly\r\n      scoped_bm_rt = scoped_bm_rt.propType === propTypes.SHAPE\r\n        ? scoped_bm_rt.v\r\n        : scoped_bm_rt;\r\n      return scoped_bm_rt;\r\n    }\r\n    // Bundlers will see these as dead code and unless we reference them\r\n    executeExpression.__preventDeadCodeRemoval = [$bm_transform, anchorPoint, time, velocity, inPoint, outPoint, width, height, name, loop_in, loop_out, smooth, toComp, fromCompToSurface, toWorld, fromWorld, mask, position, rotation, scale, thisComp, numKeys, active, wiggle, loopInDuration, loopOutDuration, comp, lookAt, easeOut, easeIn, ease, nearestKey, key, text, textIndex, textTotal, selectorValue, framesToTime, timeToFrames, sourceRectAtTime, substring, substr, posterizeTime, index, globalData];\r\n    return executeExpression;\r\n  }\r\n\r\n  ob.initiateExpression = initiateExpression;\r\n  ob.__preventDeadCodeRemoval = [window, document, XMLHttpRequest, fetch, frames, $bm_neg, add, $bm_sum, $bm_sub, $bm_mul, $bm_div, $bm_mod, clamp, radians_to_degrees, degreesToRadians, degrees_to_radians, normalize, rgbToHsl, hslToRgb, linear, random, createPath, _lottieGlobal];\r\n  ob.resetFrame = resetFrame;\r\n  return ob;\r\n}());\n\nconst Expressions = (function () {\r\n  var ob = {};\r\n  ob.initExpressions = initExpressions;\r\n  ob.resetFrame = ExpressionManager.resetFrame;\r\n\r\n  function initExpressions(animation) {\r\n    var stackCount = 0;\r\n    var registers = [];\r\n\r\n    function pushExpression() {\r\n      stackCount += 1;\r\n    }\r\n\r\n    function popExpression() {\r\n      stackCount -= 1;\r\n      if (stackCount === 0) {\r\n        releaseInstances();\r\n      }\r\n    }\r\n\r\n    function registerExpressionProperty(expression) {\r\n      if (registers.indexOf(expression) === -1) {\r\n        registers.push(expression);\r\n      }\r\n    }\r\n\r\n    function releaseInstances() {\r\n      var i;\r\n      var len = registers.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        registers[i].release();\r\n      }\r\n      registers.length = 0;\r\n    }\r\n\r\n    animation.renderer.compInterface = CompExpressionInterface(animation.renderer);\r\n    animation.renderer.globalData.projectInterface.registerComposition(animation.renderer);\r\n    animation.renderer.globalData.pushExpression = pushExpression;\r\n    animation.renderer.globalData.popExpression = popExpression;\r\n    animation.renderer.globalData.registerExpressionProperty = registerExpressionProperty;\r\n  }\r\n  return ob;\r\n}());\n\nconst MaskManagerInterface = (function () {\r\n  function MaskInterface(mask, data) {\r\n    this._mask = mask;\r\n    this._data = data;\r\n  }\r\n  Object.defineProperty(MaskInterface.prototype, 'maskPath', {\r\n    get: function () {\r\n      if (this._mask.prop.k) {\r\n        this._mask.prop.getValue();\r\n      }\r\n      return this._mask.prop;\r\n    },\r\n  });\r\n  Object.defineProperty(MaskInterface.prototype, 'maskOpacity', {\r\n    get: function () {\r\n      if (this._mask.op.k) {\r\n        this._mask.op.getValue();\r\n      }\r\n      return this._mask.op.v * 100;\r\n    },\r\n  });\r\n\r\n  var MaskManager = function (maskManager) {\r\n    var _masksInterfaces = createSizedArray(maskManager.viewData.length);\r\n    var i;\r\n    var len = maskManager.viewData.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      _masksInterfaces[i] = new MaskInterface(maskManager.viewData[i], maskManager.masksProperties[i]);\r\n    }\r\n\r\n    var maskFunction = function (name) {\r\n      i = 0;\r\n      while (i < len) {\r\n        if (maskManager.masksProperties[i].nm === name) {\r\n          return _masksInterfaces[i];\r\n        }\r\n        i += 1;\r\n      }\r\n      return null;\r\n    };\r\n    return maskFunction;\r\n  };\r\n  return MaskManager;\r\n}());\n\nconst ExpressionPropertyInterface = (function () {\r\n  var defaultUnidimensionalValue = { pv: 0, v: 0, mult: 1 };\r\n  var defaultMultidimensionalValue = { pv: [0, 0, 0], v: [0, 0, 0], mult: 1 };\r\n\r\n  function completeProperty(expressionValue, property, type) {\r\n    Object.defineProperty(expressionValue, 'velocity', {\r\n      get: function () {\r\n        return property.getVelocityAtTime(property.comp.currentFrame);\r\n      },\r\n    });\r\n    expressionValue.numKeys = property.keyframes ? property.keyframes.length : 0;\r\n    expressionValue.key = function (pos) {\r\n      if (!expressionValue.numKeys) {\r\n        return 0;\r\n      }\r\n      var value = '';\r\n      if ('s' in property.keyframes[pos - 1]) {\r\n        value = property.keyframes[pos - 1].s;\r\n      } else if ('e' in property.keyframes[pos - 2]) {\r\n        value = property.keyframes[pos - 2].e;\r\n      } else {\r\n        value = property.keyframes[pos - 2].s;\r\n      }\r\n      var valueProp = type === 'unidimensional' ? new Number(value) : Object.assign({}, value); // eslint-disable-line no-new-wrappers\r\n      valueProp.time = property.keyframes[pos - 1].t / property.elem.comp.globalData.frameRate;\r\n      valueProp.value = type === 'unidimensional' ? value[0] : value;\r\n      return valueProp;\r\n    };\r\n    expressionValue.valueAtTime = property.getValueAtTime;\r\n    expressionValue.speedAtTime = property.getSpeedAtTime;\r\n    expressionValue.velocityAtTime = property.getVelocityAtTime;\r\n    expressionValue.propertyGroup = property.propertyGroup;\r\n  }\r\n\r\n  function UnidimensionalPropertyInterface(property) {\r\n    if (!property || !('pv' in property)) {\r\n      property = defaultUnidimensionalValue;\r\n    }\r\n    var mult = 1 / property.mult;\r\n    var val = property.pv * mult;\r\n    var expressionValue = new Number(val); // eslint-disable-line no-new-wrappers\r\n    expressionValue.value = val;\r\n    completeProperty(expressionValue, property, 'unidimensional');\r\n\r\n    return function () {\r\n      if (property.k) {\r\n        property.getValue();\r\n      }\r\n      val = property.v * mult;\r\n      if (expressionValue.value !== val) {\r\n        expressionValue = new Number(val); // eslint-disable-line no-new-wrappers\r\n        expressionValue.value = val;\r\n        completeProperty(expressionValue, property, 'unidimensional');\r\n      }\r\n      return expressionValue;\r\n    };\r\n  }\r\n\r\n  function MultidimensionalPropertyInterface(property) {\r\n    if (!property || !('pv' in property)) {\r\n      property = defaultMultidimensionalValue;\r\n    }\r\n    var mult = 1 / property.mult;\r\n    var len = (property.data && property.data.l) || property.pv.length;\r\n    var expressionValue = createTypedArray('float32', len);\r\n    var arrValue = createTypedArray('float32', len);\r\n    expressionValue.value = arrValue;\r\n    completeProperty(expressionValue, property, 'multidimensional');\r\n\r\n    return function () {\r\n      if (property.k) {\r\n        property.getValue();\r\n      }\r\n      for (var i = 0; i < len; i += 1) {\r\n        arrValue[i] = property.v[i] * mult;\r\n        expressionValue[i] = arrValue[i];\r\n      }\r\n      return expressionValue;\r\n    };\r\n  }\r\n\r\n  // TODO: try to avoid using this getter\r\n  function defaultGetter() {\r\n    return defaultUnidimensionalValue;\r\n  }\r\n\r\n  return function (property) {\r\n    if (!property) {\r\n      return defaultGetter;\r\n    } if (property.propType === 'unidimensional') {\r\n      return UnidimensionalPropertyInterface(property);\r\n    }\r\n    return MultidimensionalPropertyInterface(property);\r\n  };\r\n}());\n\nconst TransformExpressionInterface = (function () {\r\n  return function (transform) {\r\n    function _thisFunction(name) {\r\n      switch (name) {\r\n        case 'scale':\r\n        case 'Scale':\r\n        case 'ADBE Scale':\r\n        case 6:\r\n          return _thisFunction.scale;\r\n        case 'rotation':\r\n        case 'Rotation':\r\n        case 'ADBE Rotation':\r\n        case 'ADBE Rotate Z':\r\n        case 10:\r\n          return _thisFunction.rotation;\r\n        case 'ADBE Rotate X':\r\n          return _thisFunction.xRotation;\r\n        case 'ADBE Rotate Y':\r\n          return _thisFunction.yRotation;\r\n        case 'position':\r\n        case 'Position':\r\n        case 'ADBE Position':\r\n        case 2:\r\n          return _thisFunction.position;\r\n        case 'ADBE Position_0':\r\n          return _thisFunction.xPosition;\r\n        case 'ADBE Position_1':\r\n          return _thisFunction.yPosition;\r\n        case 'ADBE Position_2':\r\n          return _thisFunction.zPosition;\r\n        case 'anchorPoint':\r\n        case 'AnchorPoint':\r\n        case 'Anchor Point':\r\n        case 'ADBE AnchorPoint':\r\n        case 1:\r\n          return _thisFunction.anchorPoint;\r\n        case 'opacity':\r\n        case 'Opacity':\r\n        case 11:\r\n          return _thisFunction.opacity;\r\n        default:\r\n          return null;\r\n      }\r\n    }\r\n    Object.defineProperty(_thisFunction, 'rotation', {\r\n      get: ExpressionPropertyInterface(transform.r || transform.rz),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'zRotation', {\r\n      get: ExpressionPropertyInterface(transform.rz || transform.r),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'xRotation', {\r\n      get: ExpressionPropertyInterface(transform.rx),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'yRotation', {\r\n      get: ExpressionPropertyInterface(transform.ry),\r\n    });\r\n    Object.defineProperty(_thisFunction, 'scale', {\r\n      get: ExpressionPropertyInterface(transform.s),\r\n    });\r\n    var _px;\r\n    var _py;\r\n    var _pz;\r\n    var _transformFactory;\r\n    if (transform.p) {\r\n      _transformFactory = ExpressionPropertyInterface(transform.p);\r\n    } else {\r\n      _px = ExpressionPropertyInterface(transform.px);\r\n      _py = ExpressionPropertyInterface(transform.py);\r\n      if (transform.pz) {\r\n        _pz = ExpressionPropertyInterface(transform.pz);\r\n      }\r\n    }\r\n    Object.defineProperty(_thisFunction, 'position', {\r\n      get: function () {\r\n        if (transform.p) {\r\n          return _transformFactory();\r\n        }\r\n        return [\r\n          _px(),\r\n          _py(),\r\n          _pz ? _pz() : 0];\r\n      },\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'xPosition', {\r\n      get: ExpressionPropertyInterface(transform.px),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'yPosition', {\r\n      get: ExpressionPropertyInterface(transform.py),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'zPosition', {\r\n      get: ExpressionPropertyInterface(transform.pz),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'anchorPoint', {\r\n      get: ExpressionPropertyInterface(transform.a),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'opacity', {\r\n      get: ExpressionPropertyInterface(transform.o),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'skew', {\r\n      get: ExpressionPropertyInterface(transform.sk),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'skewAxis', {\r\n      get: ExpressionPropertyInterface(transform.sa),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'orientation', {\r\n      get: ExpressionPropertyInterface(transform.or),\r\n    });\r\n\r\n    return _thisFunction;\r\n  };\r\n}());\n\nconst LayerExpressionInterface = (function () {\r\n  function getMatrix(time) {\r\n    var toWorldMat = new Matrix();\r\n    if (time !== undefined) {\r\n      var propMatrix = this._elem.finalTransform.mProp.getValueAtTime(time);\r\n      propMatrix.clone(toWorldMat);\r\n    } else {\r\n      var transformMat = this._elem.finalTransform.mProp;\r\n      transformMat.applyToMatrix(toWorldMat);\r\n    }\r\n    return toWorldMat;\r\n  }\r\n\r\n  function toWorldVec(arr, time) {\r\n    var toWorldMat = this.getMatrix(time);\r\n    toWorldMat.props[12] = 0;\r\n    toWorldMat.props[13] = 0;\r\n    toWorldMat.props[14] = 0;\r\n    return this.applyPoint(toWorldMat, arr);\r\n  }\r\n\r\n  function toWorld(arr, time) {\r\n    var toWorldMat = this.getMatrix(time);\r\n    return this.applyPoint(toWorldMat, arr);\r\n  }\r\n\r\n  function fromWorldVec(arr, time) {\r\n    var toWorldMat = this.getMatrix(time);\r\n    toWorldMat.props[12] = 0;\r\n    toWorldMat.props[13] = 0;\r\n    toWorldMat.props[14] = 0;\r\n    return this.invertPoint(toWorldMat, arr);\r\n  }\r\n\r\n  function fromWorld(arr, time) {\r\n    var toWorldMat = this.getMatrix(time);\r\n    return this.invertPoint(toWorldMat, arr);\r\n  }\r\n\r\n  function applyPoint(matrix, arr) {\r\n    if (this._elem.hierarchy && this._elem.hierarchy.length) {\r\n      var i;\r\n      var len = this._elem.hierarchy.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(matrix);\r\n      }\r\n    }\r\n    return matrix.applyToPointArray(arr[0], arr[1], arr[2] || 0);\r\n  }\r\n\r\n  function invertPoint(matrix, arr) {\r\n    if (this._elem.hierarchy && this._elem.hierarchy.length) {\r\n      var i;\r\n      var len = this._elem.hierarchy.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(matrix);\r\n      }\r\n    }\r\n    return matrix.inversePoint(arr);\r\n  }\r\n\r\n  function fromComp(arr) {\r\n    var toWorldMat = new Matrix();\r\n    toWorldMat.reset();\r\n    this._elem.finalTransform.mProp.applyToMatrix(toWorldMat);\r\n    if (this._elem.hierarchy && this._elem.hierarchy.length) {\r\n      var i;\r\n      var len = this._elem.hierarchy.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\r\n      }\r\n      return toWorldMat.inversePoint(arr);\r\n    }\r\n    return toWorldMat.inversePoint(arr);\r\n  }\r\n\r\n  function sampleImage() {\r\n    return [1, 1, 1, 1];\r\n  }\r\n\r\n  return function (elem) {\r\n    var transformInterface;\r\n\r\n    function _registerMaskInterface(maskManager) {\r\n      _thisLayerFunction.mask = new MaskManagerInterface(maskManager, elem);\r\n    }\r\n    function _registerEffectsInterface(effects) {\r\n      _thisLayerFunction.effect = effects;\r\n    }\r\n\r\n    function _thisLayerFunction(name) {\r\n      switch (name) {\r\n        case 'ADBE Root Vectors Group':\r\n        case 'Contents':\r\n        case 2:\r\n          return _thisLayerFunction.shapeInterface;\r\n        case 1:\r\n        case 6:\r\n        case 'Transform':\r\n        case 'transform':\r\n        case 'ADBE Transform Group':\r\n          return transformInterface;\r\n        case 4:\r\n        case 'ADBE Effect Parade':\r\n        case 'effects':\r\n        case 'Effects':\r\n          return _thisLayerFunction.effect;\r\n        case 'ADBE Text Properties':\r\n          return _thisLayerFunction.textInterface;\r\n        default:\r\n          return null;\r\n      }\r\n    }\r\n    _thisLayerFunction.getMatrix = getMatrix;\r\n    _thisLayerFunction.invertPoint = invertPoint;\r\n    _thisLayerFunction.applyPoint = applyPoint;\r\n    _thisLayerFunction.toWorld = toWorld;\r\n    _thisLayerFunction.toWorldVec = toWorldVec;\r\n    _thisLayerFunction.fromWorld = fromWorld;\r\n    _thisLayerFunction.fromWorldVec = fromWorldVec;\r\n    _thisLayerFunction.toComp = toWorld;\r\n    _thisLayerFunction.fromComp = fromComp;\r\n    _thisLayerFunction.sampleImage = sampleImage;\r\n    _thisLayerFunction.sourceRectAtTime = elem.sourceRectAtTime.bind(elem);\r\n    _thisLayerFunction._elem = elem;\r\n    transformInterface = TransformExpressionInterface(elem.finalTransform.mProp);\r\n    var anchorPointDescriptor = getDescriptor(transformInterface, 'anchorPoint');\r\n    Object.defineProperties(_thisLayerFunction, {\r\n      hasParent: {\r\n        get: function () {\r\n          return elem.hierarchy.length;\r\n        },\r\n      },\r\n      parent: {\r\n        get: function () {\r\n          return elem.hierarchy[0].layerInterface;\r\n        },\r\n      },\r\n      rotation: getDescriptor(transformInterface, 'rotation'),\r\n      scale: getDescriptor(transformInterface, 'scale'),\r\n      position: getDescriptor(transformInterface, 'position'),\r\n      opacity: getDescriptor(transformInterface, 'opacity'),\r\n      anchorPoint: anchorPointDescriptor,\r\n      anchor_point: anchorPointDescriptor,\r\n      transform: {\r\n        get: function () {\r\n          return transformInterface;\r\n        },\r\n      },\r\n      active: {\r\n        get: function () {\r\n          return elem.isInRange;\r\n        },\r\n      },\r\n    });\r\n\r\n    _thisLayerFunction.startTime = elem.data.st;\r\n    _thisLayerFunction.index = elem.data.ind;\r\n    _thisLayerFunction.source = elem.data.refId;\r\n    _thisLayerFunction.height = elem.data.ty === 0 ? elem.data.h : 100;\r\n    _thisLayerFunction.width = elem.data.ty === 0 ? elem.data.w : 100;\r\n    _thisLayerFunction.inPoint = elem.data.ip / elem.comp.globalData.frameRate;\r\n    _thisLayerFunction.outPoint = elem.data.op / elem.comp.globalData.frameRate;\r\n    _thisLayerFunction._name = elem.data.nm;\r\n\r\n    _thisLayerFunction.registerMaskInterface = _registerMaskInterface;\r\n    _thisLayerFunction.registerEffectsInterface = _registerEffectsInterface;\r\n    return _thisLayerFunction;\r\n  };\r\n}());\n\nconst propertyGroupFactory = (function () {\r\n  return function (interfaceFunction, parentPropertyGroup) {\r\n    return function (val) {\r\n      val = val === undefined ? 1 : val;\r\n      if (val <= 0) {\r\n        return interfaceFunction;\r\n      }\r\n      return parentPropertyGroup(val - 1);\r\n    };\r\n  };\r\n}());\n\nconst PropertyInterface = (function () {\r\n  return function (propertyName, propertyGroup) {\r\n    var interfaceFunction = {\r\n      _name: propertyName,\r\n    };\r\n\r\n    function _propertyGroup(val) {\r\n      val = val === undefined ? 1 : val;\r\n      if (val <= 0) {\r\n        return interfaceFunction;\r\n      }\r\n      return propertyGroup(val - 1);\r\n    }\r\n\r\n    return _propertyGroup;\r\n  };\r\n}());\n\nconst EffectsExpressionInterface = (function () {\r\n  var ob = {\r\n    createEffectsInterface: createEffectsInterface,\r\n  };\r\n\r\n  function createEffectsInterface(elem, propertyGroup) {\r\n    if (elem.effectsManager) {\r\n      var effectElements = [];\r\n      var effectsData = elem.data.ef;\r\n      var i;\r\n      var len = elem.effectsManager.effectElements.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        effectElements.push(createGroupInterface(effectsData[i], elem.effectsManager.effectElements[i], propertyGroup, elem));\r\n      }\r\n\r\n      var effects = elem.data.ef || [];\r\n      var groupInterface = function (name) {\r\n        i = 0;\r\n        len = effects.length;\r\n        while (i < len) {\r\n          if (name === effects[i].nm || name === effects[i].mn || name === effects[i].ix) {\r\n            return effectElements[i];\r\n          }\r\n          i += 1;\r\n        }\r\n        return null;\r\n      };\r\n      Object.defineProperty(groupInterface, 'numProperties', {\r\n        get: function () {\r\n          return effects.length;\r\n        },\r\n      });\r\n      return groupInterface;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  function createGroupInterface(data, elements, propertyGroup, elem) {\r\n    function groupInterface(name) {\r\n      var effects = data.ef;\r\n      var i = 0;\r\n      var len = effects.length;\r\n      while (i < len) {\r\n        if (name === effects[i].nm || name === effects[i].mn || name === effects[i].ix) {\r\n          if (effects[i].ty === 5) {\r\n            return effectElements[i];\r\n          }\r\n          return effectElements[i]();\r\n        }\r\n        i += 1;\r\n      }\r\n      throw new Error();\r\n    }\r\n    var _propertyGroup = propertyGroupFactory(groupInterface, propertyGroup);\r\n\r\n    var effectElements = [];\r\n    var i;\r\n    var len = data.ef.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      if (data.ef[i].ty === 5) {\r\n        effectElements.push(createGroupInterface(data.ef[i], elements.effectElements[i], elements.effectElements[i].propertyGroup, elem));\r\n      } else {\r\n        effectElements.push(createValueInterface(elements.effectElements[i], data.ef[i].ty, elem, _propertyGroup));\r\n      }\r\n    }\r\n\r\n    if (data.mn === 'ADBE Color Control') {\r\n      Object.defineProperty(groupInterface, 'color', {\r\n        get: function () {\r\n          return effectElements[0]();\r\n        },\r\n      });\r\n    }\r\n    Object.defineProperties(groupInterface, {\r\n      numProperties: {\r\n        get: function () {\r\n          return data.np;\r\n        },\r\n      },\r\n      _name: { value: data.nm },\r\n      propertyGroup: { value: _propertyGroup },\r\n    });\r\n    groupInterface.enabled = data.en !== 0;\r\n    groupInterface.active = groupInterface.enabled;\r\n    return groupInterface;\r\n  }\r\n\r\n  function createValueInterface(element, type, elem, propertyGroup) {\r\n    var expressionProperty = ExpressionPropertyInterface(element.p);\r\n    function interfaceFunction() {\r\n      if (type === 10) {\r\n        return elem.comp.compInterface(element.p.v);\r\n      }\r\n      return expressionProperty();\r\n    }\r\n\r\n    if (element.p.setGroupProperty) {\r\n      element.p.setGroupProperty(PropertyInterface('', propertyGroup));\r\n    }\r\n\r\n    return interfaceFunction;\r\n  }\r\n\r\n  return ob;\r\n}());\n\nconst ShapePathInterface = (\r\n\r\n  function () {\r\n    return function pathInterfaceFactory(shape, view, propertyGroup) {\r\n      var prop = view.sh;\r\n\r\n      function interfaceFunction(val) {\r\n        if (val === 'Shape' || val === 'shape' || val === 'Path' || val === 'path' || val === 'ADBE Vector Shape' || val === 2) {\r\n          return interfaceFunction.path;\r\n        }\r\n        return null;\r\n      }\r\n\r\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n      prop.setGroupProperty(PropertyInterface('Path', _propertyGroup));\r\n      Object.defineProperties(interfaceFunction, {\r\n        path: {\r\n          get: function () {\r\n            if (prop.k) {\r\n              prop.getValue();\r\n            }\r\n            return prop;\r\n          },\r\n        },\r\n        shape: {\r\n          get: function () {\r\n            if (prop.k) {\r\n              prop.getValue();\r\n            }\r\n            return prop;\r\n          },\r\n        },\r\n        _name: { value: shape.nm },\r\n        ix: { value: shape.ix },\r\n        propertyIndex: { value: shape.ix },\r\n        mn: { value: shape.mn },\r\n        propertyGroup: { value: propertyGroup },\r\n      });\r\n      return interfaceFunction;\r\n    };\r\n  }()\r\n);\n\nconst ShapeExpressionInterface = (function () {\r\n  function iterateElements(shapes, view, propertyGroup) {\r\n    var arr = [];\r\n    var i;\r\n    var len = shapes ? shapes.length : 0;\r\n    for (i = 0; i < len; i += 1) {\r\n      if (shapes[i].ty === 'gr') {\r\n        arr.push(groupInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'fl') {\r\n        arr.push(fillInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'st') {\r\n        arr.push(strokeInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'tm') {\r\n        arr.push(trimInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'tr') {\r\n        // arr.push(transformInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n      } else if (shapes[i].ty === 'el') {\r\n        arr.push(ellipseInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'sr') {\r\n        arr.push(starInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'sh') {\r\n        arr.push(ShapePathInterface(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'rc') {\r\n        arr.push(rectInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'rd') {\r\n        arr.push(roundedInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'rp') {\r\n        arr.push(repeaterInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'gf') {\r\n        arr.push(gradientFillInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else {\r\n        arr.push(defaultInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      }\r\n    }\r\n    return arr;\r\n  }\r\n\r\n  function contentsInterfaceFactory(shape, view, propertyGroup) {\r\n    var interfaces;\r\n    var interfaceFunction = function _interfaceFunction(value) {\r\n      var i = 0;\r\n      var len = interfaces.length;\r\n      while (i < len) {\r\n        if (interfaces[i]._name === value || interfaces[i].mn === value || interfaces[i].propertyIndex === value || interfaces[i].ix === value || interfaces[i].ind === value) {\r\n          return interfaces[i];\r\n        }\r\n        i += 1;\r\n      }\r\n      if (typeof value === 'number') {\r\n        return interfaces[value - 1];\r\n      }\r\n      return null;\r\n    };\r\n\r\n    interfaceFunction.propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    interfaces = iterateElements(shape.it, view.it, interfaceFunction.propertyGroup);\r\n    interfaceFunction.numProperties = interfaces.length;\r\n    var transformInterface = transformInterfaceFactory(shape.it[shape.it.length - 1], view.it[view.it.length - 1], interfaceFunction.propertyGroup);\r\n    interfaceFunction.transform = transformInterface;\r\n    interfaceFunction.propertyIndex = shape.cix;\r\n    interfaceFunction._name = shape.nm;\r\n\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function groupInterfaceFactory(shape, view, propertyGroup) {\r\n    var interfaceFunction = function _interfaceFunction(value) {\r\n      switch (value) {\r\n        case 'ADBE Vectors Group':\r\n        case 'Contents':\r\n        case 2:\r\n          return interfaceFunction.content;\r\n          // Not necessary for now. Keeping them here in case a new case appears\r\n          // case 'ADBE Vector Transform Group':\r\n          // case 3:\r\n        default:\r\n          return interfaceFunction.transform;\r\n      }\r\n    };\r\n    interfaceFunction.propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    var content = contentsInterfaceFactory(shape, view, interfaceFunction.propertyGroup);\r\n    var transformInterface = transformInterfaceFactory(shape.it[shape.it.length - 1], view.it[view.it.length - 1], interfaceFunction.propertyGroup);\r\n    interfaceFunction.content = content;\r\n    interfaceFunction.transform = transformInterface;\r\n    Object.defineProperty(interfaceFunction, '_name', {\r\n      get: function () {\r\n        return shape.nm;\r\n      },\r\n    });\r\n    // interfaceFunction.content = interfaceFunction;\r\n    interfaceFunction.numProperties = shape.np;\r\n    interfaceFunction.propertyIndex = shape.ix;\r\n    interfaceFunction.nm = shape.nm;\r\n    interfaceFunction.mn = shape.mn;\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function fillInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(val) {\r\n      if (val === 'Color' || val === 'color') {\r\n        return interfaceFunction.color;\r\n      } if (val === 'Opacity' || val === 'opacity') {\r\n        return interfaceFunction.opacity;\r\n      }\r\n      return null;\r\n    }\r\n    Object.defineProperties(interfaceFunction, {\r\n      color: {\r\n        get: ExpressionPropertyInterface(view.c),\r\n      },\r\n      opacity: {\r\n        get: ExpressionPropertyInterface(view.o),\r\n      },\r\n      _name: { value: shape.nm },\r\n      mn: { value: shape.mn },\r\n    });\r\n\r\n    view.c.setGroupProperty(PropertyInterface('Color', propertyGroup));\r\n    view.o.setGroupProperty(PropertyInterface('Opacity', propertyGroup));\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function gradientFillInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(val) {\r\n      if (val === 'Start Point' || val === 'start point') {\r\n        return interfaceFunction.startPoint;\r\n      }\r\n      if (val === 'End Point' || val === 'end point') {\r\n        return interfaceFunction.endPoint;\r\n      }\r\n      if (val === 'Opacity' || val === 'opacity') {\r\n        return interfaceFunction.opacity;\r\n      }\r\n      return null;\r\n    }\r\n    Object.defineProperties(interfaceFunction, {\r\n      startPoint: {\r\n        get: ExpressionPropertyInterface(view.s),\r\n      },\r\n      endPoint: {\r\n        get: ExpressionPropertyInterface(view.e),\r\n      },\r\n      opacity: {\r\n        get: ExpressionPropertyInterface(view.o),\r\n      },\r\n      type: {\r\n        get: function () {\r\n          return 'a';\r\n        },\r\n      },\r\n      _name: { value: shape.nm },\r\n      mn: { value: shape.mn },\r\n    });\r\n\r\n    view.s.setGroupProperty(PropertyInterface('Start Point', propertyGroup));\r\n    view.e.setGroupProperty(PropertyInterface('End Point', propertyGroup));\r\n    view.o.setGroupProperty(PropertyInterface('Opacity', propertyGroup));\r\n    return interfaceFunction;\r\n  }\r\n  function defaultInterfaceFactory() {\r\n    function interfaceFunction() {\r\n      return null;\r\n    }\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function strokeInterfaceFactory(shape, view, propertyGroup) {\r\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    var _dashPropertyGroup = propertyGroupFactory(dashOb, _propertyGroup);\r\n    function addPropertyToDashOb(i) {\r\n      Object.defineProperty(dashOb, shape.d[i].nm, {\r\n        get: ExpressionPropertyInterface(view.d.dataProps[i].p),\r\n      });\r\n    }\r\n    var i;\r\n    var len = shape.d ? shape.d.length : 0;\r\n    var dashOb = {};\r\n    for (i = 0; i < len; i += 1) {\r\n      addPropertyToDashOb(i);\r\n      view.d.dataProps[i].p.setGroupProperty(_dashPropertyGroup);\r\n    }\r\n\r\n    function interfaceFunction(val) {\r\n      if (val === 'Color' || val === 'color') {\r\n        return interfaceFunction.color;\r\n      } if (val === 'Opacity' || val === 'opacity') {\r\n        return interfaceFunction.opacity;\r\n      } if (val === 'Stroke Width' || val === 'stroke width') {\r\n        return interfaceFunction.strokeWidth;\r\n      }\r\n      return null;\r\n    }\r\n    Object.defineProperties(interfaceFunction, {\r\n      color: {\r\n        get: ExpressionPropertyInterface(view.c),\r\n      },\r\n      opacity: {\r\n        get: ExpressionPropertyInterface(view.o),\r\n      },\r\n      strokeWidth: {\r\n        get: ExpressionPropertyInterface(view.w),\r\n      },\r\n      dash: {\r\n        get: function () {\r\n          return dashOb;\r\n        },\r\n      },\r\n      _name: { value: shape.nm },\r\n      mn: { value: shape.mn },\r\n    });\r\n\r\n    view.c.setGroupProperty(PropertyInterface('Color', _propertyGroup));\r\n    view.o.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\r\n    view.w.setGroupProperty(PropertyInterface('Stroke Width', _propertyGroup));\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function trimInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(val) {\r\n      if (val === shape.e.ix || val === 'End' || val === 'end') {\r\n        return interfaceFunction.end;\r\n      }\r\n      if (val === shape.s.ix) {\r\n        return interfaceFunction.start;\r\n      }\r\n      if (val === shape.o.ix) {\r\n        return interfaceFunction.offset;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    interfaceFunction.propertyIndex = shape.ix;\r\n\r\n    view.s.setGroupProperty(PropertyInterface('Start', _propertyGroup));\r\n    view.e.setGroupProperty(PropertyInterface('End', _propertyGroup));\r\n    view.o.setGroupProperty(PropertyInterface('Offset', _propertyGroup));\r\n    interfaceFunction.propertyIndex = shape.ix;\r\n    interfaceFunction.propertyGroup = propertyGroup;\r\n\r\n    Object.defineProperties(interfaceFunction, {\r\n      start: {\r\n        get: ExpressionPropertyInterface(view.s),\r\n      },\r\n      end: {\r\n        get: ExpressionPropertyInterface(view.e),\r\n      },\r\n      offset: {\r\n        get: ExpressionPropertyInterface(view.o),\r\n      },\r\n      _name: { value: shape.nm },\r\n    });\r\n    interfaceFunction.mn = shape.mn;\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function transformInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(value) {\r\n      if (shape.a.ix === value || value === 'Anchor Point') {\r\n        return interfaceFunction.anchorPoint;\r\n      }\r\n      if (shape.o.ix === value || value === 'Opacity') {\r\n        return interfaceFunction.opacity;\r\n      }\r\n      if (shape.p.ix === value || value === 'Position') {\r\n        return interfaceFunction.position;\r\n      }\r\n      if (shape.r.ix === value || value === 'Rotation' || value === 'ADBE Vector Rotation') {\r\n        return interfaceFunction.rotation;\r\n      }\r\n      if (shape.s.ix === value || value === 'Scale') {\r\n        return interfaceFunction.scale;\r\n      }\r\n      if ((shape.sk && shape.sk.ix === value) || value === 'Skew') {\r\n        return interfaceFunction.skew;\r\n      }\r\n      if ((shape.sa && shape.sa.ix === value) || value === 'Skew Axis') {\r\n        return interfaceFunction.skewAxis;\r\n      }\r\n      return null;\r\n    }\r\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    view.transform.mProps.o.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\r\n    view.transform.mProps.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\r\n    view.transform.mProps.a.setGroupProperty(PropertyInterface('Anchor Point', _propertyGroup));\r\n    view.transform.mProps.s.setGroupProperty(PropertyInterface('Scale', _propertyGroup));\r\n    view.transform.mProps.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\r\n    if (view.transform.mProps.sk) {\r\n      view.transform.mProps.sk.setGroupProperty(PropertyInterface('Skew', _propertyGroup));\r\n      view.transform.mProps.sa.setGroupProperty(PropertyInterface('Skew Angle', _propertyGroup));\r\n    }\r\n    view.transform.op.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\r\n    Object.defineProperties(interfaceFunction, {\r\n      opacity: {\r\n        get: ExpressionPropertyInterface(view.transform.mProps.o),\r\n      },\r\n      position: {\r\n        get: ExpressionPropertyInterface(view.transform.mProps.p),\r\n      },\r\n      anchorPoint: {\r\n        get: ExpressionPropertyInterface(view.transform.mProps.a),\r\n      },\r\n      scale: {\r\n        get: ExpressionPropertyInterface(view.transform.mProps.s),\r\n      },\r\n      rotation: {\r\n        get: ExpressionPropertyInterface(view.transform.mProps.r),\r\n      },\r\n      skew: {\r\n        get: ExpressionPropertyInterface(view.transform.mProps.sk),\r\n      },\r\n      skewAxis: {\r\n        get: ExpressionPropertyInterface(view.transform.mProps.sa),\r\n      },\r\n      _name: { value: shape.nm },\r\n    });\r\n    interfaceFunction.ty = 'tr';\r\n    interfaceFunction.mn = shape.mn;\r\n    interfaceFunction.propertyGroup = propertyGroup;\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function ellipseInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(value) {\r\n      if (shape.p.ix === value) {\r\n        return interfaceFunction.position;\r\n      }\r\n      if (shape.s.ix === value) {\r\n        return interfaceFunction.size;\r\n      }\r\n      return null;\r\n    }\r\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    interfaceFunction.propertyIndex = shape.ix;\r\n    var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n    prop.s.setGroupProperty(PropertyInterface('Size', _propertyGroup));\r\n    prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\r\n\r\n    Object.defineProperties(interfaceFunction, {\r\n      size: {\r\n        get: ExpressionPropertyInterface(prop.s),\r\n      },\r\n      position: {\r\n        get: ExpressionPropertyInterface(prop.p),\r\n      },\r\n      _name: { value: shape.nm },\r\n    });\r\n    interfaceFunction.mn = shape.mn;\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function starInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(value) {\r\n      if (shape.p.ix === value) {\r\n        return interfaceFunction.position;\r\n      }\r\n      if (shape.r.ix === value) {\r\n        return interfaceFunction.rotation;\r\n      }\r\n      if (shape.pt.ix === value) {\r\n        return interfaceFunction.points;\r\n      }\r\n      if (shape.or.ix === value || value === 'ADBE Vector Star Outer Radius') {\r\n        return interfaceFunction.outerRadius;\r\n      }\r\n      if (shape.os.ix === value) {\r\n        return interfaceFunction.outerRoundness;\r\n      }\r\n      if (shape.ir && (shape.ir.ix === value || value === 'ADBE Vector Star Inner Radius')) {\r\n        return interfaceFunction.innerRadius;\r\n      }\r\n      if (shape.is && shape.is.ix === value) {\r\n        return interfaceFunction.innerRoundness;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n    interfaceFunction.propertyIndex = shape.ix;\r\n    prop.or.setGroupProperty(PropertyInterface('Outer Radius', _propertyGroup));\r\n    prop.os.setGroupProperty(PropertyInterface('Outer Roundness', _propertyGroup));\r\n    prop.pt.setGroupProperty(PropertyInterface('Points', _propertyGroup));\r\n    prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\r\n    prop.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\r\n    if (shape.ir) {\r\n      prop.ir.setGroupProperty(PropertyInterface('Inner Radius', _propertyGroup));\r\n      prop.is.setGroupProperty(PropertyInterface('Inner Roundness', _propertyGroup));\r\n    }\r\n\r\n    Object.defineProperties(interfaceFunction, {\r\n      position: {\r\n        get: ExpressionPropertyInterface(prop.p),\r\n      },\r\n      rotation: {\r\n        get: ExpressionPropertyInterface(prop.r),\r\n      },\r\n      points: {\r\n        get: ExpressionPropertyInterface(prop.pt),\r\n      },\r\n      outerRadius: {\r\n        get: ExpressionPropertyInterface(prop.or),\r\n      },\r\n      outerRoundness: {\r\n        get: ExpressionPropertyInterface(prop.os),\r\n      },\r\n      innerRadius: {\r\n        get: ExpressionPropertyInterface(prop.ir),\r\n      },\r\n      innerRoundness: {\r\n        get: ExpressionPropertyInterface(prop.is),\r\n      },\r\n      _name: { value: shape.nm },\r\n    });\r\n    interfaceFunction.mn = shape.mn;\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function rectInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(value) {\r\n      if (shape.p.ix === value) {\r\n        return interfaceFunction.position;\r\n      }\r\n      if (shape.r.ix === value) {\r\n        return interfaceFunction.roundness;\r\n      }\r\n      if (shape.s.ix === value || value === 'Size' || value === 'ADBE Vector Rect Size') {\r\n        return interfaceFunction.size;\r\n      }\r\n      return null;\r\n    }\r\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n\r\n    var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n    interfaceFunction.propertyIndex = shape.ix;\r\n    prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\r\n    prop.s.setGroupProperty(PropertyInterface('Size', _propertyGroup));\r\n    prop.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\r\n\r\n    Object.defineProperties(interfaceFunction, {\r\n      position: {\r\n        get: ExpressionPropertyInterface(prop.p),\r\n      },\r\n      roundness: {\r\n        get: ExpressionPropertyInterface(prop.r),\r\n      },\r\n      size: {\r\n        get: ExpressionPropertyInterface(prop.s),\r\n      },\r\n      _name: { value: shape.nm },\r\n    });\r\n    interfaceFunction.mn = shape.mn;\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function roundedInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(value) {\r\n      if (shape.r.ix === value || value === 'Round Corners 1') {\r\n        return interfaceFunction.radius;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    var prop = view;\r\n    interfaceFunction.propertyIndex = shape.ix;\r\n    prop.rd.setGroupProperty(PropertyInterface('Radius', _propertyGroup));\r\n\r\n    Object.defineProperties(interfaceFunction, {\r\n      radius: {\r\n        get: ExpressionPropertyInterface(prop.rd),\r\n      },\r\n      _name: { value: shape.nm },\r\n    });\r\n    interfaceFunction.mn = shape.mn;\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function repeaterInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(value) {\r\n      if (shape.c.ix === value || value === 'Copies') {\r\n        return interfaceFunction.copies;\r\n      } if (shape.o.ix === value || value === 'Offset') {\r\n        return interfaceFunction.offset;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    var prop = view;\r\n    interfaceFunction.propertyIndex = shape.ix;\r\n    prop.c.setGroupProperty(PropertyInterface('Copies', _propertyGroup));\r\n    prop.o.setGroupProperty(PropertyInterface('Offset', _propertyGroup));\r\n    Object.defineProperties(interfaceFunction, {\r\n      copies: {\r\n        get: ExpressionPropertyInterface(prop.c),\r\n      },\r\n      offset: {\r\n        get: ExpressionPropertyInterface(prop.o),\r\n      },\r\n      _name: { value: shape.nm },\r\n    });\r\n    interfaceFunction.mn = shape.mn;\r\n    return interfaceFunction;\r\n  }\r\n\r\n  return function (shapes, view, propertyGroup) {\r\n    var interfaces;\r\n    function _interfaceFunction(value) {\r\n      if (typeof value === 'number') {\r\n        value = value === undefined ? 1 : value;\r\n        if (value === 0) {\r\n          return propertyGroup;\r\n        }\r\n        return interfaces[value - 1];\r\n      }\r\n      var i = 0;\r\n      var len = interfaces.length;\r\n      while (i < len) {\r\n        if (interfaces[i]._name === value) {\r\n          return interfaces[i];\r\n        }\r\n        i += 1;\r\n      }\r\n      return null;\r\n    }\r\n    function parentGroupWrapper() {\r\n      return propertyGroup;\r\n    }\r\n    _interfaceFunction.propertyGroup = propertyGroupFactory(_interfaceFunction, parentGroupWrapper);\r\n    interfaces = iterateElements(shapes, view, _interfaceFunction.propertyGroup);\r\n    _interfaceFunction.numProperties = interfaces.length;\r\n    _interfaceFunction._name = 'Contents';\r\n    return _interfaceFunction;\r\n  };\r\n}());\n\nconst TextExpressionInterface = (function () {\r\n  return function (elem) {\r\n    var _sourceText;\r\n    function _thisLayerFunction(name) {\r\n      switch (name) {\r\n        case 'ADBE Text Document':\r\n          return _thisLayerFunction.sourceText;\r\n        default:\r\n          return null;\r\n      }\r\n    }\r\n    Object.defineProperty(_thisLayerFunction, 'sourceText', {\r\n      get: function () {\r\n        elem.textProperty.getValue();\r\n        var stringValue = elem.textProperty.currentData.t;\r\n        if (!_sourceText || stringValue !== _sourceText.value) {\r\n          _sourceText = new String(stringValue); // eslint-disable-line no-new-wrappers\r\n          // If stringValue is an empty string, eval returns undefined, so it has to be returned as a String primitive\r\n          _sourceText.value = stringValue || new String(stringValue); // eslint-disable-line no-new-wrappers\r\n          Object.defineProperty(_sourceText, 'style', {\r\n            get: function () {\r\n              return {\r\n                fillColor: elem.textProperty.currentData.fc,\r\n              };\r\n            },\r\n          });\r\n        }\r\n        return _sourceText;\r\n      },\r\n    });\r\n    return _thisLayerFunction;\r\n  };\r\n}());\n\nconst FootageInterface = (function () {\r\n  var outlineInterfaceFactory = (function (elem) {\r\n    var currentPropertyName = '';\r\n    var currentProperty = elem.getFootageData();\r\n    function init() {\r\n      currentPropertyName = '';\r\n      currentProperty = elem.getFootageData();\r\n      return searchProperty;\r\n    }\r\n    function searchProperty(value) {\r\n      if (currentProperty[value]) {\r\n        currentPropertyName = value;\r\n        currentProperty = currentProperty[value];\r\n        if (typeof currentProperty === 'object') {\r\n          return searchProperty;\r\n        }\r\n        return currentProperty;\r\n      }\r\n      var propertyNameIndex = value.indexOf(currentPropertyName);\r\n      if (propertyNameIndex !== -1) {\r\n        var index = parseInt(value.substr(propertyNameIndex + currentPropertyName.length), 10);\r\n        currentProperty = currentProperty[index];\r\n        if (typeof currentProperty === 'object') {\r\n          return searchProperty;\r\n        }\r\n        return currentProperty;\r\n      }\r\n      return '';\r\n    }\r\n    return init;\r\n  });\r\n\r\n  var dataInterfaceFactory = function (elem) {\r\n    function interfaceFunction(value) {\r\n      if (value === 'Outline') {\r\n        return interfaceFunction.outlineInterface();\r\n      }\r\n      return null;\r\n    }\r\n\r\n    interfaceFunction._name = 'Outline';\r\n    interfaceFunction.outlineInterface = outlineInterfaceFactory(elem);\r\n    return interfaceFunction;\r\n  };\r\n\r\n  return function (elem) {\r\n    function _interfaceFunction(value) {\r\n      if (value === 'Data') {\r\n        return _interfaceFunction.dataInterface;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    _interfaceFunction._name = 'Data';\r\n    _interfaceFunction.dataInterface = dataInterfaceFactory(elem);\r\n    return _interfaceFunction;\r\n  };\r\n}());\n\nvar interfaces = {\r\n  layer: LayerExpressionInterface,\r\n  effects: EffectsExpressionInterface,\r\n  comp: CompExpressionInterface,\r\n  shape: ShapeExpressionInterface,\r\n  text: TextExpressionInterface,\r\n  footage: FootageInterface,\r\n};\r\n\r\nfunction getInterface(type) {\r\n  return interfaces[type] || null;\r\n}\n\nconst expressionHelpers = (function () {\r\n  function searchExpressions(elem, data, prop) {\r\n    if (data.x) {\r\n      prop.k = true;\r\n      prop.x = true;\r\n      prop.initiateExpression = ExpressionManager.initiateExpression;\r\n      prop.effectsSequence.push(prop.initiateExpression(elem, data, prop).bind(prop));\r\n    }\r\n  }\r\n\r\n  function getValueAtTime(frameNum) {\r\n    frameNum *= this.elem.globalData.frameRate;\r\n    frameNum -= this.offsetTime;\r\n    if (frameNum !== this._cachingAtTime.lastFrame) {\r\n      this._cachingAtTime.lastIndex = this._cachingAtTime.lastFrame < frameNum ? this._cachingAtTime.lastIndex : 0;\r\n      this._cachingAtTime.value = this.interpolateValue(frameNum, this._cachingAtTime);\r\n      this._cachingAtTime.lastFrame = frameNum;\r\n    }\r\n    return this._cachingAtTime.value;\r\n  }\r\n\r\n  function getSpeedAtTime(frameNum) {\r\n    var delta = -0.01;\r\n    var v1 = this.getValueAtTime(frameNum);\r\n    var v2 = this.getValueAtTime(frameNum + delta);\r\n    var speed = 0;\r\n    if (v1.length) {\r\n      var i;\r\n      for (i = 0; i < v1.length; i += 1) {\r\n        speed += Math.pow(v2[i] - v1[i], 2);\r\n      }\r\n      speed = Math.sqrt(speed) * 100;\r\n    } else {\r\n      speed = 0;\r\n    }\r\n    return speed;\r\n  }\r\n\r\n  function getVelocityAtTime(frameNum) {\r\n    if (this.vel !== undefined) {\r\n      return this.vel;\r\n    }\r\n    var delta = -0.001;\r\n    // frameNum += this.elem.data.st;\r\n    var v1 = this.getValueAtTime(frameNum);\r\n    var v2 = this.getValueAtTime(frameNum + delta);\r\n    var velocity;\r\n    if (v1.length) {\r\n      velocity = createTypedArray('float32', v1.length);\r\n      var i;\r\n      for (i = 0; i < v1.length; i += 1) {\r\n        // removing frameRate\r\n        // if needed, don't add it here\r\n        // velocity[i] = this.elem.globalData.frameRate*((v2[i] - v1[i])/delta);\r\n        velocity[i] = (v2[i] - v1[i]) / delta;\r\n      }\r\n    } else {\r\n      velocity = (v2 - v1) / delta;\r\n    }\r\n    return velocity;\r\n  }\r\n\r\n  function getStaticValueAtTime() {\r\n    return this.pv;\r\n  }\r\n\r\n  function setGroupProperty(propertyGroup) {\r\n    this.propertyGroup = propertyGroup;\r\n  }\r\n\r\n  return {\r\n    searchExpressions: searchExpressions,\r\n    getSpeedAtTime: getSpeedAtTime,\r\n    getVelocityAtTime: getVelocityAtTime,\r\n    getValueAtTime: getValueAtTime,\r\n    getStaticValueAtTime: getStaticValueAtTime,\r\n    setGroupProperty: setGroupProperty,\r\n  };\r\n}());\n\nfunction addPropertyDecorator() {\r\n  function loopOut(type, duration, durationFlag) {\r\n    if (!this.k || !this.keyframes) {\r\n      return this.pv;\r\n    }\r\n    type = type ? type.toLowerCase() : '';\r\n    var currentFrame = this.comp.renderedFrame;\r\n    var keyframes = this.keyframes;\r\n    var lastKeyFrame = keyframes[keyframes.length - 1].t;\r\n    if (currentFrame <= lastKeyFrame) {\r\n      return this.pv;\r\n    }\r\n    var cycleDuration;\r\n    var firstKeyFrame;\r\n    if (!durationFlag) {\r\n      if (!duration || duration > keyframes.length - 1) {\r\n        duration = keyframes.length - 1;\r\n      }\r\n      firstKeyFrame = keyframes[keyframes.length - 1 - duration].t;\r\n      cycleDuration = lastKeyFrame - firstKeyFrame;\r\n    } else {\r\n      if (!duration) {\r\n        cycleDuration = Math.max(0, lastKeyFrame - this.elem.data.ip);\r\n      } else {\r\n        cycleDuration = Math.abs(lastKeyFrame - this.elem.comp.globalData.frameRate * duration);\r\n      }\r\n      firstKeyFrame = lastKeyFrame - cycleDuration;\r\n    }\r\n    var i;\r\n    var len;\r\n    var ret;\r\n    if (type === 'pingpong') {\r\n      var iterations = Math.floor((currentFrame - firstKeyFrame) / cycleDuration);\r\n      if (iterations % 2 !== 0) {\r\n          return this.getValueAtTime(((cycleDuration - (currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame)) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n      }\r\n    } else if (type === 'offset') {\r\n      var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n      var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n        var current = this.getValueAtTime(((currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n      var repeats = Math.floor((currentFrame - firstKeyFrame) / cycleDuration);\r\n      if (this.pv.length) {\r\n        ret = new Array(initV.length);\r\n        len = ret.length;\r\n        for (i = 0; i < len; i += 1) {\r\n          ret[i] = (endV[i] - initV[i]) * repeats + current[i];\r\n        }\r\n        return ret;\r\n      }\r\n      return (endV - initV) * repeats + current;\r\n    } else if (type === 'continue') {\r\n      var lastValue = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n      var nextLastValue = this.getValueAtTime((lastKeyFrame - 0.001) / this.comp.globalData.frameRate, 0);\r\n      if (this.pv.length) {\r\n        ret = new Array(lastValue.length);\r\n        len = ret.length;\r\n        for (i = 0; i < len; i += 1) {\r\n            ret[i] = lastValue[i] + (lastValue[i] - nextLastValue[i]) * ((currentFrame - lastKeyFrame) / this.comp.globalData.frameRate) / 0.0005; // eslint-disable-line\r\n        }\r\n        return ret;\r\n      }\r\n      return lastValue + (lastValue - nextLastValue) * (((currentFrame - lastKeyFrame)) / 0.001);\r\n    }\r\n      return this.getValueAtTime((((currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame)) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n\r\n  }\r\n\r\n  function loopIn(type, duration, durationFlag) {\r\n    if (!this.k) {\r\n      return this.pv;\r\n    }\r\n    type = type ? type.toLowerCase() : '';\r\n    var currentFrame = this.comp.renderedFrame;\r\n    var keyframes = this.keyframes;\r\n    var firstKeyFrame = keyframes[0].t;\r\n    if (currentFrame >= firstKeyFrame) {\r\n      return this.pv;\r\n    }\r\n    var cycleDuration;\r\n    var lastKeyFrame;\r\n    if (!durationFlag) {\r\n      if (!duration || duration > keyframes.length - 1) {\r\n        duration = keyframes.length - 1;\r\n      }\r\n      lastKeyFrame = keyframes[duration].t;\r\n      cycleDuration = lastKeyFrame - firstKeyFrame;\r\n    } else {\r\n      if (!duration) {\r\n        cycleDuration = Math.max(0, this.elem.data.op - firstKeyFrame);\r\n      } else {\r\n        cycleDuration = Math.abs(this.elem.comp.globalData.frameRate * duration);\r\n      }\r\n      lastKeyFrame = firstKeyFrame + cycleDuration;\r\n    }\r\n    var i;\r\n    var len;\r\n    var ret;\r\n    if (type === 'pingpong') {\r\n      var iterations = Math.floor((firstKeyFrame - currentFrame) / cycleDuration);\r\n      if (iterations % 2 === 0) {\r\n          return this.getValueAtTime((((firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame)) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n      }\r\n    } else if (type === 'offset') {\r\n      var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n      var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n      var current = this.getValueAtTime((cycleDuration - ((firstKeyFrame - currentFrame) % cycleDuration) + firstKeyFrame) / this.comp.globalData.frameRate, 0);\r\n      var repeats = Math.floor((firstKeyFrame - currentFrame) / cycleDuration) + 1;\r\n      if (this.pv.length) {\r\n        ret = new Array(initV.length);\r\n        len = ret.length;\r\n        for (i = 0; i < len; i += 1) {\r\n          ret[i] = current[i] - (endV[i] - initV[i]) * repeats;\r\n        }\r\n        return ret;\r\n      }\r\n      return current - (endV - initV) * repeats;\r\n    } else if (type === 'continue') {\r\n      var firstValue = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n      var nextFirstValue = this.getValueAtTime((firstKeyFrame + 0.001) / this.comp.globalData.frameRate, 0);\r\n      if (this.pv.length) {\r\n        ret = new Array(firstValue.length);\r\n        len = ret.length;\r\n        for (i = 0; i < len; i += 1) {\r\n          ret[i] = firstValue[i] + ((firstValue[i] - nextFirstValue[i]) * (firstKeyFrame - currentFrame)) / 0.001;\r\n        }\r\n        return ret;\r\n      }\r\n      return firstValue + ((firstValue - nextFirstValue) * (firstKeyFrame - currentFrame)) / 0.001;\r\n    }\r\n      return this.getValueAtTime(((cycleDuration - ((firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame))) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n\r\n  }\r\n\r\n  function smooth(width, samples) {\r\n    if (!this.k) {\r\n      return this.pv;\r\n    }\r\n    width = (width || 0.4) * 0.5;\r\n    samples = Math.floor(samples || 5);\r\n    if (samples <= 1) {\r\n      return this.pv;\r\n    }\r\n    var currentTime = this.comp.renderedFrame / this.comp.globalData.frameRate;\r\n    var initFrame = currentTime - width;\r\n    var endFrame = currentTime + width;\r\n    var sampleFrequency = samples > 1 ? (endFrame - initFrame) / (samples - 1) : 1;\r\n    var i = 0;\r\n    var j = 0;\r\n    var value;\r\n    if (this.pv.length) {\r\n      value = createTypedArray('float32', this.pv.length);\r\n    } else {\r\n      value = 0;\r\n    }\r\n    var sampleValue;\r\n    while (i < samples) {\r\n      sampleValue = this.getValueAtTime(initFrame + i * sampleFrequency);\r\n      if (this.pv.length) {\r\n        for (j = 0; j < this.pv.length; j += 1) {\r\n          value[j] += sampleValue[j];\r\n        }\r\n      } else {\r\n        value += sampleValue;\r\n      }\r\n      i += 1;\r\n    }\r\n    if (this.pv.length) {\r\n      for (j = 0; j < this.pv.length; j += 1) {\r\n        value[j] /= samples;\r\n      }\r\n    } else {\r\n      value /= samples;\r\n    }\r\n    return value;\r\n  }\r\n\r\n  function getTransformValueAtTime(time) {\r\n    if (!this._transformCachingAtTime) {\r\n      this._transformCachingAtTime = {\r\n        v: new Matrix(),\r\n      };\r\n    }\r\n    /// /\r\n    var matrix = this._transformCachingAtTime.v;\r\n    matrix.cloneFromProps(this.pre.props);\r\n    if (this.appliedTransformations < 1) {\r\n      var anchor = this.a.getValueAtTime(time);\r\n      matrix.translate(\r\n        -anchor[0] * this.a.mult,\r\n        -anchor[1] * this.a.mult,\r\n        anchor[2] * this.a.mult\r\n      );\r\n    }\r\n    if (this.appliedTransformations < 2) {\r\n      var scale = this.s.getValueAtTime(time);\r\n      matrix.scale(\r\n        scale[0] * this.s.mult,\r\n        scale[1] * this.s.mult,\r\n        scale[2] * this.s.mult\r\n      );\r\n    }\r\n    if (this.sk && this.appliedTransformations < 3) {\r\n      var skew = this.sk.getValueAtTime(time);\r\n      var skewAxis = this.sa.getValueAtTime(time);\r\n      matrix.skewFromAxis(-skew * this.sk.mult, skewAxis * this.sa.mult);\r\n    }\r\n    if (this.r && this.appliedTransformations < 4) {\r\n      var rotation = this.r.getValueAtTime(time);\r\n      matrix.rotate(-rotation * this.r.mult);\r\n    } else if (!this.r && this.appliedTransformations < 4) {\r\n      var rotationZ = this.rz.getValueAtTime(time);\r\n      var rotationY = this.ry.getValueAtTime(time);\r\n      var rotationX = this.rx.getValueAtTime(time);\r\n      var orientation = this.or.getValueAtTime(time);\r\n      matrix.rotateZ(-rotationZ * this.rz.mult)\r\n        .rotateY(rotationY * this.ry.mult)\r\n        .rotateX(rotationX * this.rx.mult)\r\n        .rotateZ(-orientation[2] * this.or.mult)\r\n        .rotateY(orientation[1] * this.or.mult)\r\n        .rotateX(orientation[0] * this.or.mult);\r\n    }\r\n    if (this.data.p && this.data.p.s) {\r\n      var positionX = this.px.getValueAtTime(time);\r\n      var positionY = this.py.getValueAtTime(time);\r\n      if (this.data.p.z) {\r\n        var positionZ = this.pz.getValueAtTime(time);\r\n        matrix.translate(\r\n          positionX * this.px.mult,\r\n          positionY * this.py.mult,\r\n          -positionZ * this.pz.mult\r\n        );\r\n      } else {\r\n        matrix.translate(positionX * this.px.mult, positionY * this.py.mult, 0);\r\n      }\r\n    } else {\r\n      var position = this.p.getValueAtTime(time);\r\n      matrix.translate(\r\n        position[0] * this.p.mult,\r\n        position[1] * this.p.mult,\r\n        -position[2] * this.p.mult\r\n      );\r\n    }\r\n    return matrix;\r\n    /// /\r\n  }\r\n\r\n  function getTransformStaticValueAtTime() {\r\n    return this.v.clone(new Matrix());\r\n  }\r\n\r\n  var getTransformProperty = TransformPropertyFactory.getTransformProperty;\r\n  TransformPropertyFactory.getTransformProperty = function (elem, data, container) {\r\n    var prop = getTransformProperty(elem, data, container);\r\n    if (prop.dynamicProperties.length) {\r\n      prop.getValueAtTime = getTransformValueAtTime.bind(prop);\r\n    } else {\r\n      prop.getValueAtTime = getTransformStaticValueAtTime.bind(prop);\r\n    }\r\n    prop.setGroupProperty = expressionHelpers.setGroupProperty;\r\n    return prop;\r\n  };\r\n\r\n  var propertyGetProp = PropertyFactory.getProp;\r\n  PropertyFactory.getProp = function (elem, data, type, mult, container) {\r\n    var prop = propertyGetProp(elem, data, type, mult, container);\r\n    // prop.getVelocityAtTime = getVelocityAtTime;\r\n    // prop.loopOut = loopOut;\r\n    // prop.loopIn = loopIn;\r\n    if (prop.kf) {\r\n      prop.getValueAtTime = expressionHelpers.getValueAtTime.bind(prop);\r\n    } else {\r\n      prop.getValueAtTime = expressionHelpers.getStaticValueAtTime.bind(prop);\r\n    }\r\n    prop.setGroupProperty = expressionHelpers.setGroupProperty;\r\n    prop.loopOut = loopOut;\r\n    prop.loopIn = loopIn;\r\n    prop.smooth = smooth;\r\n    prop.getVelocityAtTime = expressionHelpers.getVelocityAtTime.bind(prop);\r\n    prop.getSpeedAtTime = expressionHelpers.getSpeedAtTime.bind(prop);\r\n    prop.numKeys = data.a === 1 ? data.k.length : 0;\r\n    prop.propertyIndex = data.ix;\r\n    var value = 0;\r\n    if (type !== 0) {\r\n      value = createTypedArray('float32', data.a === 1 ? data.k[0].s.length : data.k.length);\r\n    }\r\n    prop._cachingAtTime = {\r\n      lastFrame: initialDefaultFrame,\r\n      lastIndex: 0,\r\n      value: value,\r\n    };\r\n    expressionHelpers.searchExpressions(elem, data, prop);\r\n    if (prop.k) {\r\n      container.addDynamicProperty(prop);\r\n    }\r\n\r\n    return prop;\r\n  };\r\n\r\n  function getShapeValueAtTime(frameNum) {\r\n    // For now this caching object is created only when needed instead of creating it when the shape is initialized.\r\n    if (!this._cachingAtTime) {\r\n      this._cachingAtTime = {\r\n        shapeValue: shapePool.clone(this.pv),\r\n        lastIndex: 0,\r\n        lastTime: initialDefaultFrame,\r\n      };\r\n    }\r\n\r\n    frameNum *= this.elem.globalData.frameRate;\r\n    frameNum -= this.offsetTime;\r\n    if (frameNum !== this._cachingAtTime.lastTime) {\r\n      this._cachingAtTime.lastIndex = this._cachingAtTime.lastTime < frameNum ? this._caching.lastIndex : 0;\r\n      this._cachingAtTime.lastTime = frameNum;\r\n      this.interpolateShape(frameNum, this._cachingAtTime.shapeValue, this._cachingAtTime);\r\n    }\r\n    return this._cachingAtTime.shapeValue;\r\n  }\r\n\r\n  var ShapePropertyConstructorFunction = ShapePropertyFactory.getConstructorFunction();\r\n  var KeyframedShapePropertyConstructorFunction = ShapePropertyFactory.getKeyframedConstructorFunction();\r\n\r\n  function ShapeExpressions() {}\r\n  ShapeExpressions.prototype = {\r\n    vertices: function (prop, time) {\r\n      if (this.k) {\r\n        this.getValue();\r\n      }\r\n      var shapePath = this.v;\r\n      if (time !== undefined) {\r\n        shapePath = this.getValueAtTime(time, 0);\r\n      }\r\n      var i;\r\n      var len = shapePath._length;\r\n      var vertices = shapePath[prop];\r\n      var points = shapePath.v;\r\n      var arr = createSizedArray(len);\r\n      for (i = 0; i < len; i += 1) {\r\n        if (prop === 'i' || prop === 'o') {\r\n          arr[i] = [vertices[i][0] - points[i][0], vertices[i][1] - points[i][1]];\r\n        } else {\r\n          arr[i] = [vertices[i][0], vertices[i][1]];\r\n        }\r\n      }\r\n      return arr;\r\n    },\r\n    points: function (time) {\r\n      return this.vertices('v', time);\r\n    },\r\n    inTangents: function (time) {\r\n      return this.vertices('i', time);\r\n    },\r\n    outTangents: function (time) {\r\n      return this.vertices('o', time);\r\n    },\r\n    isClosed: function () {\r\n      return this.v.c;\r\n    },\r\n    pointOnPath: function (perc, time) {\r\n      var shapePath = this.v;\r\n      if (time !== undefined) {\r\n        shapePath = this.getValueAtTime(time, 0);\r\n      }\r\n      if (!this._segmentsLength) {\r\n        this._segmentsLength = bez.getSegmentsLength(shapePath);\r\n      }\r\n\r\n      var segmentsLength = this._segmentsLength;\r\n      var lengths = segmentsLength.lengths;\r\n      var lengthPos = segmentsLength.totalLength * perc;\r\n      var i = 0;\r\n      var len = lengths.length;\r\n      var accumulatedLength = 0;\r\n      var pt;\r\n      while (i < len) {\r\n        if (accumulatedLength + lengths[i].addedLength > lengthPos) {\r\n          var initIndex = i;\r\n          var endIndex = (shapePath.c && i === len - 1) ? 0 : i + 1;\r\n          var segmentPerc = (lengthPos - accumulatedLength) / lengths[i].addedLength;\r\n          pt = bez.getPointInSegment(shapePath.v[initIndex], shapePath.v[endIndex], shapePath.o[initIndex], shapePath.i[endIndex], segmentPerc, lengths[i]);\r\n          break;\r\n        } else {\r\n          accumulatedLength += lengths[i].addedLength;\r\n        }\r\n        i += 1;\r\n      }\r\n      if (!pt) {\r\n        pt = shapePath.c ? [shapePath.v[0][0], shapePath.v[0][1]] : [shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1]];\r\n      }\r\n      return pt;\r\n    },\r\n    vectorOnPath: function (perc, time, vectorType) {\r\n      // perc doesn't use triple equality because it can be a Number object as well as a primitive.\r\n      if (perc == 1) { // eslint-disable-line eqeqeq\r\n        perc = this.v.c;\r\n      } else if (perc == 0) { // eslint-disable-line eqeqeq\r\n        perc = 0.999;\r\n      }\r\n      var pt1 = this.pointOnPath(perc, time);\r\n      var pt2 = this.pointOnPath(perc + 0.001, time);\r\n      var xLength = pt2[0] - pt1[0];\r\n      var yLength = pt2[1] - pt1[1];\r\n      var magnitude = Math.sqrt(Math.pow(xLength, 2) + Math.pow(yLength, 2));\r\n      if (magnitude === 0) {\r\n        return [0, 0];\r\n      }\r\n      var unitVector = vectorType === 'tangent' ? [xLength / magnitude, yLength / magnitude] : [-yLength / magnitude, xLength / magnitude];\r\n      return unitVector;\r\n    },\r\n    tangentOnPath: function (perc, time) {\r\n      return this.vectorOnPath(perc, time, 'tangent');\r\n    },\r\n    normalOnPath: function (perc, time) {\r\n      return this.vectorOnPath(perc, time, 'normal');\r\n    },\r\n    setGroupProperty: expressionHelpers.setGroupProperty,\r\n    getValueAtTime: expressionHelpers.getStaticValueAtTime,\r\n  };\r\n  extendPrototype([ShapeExpressions], ShapePropertyConstructorFunction);\r\n  extendPrototype([ShapeExpressions], KeyframedShapePropertyConstructorFunction);\r\n  KeyframedShapePropertyConstructorFunction.prototype.getValueAtTime = getShapeValueAtTime;\r\n  KeyframedShapePropertyConstructorFunction.prototype.initiateExpression = ExpressionManager.initiateExpression;\r\n\r\n  var propertyGetShapeProp = ShapePropertyFactory.getShapeProp;\r\n  ShapePropertyFactory.getShapeProp = function (elem, data, type, arr, trims) {\r\n    var prop = propertyGetShapeProp(elem, data, type, arr, trims);\r\n    prop.propertyIndex = data.ix;\r\n    prop.lock = false;\r\n    if (type === 3) {\r\n      expressionHelpers.searchExpressions(elem, data.pt, prop);\r\n    } else if (type === 4) {\r\n      expressionHelpers.searchExpressions(elem, data.ks, prop);\r\n    }\r\n    if (prop.k) {\r\n      elem.addDynamicProperty(prop);\r\n    }\r\n    return prop;\r\n  };\r\n}\r\n\r\nfunction initialize$1() {\r\n  addPropertyDecorator();\r\n}\n\nfunction addDecorator() {\r\n  function searchExpressions() {\r\n    if (this.data.d.x) {\r\n      this.calculateExpression = ExpressionManager.initiateExpression.bind(this)(this.elem, this.data.d, this);\r\n      this.addEffect(this.getExpressionValue.bind(this));\r\n      return true;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  TextProperty.prototype.getExpressionValue = function (currentValue, text) {\r\n    var newValue = this.calculateExpression(text);\r\n    if (currentValue.t !== newValue) {\r\n      var newData = {};\r\n      this.copyData(newData, currentValue);\r\n      newData.t = newValue.toString();\r\n      newData.__complete = false;\r\n      return newData;\r\n    }\r\n    return currentValue;\r\n  };\r\n\r\n  TextProperty.prototype.searchProperty = function () {\r\n    var isKeyframed = this.searchKeyframes();\r\n    var hasExpressions = this.searchExpressions();\r\n    this.kf = isKeyframed || hasExpressions;\r\n    return this.kf;\r\n  };\r\n\r\n  TextProperty.prototype.searchExpressions = searchExpressions;\r\n}\r\n\r\nfunction initialize() {\r\n  addDecorator();\r\n}\n\nfunction SVGComposableEffect() {\r\n\r\n}\r\nSVGComposableEffect.prototype = {\r\n  createMergeNode: (resultId, ins) => {\r\n    var feMerge = createNS('feMerge');\r\n    feMerge.setAttribute('result', resultId);\r\n    var feMergeNode;\r\n    var i;\r\n    for (i = 0; i < ins.length; i += 1) {\r\n      feMergeNode = createNS('feMergeNode');\r\n      feMergeNode.setAttribute('in', ins[i]);\r\n      feMerge.appendChild(feMergeNode);\r\n      feMerge.appendChild(feMergeNode);\r\n    }\r\n    return feMerge;\r\n  },\r\n};\n\nvar linearFilterValue = '0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0';\r\n\r\nfunction SVGTintFilter(filter, filterManager, elem, id, source) {\r\n  this.filterManager = filterManager;\r\n  var feColorMatrix = createNS('feColorMatrix');\r\n  feColorMatrix.setAttribute('type', 'matrix');\r\n  feColorMatrix.setAttribute('color-interpolation-filters', 'linearRGB');\r\n  feColorMatrix.setAttribute('values', linearFilterValue + ' 1 0');\r\n  this.linearFilter = feColorMatrix;\r\n  feColorMatrix.setAttribute('result', id + '_tint_1');\r\n  filter.appendChild(feColorMatrix);\r\n  feColorMatrix = createNS('feColorMatrix');\r\n  feColorMatrix.setAttribute('type', 'matrix');\r\n  feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n  feColorMatrix.setAttribute('values', '1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\r\n  feColorMatrix.setAttribute('result', id + '_tint_2');\r\n  filter.appendChild(feColorMatrix);\r\n  this.matrixFilter = feColorMatrix;\r\n  var feMerge = this.createMergeNode(\r\n    id,\r\n    [\r\n      source,\r\n      id + '_tint_1',\r\n      id + '_tint_2',\r\n    ]\r\n  );\r\n  filter.appendChild(feMerge);\r\n}\r\nextendPrototype([SVGComposableEffect], SVGTintFilter);\r\n\r\nSVGTintFilter.prototype.renderFrame = function (forceRender) {\r\n  if (forceRender || this.filterManager._mdf) {\r\n    var colorBlack = this.filterManager.effectElements[0].p.v;\r\n    var colorWhite = this.filterManager.effectElements[1].p.v;\r\n    var opacity = this.filterManager.effectElements[2].p.v / 100;\r\n    this.linearFilter.setAttribute('values', linearFilterValue + ' ' + opacity + ' 0');\r\n    this.matrixFilter.setAttribute('values', (colorWhite[0] - colorBlack[0]) + ' 0 0 0 ' + colorBlack[0] + ' ' + (colorWhite[1] - colorBlack[1]) + ' 0 0 0 ' + colorBlack[1] + ' ' + (colorWhite[2] - colorBlack[2]) + ' 0 0 0 ' + colorBlack[2] + ' 0 0 0 1 0');\r\n  }\r\n};\n\nfunction SVGFillFilter(filter, filterManager, elem, id) {\r\n  this.filterManager = filterManager;\r\n  var feColorMatrix = createNS('feColorMatrix');\r\n  feColorMatrix.setAttribute('type', 'matrix');\r\n  feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n  feColorMatrix.setAttribute('values', '1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\r\n  feColorMatrix.setAttribute('result', id);\r\n  filter.appendChild(feColorMatrix);\r\n  this.matrixFilter = feColorMatrix;\r\n}\r\n\r\nSVGFillFilter.prototype.renderFrame = function (forceRender) {\r\n  if (forceRender || this.filterManager._mdf) {\r\n    var color = this.filterManager.effectElements[2].p.v;\r\n    var opacity = this.filterManager.effectElements[6].p.v;\r\n    this.matrixFilter.setAttribute('values', '0 0 0 0 ' + color[0] + ' 0 0 0 0 ' + color[1] + ' 0 0 0 0 ' + color[2] + ' 0 0 0 ' + opacity + ' 0');\r\n  }\r\n};\n\nfunction SVGStrokeEffect(fil, filterManager, elem) {\r\n  this.initialized = false;\r\n  this.filterManager = filterManager;\r\n  this.elem = elem;\r\n  this.paths = [];\r\n}\r\n\r\nSVGStrokeEffect.prototype.initialize = function () {\r\n  var elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\r\n  var path;\r\n  var groupPath;\r\n  var i;\r\n  var len;\r\n  if (this.filterManager.effectElements[1].p.v === 1) {\r\n    len = this.elem.maskManager.masksProperties.length;\r\n    i = 0;\r\n  } else {\r\n    i = this.filterManager.effectElements[0].p.v - 1;\r\n    len = i + 1;\r\n  }\r\n  groupPath = createNS('g');\r\n  groupPath.setAttribute('fill', 'none');\r\n  groupPath.setAttribute('stroke-linecap', 'round');\r\n  groupPath.setAttribute('stroke-dashoffset', 1);\r\n  for (i; i < len; i += 1) {\r\n    path = createNS('path');\r\n    groupPath.appendChild(path);\r\n    this.paths.push({ p: path, m: i });\r\n  }\r\n  if (this.filterManager.effectElements[10].p.v === 3) {\r\n    var mask = createNS('mask');\r\n    var id = createElementID();\r\n    mask.setAttribute('id', id);\r\n    mask.setAttribute('mask-type', 'alpha');\r\n    mask.appendChild(groupPath);\r\n    this.elem.globalData.defs.appendChild(mask);\r\n    var g = createNS('g');\r\n    g.setAttribute('mask', 'url(' + getLocationHref() + '#' + id + ')');\r\n    while (elemChildren[0]) {\r\n      g.appendChild(elemChildren[0]);\r\n    }\r\n    this.elem.layerElement.appendChild(g);\r\n    this.masker = mask;\r\n    groupPath.setAttribute('stroke', '#fff');\r\n  } else if (this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2) {\r\n    if (this.filterManager.effectElements[10].p.v === 2) {\r\n      elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\r\n      while (elemChildren.length) {\r\n        this.elem.layerElement.removeChild(elemChildren[0]);\r\n      }\r\n    }\r\n    this.elem.layerElement.appendChild(groupPath);\r\n    this.elem.layerElement.removeAttribute('mask');\r\n    groupPath.setAttribute('stroke', '#fff');\r\n  }\r\n  this.initialized = true;\r\n  this.pathMasker = groupPath;\r\n};\r\n\r\nSVGStrokeEffect.prototype.renderFrame = function (forceRender) {\r\n  if (!this.initialized) {\r\n    this.initialize();\r\n  }\r\n  var i;\r\n  var len = this.paths.length;\r\n  var mask;\r\n  var path;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.paths[i].m !== -1) {\r\n      mask = this.elem.maskManager.viewData[this.paths[i].m];\r\n      path = this.paths[i].p;\r\n      if (forceRender || this.filterManager._mdf || mask.prop._mdf) {\r\n        path.setAttribute('d', mask.lastPath);\r\n      }\r\n      if (forceRender || this.filterManager.effectElements[9].p._mdf || this.filterManager.effectElements[4].p._mdf || this.filterManager.effectElements[7].p._mdf || this.filterManager.effectElements[8].p._mdf || mask.prop._mdf) {\r\n        var dasharrayValue;\r\n        if (this.filterManager.effectElements[7].p.v !== 0 || this.filterManager.effectElements[8].p.v !== 100) {\r\n          var s = Math.min(this.filterManager.effectElements[7].p.v, this.filterManager.effectElements[8].p.v) * 0.01;\r\n          var e = Math.max(this.filterManager.effectElements[7].p.v, this.filterManager.effectElements[8].p.v) * 0.01;\r\n          var l = path.getTotalLength();\r\n          dasharrayValue = '0 0 0 ' + l * s + ' ';\r\n          var lineLength = l * (e - s);\r\n          var segment = 1 + this.filterManager.effectElements[4].p.v * 2 * this.filterManager.effectElements[9].p.v * 0.01;\r\n          var units = Math.floor(lineLength / segment);\r\n          var j;\r\n          for (j = 0; j < units; j += 1) {\r\n            dasharrayValue += '1 ' + this.filterManager.effectElements[4].p.v * 2 * this.filterManager.effectElements[9].p.v * 0.01 + ' ';\r\n          }\r\n          dasharrayValue += '0 ' + l * 10 + ' 0 0';\r\n        } else {\r\n          dasharrayValue = '1 ' + this.filterManager.effectElements[4].p.v * 2 * this.filterManager.effectElements[9].p.v * 0.01;\r\n        }\r\n        path.setAttribute('stroke-dasharray', dasharrayValue);\r\n      }\r\n    }\r\n  }\r\n  if (forceRender || this.filterManager.effectElements[4].p._mdf) {\r\n    this.pathMasker.setAttribute('stroke-width', this.filterManager.effectElements[4].p.v * 2);\r\n  }\r\n\r\n  if (forceRender || this.filterManager.effectElements[6].p._mdf) {\r\n    this.pathMasker.setAttribute('opacity', this.filterManager.effectElements[6].p.v);\r\n  }\r\n  if (this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2) {\r\n    if (forceRender || this.filterManager.effectElements[3].p._mdf) {\r\n      var color = this.filterManager.effectElements[3].p.v;\r\n      this.pathMasker.setAttribute('stroke', 'rgb(' + bmFloor(color[0] * 255) + ',' + bmFloor(color[1] * 255) + ',' + bmFloor(color[2] * 255) + ')');\r\n    }\r\n  }\r\n};\n\nfunction SVGTritoneFilter(filter, filterManager, elem, id) {\r\n  this.filterManager = filterManager;\r\n  var feColorMatrix = createNS('feColorMatrix');\r\n  feColorMatrix.setAttribute('type', 'matrix');\r\n  feColorMatrix.setAttribute('color-interpolation-filters', 'linearRGB');\r\n  feColorMatrix.setAttribute('values', '0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\r\n  filter.appendChild(feColorMatrix);\r\n  var feComponentTransfer = createNS('feComponentTransfer');\r\n  feComponentTransfer.setAttribute('color-interpolation-filters', 'sRGB');\r\n  feComponentTransfer.setAttribute('result', id);\r\n  this.matrixFilter = feComponentTransfer;\r\n  var feFuncR = createNS('feFuncR');\r\n  feFuncR.setAttribute('type', 'table');\r\n  feComponentTransfer.appendChild(feFuncR);\r\n  this.feFuncR = feFuncR;\r\n  var feFuncG = createNS('feFuncG');\r\n  feFuncG.setAttribute('type', 'table');\r\n  feComponentTransfer.appendChild(feFuncG);\r\n  this.feFuncG = feFuncG;\r\n  var feFuncB = createNS('feFuncB');\r\n  feFuncB.setAttribute('type', 'table');\r\n  feComponentTransfer.appendChild(feFuncB);\r\n  this.feFuncB = feFuncB;\r\n  filter.appendChild(feComponentTransfer);\r\n}\r\n\r\nSVGTritoneFilter.prototype.renderFrame = function (forceRender) {\r\n  if (forceRender || this.filterManager._mdf) {\r\n    var color1 = this.filterManager.effectElements[0].p.v;\r\n    var color2 = this.filterManager.effectElements[1].p.v;\r\n    var color3 = this.filterManager.effectElements[2].p.v;\r\n    var tableR = color3[0] + ' ' + color2[0] + ' ' + color1[0];\r\n    var tableG = color3[1] + ' ' + color2[1] + ' ' + color1[1];\r\n    var tableB = color3[2] + ' ' + color2[2] + ' ' + color1[2];\r\n    this.feFuncR.setAttribute('tableValues', tableR);\r\n    this.feFuncG.setAttribute('tableValues', tableG);\r\n    this.feFuncB.setAttribute('tableValues', tableB);\r\n  }\r\n};\n\nfunction SVGProLevelsFilter(filter, filterManager, elem, id) {\r\n  this.filterManager = filterManager;\r\n  var effectElements = this.filterManager.effectElements;\r\n  var feComponentTransfer = createNS('feComponentTransfer');\r\n\r\n  // Red\r\n  if (effectElements[10].p.k || effectElements[10].p.v !== 0 || effectElements[11].p.k || effectElements[11].p.v !== 1 || effectElements[12].p.k || effectElements[12].p.v !== 1 || effectElements[13].p.k || effectElements[13].p.v !== 0 || effectElements[14].p.k || effectElements[14].p.v !== 1) {\r\n    this.feFuncR = this.createFeFunc('feFuncR', feComponentTransfer);\r\n  }\r\n  // Green\r\n  if (effectElements[17].p.k || effectElements[17].p.v !== 0 || effectElements[18].p.k || effectElements[18].p.v !== 1 || effectElements[19].p.k || effectElements[19].p.v !== 1 || effectElements[20].p.k || effectElements[20].p.v !== 0 || effectElements[21].p.k || effectElements[21].p.v !== 1) {\r\n    this.feFuncG = this.createFeFunc('feFuncG', feComponentTransfer);\r\n  }\r\n  // Blue\r\n  if (effectElements[24].p.k || effectElements[24].p.v !== 0 || effectElements[25].p.k || effectElements[25].p.v !== 1 || effectElements[26].p.k || effectElements[26].p.v !== 1 || effectElements[27].p.k || effectElements[27].p.v !== 0 || effectElements[28].p.k || effectElements[28].p.v !== 1) {\r\n    this.feFuncB = this.createFeFunc('feFuncB', feComponentTransfer);\r\n  }\r\n  // Alpha\r\n  if (effectElements[31].p.k || effectElements[31].p.v !== 0 || effectElements[32].p.k || effectElements[32].p.v !== 1 || effectElements[33].p.k || effectElements[33].p.v !== 1 || effectElements[34].p.k || effectElements[34].p.v !== 0 || effectElements[35].p.k || effectElements[35].p.v !== 1) {\r\n    this.feFuncA = this.createFeFunc('feFuncA', feComponentTransfer);\r\n  }\r\n  // RGB\r\n  if (this.feFuncR || this.feFuncG || this.feFuncB || this.feFuncA) {\r\n    feComponentTransfer.setAttribute('color-interpolation-filters', 'sRGB');\r\n    filter.appendChild(feComponentTransfer);\r\n  }\r\n\r\n  if (effectElements[3].p.k || effectElements[3].p.v !== 0 || effectElements[4].p.k || effectElements[4].p.v !== 1 || effectElements[5].p.k || effectElements[5].p.v !== 1 || effectElements[6].p.k || effectElements[6].p.v !== 0 || effectElements[7].p.k || effectElements[7].p.v !== 1) {\r\n    feComponentTransfer = createNS('feComponentTransfer');\r\n    feComponentTransfer.setAttribute('color-interpolation-filters', 'sRGB');\r\n    feComponentTransfer.setAttribute('result', id);\r\n    filter.appendChild(feComponentTransfer);\r\n    this.feFuncRComposed = this.createFeFunc('feFuncR', feComponentTransfer);\r\n    this.feFuncGComposed = this.createFeFunc('feFuncG', feComponentTransfer);\r\n    this.feFuncBComposed = this.createFeFunc('feFuncB', feComponentTransfer);\r\n  }\r\n}\r\n\r\nSVGProLevelsFilter.prototype.createFeFunc = function (type, feComponentTransfer) {\r\n  var feFunc = createNS(type);\r\n  feFunc.setAttribute('type', 'table');\r\n  feComponentTransfer.appendChild(feFunc);\r\n  return feFunc;\r\n};\r\n\r\nSVGProLevelsFilter.prototype.getTableValue = function (inputBlack, inputWhite, gamma, outputBlack, outputWhite) {\r\n  var cnt = 0;\r\n  var segments = 256;\r\n  var perc;\r\n  var min = Math.min(inputBlack, inputWhite);\r\n  var max = Math.max(inputBlack, inputWhite);\r\n  var table = Array.call(null, { length: segments });\r\n  var colorValue;\r\n  var pos = 0;\r\n  var outputDelta = outputWhite - outputBlack;\r\n  var inputDelta = inputWhite - inputBlack;\r\n  while (cnt <= 256) {\r\n    perc = cnt / 256;\r\n    if (perc <= min) {\r\n      colorValue = inputDelta < 0 ? outputWhite : outputBlack;\r\n    } else if (perc >= max) {\r\n      colorValue = inputDelta < 0 ? outputBlack : outputWhite;\r\n    } else {\r\n      colorValue = (outputBlack + outputDelta * Math.pow((perc - inputBlack) / inputDelta, 1 / gamma));\r\n    }\r\n    table[pos] = colorValue;\r\n    pos += 1;\r\n    cnt += 256 / (segments - 1);\r\n  }\r\n  return table.join(' ');\r\n};\r\n\r\nSVGProLevelsFilter.prototype.renderFrame = function (forceRender) {\r\n  if (forceRender || this.filterManager._mdf) {\r\n    var val;\r\n    var effectElements = this.filterManager.effectElements;\r\n    if (this.feFuncRComposed && (forceRender || effectElements[3].p._mdf || effectElements[4].p._mdf || effectElements[5].p._mdf || effectElements[6].p._mdf || effectElements[7].p._mdf)) {\r\n      val = this.getTableValue(effectElements[3].p.v, effectElements[4].p.v, effectElements[5].p.v, effectElements[6].p.v, effectElements[7].p.v);\r\n      this.feFuncRComposed.setAttribute('tableValues', val);\r\n      this.feFuncGComposed.setAttribute('tableValues', val);\r\n      this.feFuncBComposed.setAttribute('tableValues', val);\r\n    }\r\n\r\n    if (this.feFuncR && (forceRender || effectElements[10].p._mdf || effectElements[11].p._mdf || effectElements[12].p._mdf || effectElements[13].p._mdf || effectElements[14].p._mdf)) {\r\n      val = this.getTableValue(effectElements[10].p.v, effectElements[11].p.v, effectElements[12].p.v, effectElements[13].p.v, effectElements[14].p.v);\r\n      this.feFuncR.setAttribute('tableValues', val);\r\n    }\r\n\r\n    if (this.feFuncG && (forceRender || effectElements[17].p._mdf || effectElements[18].p._mdf || effectElements[19].p._mdf || effectElements[20].p._mdf || effectElements[21].p._mdf)) {\r\n      val = this.getTableValue(effectElements[17].p.v, effectElements[18].p.v, effectElements[19].p.v, effectElements[20].p.v, effectElements[21].p.v);\r\n      this.feFuncG.setAttribute('tableValues', val);\r\n    }\r\n\r\n    if (this.feFuncB && (forceRender || effectElements[24].p._mdf || effectElements[25].p._mdf || effectElements[26].p._mdf || effectElements[27].p._mdf || effectElements[28].p._mdf)) {\r\n      val = this.getTableValue(effectElements[24].p.v, effectElements[25].p.v, effectElements[26].p.v, effectElements[27].p.v, effectElements[28].p.v);\r\n      this.feFuncB.setAttribute('tableValues', val);\r\n    }\r\n\r\n    if (this.feFuncA && (forceRender || effectElements[31].p._mdf || effectElements[32].p._mdf || effectElements[33].p._mdf || effectElements[34].p._mdf || effectElements[35].p._mdf)) {\r\n      val = this.getTableValue(effectElements[31].p.v, effectElements[32].p.v, effectElements[33].p.v, effectElements[34].p.v, effectElements[35].p.v);\r\n      this.feFuncA.setAttribute('tableValues', val);\r\n    }\r\n  }\r\n};\n\nfunction SVGDropShadowEffect(filter, filterManager, elem, id, source) {\r\n  var globalFilterSize = filterManager.container.globalData.renderConfig.filterSize;\r\n  var filterSize = filterManager.data.fs || globalFilterSize;\r\n  filter.setAttribute('x', filterSize.x || globalFilterSize.x);\r\n  filter.setAttribute('y', filterSize.y || globalFilterSize.y);\r\n  filter.setAttribute('width', filterSize.width || globalFilterSize.width);\r\n  filter.setAttribute('height', filterSize.height || globalFilterSize.height);\r\n  this.filterManager = filterManager;\r\n\r\n  var feGaussianBlur = createNS('feGaussianBlur');\r\n  feGaussianBlur.setAttribute('in', 'SourceAlpha');\r\n  feGaussianBlur.setAttribute('result', id + '_drop_shadow_1');\r\n  feGaussianBlur.setAttribute('stdDeviation', '0');\r\n  this.feGaussianBlur = feGaussianBlur;\r\n  filter.appendChild(feGaussianBlur);\r\n\r\n  var feOffset = createNS('feOffset');\r\n  feOffset.setAttribute('dx', '25');\r\n  feOffset.setAttribute('dy', '0');\r\n  feOffset.setAttribute('in', id + '_drop_shadow_1');\r\n  feOffset.setAttribute('result', id + '_drop_shadow_2');\r\n  this.feOffset = feOffset;\r\n  filter.appendChild(feOffset);\r\n  var feFlood = createNS('feFlood');\r\n  feFlood.setAttribute('flood-color', '#00ff00');\r\n  feFlood.setAttribute('flood-opacity', '1');\r\n  feFlood.setAttribute('result', id + '_drop_shadow_3');\r\n  this.feFlood = feFlood;\r\n  filter.appendChild(feFlood);\r\n\r\n  var feComposite = createNS('feComposite');\r\n  feComposite.setAttribute('in', id + '_drop_shadow_3');\r\n  feComposite.setAttribute('in2', id + '_drop_shadow_2');\r\n  feComposite.setAttribute('operator', 'in');\r\n  feComposite.setAttribute('result', id + '_drop_shadow_4');\r\n  filter.appendChild(feComposite);\r\n\r\n  var feMerge = this.createMergeNode(\r\n    id,\r\n    [\r\n      id + '_drop_shadow_4',\r\n      source,\r\n    ]\r\n  );\r\n  filter.appendChild(feMerge);\r\n  //\r\n}\r\nextendPrototype([SVGComposableEffect], SVGDropShadowEffect);\r\n\r\nSVGDropShadowEffect.prototype.renderFrame = function (forceRender) {\r\n  if (forceRender || this.filterManager._mdf) {\r\n    if (forceRender || this.filterManager.effectElements[4].p._mdf) {\r\n      this.feGaussianBlur.setAttribute('stdDeviation', this.filterManager.effectElements[4].p.v / 4);\r\n    }\r\n    if (forceRender || this.filterManager.effectElements[0].p._mdf) {\r\n      var col = this.filterManager.effectElements[0].p.v;\r\n      this.feFlood.setAttribute('flood-color', rgbToHex(Math.round(col[0] * 255), Math.round(col[1] * 255), Math.round(col[2] * 255)));\r\n    }\r\n    if (forceRender || this.filterManager.effectElements[1].p._mdf) {\r\n      this.feFlood.setAttribute('flood-opacity', this.filterManager.effectElements[1].p.v / 255);\r\n    }\r\n    if (forceRender || this.filterManager.effectElements[2].p._mdf || this.filterManager.effectElements[3].p._mdf) {\r\n      var distance = this.filterManager.effectElements[3].p.v;\r\n      var angle = (this.filterManager.effectElements[2].p.v - 90) * degToRads;\r\n      var x = distance * Math.cos(angle);\r\n      var y = distance * Math.sin(angle);\r\n      this.feOffset.setAttribute('dx', x);\r\n      this.feOffset.setAttribute('dy', y);\r\n    }\r\n  }\r\n};\n\nvar _svgMatteSymbols = [];\r\n\r\nfunction SVGMatte3Effect(filterElem, filterManager, elem) {\r\n  this.initialized = false;\r\n  this.filterManager = filterManager;\r\n  this.filterElem = filterElem;\r\n  this.elem = elem;\r\n  elem.matteElement = createNS('g');\r\n  elem.matteElement.appendChild(elem.layerElement);\r\n  elem.matteElement.appendChild(elem.transformedElement);\r\n  elem.baseElement = elem.matteElement;\r\n}\r\n\r\nSVGMatte3Effect.prototype.findSymbol = function (mask) {\r\n  var i = 0;\r\n  var len = _svgMatteSymbols.length;\r\n  while (i < len) {\r\n    if (_svgMatteSymbols[i] === mask) {\r\n      return _svgMatteSymbols[i];\r\n    }\r\n    i += 1;\r\n  }\r\n  return null;\r\n};\r\n\r\nSVGMatte3Effect.prototype.replaceInParent = function (mask, symbolId) {\r\n  var parentNode = mask.layerElement.parentNode;\r\n  if (!parentNode) {\r\n    return;\r\n  }\r\n  var children = parentNode.children;\r\n  var i = 0;\r\n  var len = children.length;\r\n  while (i < len) {\r\n    if (children[i] === mask.layerElement) {\r\n      break;\r\n    }\r\n    i += 1;\r\n  }\r\n  var nextChild;\r\n  if (i <= len - 2) {\r\n    nextChild = children[i + 1];\r\n  }\r\n  var useElem = createNS('use');\r\n  useElem.setAttribute('href', '#' + symbolId);\r\n  if (nextChild) {\r\n    parentNode.insertBefore(useElem, nextChild);\r\n  } else {\r\n    parentNode.appendChild(useElem);\r\n  }\r\n};\r\n\r\nSVGMatte3Effect.prototype.setElementAsMask = function (elem, mask) {\r\n  if (!this.findSymbol(mask)) {\r\n    var symbolId = createElementID();\r\n    var masker = createNS('mask');\r\n    masker.setAttribute('id', mask.layerId);\r\n    masker.setAttribute('mask-type', 'alpha');\r\n    _svgMatteSymbols.push(mask);\r\n    var defs = elem.globalData.defs;\r\n    defs.appendChild(masker);\r\n    var symbol = createNS('symbol');\r\n    symbol.setAttribute('id', symbolId);\r\n    this.replaceInParent(mask, symbolId);\r\n    symbol.appendChild(mask.layerElement);\r\n    defs.appendChild(symbol);\r\n    var useElem = createNS('use');\r\n    useElem.setAttribute('href', '#' + symbolId);\r\n    masker.appendChild(useElem);\r\n    mask.data.hd = false;\r\n    mask.show();\r\n  }\r\n  elem.setMatte(mask.layerId);\r\n};\r\n\r\nSVGMatte3Effect.prototype.initialize = function () {\r\n  var ind = this.filterManager.effectElements[0].p.v;\r\n  var elements = this.elem.comp.elements;\r\n  var i = 0;\r\n  var len = elements.length;\r\n  while (i < len) {\r\n    if (elements[i] && elements[i].data.ind === ind) {\r\n      this.setElementAsMask(this.elem, elements[i]);\r\n    }\r\n    i += 1;\r\n  }\r\n  this.initialized = true;\r\n};\r\n\r\nSVGMatte3Effect.prototype.renderFrame = function () {\r\n  if (!this.initialized) {\r\n    this.initialize();\r\n  }\r\n};\n\nfunction SVGGaussianBlurEffect(filter, filterManager, elem, id) {\r\n  // Outset the filter region by 100% on all sides to accommodate blur expansion.\r\n  filter.setAttribute('x', '-100%');\r\n  filter.setAttribute('y', '-100%');\r\n  filter.setAttribute('width', '300%');\r\n  filter.setAttribute('height', '300%');\r\n\r\n  this.filterManager = filterManager;\r\n  var feGaussianBlur = createNS('feGaussianBlur');\r\n  feGaussianBlur.setAttribute('result', id);\r\n  filter.appendChild(feGaussianBlur);\r\n  this.feGaussianBlur = feGaussianBlur;\r\n}\r\n\r\nSVGGaussianBlurEffect.prototype.renderFrame = function (forceRender) {\r\n  if (forceRender || this.filterManager._mdf) {\r\n    // Empirical value, matching AE's blur appearance.\r\n    var kBlurrinessToSigma = 0.3;\r\n    var sigma = this.filterManager.effectElements[0].p.v * kBlurrinessToSigma;\r\n\r\n    // Dimensions mapping:\r\n    //\r\n    //   1 -> horizontal & vertical\r\n    //   2 -> horizontal only\r\n    //   3 -> vertical only\r\n    //\r\n    var dimensions = this.filterManager.effectElements[1].p.v;\r\n    var sigmaX = (dimensions == 3) ? 0 : sigma; // eslint-disable-line eqeqeq\r\n    var sigmaY = (dimensions == 2) ? 0 : sigma; // eslint-disable-line eqeqeq\r\n\r\n    this.feGaussianBlur.setAttribute('stdDeviation', sigmaX + ' ' + sigmaY);\r\n\r\n    // Repeat edges mapping:\r\n    //\r\n    //   0 -> off -> duplicate\r\n    //   1 -> on  -> wrap\r\n    var edgeMode = (this.filterManager.effectElements[2].p.v == 1) ? 'wrap' : 'duplicate'; // eslint-disable-line eqeqeq\r\n    this.feGaussianBlur.setAttribute('edgeMode', edgeMode);\r\n  }\r\n};\n\nfunction TransformEffect() {\r\n}\r\n\r\nTransformEffect.prototype.init = function (effectsManager) {\r\n  this.effectsManager = effectsManager;\r\n  this.type = effectTypes.TRANSFORM_EFFECT;\r\n  this.matrix = new Matrix();\r\n  this.opacity = -1;\r\n  this._mdf = false;\r\n  this._opMdf = false;\r\n};\r\n\r\nTransformEffect.prototype.renderFrame = function (forceFrame) {\r\n  this._opMdf = false;\r\n  this._mdf = false;\r\n  if (forceFrame || this.effectsManager._mdf) {\r\n    var effectElements = this.effectsManager.effectElements;\r\n    var anchor = effectElements[0].p.v;\r\n    var position = effectElements[1].p.v;\r\n    var isUniformScale = effectElements[2].p.v === 1;\r\n    var scaleHeight = effectElements[3].p.v;\r\n    var scaleWidth = isUniformScale ? scaleHeight : effectElements[4].p.v;\r\n    var skew = effectElements[5].p.v;\r\n    var skewAxis = effectElements[6].p.v;\r\n    var rotation = effectElements[7].p.v;\r\n    this.matrix.reset();\r\n    this.matrix.translate(-anchor[0], -anchor[1], anchor[2]);\r\n    this.matrix.scale(scaleWidth * 0.01, scaleHeight * 0.01, 1);\r\n    this.matrix.rotate(-rotation * degToRads);\r\n    this.matrix.skewFromAxis(-skew * degToRads, (skewAxis + 90) * degToRads);\r\n    this.matrix.translate(position[0], position[1], 0);\r\n    this._mdf = true;\r\n    if (this.opacity !== effectElements[8].p.v) {\r\n      this.opacity = effectElements[8].p.v;\r\n      this._opMdf = true;\r\n    }\r\n  }\r\n};\n\nfunction SVGTransformEffect(_, filterManager) {\n  this.init(filterManager);\n}\n\nextendPrototype([TransformEffect], SVGTransformEffect);\n\nfunction CVTransformEffect(effectsManager) {\n  this.init(effectsManager);\n}\nextendPrototype([TransformEffect], CVTransformEffect);\n\n// Registering renderers\r\nregisterRenderer('canvas', CanvasRenderer);\r\nregisterRenderer('html', HybridRenderer);\r\nregisterRenderer('svg', SVGRenderer);\r\n\r\n// Registering shape modifiers\r\nShapeModifiers.registerModifier('tm', TrimModifier);\r\nShapeModifiers.registerModifier('pb', PuckerAndBloatModifier);\r\nShapeModifiers.registerModifier('rp', RepeaterModifier);\r\nShapeModifiers.registerModifier('rd', RoundCornersModifier);\r\nShapeModifiers.registerModifier('zz', ZigZagModifier);\r\nShapeModifiers.registerModifier('op', OffsetPathModifier);\r\n\r\n// Registering expression plugin\r\nsetExpressionsPlugin(Expressions);\r\nsetExpressionInterfaces(getInterface);\r\ninitialize$1();\r\ninitialize();\r\n\r\n// Registering svg effects\r\nregisterEffect$1(20, SVGTintFilter, true);\r\nregisterEffect$1(21, SVGFillFilter, true);\r\nregisterEffect$1(22, SVGStrokeEffect, false);\r\nregisterEffect$1(23, SVGTritoneFilter, true);\r\nregisterEffect$1(24, SVGProLevelsFilter, true);\r\nregisterEffect$1(25, SVGDropShadowEffect, true);\r\nregisterEffect$1(28, SVGMatte3Effect, false);\r\nregisterEffect$1(29, SVGGaussianBlurEffect, true);\r\nregisterEffect$1(35, SVGTransformEffect, false);\r\nregisterEffect(35, CVTransformEffect);\n\nexport { lottie as default };\n","import classNames from 'classnames';\nimport * as React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst CardImg = /*#__PURE__*/React.forwardRef(\n// Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\n({\n  bsPrefix,\n  className,\n  variant,\n  as: Component = 'img',\n  ...props\n}, ref) => {\n  const prefix = useBootstrapPrefix(bsPrefix, 'card-img');\n  return /*#__PURE__*/_jsx(Component, {\n    ref: ref,\n    className: classNames(variant ? `${prefix}-${variant}` : prefix, className),\n    ...props\n  });\n});\nCardImg.displayName = 'CardImg';\nexport default CardImg;","import * as React from 'react';\nconst context = /*#__PURE__*/React.createContext(null);\ncontext.displayName = 'CardHeaderContext';\nexport default context;","import classNames from 'classnames';\nimport * as React from 'react';\nimport { useMemo } from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport CardHeaderContext from './CardHeaderContext';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst CardHeader = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  className,\n  // Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\n  as: Component = 'div',\n  ...props\n}, ref) => {\n  const prefix = useBootstrapPrefix(bsPrefix, 'card-header');\n  const contextValue = useMemo(() => ({\n    cardHeaderBsPrefix: prefix\n  }), [prefix]);\n  return /*#__PURE__*/_jsx(CardHeaderContext.Provider, {\n    value: contextValue,\n    children: /*#__PURE__*/_jsx(Component, {\n      ref: ref,\n      ...props,\n      className: classNames(className, prefix)\n    })\n  });\n});\nCardHeader.displayName = 'CardHeader';\nexport default CardHeader;","import classNames from 'classnames';\nimport * as React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport createWithBsPrefix from './createWithBsPrefix';\nimport divWithClassName from './divWithClassName';\nimport CardImg from './CardImg';\nimport CardHeader from './CardHeader';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst DivStyledAsH5 = divWithClassName('h5');\nconst DivStyledAsH6 = divWithClassName('h6');\nconst CardBody = createWithBsPrefix('card-body');\nconst CardTitle = createWithBsPrefix('card-title', {\n  Component: DivStyledAsH5\n});\nconst CardSubtitle = createWithBsPrefix('card-subtitle', {\n  Component: DivStyledAsH6\n});\nconst CardLink = createWithBsPrefix('card-link', {\n  Component: 'a'\n});\nconst CardText = createWithBsPrefix('card-text', {\n  Component: 'p'\n});\nconst CardFooter = createWithBsPrefix('card-footer');\nconst CardImgOverlay = createWithBsPrefix('card-img-overlay');\nconst Card = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  className,\n  bg,\n  text,\n  border,\n  body = false,\n  children,\n  // Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\n  as: Component = 'div',\n  ...props\n}, ref) => {\n  const prefix = useBootstrapPrefix(bsPrefix, 'card');\n  return /*#__PURE__*/_jsx(Component, {\n    ref: ref,\n    ...props,\n    className: classNames(className, prefix, bg && `bg-${bg}`, text && `text-${text}`, border && `border-${border}`),\n    children: body ? /*#__PURE__*/_jsx(CardBody, {\n      children: children\n    }) : children\n  });\n});\nCard.displayName = 'Card';\nexport default Object.assign(Card, {\n  Img: CardImg,\n  Title: CardTitle,\n  Subtitle: CardSubtitle,\n  Body: CardBody,\n  Link: CardLink,\n  Text: CardText,\n  Header: CardHeader,\n  Footer: CardFooter,\n  ImgOverlay: CardImgOverlay\n});","/**\n * Safe chained function\n *\n * Will only create a new function if needed,\n * otherwise will pass back existing functions or null.\n *\n * @param {function} functions to chain\n * @returns {function|null}\n */\nfunction createChainedFunction(...funcs) {\n  return funcs.filter(f => f != null).reduce((acc, f) => {\n    if (typeof f !== 'function') {\n      throw new Error('Invalid Argument Type, must only provide functions, undefined, or null.');\n    }\n    if (acc === null) return f;\n    return function chainedFunction(...args) {\n      // @ts-ignore\n      acc.apply(this, args);\n      // @ts-ignore\n      f.apply(this, args);\n    };\n  }, null);\n}\nexport default createChainedFunction;","import classNames from 'classnames';\nimport css from 'dom-helpers/css';\nimport React, { useMemo } from 'react';\nimport { ENTERED, ENTERING, EXITED, EXITING } from 'react-transition-group/Transition';\nimport transitionEndListener from './transitionEndListener';\nimport createChainedFunction from './createChainedFunction';\nimport triggerBrowserReflow from './triggerBrowserReflow';\nimport TransitionWrapper from './TransitionWrapper';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst MARGINS = {\n  height: ['marginTop', 'marginBottom'],\n  width: ['marginLeft', 'marginRight']\n};\nfunction getDefaultDimensionValue(dimension, elem) {\n  const offset = `offset${dimension[0].toUpperCase()}${dimension.slice(1)}`;\n  const value = elem[offset];\n  const margins = MARGINS[dimension];\n  return value +\n  // @ts-ignore\n  parseInt(css(elem, margins[0]), 10) +\n  // @ts-ignore\n  parseInt(css(elem, margins[1]), 10);\n}\nconst collapseStyles = {\n  [EXITED]: 'collapse',\n  [EXITING]: 'collapsing',\n  [ENTERING]: 'collapsing',\n  [ENTERED]: 'collapse show'\n};\nconst Collapse = /*#__PURE__*/React.forwardRef(({\n  onEnter,\n  onEntering,\n  onEntered,\n  onExit,\n  onExiting,\n  className,\n  children,\n  dimension = 'height',\n  in: inProp = false,\n  timeout = 300,\n  mountOnEnter = false,\n  unmountOnExit = false,\n  appear = false,\n  getDimensionValue = getDefaultDimensionValue,\n  ...props\n}, ref) => {\n  /* Compute dimension */\n  const computedDimension = typeof dimension === 'function' ? dimension() : dimension;\n\n  /* -- Expanding -- */\n  const handleEnter = useMemo(() => createChainedFunction(elem => {\n    elem.style[computedDimension] = '0';\n  }, onEnter), [computedDimension, onEnter]);\n  const handleEntering = useMemo(() => createChainedFunction(elem => {\n    const scroll = `scroll${computedDimension[0].toUpperCase()}${computedDimension.slice(1)}`;\n    elem.style[computedDimension] = `${elem[scroll]}px`;\n  }, onEntering), [computedDimension, onEntering]);\n  const handleEntered = useMemo(() => createChainedFunction(elem => {\n    elem.style[computedDimension] = null;\n  }, onEntered), [computedDimension, onEntered]);\n\n  /* -- Collapsing -- */\n  const handleExit = useMemo(() => createChainedFunction(elem => {\n    elem.style[computedDimension] = `${getDimensionValue(computedDimension, elem)}px`;\n    triggerBrowserReflow(elem);\n  }, onExit), [onExit, getDimensionValue, computedDimension]);\n  const handleExiting = useMemo(() => createChainedFunction(elem => {\n    elem.style[computedDimension] = null;\n  }, onExiting), [computedDimension, onExiting]);\n  return /*#__PURE__*/_jsx(TransitionWrapper, {\n    ref: ref,\n    addEndListener: transitionEndListener,\n    ...props,\n    \"aria-expanded\": props.role ? inProp : null,\n    onEnter: handleEnter,\n    onEntering: handleEntering,\n    onEntered: handleEntered,\n    onExit: handleExit,\n    onExiting: handleExiting,\n    childRef: children.ref,\n    in: inProp,\n    timeout: timeout,\n    mountOnEnter: mountOnEnter,\n    unmountOnExit: unmountOnExit,\n    appear: appear,\n    children: (state, innerProps) => /*#__PURE__*/React.cloneElement(children, {\n      ...innerProps,\n      className: classNames(className, children.props.className, collapseStyles[state], computedDimension === 'width' && 'collapse-horizontal')\n    })\n  });\n});\n\n// @ts-ignore\n\nexport default Collapse;","import classNames from 'classnames';\nimport * as React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst Container = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  fluid = false,\n  // Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\n  as: Component = 'div',\n  className,\n  ...props\n}, ref) => {\n  const prefix = useBootstrapPrefix(bsPrefix, 'container');\n  const suffix = typeof fluid === 'string' ? `-${fluid}` : '-fluid';\n  return /*#__PURE__*/_jsx(Component, {\n    ref: ref,\n    ...props,\n    className: classNames(className, fluid ? `${prefix}${suffix}` : prefix)\n  });\n});\nContainer.displayName = 'Container';\nexport default Container;","import * as React from 'react';\nconst context = /*#__PURE__*/React.createContext(null);\ncontext.displayName = 'InputGroupContext';\nexport default context;","import classNames from 'classnames';\nimport * as React from 'react';\nimport { useMemo } from 'react';\nimport createWithBsPrefix from './createWithBsPrefix';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport FormCheckInput from './FormCheckInput';\nimport InputGroupContext from './InputGroupContext';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst InputGroupText = createWithBsPrefix('input-group-text', {\n  Component: 'span'\n});\nconst InputGroupCheckbox = props => /*#__PURE__*/_jsx(InputGroupText, {\n  children: /*#__PURE__*/_jsx(FormCheckInput, {\n    type: \"checkbox\",\n    ...props\n  })\n});\nconst InputGroupRadio = props => /*#__PURE__*/_jsx(InputGroupText, {\n  children: /*#__PURE__*/_jsx(FormCheckInput, {\n    type: \"radio\",\n    ...props\n  })\n});\nconst InputGroup = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  size,\n  hasValidation,\n  className,\n  // Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\n  as: Component = 'div',\n  ...props\n}, ref) => {\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'input-group');\n\n  // Intentionally an empty object. Used in detecting if a dropdown\n  // exists under an input group.\n  const contextValue = useMemo(() => ({}), []);\n  return /*#__PURE__*/_jsx(InputGroupContext.Provider, {\n    value: contextValue,\n    children: /*#__PURE__*/_jsx(Component, {\n      ref: ref,\n      ...props,\n      className: classNames(className, bsPrefix, size && `${bsPrefix}-${size}`, hasValidation && 'has-validation')\n    })\n  });\n});\nInputGroup.displayName = 'InputGroup';\nexport default Object.assign(InputGroup, {\n  Text: InputGroupText,\n  Radio: InputGroupRadio,\n  Checkbox: InputGroupCheckbox\n});","import classNames from 'classnames';\nimport * as React from 'react';\nimport { useBootstrapPrefix, useBootstrapBreakpoints, useBootstrapMinBreakpoint } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst Row = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  className,\n  // Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\n  as: Component = 'div',\n  ...props\n}, ref) => {\n  const decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'row');\n  const breakpoints = useBootstrapBreakpoints();\n  const minBreakpoint = useBootstrapMinBreakpoint();\n  const sizePrefix = `${decoratedBsPrefix}-cols`;\n  const classes = [];\n  breakpoints.forEach(brkPoint => {\n    const propValue = props[brkPoint];\n    delete props[brkPoint];\n    let cols;\n    if (propValue != null && typeof propValue === 'object') {\n      ({\n        cols\n      } = propValue);\n    } else {\n      cols = propValue;\n    }\n    const infix = brkPoint !== minBreakpoint ? `-${brkPoint}` : '';\n    if (cols != null) classes.push(`${sizePrefix}${infix}-${cols}`);\n  });\n  return /*#__PURE__*/_jsx(Component, {\n    ref: ref,\n    ...props,\n    className: classNames(className, decoratedBsPrefix, ...classes)\n  });\n});\nRow.displayName = 'Row';\nexport default Row;"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_typeof","obj","Symbol","iterator","constructor","prototype","value","configurable","writable","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","call","_toConsumableArray","arr","Array","isArray","_arrayLikeToArray","_arrayWithoutHoles","iter","from","_iterableToArray","o","minLen","n","toString","slice","name","test","_unsupportedIterableToArray","TypeError","_nonIterableSpread","len","arr2","camelize","string","replace","match","chr","toUpperCase","substr","toLowerCase","_excluded","PRODUCTION","process","e","normalizeIconArgs","icon","prefix","iconName","parse","objectWithKey","FontAwesomeIcon","React","props","ref","iconArgs","maskArgs","mask","symbol","className","title","titleId","maskId","iconLookup","classes","concat","_classes","beat","fade","beatFade","bounce","shake","flash","spin","spinPulse","spinReverse","pulse","fixedWidth","inverse","border","listItem","flip","size","rotation","pull","swapOpacity","map","classList","split","transform","renderedIcon","_console","console","error","log","abstract","extraProps","defaultProps","hasOwnProperty","convertCurry","displayName","propTypes","PropTypes","convert","createElement","element","undefined","children","child","mixins","attributes","reduce","acc","val","attrs","s","trim","pair","prop","startsWith","charAt","_extraProps$style","style","existingStyle","remaining","tag","bind","useLottie","animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","assetsPath","rendererSettings","rest","_excluded$1","_useState2","_slicedToArray","useState","animationLoaded","setAnimationLoaded","animationInstanceRef","useRef","animationContainer","play","_a","current","stop","pause","setSpeed","speed","goToAndPlay","isFrame","goToAndStop","setDirection","direction","playSegments","segments","forceFlag","setSubframe","useSubFrames","getDuration","inFrames","destroy","loadAnimation","forcedConfigs","config","container","lottie__default","useEffect","onUnmount","currentRawFrame","setSegment","resetSegments","listeners","handler","listener","deregisterList","addEventListener","removeEventListener","deregister","View","React__default","animationContainerRef","animationItem","getContainerVisibility","_container$getBoundin","getBoundingClientRect","top","height","window","innerHeight","getContainerCursorPosition","cursorX","cursorY","_container$getBoundin2","x","left","width","y","useInitInteractivity","_ref","wrapperRef","mode","actions","wrapper","scrollModeHandler","assignedSegment","scrollHandler","currentPercent","action","find","_ref2","visibility","type","frames","frameToGo","Math","ceil","firstFrame","isPaused","document","cursorModeHandler","handleCursor","_x","_y","pos","_ref3","position","Number","isNaN","xPercent","yPercent","mouseMoveHandler","ev","clientX","clientY","mouseOutHandler","useLottieInteractivity","_ref4","lottieObj","Lottie","_b","_c","interactivity","lottieProps","_useLottie","svgNS","locationHref","_useWebWorker","initialDefaultFrame","setWebWorker","flag","getWebWorker","setLocationHref","getLocationHref","createTag","extendPrototype","sources","destination","sourcePrototype","attr","getDescriptor","createProxyFunction","ProxyFunction","audioControllerFactory","AudioController","audioFactory","this","audios","_volume","_isMuted","addAudio","audio","resume","setRate","rateValue","createAudio","assetPath","Howl","src","isPlaying","seek","playing","rate","setVolume","setAudioFactory","_updateVolume","mute","unmute","getVolume","volume","createTypedArray","createRegularArray","Uint8ClampedArray","Float32Array","Int16Array","createSizedArray","subframeEnabled","expressionsPlugin","expressionsInterfaces","idPrefix$1","isSafari","navigator","userAgent","_shouldRoundValues","bmPow","pow","bmSqrt","sqrt","bmFloor","floor","bmMax","max","bmMin","min","BMMath","ProjectInterface$1","propertyNames","random","abs","absArr","defaultCurveSegments","degToRads","PI","roundCorner","roundValues","bmRnd","round","styleDiv","display","transformOrigin","webkitTransformOrigin","backfaceVisibility","webkitBackfaceVisibility","transformStyle","webkitTransformStyle","mozTransformStyle","BMEnterFrameEvent","currentTime","totalTime","frameMultiplier","BMCompleteEvent","BMCompleteLoopEvent","totalLoops","currentLoop","BMSegmentStartEvent","totalFrames","BMDestroyEvent","BMRenderFrameErrorEvent","nativeError","BMConfigErrorEvent","BMAnimationConfigErrorEvent","createElementID","_count","HSVtoRGB","h","v","r","g","b","f","p","q","t","RGBtoHSV","d","addSaturationToRGB","color","offset","hsv","addBrightnessToRGB","addHueToRGB","rgbToHex","hex","colorMap","setSubframeEnabled","getSubframeEnabled","setExpressionsPlugin","getExpressionsPlugin","setExpressionInterfaces","getExpressionInterfaces","setDefaultCurveSegments","getDefaultCurveSegments","setIdPrefix","getIdPrefix","createNS","createElementNS","dataManager","workerFn","workerInstance","_counterId","processes","workerProxy","onmessage","postMessage","path","data","_workerSelf","setupWorker","fn","Worker","Blob","blob","url","URL","createObjectURL","createWorker","completeLayers","layers","comps","layerData","j","jLen","k","kLen","completed","hasMask","maskProps","masksProperties","pt","convertPathsToAbsoluteValues","ty","findCompLayers","refId","completeShapes","shapes","completeText","id","comp","findComp","__used","JSON","stringify","ks","it","checkVersion","minimum","animVersionString","animVersion","checkText","minimumVersion","updateTextLayer","textLayer","documentData","iterateLayers","assets","checkChars","chars","charData","ip","op","st","sr","a","sk","sa","checkPathProperties","pathData","checkColors","iterateShapes","c","checkShapes","completeClosingShapes","closed","cl","moduleOb","__complete","completeChars","dataFunctionManager","assetLoader","formatResponse","xhr","contentTypeHeader","getResponseHeader","responseType","response","responseText","load","fullPath","callback","errorCallback","XMLHttpRequest","err","onreadystatechange","readyState","status","open","join","send","completeData","payload","animation","event","onError","createProcess","processId","location","origin","pathname","loadData","completeAnimation","anim","ImagePreloader","proxyImage","canvas","ctx","getContext","fillStyle","fillRect","imageLoaded","loadedAssets","totalImages","loadedFootagesCount","totalFootages","imagesLoadedCb","footageLoaded","getAssetsPath","assetData","originalPath","imagePath","u","testImageLoaded","img","intervalId","setInterval","getBBox","_imageLoaded","clearInterval","createFootageData","ob","footageData","_footageLoaded","ImagePreloaderFactory","images","loadAssets","cb","_createImageData","setAssetsPath","setPath","loadedImages","loadedFootages","getAsset","createImgData","crossOrigin","createImageData","setAttributeNS","_elementHelper","append","appendChild","setCacheType","elementHelper","BaseEvent","triggerEvent","eventName","args","_cbs","callbacks","splice","markerParser","parsePayloadLines","line","lines","keysCount","Error","_markers","markers","_marker","markerData","time","tm","duration","dr","cm","_","__","ProjectInterface","registerComposition","compositions","_thisProjectFunction","nm","prepareFrame","xt","currentFrame","compInterface","renderers","registerRenderer","getRenderer","getRegisteredRenderer","AnimationItem","isLoaded","frameRate","frameMult","playSpeed","playDirection","playCount","animationID","timeCompleted","segmentPos","isSubframeEnabled","_idle","_completedLoop","projectInterface","imagePreloader","audioController","configAnimation","onSetupError","onSegmentComplete","drawnFrameEvent","setParams","params","animType","RendererClass","globalData","defs","setProjectInterface","parseInt","autoloadSegments","setupAnimation","lastIndexOf","fileName","trigger","setData","wrapperAttributes","getNamedItem","prerender","includeLayers","newLayers","fonts","fontManager","addChars","addFonts","initExpressions","loadNextSegment","segment","shift","segmentPath","loadSegments","imagesLoaded","checkLoaded","preloadImages","animData","fr","searchExtraCompositions","updaFrameModifier","waitForFontsLoaded","triggerConfigError","setTimeout","rendererType","initItems","gotoFrame","resize","_width","_height","updateContainerSize","renderFrame","resetFrame","triggerRenderFrameError","togglePause","setCurrentRawFrameValue","getMarkerData","markerName","marker","numValue","frameModifier","advanceTime","nextValue","_isComplete","checkSegments","adjustSegment","init","end","pendingFrame","setLoop","isLooping","getPath","getAssetData","hide","show","updateDocumentData","index","getElementByPath","animationManager","registeredAnimations","initTime","playingAnimationsNum","_stopped","_isFrozen","removeElement","animItem","subtractPlayingCount","registerAnimation","elem","addPlayingCount","activate","nowTime","elapsedTime","requestAnimationFrame","first","searchAnimations","standalone","animElements","getElementsByClassName","lenAnims","setAttribute","body","getElementsByTagName","innerText","div","freeze","unfreeze","getRegisteredAnimations","animations","BezierFactory","str","beziers","bezEasing","BezierEasing","kSplineTableSize","kSampleStepSize","float32ArraySupported","A","aA1","aA2","B","C","calcBezier","aT","getSlope","points","_p","_mSampleValues","_precomputed","get","mX1","mY1","mX2","mY2","_precompute","_getTForX","_calcSampleValues","aX","mSampleValues","intervalStart","currentSample","lastSample","guessForT","initialSlope","aGuessT","currentSlope","newtonRaphsonIterate","aA","aB","currentX","currentT","binarySubdivide","pooling","double","poolFactory","initialLength","_create","_release","_length","_maxLength","pool","newElement","release","bezierLengthPool","addedLength","percents","lengths","segmentsLengthPool","totalLength","bezFunction","math","pointOnLine2D","x1","y1","x2","y2","x3","y3","det1","getBezierLength","pt1","pt2","pt3","pt4","ptCoord","perc","ptDistance","curveSegments","point","lastPoint","lengthData","BezierData","segmentLength","PointData","partial","partialLength","buildBezierData","storedData","bezierName","bezierData","getDistancePerc","initPos","lengthPos","lPerc","dir","bezierSegmentPoints","getSegmentsLength","shapeData","segmentsLength","pathV","pathO","pathI","getNewSegment","startPerc","endPerc","t0","t1","u0","u1","u0u0u0","t0u0u0_3","t0t0u0_3","t0t0t0","u0u0u1","t0u0u1_3","t0t0u1_3","t0t0t1","u0u1u1","t0u1u1_3","t0t1u1_3","t0t1t1","u1u1u1","t1u1u1_3","t1t1u1_3","t1t1t1","getPointInSegment","percent","pointOnLine3D","z1","z2","z3","diffDist","dist1","dist2","dist3","bez","initFrame","mathAbs","interpolateValue","frameNum","caching","newValue","offsetTime","propType","pv","keyData","nextKeyData","keyframeMetadata","fnc","iterationIndex","lastIndex","keyframes","keyframesMetadata","endValue","nextKeyTime","keyTime","to","ti","ind","__fnct","getBezierEasing","segmentPerc","distanceInLine","lastFrame","_lastKeyframeIndex","_lastAddedLength","_lastPoint","outX","outY","inX","inY","keyValue","sh","quaternionToEuler","slerp","createQuaternion","omega","cosom","sinom","scale0","scale1","out","ax","ay","az","aw","bx","by","bz","bw","acos","sin","quat","qx","qy","qz","qw","heading","atan2","attitude","asin","bank","values","c1","cos","c2","c3","s1","s2","s3","getValueAtCurrentTime","renderedFrame","endTime","_caching","renderResult","setVValue","multipliedValue","mult","_mdf","processEffectsSequence","frameId","effectsSequence","lock","_isFirstFrame","finalValue","kf","addEffect","effectFunction","addDynamicProperty","ValueProperty","vel","getValue","MultiDimensionalProperty","KeyframedValueProperty","KeyframedMultidimensionalProperty","arrLen","PropertyFactory","getProp","sid","slotManager","DynamicPropertyContainer","dynamicProperties","_isAnimated","iterateDynamicProperties","initDynamicPropertyContainer","pointPool","ShapePath","setPathData","setLength","doubleArrayLength","setXYAt","setTripleAt","vX","vY","oX","oY","iX","iY","reverse","newPath","vertices","outPoints","inPoints","cnt","shapePool","factory","shapePath","clone","shape","cloned","ShapeCollection","addShape","releaseShapes","shapeCollectionPool","newShapeCollection","shapeCollection","ShapePropertyFactory","interpolateShape","previousValue","keyPropS","keyPropE","isHold","vertexValue","interpolateShapeCurrentTime","resetShape","paths","localShapeCollection","shape1","shape2","shapesEqual","ShapeProperty","reset","KeyframedShapeProperty","EllShapeProperty","cPoint","EllShapePropertyFactory","convertEllToPath","p0","p1","s0","_cw","_v","StarShapeProperty","StarShapePropertyFactory","sy","ir","is","convertToPath","convertStarToPath","convertPolygonToPath","or","os","rad","roundness","perimSegment","numPts","angle","longFlag","longRad","shortRad","longRound","shortRound","longPerimSegment","shortPerimSegment","currentAng","ox","oy","RectShapeProperty","RectShapePropertyFactory","convertRectToPath","v0","v1","Matrix","_cos","_sin","_tan","tan","_rnd","rotate","mCos","mSin","_t","rotateX","rotateY","rotateZ","shear","sx","skew","skewFromAxis","scale","sz","setTransform","l","m","translate","tx","tz","a2","b2","d2","e2","f2","g2","h2","i2","j2","k2","l2","m2","n2","o2","p2","_identityCalculated","a1","b1","d1","e1","f1","g1","h1","i1","j1","k1","l1","m1","n1","o1","multiply","matrix","matrixProps","isIdentity","_identity","equals","matr","cloneFromProps","applyToPoint","z","applyToX","applyToY","applyToZ","getInverseMatrix","determinant","inverseMatrix","inversePoint","applyToPointArray","inversePoints","pts","retPts","applyToTriplePoints","p4","p5","p12","p13","applyToPointStringified","toCSS","cssValue","roundMatrixProperty","to2dCSS","lottie","setLocation","href","setSubframeRendering","setPrefix","setQuality","inBrowser","installPlugin","plugin","getFactory","checkReady","readyStateCheckInterval","getQueryVariable","variable","vars","queryString","decodeURIComponent","useWebWorker","setIDPrefix","__getFactory","version","scripts","myScript","exports","define","bodymovin","ShapeModifiers","modifiers","registerModifier","getModifier","ShapeModifier","TrimModifier","PuckerAndBloatModifier","initModifierProperties","addShapeToModifier","setAsAnimated","processKeys","sValue","eValue","pathsData","calculateShapeEdges","shapeLength","totalModifierLength","segmentOb","shapeSegments","shapeS","shapeE","releasePathsData","processShapes","shapePaths","_s","totalShapeLength","edges","newShapesData","addShapes","lastShape","pop","addPaths","newPaths","addSegment","newShape","addSegmentFromArray","shapeSegment","currentLengthData","segmentCount","amount","processPath","centerPoint","pathLength","clonedPath","TransformPropertyFactory","defaultVector","TransformProperty","pre","appliedTransformations","px","py","pz","rx","ry","rz","_isDirty","applyToMatrix","mat","forceRender","precalculateMatrix","autoOriented","v2","getValueAtTime","autoOrient","_addDynamicProperty","getTransformProperty","RepeaterModifier","RoundCornersModifier","floatEqual","floatZero","lerp","lerpPoint","quadRoots","singleRoot","delta","polynomialCoefficients","p3","singlePoint","PolynomialBezier","linearize","pointEqual","coeffx","coeffy","extrema","intersectData","t2","box","boundingBox","cx","cy","splitData","boxIntersect","intersectsImpl","depth","tolerance","intersections","maxRecursion","d1s","d2s","crossProduct","lineIntersection","start1","end1","start2","end2","v3","v4","polarOffset","pointDistance","hypot","ZigZagModifier","setPoint","outputBezier","amplitude","outAmplitude","inAmplitude","angO","angI","getPerpendicularVector","vector","rot","getProjectingAngle","cur","prevIndex","nextIndex","pVector","zigZagCorner","frequency","pointType","prevPoint","nextPoint","prevDist","nextDist","zigZagSegment","dist","normalAngle","linearOffset","offsetSegment","p1a","p1b","p2b","p2a","joinLines","seg1","seg2","lineJoin","miterLimit","angleOut","tangentAngle","angleIn","center","radius","intersection","getIntersection","intersect","pruneSegmentIntersection","outa","outb","pruneIntersections","offsetSegmentSplit","right","mid","flex","inflectionPoints","OffsetPathModifier","getFontProperties","fontData","styles","fStyle","fWeight","weight","tr","so","eo","pMatrix","rMatrix","sMatrix","tMatrix","applyTransforms","inv","scaleX","scaleY","elemsData","_currentCopies","_elements","_groups","unshift","resetElements","elements","_processed","cloneElements","newElements","changeGroupRender","renderFlag","_render","items","itemsTransform","cont","hasReloaded","copies","group","ix","reloadShapes","elems","transformData","offsetModulo","roundOffset","pProps","rProps","sProps","iteration","mProps","rd","currentV","currentI","currentO","closerV","distance","newPosPerc","derivative","denom","tcusp","square","root","p10","p11","p20","p21","bounds","bottom","other","shapeSegmentInverted","pointsType","count","ml","lj","inputBezier","multiSegments","lastSeg","multiSegment","FontManager","emptyChar","w","combinedCharacters","BLACK_FLAG_CODE_POINT","REGIONAL_CHARACTER_A_CODE_POINT","REGIONAL_CHARACTER_Z_CODE_POINT","surrogateModifiers","setUpNode","font","family","parentNode","fontFamily","node","fontSize","fontVariant","fontStyle","fontWeight","letterSpacing","offsetWidth","familyArray","enabledFamilies","trimFontOptions","parent","createHelper","def","helper","engine","fontProps","tHelper","fFamily","textContent","fClass","tCanvasHelper","OffscreenCanvas","measureText","text","getComputedTextLength","getCodePoint","codePoint","charCodeAt","second","isRegionalCode","Font","typekitLoaded","_warned","Date","now","setIsLoadedBinded","setIsLoaded","checkLoadedFontsBinded","checkLoadedFonts","isModifier","firstCharCode","secondCharCode","sum","isZeroWidthJoiner","charCode","isFlagEmoji","isCombinedCharacter","char","isRegionalFlag","isVariationSelector","fontPrototype","found","ch","list","cache","fontArr","_pendingFonts","loadedSelector","shouldLoadFont","loaded","monoCase","sansCase","fPath","fOrigin","querySelectorAll","rel","sc","getCharData","warn","getFontByName","fName","fontName","doubleSize","singleSize","loadedCount","removeChild","SlotManager","slotFactory","RenderableElement","slots","assign","initRenderable","isInRange","hidden","isTransparent","renderableComponents","addRenderableComponent","component","removeRenderableComponent","prepareRenderableFrame","num","checkLayerLimits","checkTransparency","finalTransform","mProp","renderConfig","hideOnTransparent","renderRenderable","sourceRectAtTime","getLayerSize","textData","getBlendMode","blendModeEnums","SliderEffect","AngleEffect","ColorEffect","PointEffect","LayerIndexEffect","MaskIndexEffect","CheckboxEffect","NoValueEffect","EffectsManager","effects","ef","effectElements","effectItem","GroupEffect","BaseElement","FrameElement","FootageElement","imageLoader","initBaseData","AudioElement","_isPlaying","_canPlay","_currentTime","_volumeMultiplier","_previousVolume","_placeholder","lv","au","BaseRenderer","eff","checkMasks","LayerExpressionInterface","EffectsExpressionInterface","ShapeExpressionInterface","TextExpressionInterface","CompExpressionInterface","layerInterface","maskManager","registerMaskInterface","effectsInterface","createEffectsInterface","registerEffectsInterface","shapeInterface","shapesData","itemsData","content","textInterface","setBlendMode","blendModeValue","bm","baseElement","layerElement","layerId","effectsManager","getType","prepareProperties","isVisible","_isParent","getBaseElement","FootageInterface","getFootageData","timeRemapped","totalVolume","volumeValue","checkLayers","buildItem","checkPendingElements","createItem","layer","createImage","createComp","createSolid","createNull","createShape","createText","createCamera","createFootage","buildAllItems","pInterface","progressiveLoad","buildElementParenting","parentName","hierarchy","setAsParent","setHierarchy","addPendingElement","pendingElements","getElementById","pathValue","setupGlobalData","fontsContainer","compSize","effectTypes","TRANSFORM_EFFECT","TransformElement","MaskElement","maskElement","viewData","solidPath","rect","expansor","feMorph","properties","currentMasks","maskType","maskRef","getShapeProp","lastPath","filterID","expan","lastOperator","filterId","lastRadius","createLayerSolidPath","invRect","drawPath","maskedElement","initTransform","_matMdf","_localMatMdf","_opMdf","localMat","localOpacity","ao","renderTransform","finalMat","renderLocalTransform","localTransforms","lmat","localOp","opacity","searchEffectTransforms","renderableEffectsManager","transformEffects","getEffects","globalToLocal","transforms","ptNew","mHelper","getMaskProperty","isFirstFrame","getMaskelement","pathNodes","pathString","pathShapeValue","filtersFactory","createFilter","filId","skipCoordinates","fil","createAlphaToLuminanceFilter","feColorMatrix","featureSupport","svgLumaHidden","offscreenCanvas","registeredEffects$1","idPrefix","SVGEffects","filterManager","filters","Effect","effect","countsAsEffect","registerEffect$1","SVGBaseElement","HierarchyElement","RenderableDOMElement","IImageElement","initElement","sourceRect","ProcessedElement","IShapeElement","initRendererElement","createContainerElements","matteElement","transformedElement","_sizeChanged","layerElementParent","td","matteMasks","gg","tt","ln","hd","cp","clipId","cpGroup","renderElement","destroyBaseElement","createRenderableComponents","getMatte","matteType","useElement","masker","maskGroup","maskGrouper","feCTr","feFunc","alphaRect","setMatte","initHierarchy","checkParenting","createContent","renderInnerContent","innerElem","pr","imagePreserveAspectRatio","addShapeToModifiers","shapeModifiers","isShapeInAnimatedModifiers","isAnimatedWithShape","renderModifiers","searchProcessedElement","processedElements","addProcessedElement","lineCapEnum","lineJoinEnum","SVGShapeData","transformers","level","caches","lStr","lvl","SVGStyleData","pElem","msElem","DashProperty","dataProps","dashStr","dashArray","dashoffset","SVGStrokeStyleData","styleOb","SVGFillStyleData","SVGNoStyleData","GradientProperty","cLength","_cmdf","_omdf","_collapsable","checkCollapsable","_hasOpacity","SVGGradientFillStyleData","initGradientData","SVGGradientStrokeStyleData","ShapeGroupData","prevViewData","gr","SVGTransformData","comparePoints","stops","setGradientData","setGradientOpacity","pathElement","gradientId","gfill","gf","cst","opacityId","opFill","lc","of","ms","ost","buildShapeString","_o","_i","shapeString","SVGElementsRenderer","_identityMatrix","_matrixHelper","renderContentTransform","styleData","itemData","renderNoop","renderPath","pathStringTransformed","redraw","iterations","lLen","renderFill","styleElem","renderGradientStroke","renderGradient","renderStroke","hasOpacity","attr1","attr2","cValues","oValues","ang","createRenderFunction","SVGShapeElement","stylesList","animatedContents","LetterProps","sw","fc","TextProperty","_frameId","keysIndex","canResize","minimumFontSize","currentData","ascent","boxWidth","defaultBoxWidth","justifyOffset","lh","lineWidths","ls","ps","fillColorAnim","strokeColorAnim","strokeWidthAnim","yOffset","finalSize","finalText","finalLineHeight","copyData","searchProperty","completeTextData","initSecondaryElement","identityMatrix","buildExpressionInterface","searchShapes","filterUniqueShapes","tempShapes","areAnimated","setShapesAsAnimated","createStyleElement","elementData","addToAnimatedContents","createGroupElement","createTransformElement","transformProperty","createShapeElement","ownTransformers","setElementStyles","render","currentTransform","modifier","processedPos","ownStyles","ownModifiers","renderShape","animatedContent","update","updated","setCurrentData","searchKeyframes","getKeyframeValue","_finalValue","currentValue","currentIndex","textKeys","buildFinalText","charactersArray","shouldCombine","shouldCombineNext","currentChars","newLineFlag","letters","anchorGrouping","currentSize","currentPos","currentLine","lineWidth","maxLineWidth","trackingOffset","currentHeight","boxHeight","lastSpaceIndex","currentChar","uncollapsedSpaces","an","add","anIndexes","animatorJustifyOffset","extra","animatorData","letterData","based","animators","indexes","fh","fs","fb","rn","totalChars","newInd","currentInd","newData","dData","recalculate","canResizeFont","_canResize","setMinimumFontSize","_fontValue","TextSelectorProp","TextSelectorPropFactory","_currentTextLength","finalS","finalE","xe","ne","sm","getMult","textProperty","easer","tot","smoothness","threshold","newCharsFlag","divisor","getTextSelectorProp","TextAnimatorDataProperty","animatorProps","defaultData","textAnimatorAnimatables","TextAnimatorProperty","renderType","_hasMaskedPath","_textData","_renderType","_elem","_animatorsData","_pathData","_moreOptions","alignment","renderedLetters","lettersChangedFlag","ITextElement","searchProperties","getMeasures","xPos","yPos","pathInfo","currentLength","currentPoint","pointInd","segmentInd","tanAngle","matrixHelper","renderedLettersCount","tLength","pi","letterValue","yOff","firstLine","offf","xPathPos","yPathPos","elemOpacity","letterSw","letterSc","letterFc","letterO","initPathPos","initSegmentInd","initPointInd","letterM","letterP","defaultPropsArray","animatorFirstCharOffset","justifyOffsetMult","isNewLine","animatorOffset","atan","textAnimator","createPathShape","shapeStr","_fontSize","applyTextPropertiesToMatrix","lineNumber","buildColor","colorData","emptyProp","validateText","buildNewText","emptyShapeData","SVGTextLottieElement","textSpans","ISolidElement","NullElement","SVGRendererBase","ICompElement","SVGCompElement","supports3d","SVGRenderer","svgElement","ariaLabel","titleElement","description","descElement","descId","preserveAspectRatio","contentVisibility","viewBoxOnly","viewBoxSize","focusable","filterSize","runExpressions","destroyed","ShapeTransformManager","sequences","sequenceList","transform_key_count","singleShape","textContainer","buildTextContents","textArray","textContents","currentTextContent","String","fromCharCode","buildShapeData","shapeItem","tSpan","usesGlyphs","cachedSpansLength","span","childSpan","glyph","glyphElement","_debug","tElement","justify","textBox","bbox","renderedLetter","textSpan","findIndexByInd","appendElementInPos","elementIndex","tp","matteMask","nextElement","insertBefore","setElements","getElements","destroyElements","addTransformSequence","sequence","processSequence","processSequences","getNewKey","lumaLoader","lumaBuffer","lumaBufferCtx","svg","loadLuma","_svg","createLumaSvgFilter","createCanvas","loadLumaCanvas","getLumaCanvas","registeredEffects","CVEffects","registerEffect","CVMaskElement","hasMasks","CVBaseElement","canvasContext","beginPath","moveTo","lineTo","bezierCurveTo","save","clip","operationsMap","CVShapeData","transformsManager","styledShapes","styledShape","trNodes","CVShapeElement","CVTextElement","stroke","fill","currentRender","sWidth","fValue","CVImageElement","CVSolidElement","CanvasRendererBase","CanvasContext","strokeStyle","lineCap","CVContextData","stack","cArrPos","cTr","nativeContext","transformMat","currentOpacity","currentFillStyle","appliedFillStyle","currentStrokeStyle","appliedStrokeStyle","currentLineWidth","appliedLineWidth","currentLineCap","appliedLineCap","currentLineJoin","appliedLineJoin","appliedMiterLimit","currentMiterLimit","CVCompElement","CanvasRenderer","clearCanvas","context","dpr","devicePixelRatio","currentGlobalAlpha","contextData","ctxTransform","ctxOpacity","ctxFillStyle","ctxStrokeStyle","ctxLineWidth","ctxLineCap","ctxLineJoin","ctxMiterLimit","ctxFill","ctxFillRect","ctxStroke","HBaseElement","HSolidElement","HShapeElement","shapesContainer","currentBBox","HTextElement","textPaths","isMasked","HCameraElement","pe","_prevMat","HImageElement","HybridRendererBase","threeDElements","camera","HCompElement","HybridRenderer","createElements","buffers","bufferCanvas","bufferCanvas2","_isProxy","transformCanvas","blendMode","globalCompositeOperation","hideElement","showElement","clearRect","prepareLayer","bufferCtx","drawImage","getTransform","exitLayer","buffer","forceRealStack","restore","transformHelper","dashResetter","preTransforms","co","wi","da","do","addTransformToStyleList","removeTransformFromStyleList","closeStyles","shouldRender","ownTransforms","_shouldRender","renderShapeTransform","parentTransform","groupTransform","drawLayer","nodes","currentStyle","coOp","grd","setLineDash","lineDashOffset","closePath","isMain","renderGradientFill","renderStyledShape","shapeNodes","groupTransformMat","createLinearGradient","createRadialGradient","addColorStop","hasFill","hasStroke","commands","pathArr","commandsCounter","lastFill","lastStroke","lastStrokeW","widthCrop","heightCrop","imgW","imgH","imgRel","canvasRel","par","globalAlpha","rule","actionFlag","containerStyle","mozTransformOrigin","setContext","isDashed","elementWidth","elementHeight","elementRel","animationRel","offsetHeight","fillType","duplicate","newLength","forceRestore","currentContext","prevStack","saveOnNativeFlag","currentStack","newStack","setOpacity","trProps","checkBlendMode","tg","transformedElementStyle","matrixValue","webkitTransform","addEffects","backgroundColor","_renderShapeFrame","shapeCont","getTransformedPoint","calculateShapeBoundingBox","item","vPoint","oPoint","nextIPoint","nextVPoint","checkBounds","getBoundsOfCurve","shapeBoundingBox","xMax","yMax","tempBoundingBox","b2ac","calculateF","calculateBoundingBox","expandStrokeBoundingBox","widthProperty","kfw","currentBoxContains","changed","shapeStyle","shapeTransform","compW","compH","innerElemStyle","textColor","strokeWidth","lineHeight","tParent","tCont","tContStyle","tContTranslation","tStyle","tSpanTranslation","svgStyle","translation","textPath","margin","svgTransform","setup","perspectiveStyle","perspectiveElem","perspective","webkitPerspective","mTransf","diffVector","mag","lookDir","lookLengthOnXZ","mRotationX","mRotationY","hasMatrixChanged","matValue","Image","imageElem","newDOMElement","ddd","addTo3dContainer","nextDOMElement","nextLayer","getThreeDContainerByPos","startPos","endPos","createThreeDContainer","threeDContainerData","build3dContainers","lastThreeDContainerData","currentContainer","resizerElem","overflow","cWidth","cHeight","floatingContainer","_createBaseContainerElements","_thisLayerFunction","pixelAspect","frameDuration","displayStartTime","numLayers","seedRandom","nodecrypto","global","rngname","startdenom","significance","ARC4","keylen","me","S","copy","flatten","result","typ","mixkey","seed","smear","stringseed","tostring","options","shortseed","entropy","randomBytes","Uint8Array","crypto","msCrypto","getRandomValues","browser","plugins","screen","autoseed","arc4","prng","int32","quick","pass","is_math_call","state","initialize$2","SHAPE","ExpressionManager","fetch","_lottieGlobal","$bm_isInstanceOfArray","isNumerable","tOfV","$bm_neg","tOfA","lenA","retArr","easeInBez","easeOutBez","easeInOutBez","tOfB","lenB","sub","mul","mod","$bm_sum","$bm_sub","$bm_mul","$bm_div","$bm_mod","clamp","mm","radiansToDegrees","radians_to_degrees","degreesToRadians","degrees_to_radians","helperLengthArray","arr1","normalize","vec","rgbToHsl","hue2rgb","hslToRgb","linear","tMin","tMax","value1","value2","_tMin","rnd","createPath","inTangents","outTangents","inVertexPoint","outVertexPoint","arrPlaceholder","initiateExpression","property","noOp","_value","needsVelocity","_needsRandom","elemType","$bm_transform","thisProperty","valueAtTime","inPoint","outPoint","loopIn","loop_in","loopOut","loop_out","smooth","toWorld","fromWorld","fromComp","toComp","fromCompToSurface","anchorPoint","thisLayer","thisComp","velocityAtTime","scoped_bm_rt","expression_function","eval","numKeys","active","wiggle","freq","amp","iWiggle","lenWiggle","addedAmps","periods","loopInDuration","loopOutDuration","getVelocityAtTime","velocity","textIndex","textTotal","selectorValue","lookAt","elem1","elem2","fVec","pitch","easeOut","val1","val2","applyEase","easeIn","ease","iKey","lenKey","nearestKey","obKey","framesToTime","fps","timeToFrames","seedrandom","randSeed","substring","posterizeTime","framesPerSecond","hasParent","executeExpression","frameExpressionId","__preventDeadCodeRemoval","Expressions","stackCount","registers","pushExpression","popExpression","releaseInstances","registerExpressionProperty","expression","MaskManagerInterface","MaskInterface","_mask","_data","_masksInterfaces","ExpressionPropertyInterface","defaultUnidimensionalValue","defaultMultidimensionalValue","completeProperty","expressionValue","valueProp","speedAtTime","getSpeedAtTime","propertyGroup","defaultGetter","UnidimensionalPropertyInterface","arrValue","MultidimensionalPropertyInterface","TransformExpressionInterface","_thisFunction","xRotation","yRotation","xPosition","yPosition","zPosition","_px","_py","_pz","_transformFactory","getMatrix","toWorldMat","toWorldVec","applyPoint","fromWorldVec","invertPoint","sampleImage","transformInterface","anchorPointDescriptor","anchor_point","startTime","_name","propertyGroupFactory","interfaceFunction","parentPropertyGroup","PropertyInterface","propertyName","createGroupInterface","groupInterface","mn","_propertyGroup","createValueInterface","numProperties","np","enabled","en","expressionProperty","setGroupProperty","effectsData","ShapePathInterface","view","propertyIndex","iterateElements","groupInterfaceFactory","fillInterfaceFactory","strokeInterfaceFactory","trimInterfaceFactory","ellipseInterfaceFactory","starInterfaceFactory","rectInterfaceFactory","roundedInterfaceFactory","repeaterInterfaceFactory","gradientFillInterfaceFactory","defaultInterfaceFactory","interfaces","transformInterfaceFactory","cix","contentsInterfaceFactory","startPoint","endPoint","_dashPropertyGroup","dashOb","addPropertyToDashOb","dash","start","skewAxis","outerRadius","outerRoundness","innerRoundness","innerRadius","_interfaceFunction","_sourceText","sourceText","stringValue","fillColor","dataInterfaceFactory","outlineInterface","currentPropertyName","currentProperty","propertyNameIndex","outlineInterfaceFactory","dataInterface","footage","getInterface","expressionHelpers","searchExpressions","_cachingAtTime","getStaticValueAtTime","addPropertyDecorator","durationFlag","cycleDuration","firstKeyFrame","ret","lastKeyFrame","initV","endV","repeats","lastValue","nextLastValue","firstValue","nextFirstValue","samples","sampleValue","sampleFrequency","getTransformValueAtTime","_transformCachingAtTime","anchor","rotationZ","rotationY","rotationX","orientation","positionX","positionY","positionZ","getTransformStaticValueAtTime","propertyGetProp","ShapePropertyConstructorFunction","getConstructorFunction","KeyframedShapePropertyConstructorFunction","getKeyframedConstructorFunction","ShapeExpressions","isClosed","pointOnPath","_segmentsLength","accumulatedLength","initIndex","endIndex","vectorOnPath","vectorType","xLength","yLength","magnitude","tangentOnPath","normalOnPath","shapeValue","lastTime","propertyGetShapeProp","trims","initialize$1","addDecorator","getExpressionValue","calculateExpression","isKeyframed","hasExpressions","initialize","SVGComposableEffect","createMergeNode","resultId","ins","feMergeNode","feMerge","linearFilterValue","SVGTintFilter","linearFilter","matrixFilter","SVGFillFilter","SVGStrokeEffect","initialized","SVGTritoneFilter","feComponentTransfer","feFuncR","feFuncG","feFuncB","SVGProLevelsFilter","createFeFunc","feFuncA","feFuncRComposed","feFuncGComposed","feFuncBComposed","SVGDropShadowEffect","globalFilterSize","feGaussianBlur","feOffset","feFlood","feComposite","colorBlack","colorWhite","groupPath","elemChildren","childNodes","removeAttribute","pathMasker","dasharrayValue","getTotalLength","lineLength","units","color1","color2","color3","tableR","tableG","tableB","getTableValue","inputBlack","inputWhite","gamma","outputBlack","outputWhite","colorValue","table","outputDelta","inputDelta","col","_svgMatteSymbols","SVGMatte3Effect","filterElem","SVGGaussianBlurEffect","TransformEffect","SVGTransformEffect","CVTransformEffect","findSymbol","replaceInParent","symbolId","nextChild","useElem","setElementAsMask","sigma","dimensions","sigmaX","sigmaY","edgeMode","forceFrame","isUniformScale","scaleHeight","scaleWidth","CardImg","bsPrefix","variant","_ref$as","as","Component","useBootstrapPrefix","_jsx","_objectSpread","classNames","CardHeader","contextValue","useMemo","cardHeaderBsPrefix","CardHeaderContext","Provider","DivStyledAsH5","divWithClassName","DivStyledAsH6","CardBody","createWithBsPrefix","CardTitle","CardSubtitle","CardLink","CardText","CardFooter","CardImgOverlay","Card","bg","_ref$body","Img","Title","Subtitle","Body","Link","Text","Header","Footer","ImgOverlay","_len","funcs","_key","_len2","_key2","MARGINS","getDefaultDimensionValue","dimension","margins","css","collapseStyles","_collapseStyles","EXITED","EXITING","ENTERING","ENTERED","onEnter","onEntering","onEntered","onExit","onExiting","_ref$dimension","_ref$in","in","inProp","_ref$timeout","timeout","_ref$mountOnEnter","mountOnEnter","_ref$unmountOnExit","unmountOnExit","_ref$appear","appear","_ref$getDimensionValu","getDimensionValue","computedDimension","handleEnter","createChainedFunction","handleEntering","scroll","handleEntered","handleExit","triggerBrowserReflow","handleExiting","TransitionWrapper","addEndListener","transitionEndListener","role","childRef","innerProps","Container","_ref$fluid","fluid","suffix","InputGroupText","InputGroup","hasValidation","InputGroupContext","Radio","FormCheckInput","Checkbox","Row","decoratedBsPrefix","breakpoints","useBootstrapBreakpoints","minBreakpoint","useBootstrapMinBreakpoint","sizePrefix","brkPoint","cols","propValue","infix"],"sourceRoot":""}